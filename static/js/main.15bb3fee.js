/*! For license information please see main.15bb3fee.js.LICENSE.txt */
!function(){var e={8696:function(e){function t(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=function(){return[]},t.resolve=t,t.id=8696,e.exports=t},5345:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,A="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function b(e){if(m=!1,x(e),!v)if(null!==r(u))v=!0,L(_);else{var t=r(c);null!==t&&P(b,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,y(M),M=-1),p=!0;var a=f;try{for(x(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!T());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(u)&&i(u),x(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&P(b,h.startTime-n),l=!1}return l}finally{d=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,E=!1,S=null,M=-1,C=5,k=-1;function T(){return!(t.unstable_now()-k<C)}function I(){if(null!==S){var e=t.unstable_now();k=e;var n=!0;try{n=S(!0,e)}finally{n?w():(E=!1,S=null)}}else E=!1}if("function"===typeof A)w=function(){A(I)};else if("undefined"!==typeof MessageChannel){var B=new MessageChannel,R=B.port2;B.port1.onmessage=I,w=function(){R.postMessage(null)}}else w=function(){g(I,0)};function L(e){S=e,E||(E=!0,w())}function P(e,n){M=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,L(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(m?(y(M),M=-1):m=!0,P(b,a-o))):(e.sortIndex=s,n(u,e),v||p||(v=!0,L(_))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},4545:function(e,t,n){"use strict";e.exports=n(5345)},7823:function(e){"use strict";e.exports=function(e,t){if(null===e||"undefined"===typeof e)throw new TypeError("expected first argument to be an object.");if("undefined"===typeof t||"undefined"===typeof Symbol)return e;if("function"!==typeof Object.getOwnPropertySymbols)return e;for(var n=Object.prototype.propertyIsEnumerable,r=Object(e),i=arguments.length,a=0;++a<i;)for(var o=Object(arguments[a]),s=Object.getOwnPropertySymbols(o),l=0;l<s.length;l++){var u=s[l];n.call(o,u)&&(r[u]=o[u])}return r}},9998:function(e,t){"use strict";t.Z=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",i=(e.type||"").toLowerCase(),a=i.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?a===t.replace(/\/.*$/,""):i===t}))}return!0}},7494:function(e){function t(e,t,n){var r,i,a,o,s;function l(){var u=Date.now()-o;u<t&&u>=0?r=setTimeout(l,t-u):(r=null,n||(s=e.apply(a,i),a=i=null))}null==t&&(t=100);var u=function(){a=this,i=arguments,o=Date.now();var u=n&&!r;return r||(r=setTimeout(l,t)),u&&(s=e.apply(a,i),a=i=null),s};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(s=e.apply(a,i),a=i=null,clearTimeout(r),r=null)},u}t.debounce=t,e.exports=t},5456:function(e,t,n){"use strict";var r=n(9583);function i(e,t){for(var n in t)a(t,n)&&(e[n]=t[n])}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e){r(e)||(e={});for(var t=arguments.length,n=1;n<t;n++){var a=arguments[n];r(a)&&i(e,a)}return e}},9583:function(e){"use strict";e.exports=function(e){return"undefined"!==typeof e&&null!==e&&("object"===typeof e||"function"===typeof e)}},8845:function(e){"use strict";e.exports=function(e,t,n){for(var r in e)if(!1===t.call(n,e[r],r,e))break}},9944:function(e){function t(e){return e?Array.isArray(e)?e.join("."):e:""}e.exports=function(e,n,r,i,a){if(null===(o=e)||"object"!==typeof o&&"function"!==typeof o||!n)return e;var o;if(n=t(n),r&&(n+="."+t(r)),i&&(n+="."+t(i)),a&&(n+="."+t(a)),n in e)return e[n];for(var s=n.split("."),l=s.length,u=-1;e&&++u<l;){for(var c=s[u];"\\"===c[c.length-1];)c=c.slice(0,-1)+"."+s[++u];e=e[c]}return e}},4097:function(e,t,n){var r;!function(i,a,o,s){"use strict";var l,u=["","webkit","Moz","MS","ms","o"],c=a.createElement("div"),h="function",d=Math.round,f=Math.abs,p=Date.now;function v(e,t,n){return setTimeout(_(e,n),t)}function m(e,t,n){return!!Array.isArray(e)&&(g(e,n[t],n),!0)}function g(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==s)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function y(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=i.console&&(i.console.warn||i.console.log);return a&&a.call(i.console,r,n),e.apply(this,arguments)}}l="function"!==typeof Object.assign?function(e){if(e===s||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}:Object.assign;var A=y((function(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;)(!n||n&&e[r[i]]===s)&&(e[r[i]]=t[r[i]]),i++;return e}),"extend","Use `assign`."),x=y((function(e,t){return A(e,t,!0)}),"merge","Use `assign`.");function b(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&l(r,n)}function _(e,t){return function(){return e.apply(t,arguments)}}function w(e,t){return typeof e==h?e.apply(t&&t[0]||s,t):e}function E(e,t){return e===s?t:e}function S(e,t,n){g(T(t),(function(t){e.addEventListener(t,n,!1)}))}function M(e,t,n){g(T(t),(function(t){e.removeEventListener(t,n,!1)}))}function C(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function k(e,t){return e.indexOf(t)>-1}function T(e){return e.trim().split(/\s+/g)}function I(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function B(e){return Array.prototype.slice.call(e,0)}function R(e,t,n){for(var r=[],i=[],a=0;a<e.length;){var o=t?e[a][t]:e[a];I(i,o)<0&&r.push(e[a]),i[a]=o,a++}return n&&(r=t?r.sort((function(e,n){return e[t]>n[t]})):r.sort()),r}function L(e,t){for(var n,r,i=t[0].toUpperCase()+t.slice(1),a=0;a<u.length;){if((r=(n=u[a])?n+i:t)in e)return r;a++}return s}var P=1;function D(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var O="ontouchstart"in i,F=L(i,"PointerEvent")!==s,N=O&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),U="touch",Z="mouse",z=25,H=1,G=4,Q=8,V=1,j=2,W=4,q=8,J=16,X=j|W,Y=q|J,K=X|Y,$=["x","y"],ee=["clientX","clientY"];function te(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){w(e.options.enable,[e])&&n.handler(t)},this.init()}function ne(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,a=t&H&&r-i===0,o=t&(G|Q)&&r-i===0;n.isFirst=!!a,n.isFinal=!!o,a&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=re(t));i>1&&!n.firstMultiple?n.firstMultiple=re(t):1===i&&(n.firstMultiple=!1);var a=n.firstInput,o=n.firstMultiple,l=o?o.center:a.center,u=t.center=ie(r);t.timeStamp=p(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=le(l,u),t.distance=se(l,u),function(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},a=e.prevInput||{};t.eventType!==H&&a.eventType!==G||(i=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y});t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}(n,t),t.offsetDirection=oe(t.deltaX,t.deltaY);var c=ae(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=f(c.x)>f(c.y)?c.x:c.y,t.scale=o?(h=o.pointers,d=r,se(d[0],d[1],ee)/se(h[0],h[1],ee)):1,t.rotation=o?function(e,t){return le(t[1],t[0],ee)+le(e[1],e[0],ee)}(o.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,r,i,a,o=e.lastInterval||t,l=t.timeStamp-o.timeStamp;if(t.eventType!=Q&&(l>z||o.velocity===s)){var u=t.deltaX-o.deltaX,c=t.deltaY-o.deltaY,h=ae(l,u,c);r=h.x,i=h.y,n=f(h.x)>f(h.y)?h.x:h.y,a=oe(u,c),e.lastInterval=t}else n=o.velocity,r=o.velocityX,i=o.velocityY,a=o.direction;t.velocity=n,t.velocityX=r,t.velocityY=i,t.direction=a}(n,t);var h,d;var v=e.element;C(t.srcEvent.target,v)&&(v=t.srcEvent.target);t.target=v}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function re(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:d(e.pointers[n].clientX),clientY:d(e.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:t,center:ie(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ie(e){var t=e.length;if(1===t)return{x:d(e[0].clientX),y:d(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:d(n/t),y:d(r/t)}}function ae(e,t,n){return{x:t/e||0,y:n/e||0}}function oe(e,t){return e===t?V:f(e)>=f(t)?e<0?j:W:t<0?q:J}function se(e,t,n){n||(n=$);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function le(e,t,n){n||(n=$);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}te.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&M(this.element,this.evEl,this.domHandler),this.evTarget&&M(this.target,this.evTarget,this.domHandler),this.evWin&&M(D(this.element),this.evWin,this.domHandler)}};var ue={mousedown:H,mousemove:2,mouseup:G},ce="mousedown",he="mousemove mouseup";function de(){this.evEl=ce,this.evWin=he,this.pressed=!1,te.apply(this,arguments)}b(de,te,{handler:function(e){var t=ue[e.type];t&H&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=G),this.pressed&&(t&G&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Z,srcEvent:e}))}});var fe={pointerdown:H,pointermove:2,pointerup:G,pointercancel:Q,pointerout:Q},pe={2:U,3:"pen",4:Z,5:"kinect"},ve="pointerdown",me="pointermove pointerup pointercancel";function ge(){this.evEl=ve,this.evWin=me,te.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(ve="MSPointerDown",me="MSPointerMove MSPointerUp MSPointerCancel"),b(ge,te,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=fe[r],a=pe[e.pointerType]||e.pointerType,o=a==U,s=I(t,e.pointerId,"pointerId");i&H&&(0===e.button||o)?s<0&&(t.push(e),s=t.length-1):i&(G|Q)&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),n&&t.splice(s,1))}});var ye={touchstart:H,touchmove:2,touchend:G,touchcancel:Q};function Ae(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,te.apply(this,arguments)}function xe(e,t){var n=B(e.touches),r=B(e.changedTouches);return t&(G|Q)&&(n=R(n.concat(r),"identifier",!0)),[n,r]}b(Ae,te,{handler:function(e){var t=ye[e.type];if(t===H&&(this.started=!0),this.started){var n=xe.call(this,e,t);t&(G|Q)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:U,srcEvent:e})}}});var be={touchstart:H,touchmove:2,touchend:G,touchcancel:Q},_e="touchstart touchmove touchend touchcancel";function we(){this.evTarget=_e,this.targetIds={},te.apply(this,arguments)}function Ee(e,t){var n=B(e.touches),r=this.targetIds;if(t&(2|H)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,a,o=B(e.changedTouches),s=[],l=this.target;if(a=n.filter((function(e){return C(e.target,l)})),t===H)for(i=0;i<a.length;)r[a[i].identifier]=!0,i++;for(i=0;i<o.length;)r[o[i].identifier]&&s.push(o[i]),t&(G|Q)&&delete r[o[i].identifier],i++;return s.length?[R(a.concat(s),"identifier",!0),s]:void 0}b(we,te,{handler:function(e){var t=be[e.type],n=Ee.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:U,srcEvent:e})}});var Se=2500;function Me(){te.apply(this,arguments);var e=_(this.handler,this);this.touch=new we(this.manager,e),this.mouse=new de(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Ce(e,t){e&H?(this.primaryTouch=t.changedPointers[0].identifier,ke.call(this,t)):e&(G|Q)&&ke.call(this,t)}function ke(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)}),Se)}}function Te(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],a=Math.abs(t-i.x),o=Math.abs(n-i.y);if(a<=25&&o<=25)return!0}return!1}b(Me,te,{handler:function(e,t,n){var r=n.pointerType==U,i=n.pointerType==Z;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)Ce.call(this,t,n);else if(i&&Te.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ie=L(c.style,"touchAction"),Be=Ie!==s,Re="compute",Le="auto",Pe="manipulation",De="none",Oe="pan-x",Fe="pan-y",Ne=function(){if(!Be)return!1;var e={},t=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){e[n]=!t||i.CSS.supports("touch-action",n)})),e}();function Ue(e,t){this.manager=e,this.set(t)}Ue.prototype={set:function(e){e==Re&&(e=this.compute()),Be&&this.manager.element.style&&Ne[e]&&(this.manager.element.style[Ie]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return g(this.manager.recognizers,(function(t){w(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(k(e,De))return De;var t=k(e,Oe),n=k(e,Fe);if(t&&n)return De;if(t||n)return t?Oe:Fe;if(k(e,Pe))return Pe;return Le}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=k(r,De)&&!Ne[De],a=k(r,Fe)&&!Ne[Fe],o=k(r,Oe)&&!Ne[Oe];if(i){var s=1===e.pointers.length,l=e.distance<2,u=e.deltaTime<250;if(s&&l&&u)return}if(!o||!a)return i||a&&n&X||o&&n&Y?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Ze=1,ze=32;function He(e){this.options=l({},this.defaults,e||{}),this.id=P++,this.manager=null,this.options.enable=E(this.options.enable,!0),this.state=Ze,this.simultaneous={},this.requireFail=[]}function Ge(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function Qe(e){return e==J?"down":e==q?"up":e==j?"left":e==W?"right":""}function Ve(e,t){var n=t.manager;return n?n.get(e):e}function je(){He.apply(this,arguments)}function We(){je.apply(this,arguments),this.pX=null,this.pY=null}function qe(){je.apply(this,arguments)}function Je(){He.apply(this,arguments),this._timer=null,this._input=null}function Xe(){je.apply(this,arguments)}function Ye(){je.apply(this,arguments)}function Ke(){He.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function $e(e,t){return(t=t||{}).recognizers=E(t.recognizers,$e.defaults.preset),new et(e,t)}He.prototype={defaults:{},set:function(e){return l(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(m(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Ve(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return m(e,"dropRecognizeWith",this)||(e=Ve(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(m(e,"requireFailure",this))return this;var t=this.requireFail;return-1===I(t,e=Ve(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(m(e,"dropRequireFailure",this))return this;e=Ve(e,this);var t=I(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<8&&r(t.options.event+Ge(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=8&&r(t.options.event+Ge(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=ze},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(ze|Ze)))return!1;e++}return!0},recognize:function(e){var t=l({},e);if(!w(this.options.enable,[this,t]))return this.reset(),void(this.state=ze);56&this.state&&(this.state=Ze),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},b(je,He,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,i=this.attrTest(e);return r&&(n&Q||!i)?16|t:r||i?n&G?8|t:2&t?4|t:2:ze}}),b(We,je,{defaults:{event:"pan",threshold:10,pointers:1,direction:K},getTouchAction:function(){var e=this.options.direction,t=[];return e&X&&t.push(Fe),e&Y&&t.push(Oe),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,a=e.deltaX,o=e.deltaY;return i&t.direction||(t.direction&X?(i=0===a?V:a<0?j:W,n=a!=this.pX,r=Math.abs(e.deltaX)):(i=0===o?V:o<0?q:J,n=o!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return je.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Qe(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),b(qe,je,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[De]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),b(Je,He,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Le]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(G|Q)&&!i)this.reset();else if(e.eventType&H)this.reset(),this._timer=v((function(){this.state=8,this.tryEmit()}),t.time,this);else if(e.eventType&G)return 8;return ze},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&e.eventType&G?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),b(Xe,je,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[De]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),b(Ye,je,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:X|Y,pointers:1},getTouchAction:function(){return We.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(X|Y)?t=e.overallVelocity:n&X?t=e.overallVelocityX:n&Y&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&f(t)>this.options.velocity&&e.eventType&G},emit:function(e){var t=Qe(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),b(Ke,He,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Pe]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&H&&0===this.count)return this.failTimeout();if(r&&i&&n){if(e.eventType!=G)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||se(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&a?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=v((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return ze},failTimeout:function(){return this._timer=v((function(){this.state=ze}),this.options.interval,this),ze},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),$e.VERSION="2.0.7",$e.defaults={domEvents:!1,touchAction:Re,enable:!0,inputTarget:null,inputClass:null,preset:[[Xe,{enable:!1}],[qe,{enable:!1},["rotate"]],[Ye,{direction:X}],[We,{direction:X},["swipe"]],[Ke],[Ke,{event:"doubletap",taps:2},["tap"]],[Je]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function et(e,t){var n;this.options=l({},$e.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(F?ge:N?we:O?Me:de))(n,ne),this.touchAction=new Ue(this,this.options.touchAction),tt(this,!0),g(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function tt(e,t){var n,r=e.element;r.style&&(g(e.options.cssProps,(function(i,a){n=L(r.style,a),t?(e.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}et.prototype={set:function(e){return l(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var a=0;a<r.length;)n=r[a],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&14&n.state&&(i=t.curRecognizer=n),a++}},get:function(e){if(e instanceof He)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(m(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(m(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=I(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==s&&t!==s){var n=this.handlers;return g(T(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(e!==s){var n=this.handlers;return g(T(e),(function(e){t?n[e]&&n[e].splice(I(n[e],t),1):delete n[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=a.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&tt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l($e,{INPUT_START:H,INPUT_MOVE:2,INPUT_END:G,INPUT_CANCEL:Q,STATE_POSSIBLE:Ze,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:ze,DIRECTION_NONE:V,DIRECTION_LEFT:j,DIRECTION_RIGHT:W,DIRECTION_UP:q,DIRECTION_DOWN:J,DIRECTION_HORIZONTAL:X,DIRECTION_VERTICAL:Y,DIRECTION_ALL:K,Manager:et,Input:te,TouchAction:Ue,TouchInput:we,MouseInput:de,PointerEventInput:ge,TouchMouseInput:Me,SingleTouchInput:Ae,Recognizer:He,AttrRecognizer:je,Tap:Ke,Pan:We,Swipe:Ye,Pinch:qe,Rotate:Xe,Press:Je,on:S,off:M,each:g,merge:x,extend:A,assign:l,inherit:b,bindFn:_,prefixed:L}),("undefined"!==typeof i?i:"undefined"!==typeof self?self:{}).Hammer=$e,(r=function(){return $e}.call(t,n,t,e))===s||(e.exports=r)}(window,document)},9105:function(e,t,n){"use strict";var r=n(4807);e.exports=function(e){return r(e)||"function"===typeof e||Array.isArray(e)}},4807:function(e,t,n){"use strict";var r=n(8863);function i(e){return!0===r(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,n;return!1!==i(e)&&("function"===typeof(t=e.constructor)&&(!1!==i(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},8863:function(e){"use strict";e.exports=function(e){return null!=e&&"object"===typeof e&&!1===Array.isArray(e)}},8089:function(e,t,n){"use strict";var r=n(9105),i=n(7046),a=n(9944),o=n(7809);e.exports=function(e,t,n){if(!r(e))throw new TypeError("expected an object");if("string"!==typeof t||null==n)return i.apply(null,arguments);if("string"===typeof n)return o(e,t,n),e;var s=a(e,t);return r(n)&&r(s)&&(n=i({},s,n)),o(e,t,n),e}},7046:function(e,t,n){"use strict";var r=n(9105),i=n(8845);function a(e,t){for(var n=arguments.length,r=0;++r<n;){var a=arguments[r];s(a)&&i(a,o,e)}return e}function o(e,t){if(function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}(t)){var n=this[t];s(e)&&s(n)?a(n,e):this[t]=e}}function s(e){return r(e)&&!Array.isArray(e)}e.exports=a},888:function(e,t,n){"use strict";var r=n(9047);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function A(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),_=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),C=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var O,F=Object.assign;function N(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var U=!1;function Z(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?N(e):""}function z(e){switch(e.tag){case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return e=Z(e.type,!1);case 11:return e=Z(e.type.render,!1);case 1:return e=Z(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case _:return"Portal";case S:return"Profiler";case E:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case M:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case B:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function j(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&A(e,"checked",t,!1)}function K(e,t){Y(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ae(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ae=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,_e=null,we=null;function Ee(e){if(e=vi(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=gi(t),be(e.stateNode,e.type,t))}}function Se(e){_e?we?we.push(e):we=[e]:_e=e}function Me(){if(_e){var e=_e,t=we;if(we=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function ke(){}var Te=!1;function Ie(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ce(e,t,n)}finally{Te=!1,(null!==_e||null!==we)&&(ke(),Me())}}function Be(e,t){var n=e.stateNode;if(null===n)return null;var r=gi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(c)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(tc){Re=!1}function Pe(e,t,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var De=!1,Oe=null,Fe=!1,Ne=null,Ue={onError:function(e){De=!0,Oe=e}};function Ze(e,t,n,r,i,a,o,s,l){De=!1,Oe=null,Pe.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(ze(e)!==e)throw Error(a(188))}function Qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var je=i.unstable_scheduleCallback,We=i.unstable_cancelCallback,qe=i.unstable_shouldYield,Je=i.unstable_requestPaint,Xe=i.unstable_now,Ye=i.unstable_getCurrentPriorityLevel,Ke=i.unstable_ImmediatePriority,$e=i.unstable_UserBlockingPriority,et=i.unstable_NormalPriority,tt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,rt=null,it=null;var at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ot(e)/st|0)|0},ot=Math.log,st=Math.LN2;var lt=64,ut=4194304;function ct(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ct(s):0!==(a&=o)&&(r=ct(a))}else 0!==(o=n&~i)?r=ct(o):0!==a&&(r=ct(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function At(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,bt,_t,wt,Et,St=!1,Mt=[],Ct=null,kt=null,Tt=null,It=new Map,Bt=new Map,Rt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":kt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bt.delete(t.pointerId)}}function Dt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=vi(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ot(e){var t=pi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vi(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ae=r,n.target.dispatchEvent(r),Ae=null,t.shift()}return!0}function Nt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){St=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==kt&&Ft(kt)&&(kt=null),null!==Tt&&Ft(Tt)&&(Tt=null),It.forEach(Nt),Bt.forEach(Nt)}function Zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return Zt(t,e)}if(0<Mt.length){Zt(Mt[0],e);for(var n=1;n<Mt.length;n++){var r=Mt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Zt(Ct,e),null!==kt&&Zt(kt,e),null!==Tt&&Zt(Tt,e),It.forEach(t),Bt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Rt.shift()}var Ht=x.ReactCurrentBatchConfig,Gt=!0;function Qt(e,t,n,r){var i=yt,a=Ht.transition;Ht.transition=null;try{yt=1,jt(e,t,n,r)}finally{yt=i,Ht.transition=a}}function Vt(e,t,n,r){var i=yt,a=Ht.transition;Ht.transition=null;try{yt=4,jt(e,t,n,r)}finally{yt=i,Ht.transition=a}}function jt(e,t,n,r){if(Gt){var i=qt(e,t,n,r);if(null===i)Zr(e,t,r,Wt,n),Pt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Dt(Ct,e,t,n,r,i),!0;case"dragenter":return kt=Dt(kt,e,t,n,r,i),!0;case"mouseover":return Tt=Dt(Tt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return It.set(a,Dt(It.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Bt.set(a,Dt(Bt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var a=vi(i);if(null!==a&&xt(a),null===(a=qt(e,t,n,r))&&Zr(e,t,r,Wt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Zr(e,t,r,null,n)}}var Wt=null;function qt(e,t,n,r){if(Wt=null,null!==(e=pi(e=xe(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Ke:return 1;case $e:return 4;case et:case tt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Xt=null,Yt=null,Kt=null;function $t(){if(Kt)return Kt;var e,t,n=Yt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Kt=i.slice(e,1<t?1-t:void 0)}function en(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tn(){return!0}function nn(){return!1}function rn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tn:nn,this.isPropagationStopped=nn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),t}var an,on,sn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=rn(ln),cn=F({},ln,{view:0,detail:0}),hn=rn(cn),dn=F({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(an=e.screenX-sn.screenX,on=e.screenY-sn.screenY):on=an=0,sn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=rn(dn),pn=rn(F({},dn,{dataTransfer:0})),vn=rn(F({},cn,{relatedTarget:0})),mn=rn(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=rn(F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),yn=rn(F({},ln,{data:0})),An={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=bn[e])&&!!t[e]}function wn(){return _n}var En=rn(F({},cn,{key:function(e){if(e.key){var t=An[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=en(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wn,charCode:function(e){return"keypress"===e.type?en(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?en(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Sn=rn(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=rn(F({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wn})),Cn=rn(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=rn(F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Tn=[9,13,27,32],In=c&&"CompositionEvent"in window,Bn=null;c&&"documentMode"in document&&(Bn=document.documentMode);var Rn=c&&"TextEvent"in window&&!Bn,Ln=c&&(!In||Bn&&8<Bn&&11>=Bn),Pn=String.fromCharCode(32),Dn=!1;function On(e,t){switch(e){case"keyup":return-1!==Tn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Nn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function zn(e,t,n,r){Se(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){Pr(e,0)}function Vn(e){if(W(mi(e)))return e}function jn(e,t){if("change"===e)return t}var Wn=!1;if(c){var qn;if(c){var Jn="oninput"in document;if(!Jn){var Xn=document.createElement("div");Xn.setAttribute("oninput","return;"),Jn="function"===typeof Xn.oninput}qn=Jn}else qn=!1;Wn=qn&&(!document.documentMode||9<document.documentMode)}function Yn(){Hn&&(Hn.detachEvent("onpropertychange",Kn),Gn=Hn=null)}function Kn(e){if("value"===e.propertyName&&Vn(Gn)){var t=[];zn(t,Gn,e,xe(e)),Ie(Qn,t)}}function $n(e,t,n){"focusin"===e?(Yn(),Gn=n,(Hn=t).attachEvent("onpropertychange",Kn)):"focusout"===e&&Yn()}function er(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vn(Gn)}function tr(e,t){if("click"===e)return Vn(t)}function nr(e,t){if("input"===e||"change"===e)return Vn(t)}var rr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ir(e,t){if(rr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!rr(e[i],t[i]))return!1}return!0}function ar(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function or(e,t){var n,r=ar(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ar(r)}}function sr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?sr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function lr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function ur(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function cr(e){var t=lr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&sr(n.ownerDocument.documentElement,n)){if(null!==r&&ur(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=or(n,a);var o=or(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hr=c&&"documentMode"in document&&11>=document.documentMode,dr=null,fr=null,pr=null,vr=!1;function mr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==dr||dr!==q(r)||("selectionStart"in(r=dr)&&ur(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},pr&&ir(pr,r)||(pr=r,0<(r=Hr(fr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=dr)))}function gr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var yr={animationend:gr("Animation","AnimationEnd"),animationiteration:gr("Animation","AnimationIteration"),animationstart:gr("Animation","AnimationStart"),transitionend:gr("Transition","TransitionEnd")},Ar={},xr={};function br(e){if(Ar[e])return Ar[e];if(!yr[e])return e;var t,n=yr[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return Ar[e]=n[t];return e}c&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);var _r=br("animationend"),wr=br("animationiteration"),Er=br("animationstart"),Sr=br("transitionend"),Mr=new Map,Cr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){Mr.set(e,t),l(t,[e])}for(var Tr=0;Tr<Cr.length;Tr++){var Ir=Cr[Tr];kr(Ir.toLowerCase(),"on"+(Ir[0].toUpperCase()+Ir.slice(1)))}kr(_r,"onAnimationEnd"),kr(wr,"onAnimationIteration"),kr(Er,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(Sr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Br));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,u){if(Ze.apply(this,arguments),De){if(!De)throw Error(a(198));var c=Oe;De=!1,Oe=null,Fe||(Fe=!0,Ne=c)}}(r,t,void 0,e),e.currentTarget=null}function Pr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Lr(i,s,u),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Lr(i,s,u),a=l}}}if(Fe)throw e=Ne,Fe=!1,Ne=null,e}function Dr(e,t){var n=t[hi];void 0===n&&(n=t[hi]=new Set);var r=e+"__bubble";n.has(r)||(Ur(t,e,2,!1),n.add(r))}function Or(e,t,n){var r=0;t&&(r|=4),Ur(n,e,r,t)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function Nr(e){if(!e[Fr]){e[Fr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Rr.has(t)||Or(t,!1,e),Or(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fr]||(t[Fr]=!0,Or("selectionchange",!1,t))}}function Ur(e,t,n,r){switch(Jt(t)){case 1:var i=Qt;break;case 4:i=Vt;break;default:i=jt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Zr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=pi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}Ie((function(){var r=a,i=xe(n),o=[];e:{var s=Mr.get(e);if(void 0!==s){var l=un,u=e;switch(e){case"keypress":if(0===en(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":u="focus",l=vn;break;case"focusout":u="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Mn;break;case _r:case wr:case Er:l=mn;break;case Sr:l=Cn;break;case"scroll":l=hn;break;case"wheel":l=kn;break;case"copy":case"cut":case"paste":l=gn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Sn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var v=(f=p).stateNode;if(5===f.tag&&null!==v&&(f=v,null!==d&&(null!=(v=Be(p,d))&&c.push(zr(p,v,f)))),h)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Ae||!(u=n.relatedTarget||n.fromElement)||!pi(u)&&!u[ci])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?pi(u):null)&&(u!==(h=ze(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=fn,v="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Sn,v="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?s:mi(l),f=null==u?s:mi(u),(s=new c(v,p+"leave",l,n,i)).target=h,s.relatedTarget=f,v=null,pi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,v=c),h=v,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Gr(f))p++;for(f=0,v=d;v;v=Gr(v))f++;for(;0<p-f;)c=Gr(c),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Gr(c),d=Gr(d)}c=null}else c=null;null!==l&&Qr(o,s,l,c,!1),null!==u&&null!==h&&Qr(o,h,u,c,!0)}if("select"===(l=(s=r?mi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=jn;else if(Zn(s))if(Wn)m=nr;else{m=er;var g=$n}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=tr);switch(m&&(m=m(e,r))?zn(o,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?mi(r):window,e){case"focusin":(Zn(g)||"true"===g.contentEditable)&&(dr=g,fr=r,pr=null);break;case"focusout":pr=fr=dr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,mr(o,n,i);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":mr(o,n,i)}var y;if(In)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Nn?On(e,n)&&(A="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(A="onCompositionStart");A&&(Ln&&"ko"!==n.locale&&(Nn||"onCompositionStart"!==A?"onCompositionEnd"===A&&Nn&&(y=$t()):(Yt="value"in(Xt=i)?Xt.value:Xt.textContent,Nn=!0)),0<(g=Hr(r,A)).length&&(A=new yn(A,e,null,n,i),o.push({event:A,listeners:g}),y?A.data=y:null!==(y=Fn(n))&&(A.data=y))),(y=Rn?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:(Dn=!0,Pn);case"textInput":return(e=t.data)===Pn&&Dn?null:e;default:return null}}(e,n):function(e,t){if(Nn)return"compositionend"===e||!In&&On(e,t)?(e=$t(),Kt=Yt=Xt=null,Nn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new yn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Pr(o,t)}))}function zr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Be(e,n))&&r.unshift(zr(e,a,i)),null!=(a=Be(e,t))&&r.push(zr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Be(n,a))&&o.unshift(zr(n,l,s)):i||null!=(l=Be(n,a))&&o.push(zr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Vr=/\r\n?/g,jr=/\u0000|\uFFFD/g;function Wr(e){return("string"===typeof e?e:""+e).replace(Vr,"\n").replace(jr,"")}function qr(e,t,n){if(t=Wr(t),Wr(e)!==t&&n)throw Error(a(425))}function Jr(){}var Xr=null,Yr=null;function Kr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var $r="function"===typeof setTimeout?setTimeout:void 0,ei="function"===typeof clearTimeout?clearTimeout:void 0,ti="function"===typeof Promise?Promise:void 0,ni="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ti?function(e){return ti.resolve(null).then(e).catch(ri)}:$r;function ri(e){setTimeout((function(){throw e}))}function ii(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ai(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function oi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var si=Math.random().toString(36).slice(2),li="__reactFiber$"+si,ui="__reactProps$"+si,ci="__reactContainer$"+si,hi="__reactEvents$"+si,di="__reactListeners$"+si,fi="__reactHandles$"+si;function pi(e){var t=e[li];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ci]||n[li]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=oi(e);null!==e;){if(n=e[li])return n;e=oi(e)}return t}n=(e=n).parentNode}return null}function vi(e){return!(e=e[li]||e[ci])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function mi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function gi(e){return e[ui]||null}var yi=[],Ai=-1;function xi(e){return{current:e}}function bi(e){0>Ai||(e.current=yi[Ai],yi[Ai]=null,Ai--)}function _i(e,t){Ai++,yi[Ai]=e.current,e.current=t}var wi={},Ei=xi(wi),Si=xi(!1),Mi=wi;function Ci(e,t){var n=e.type.contextTypes;if(!n)return wi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ki(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ti(){bi(Si),bi(Ei)}function Ii(e,t,n){if(Ei.current!==wi)throw Error(a(168));_i(Ei,t),_i(Si,n)}function Bi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,G(e)||"Unknown",i));return F({},n,r)}function Ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wi,Mi=Ei.current,_i(Ei,e),_i(Si,Si.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Bi(e,t,Mi),r.__reactInternalMemoizedMergedChildContext=e,bi(Si),bi(Ei),_i(Ei,e)):bi(Si),_i(Si,n)}var Pi=null,Di=!1,Oi=!1;function Fi(e){null===Pi?Pi=[e]:Pi.push(e)}function Ni(){if(!Oi&&null!==Pi){Oi=!0;var e=0,t=yt;try{var n=Pi;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Pi=null,Di=!1}catch(i){throw null!==Pi&&(Pi=Pi.slice(e+1)),je(Ke,Ni),i}finally{yt=t,Oi=!1}}return null}var Ui=[],Zi=0,zi=null,Hi=0,Gi=[],Qi=0,Vi=null,ji=1,Wi="";function qi(e,t){Ui[Zi++]=Hi,Ui[Zi++]=zi,zi=e,Hi=t}function Ji(e,t,n){Gi[Qi++]=ji,Gi[Qi++]=Wi,Gi[Qi++]=Vi,Vi=e;var r=ji;e=Wi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var a=32-at(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ji=1<<32-at(t)+i|n<<i|r,Wi=a+e}else ji=1<<a|n<<i|r,Wi=e}function Xi(e){null!==e.return&&(qi(e,1),Ji(e,1,0))}function Yi(e){for(;e===zi;)zi=Ui[--Zi],Ui[Zi]=null,Hi=Ui[--Zi],Ui[Zi]=null;for(;e===Vi;)Vi=Gi[--Qi],Gi[Qi]=null,Wi=Gi[--Qi],Gi[Qi]=null,ji=Gi[--Qi],Gi[Qi]=null}var Ki=null,$i=null,ea=!1,ta=null;function na(e,t){var n=ku(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ra(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ki=e,$i=ai(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ki=e,$i=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Vi?{id:ji,overflow:Wi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=ku(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ki=e,$i=null,!0);default:return!1}}function ia(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function aa(e){if(ea){var t=$i;if(t){var n=t;if(!ra(e,t)){if(ia(e))throw Error(a(418));t=ai(n.nextSibling);var r=Ki;t&&ra(e,t)?na(r,n):(e.flags=-4097&e.flags|2,ea=!1,Ki=e)}}else{if(ia(e))throw Error(a(418));e.flags=-4097&e.flags|2,ea=!1,Ki=e}}}function oa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ki=e}function sa(e){if(e!==Ki)return!1;if(!ea)return oa(e),ea=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Kr(e.type,e.memoizedProps)),t&&(t=$i)){if(ia(e))throw la(),Error(a(418));for(;t;)na(e,t),t=ai(t.nextSibling)}if(oa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){$i=ai(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}$i=null}}else $i=Ki?ai(e.stateNode.nextSibling):null;return!0}function la(){for(var e=$i;e;)e=ai(e.nextSibling)}function ua(){$i=Ki=null,ea=!1}function ca(e){null===ta?ta=[e]:ta.push(e)}var ha=x.ReactCurrentBatchConfig;function da(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var fa=xi(null),pa=null,va=null,ma=null;function ga(){ma=va=pa=null}function ya(e){var t=fa.current;bi(fa),e._currentValue=t}function Aa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xa(e,t){pa=e,ma=va=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ms=!0),e.firstContext=null)}function ba(e){var t=e._currentValue;if(ma!==e)if(e={context:e,memoizedValue:t,next:null},null===va){if(null===pa)throw Error(a(308));va=e,pa.dependencies={lanes:0,firstContext:e}}else va=va.next=e;return t}var _a=null;function wa(e){null===_a?_a=[e]:_a.push(e)}function Ea(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,wa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Sa(e,r)}function Sa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ma=!1;function Ca(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ka(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ta(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ia(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Sl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Sa(e,n)}return null===(i=r.interleaved)?(t.next=t,wa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Sa(e,n)}function Ba(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ra(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function La(e,t,n,r){var i=e.updateQueue;Ma=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var h=i.baseState;for(o=0,c=u=l=null,s=a;;){var d=s.lane,f=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(d=t,f=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=v.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ma=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ll|=o,e.lanes=o,e.memoizedState=h}}function Pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Da=(new r.Component).refs;function Oa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Fa={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Yl(),i=Kl(e),a=Ta(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ia(e,a,i))&&($l(t,e,i,r),Ba(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Yl(),i=Kl(e),a=Ta(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ia(e,a,i))&&($l(t,e,i,r),Ba(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Yl(),r=Kl(e),i=Ta(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ia(e,i,r))&&($l(t,e,r,n),Ba(t,e,r))}};function Na(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ir(n,r)||!ir(i,a))}function Ua(e,t,n){var r=!1,i=wi,a=t.contextType;return"object"===typeof a&&null!==a?a=ba(a):(i=ki(t)?Mi:Ei.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ci(e,i):wi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Fa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Za(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Fa.enqueueReplaceState(t,t.state,null)}function za(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Da,Ca(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=ba(a):(a=ki(t)?Mi:Ei.current,i.context=Ci(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Oa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Fa.enqueueReplaceState(i,i.state,null),La(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Da&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Va(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Iu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Pu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===w?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Bu(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Du(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Ru(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Pu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Bu(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case _:return(t=Du(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Ru(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?u(e,t,n,r):null;case _:return n.key===i?c(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:h(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return h(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,s,l){for(var u=null,c=null,h=a,v=a=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var g=f(i,h,s[v],l);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,v),null===c?u=g:c.sibling=g,c=g,h=m}if(v===s.length)return n(i,h),ea&&qi(i,v),u;if(null===h){for(;v<s.length;v++)null!==(h=d(i,s[v],l))&&(a=o(h,a,v),null===c?u=h:c.sibling=h,c=h);return ea&&qi(i,v),u}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=o(m,a,v),null===c?u=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),ea&&qi(i,v),u}function m(i,s,l,u){var c=D(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var h=c=null,v=s,m=s=0,g=null,y=l.next();null!==v&&!y.done;m++,y=l.next()){v.index>m?(g=v,v=null):g=v.sibling;var A=f(i,v,y.value,u);if(null===A){null===v&&(v=g);break}e&&v&&null===A.alternate&&t(i,v),s=o(A,s,m),null===h?c=A:h.sibling=A,h=A,v=g}if(y.done)return n(i,v),ea&&qi(i,m),c;if(null===v){for(;!y.done;m++,y=l.next())null!==(y=d(i,y.value,u))&&(s=o(y,s,m),null===h?c=y:h.sibling=y,h=y);return ea&&qi(i,m),c}for(v=r(i,v);!y.done;m++,y=l.next())null!==(y=p(v,i,m,y.value,u))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===h?c=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(i,e)})),ea&&qi(i,m),c}return function e(r,a,o,l){if("object"===typeof o&&null!==o&&o.type===w&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var u=o.key,c=a;null!==c;){if(c.key===u){if((u=o.type)===w){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&Qa(u)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Ha(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===w?((a=Ru(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=Bu(o.type,o.key,o.props,null,r.mode,l)).ref=Ha(r,a,o),l.return=r,r=l)}return s(r);case _:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Du(o,r.mode,l)).return=r,r=a}return s(r);case R:return e(r,a,(c=o._init)(o._payload),l)}if(te(o))return v(r,a,o,l);if(D(o))return m(r,a,o,l);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Pu(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var ja=Va(!0),Wa=Va(!1),qa={},Ja=xi(qa),Xa=xi(qa),Ya=xi(qa);function Ka(e){if(e===qa)throw Error(a(174));return e}function $a(e,t){switch(_i(Ya,t),_i(Xa,e),_i(Ja,qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}bi(Ja),_i(Ja,t)}function eo(){bi(Ja),bi(Xa),bi(Ya)}function to(e){Ka(Ya.current);var t=Ka(Ja.current),n=le(t,e.type);t!==n&&(_i(Xa,e),_i(Ja,n))}function no(e){Xa.current===e&&(bi(Ja),bi(Xa))}var ro=xi(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var so=x.ReactCurrentDispatcher,lo=x.ReactCurrentBatchConfig,uo=0,co=null,ho=null,fo=null,po=!1,vo=!1,mo=0,go=0;function yo(){throw Error(a(321))}function Ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rr(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,i,o){if(uo=o,co=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=null===e||null===e.memoizedState?rs:is,e=n(r,i),vo){o=0;do{if(vo=!1,mo=0,25<=o)throw Error(a(301));o+=1,fo=ho=null,t.updateQueue=null,so.current=as,e=n(r,i)}while(vo)}if(so.current=ns,t=null!==ho&&null!==ho.next,uo=0,fo=ho=co=null,po=!1,t)throw Error(a(300));return e}function bo(){var e=0!==mo;return mo=0,e}function _o(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===fo?co.memoizedState=fo=e:fo=fo.next=e,fo}function wo(){if(null===ho){var e=co.alternate;e=null!==e?e.memoizedState:null}else e=ho.next;var t=null===fo?co.memoizedState:fo.next;if(null!==t)fo=t,ho=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ho=e).memoizedState,baseState:ho.baseState,baseQueue:ho.baseQueue,queue:ho.queue,next:null},null===fo?co.memoizedState=fo=e:fo=fo.next=e}return fo}function Eo(e,t){return"function"===typeof t?t(e):t}function So(e){var t=wo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ho,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var h=c.lane;if((uo&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,s=r):u=u.next=d,co.lanes|=h,Ll|=h}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,rr(r,t.memoizedState)||(ms=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,co.lanes|=o,Ll|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Mo(e){var t=wo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);rr(o,t.memoizedState)||(ms=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Co(){}function ko(e,t){var n=co,r=wo(),i=t(),o=!rr(r.memoizedState,i);if(o&&(r.memoizedState=i,ms=!0),r=r.queue,Zo(Bo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==fo&&1&fo.memoizedState.tag){if(n.flags|=2048,Do(9,Io.bind(null,n,r,i,t),void 0,null),null===Ml)throw Error(a(349));0!==(30&uo)||To(n,t,i)}return i}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=co.updateQueue)?(t={lastEffect:null,stores:null},co.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Io(e,t,n,r){t.value=n,t.getSnapshot=r,Ro(t)&&Lo(e)}function Bo(e,t,n){return n((function(){Ro(t)&&Lo(e)}))}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rr(e,n)}catch(r){return!0}}function Lo(e){var t=Sa(e,1);null!==t&&$l(t,e,1,-1)}function Po(e){var t=_o();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:e},t.queue=e,e=e.dispatch=Ko.bind(null,co,e),[t.memoizedState,e]}function Do(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=co.updateQueue)?(t={lastEffect:null,stores:null},co.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oo(){return wo().memoizedState}function Fo(e,t,n,r){var i=_o();co.flags|=e,i.memoizedState=Do(1|t,n,void 0,void 0===r?null:r)}function No(e,t,n,r){var i=wo();r=void 0===r?null:r;var a=void 0;if(null!==ho){var o=ho.memoizedState;if(a=o.destroy,null!==r&&Ao(r,o.deps))return void(i.memoizedState=Do(t,n,a,r))}co.flags|=e,i.memoizedState=Do(1|t,n,a,r)}function Uo(e,t){return Fo(8390656,8,e,t)}function Zo(e,t){return No(2048,8,e,t)}function zo(e,t){return No(4,2,e,t)}function Ho(e,t){return No(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,No(4,4,Go.bind(null,t,e),n)}function Vo(){}function jo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qo(e,t,n){return 0===(21&uo)?(e.baseState&&(e.baseState=!1,ms=!0),e.memoizedState=n):(rr(n,t)||(n=pt(),co.lanes|=n,Ll|=n,e.baseState=!0),t)}function Jo(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=lo.transition;lo.transition={};try{e(!1),t()}finally{yt=n,lo.transition=r}}function Xo(){return wo().memoizedState}function Yo(e,t,n){var r=Kl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$o(e))es(t,n);else if(null!==(n=Ea(e,t,n,r))){$l(n,e,r,Yl()),ts(n,t,r)}}function Ko(e,t,n){var r=Kl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($o(e))es(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,rr(s,o)){var l=t.interleaved;return null===l?(i.next=i,wa(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Ea(e,t,i,r))&&($l(n,e,r,i=Yl()),ts(n,t,r))}}function $o(e){var t=e.alternate;return e===co||null!==t&&t===co}function es(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ts(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ns={readContext:ba,useCallback:yo,useContext:yo,useEffect:yo,useImperativeHandle:yo,useInsertionEffect:yo,useLayoutEffect:yo,useMemo:yo,useReducer:yo,useRef:yo,useState:yo,useDebugValue:yo,useDeferredValue:yo,useTransition:yo,useMutableSource:yo,useSyncExternalStore:yo,useId:yo,unstable_isNewReconciler:!1},rs={readContext:ba,useCallback:function(e,t){return _o().memoizedState=[e,void 0===t?null:t],e},useContext:ba,useEffect:Uo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fo(4,2,e,t)},useMemo:function(e,t){var n=_o();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_o();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Yo.bind(null,co,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_o().memoizedState=e},useState:Po,useDebugValue:Vo,useDeferredValue:function(e){return _o().memoizedState=e},useTransition:function(){var e=Po(!1),t=e[0];return e=Jo.bind(null,e[1]),_o().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=co,i=_o();if(ea){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ml)throw Error(a(349));0!==(30&uo)||To(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Uo(Bo.bind(null,r,o,e),[e]),r.flags|=2048,Do(9,Io.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=_o(),t=Ml.identifierPrefix;if(ea){var n=Wi;t=":"+t+"R"+(n=(ji&~(1<<32-at(ji)-1)).toString(32)+n),0<(n=mo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=go++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},is={readContext:ba,useCallback:jo,useContext:ba,useEffect:Zo,useImperativeHandle:Qo,useInsertionEffect:zo,useLayoutEffect:Ho,useMemo:Wo,useReducer:So,useRef:Oo,useState:function(){return So(Eo)},useDebugValue:Vo,useDeferredValue:function(e){return qo(wo(),ho.memoizedState,e)},useTransition:function(){return[So(Eo)[0],wo().memoizedState]},useMutableSource:Co,useSyncExternalStore:ko,useId:Xo,unstable_isNewReconciler:!1},as={readContext:ba,useCallback:jo,useContext:ba,useEffect:Zo,useImperativeHandle:Qo,useInsertionEffect:zo,useLayoutEffect:Ho,useMemo:Wo,useReducer:Mo,useRef:Oo,useState:function(){return Mo(Eo)},useDebugValue:Vo,useDeferredValue:function(e){var t=wo();return null===ho?t.memoizedState=e:qo(t,ho.memoizedState,e)},useTransition:function(){return[Mo(Eo)[0],wo().memoizedState]},useMutableSource:Co,useSyncExternalStore:ko,useId:Xo,unstable_isNewReconciler:!1};function os(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function ss(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var us="function"===typeof WeakMap?WeakMap:Map;function cs(e,t,n){(n=Ta(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zl||(zl=!0,Hl=r),ls(0,t)},n}function hs(e,t,n){(n=Ta(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ls(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ls(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ds(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new us;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=_u.bind(null,e,t,n),t.then(e,e))}function fs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ps(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ta(-1,1)).tag=2,Ia(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var vs=x.ReactCurrentOwner,ms=!1;function gs(e,t,n,r){t.child=null===e?Wa(t,null,n,r):ja(t,e.child,n,r)}function ys(e,t,n,r,i){n=n.render;var a=t.ref;return xa(t,i),r=xo(e,t,n,r,a,i),n=bo(),null===e||ms?(ea&&n&&Xi(t),t.flags|=1,gs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function As(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Tu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Bu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,xs(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ir)(o,r)&&e.ref===t.ref)return zs(e,t,i)}return t.flags|=1,(e=Iu(a,r)).ref=t.ref,e.return=t,t.child=e}function xs(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ir(a,r)&&e.ref===t.ref){if(ms=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,zs(e,t,i);0!==(131072&e.flags)&&(ms=!0)}}return ws(e,t,n,r,i)}function bs(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_i(Il,Tl),Tl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_i(Il,Tl),Tl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,_i(Il,Tl),Tl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_i(Il,Tl),Tl|=r;return gs(e,t,i,n),t.child}function _s(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ws(e,t,n,r,i){var a=ki(n)?Mi:Ei.current;return a=Ci(t,a),xa(t,i),n=xo(e,t,n,r,a,i),r=bo(),null===e||ms?(ea&&r&&Xi(t),t.flags|=1,gs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function Es(e,t,n,r,i){if(ki(n)){var a=!0;Ri(t)}else a=!1;if(xa(t,i),null===t.stateNode)Zs(e,t),Ua(t,n,r),za(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=ba(u):u=Ci(t,u=ki(n)?Mi:Ei.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==u)&&Za(t,o,r,u),Ma=!1;var d=t.memoizedState;o.state=d,La(t,r,o,i),l=t.memoizedState,s!==r||d!==l||Si.current||Ma?("function"===typeof c&&(Oa(t,n,c,r),l=t.memoizedState),(s=Ma||Na(t,n,s,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ka(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:da(t.type,s),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=ba(l):l=Ci(t,l=ki(n)?Mi:Ei.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==l)&&Za(t,o,r,l),Ma=!1,d=t.memoizedState,o.state=d,La(t,r,o,i);var p=t.memoizedState;s!==h||d!==p||Si.current||Ma?("function"===typeof f&&(Oa(t,n,f,r),p=t.memoizedState),(u=Ma||Na(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ss(e,t,n,r,a,i)}function Ss(e,t,n,r,i,a){_s(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Li(t,n,!1),zs(e,t,a);r=t.stateNode,vs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ja(t,e.child,null,a),t.child=ja(t,null,s,a)):gs(e,t,s,a),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Ms(e){var t=e.stateNode;t.pendingContext?Ii(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ii(0,t.context,!1),$a(e,t.containerInfo)}function Cs(e,t,n,r,i){return ua(),ca(i),t.flags|=256,gs(e,t,n,r),t.child}var ks,Ts,Is,Bs,Rs={dehydrated:null,treeContext:null,retryLane:0};function Ls(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ps(e,t,n){var r,i=t.pendingProps,o=ro.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),_i(ro,1&o),null===e)return aa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Lu(l,i,0,null),e=Ru(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ls(n),t.memoizedState=Rs,e):Ds(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Os(e,t,s,r=ss(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Lu({mode:"visible",children:r.children},i,0,null),(o=Ru(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&ja(t,e.child,null,s),t.child.memoizedState=Ls(s),t.memoizedState=Rs,o);if(0===(1&t.mode))return Os(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Os(e,t,s,r=ss(o=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),ms||l){if(null!==(r=Ml)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Sa(e,i),$l(r,e,i,-1))}return du(),Os(e,t,s,r=ss(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Eu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,$i=ai(i.nextSibling),Ki=t,ea=!0,ta=null,null!==e&&(Gi[Qi++]=ji,Gi[Qi++]=Wi,Gi[Qi++]=Vi,ji=e.id,Wi=e.overflow,Vi=t),t=Ds(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(s){s=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Iu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Iu(r,s):(s=Ru(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ls(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Rs,i}return e=(s=e.child).sibling,i=Iu(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ds(e,t){return(t=Lu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Os(e,t,n,r){return null!==r&&ca(r),ja(t,e.child,null,n),(e=Ds(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Aa(e.return,t,n)}function Ns(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Us(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(gs(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fs(e,n,t);else if(19===e.tag)Fs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ns(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ns(t,!0,n,null,a);break;case"together":Ns(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Iu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Iu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hs(e,t){if(!ea)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(Yi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return ki(t.type)&&Ti(),Gs(t),null;case 3:return r=t.stateNode,eo(),bi(Si),bi(Ei),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(sa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ta&&(ru(ta),ta=null))),Ts(e,t),Gs(t),null;case 5:no(t);var i=Ka(Ya.current);if(n=t.type,null!==e&&null!=t.stateNode)Is(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gs(t),null}if(e=Ka(Ja.current),sa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[li]=t,r[ui]=o,e=0!==(1&t.mode),n){case"dialog":Dr("cancel",r),Dr("close",r);break;case"iframe":case"object":case"embed":Dr("load",r);break;case"video":case"audio":for(i=0;i<Br.length;i++)Dr(Br[i],r);break;case"source":Dr("error",r);break;case"img":case"image":case"link":Dr("error",r),Dr("load",r);break;case"details":Dr("toggle",r);break;case"input":X(r,o),Dr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Dr("invalid",r);break;case"textarea":ie(r,o),Dr("invalid",r)}for(var l in ge(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&qr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&qr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Dr("scroll",r)}switch(n){case"input":j(r),$(r,o,!0);break;case"textarea":j(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[li]=t,e[ui]=r,ks(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":Dr("cancel",e),Dr("close",e),i=r;break;case"iframe":case"object":case"embed":Dr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Br.length;i++)Dr(Br[i],e);i=r;break;case"source":Dr("error",e),i=r;break;case"img":case"image":case"link":Dr("error",e),Dr("load",e),i=r;break;case"details":Dr("toggle",e),i=r;break;case"input":X(e,r),i=J(e,r),Dr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Dr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Dr("invalid",e)}for(o in ge(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ve(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&ce(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Dr("scroll",e):null!=c&&A(e,o,c,l))}switch(n){case"input":j(e),$(e,r,!1);break;case"textarea":j(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Bs(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ka(Ya.current),Ka(Ja.current),sa(t)){if(r=t.stateNode,n=t.memoizedProps,r[li]=t,(o=r.nodeValue!==n)&&null!==(e=Ki))switch(e.tag){case 3:qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&qr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[li]=t,t.stateNode=r}return Gs(t),null;case 13:if(bi(ro),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ea&&null!==$i&&0!==(1&t.mode)&&0===(128&t.flags))la(),ua(),t.flags|=98560,o=!1;else if(o=sa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[li]=t}else ua(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),o=!1}else null!==ta&&(ru(ta),ta=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Bl&&(Bl=3):du())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return eo(),Ts(e,t),null===e&&Nr(t.stateNode.containerInfo),Gs(t),null;case 10:return ya(t.type._context),Gs(t),null;case 19:if(bi(ro),null===(o=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Hs(o,!1);else{if(0!==Bl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=io(e))){for(t.flags|=128,Hs(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Ul&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ea)return Gs(t),null}else 2*Xe()-o.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=ro.current,_i(ro,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return lu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Tl)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Vs(e,t){switch(Yi(t),t.tag){case 1:return ki(t.type)&&Ti(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),bi(Si),bi(Ei),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(bi(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ua()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return bi(ro),null;case 4:return eo(),null;case 10:return ya(t.type._context),null;case 22:case 23:return lu(),null;default:return null}}ks=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ts=function(){},Is=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ka(Ja.current);var a,o=null;switch(n){case"input":i=J(e,i),r=J(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(c in ge(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Dr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Bs=function(e,t,n,r){n!==r&&(t.flags|=4)};var js=!1,Ws=!1,qs="function"===typeof WeakSet?WeakSet:Set,Js=null;function Xs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){bu(e,t,r)}else n.current=null}function Ys(e,t,n){try{n()}catch(r){bu(e,t,r)}}var Ks=!1;function $s(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Ys(t,n,a)}i=i.next}while(i!==r)}}function el(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function tl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function nl(e){var t=e.alternate;null!==t&&(e.alternate=null,nl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[li],delete t[ui],delete t[hi],delete t[di],delete t[fi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rl(e){return 5===e.tag||3===e.tag||4===e.tag}function il(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function al(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(al(e,t,n),e=e.sibling;null!==e;)al(e,t,n),e=e.sibling}function ol(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ol(e,t,n),e=e.sibling;null!==e;)ol(e,t,n),e=e.sibling}var sl=null,ll=!1;function ul(e,t,n){for(n=n.child;null!==n;)cl(e,t,n),n=n.sibling}function cl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(s){}switch(n.tag){case 5:Ws||Xs(n,t);case 6:var r=sl,i=ll;sl=null,ul(e,t,n),ll=i,null!==(sl=r)&&(ll?(e=sl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):sl.removeChild(n.stateNode));break;case 18:null!==sl&&(ll?(e=sl,n=n.stateNode,8===e.nodeType?ii(e.parentNode,n):1===e.nodeType&&ii(e,n),zt(e)):ii(sl,n.stateNode));break;case 4:r=sl,i=ll,sl=n.stateNode.containerInfo,ll=!0,ul(e,t,n),sl=r,ll=i;break;case 0:case 11:case 14:case 15:if(!Ws&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&Ys(n,t,o),i=i.next}while(i!==r)}ul(e,t,n);break;case 1:if(!Ws&&(Xs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){bu(n,t,s)}ul(e,t,n);break;case 21:ul(e,t,n);break;case 22:1&n.mode?(Ws=(r=Ws)||null!==n.memoizedState,ul(e,t,n),Ws=r):ul(e,t,n);break;default:ul(e,t,n)}}function hl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new qs),t.forEach((function(t){var r=Su.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function dl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:sl=l.stateNode,ll=!1;break e;case 3:case 4:sl=l.stateNode.containerInfo,ll=!0;break e}l=l.return}if(null===sl)throw Error(a(160));cl(o,s,i),sl=null,ll=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){bu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fl(t,e),t=t.sibling}function fl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dl(t,e),pl(e),4&r){try{$s(3,e,e.return),el(3,e)}catch(m){bu(e,e.return,m)}try{$s(5,e,e.return)}catch(m){bu(e,e.return,m)}}break;case 1:dl(t,e),pl(e),512&r&&null!==n&&Xs(n,n.return);break;case 5:if(dl(t,e),pl(e),512&r&&null!==n&&Xs(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){bu(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&Y(i,o),ye(l,s);var c=ye(l,o);for(s=0;s<u.length;s+=2){var h=u[s],d=u[s+1];"style"===h?ve(i,d):"dangerouslySetInnerHTML"===h?ce(i,d):"children"===h?he(i,d):A(i,h,d,c)}switch(l){case"input":K(i,o);break;case"textarea":ae(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[ui]=o}catch(m){bu(e,e.return,m)}}break;case 6:if(dl(t,e),pl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){bu(e,e.return,m)}}break;case 3:if(dl(t,e),pl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){bu(e,e.return,m)}break;case 4:default:dl(t,e),pl(e);break;case 13:dl(t,e),pl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Nl=Xe())),4&r&&hl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ws=(c=Ws)||h,dl(t,e),Ws=c):dl(t,e),pl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Js=e,h=e.child;null!==h;){for(d=Js=h;null!==Js;){switch(p=(f=Js).child,f.tag){case 0:case 11:case 14:case 15:$s(4,f,f.return);break;case 1:Xs(f,f.return);var v=f.stateNode;if("function"===typeof v.componentWillUnmount){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){bu(r,n,m)}}break;case 5:Xs(f,f.return);break;case 22:if(null!==f.memoizedState){yl(d);continue}}null!==p?(p.return=f,Js=p):yl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,s=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=pe("display",s))}catch(m){bu(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){bu(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:dl(t,e),pl(e),4&r&&hl(e);case 21:}}function pl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rl(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ol(e,il(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;al(e,il(e),o);break;default:throw Error(a(161))}}catch(s){bu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Js=e,ml(e,t,n)}function ml(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||js;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ws;s=js;var u=Ws;if(js=o,(Ws=l)&&!u)for(Js=i;null!==Js;)l=(o=Js).child,22===o.tag&&null!==o.memoizedState?Al(i):null!==l?(l.return=o,Js=l):Al(i);for(;null!==a;)Js=a,ml(a,t,n),a=a.sibling;Js=i,js=s,Ws=u}gl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Js=a):gl(e)}}function gl(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ws||el(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ws)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:da(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Pa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Pa(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(a(163))}Ws||512&t.flags&&tl(t)}catch(f){bu(t,t.return,f)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function yl(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function Al(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{el(4,t)}catch(l){bu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){bu(t,i,l)}}var a=t.return;try{tl(t)}catch(l){bu(t,a,l)}break;case 5:var o=t.return;try{tl(t)}catch(l){bu(t,o,l)}}}catch(l){bu(t,t.return,l)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var xl,bl=Math.ceil,_l=x.ReactCurrentDispatcher,wl=x.ReactCurrentOwner,El=x.ReactCurrentBatchConfig,Sl=0,Ml=null,Cl=null,kl=0,Tl=0,Il=xi(0),Bl=0,Rl=null,Ll=0,Pl=0,Dl=0,Ol=null,Fl=null,Nl=0,Ul=1/0,Zl=null,zl=!1,Hl=null,Gl=null,Ql=!1,Vl=null,jl=0,Wl=0,ql=null,Jl=-1,Xl=0;function Yl(){return 0!==(6&Sl)?Xe():-1!==Jl?Jl:Jl=Xe()}function Kl(e){return 0===(1&e.mode)?1:0!==(2&Sl)&&0!==kl?kl&-kl:null!==ha.transition?(0===Xl&&(Xl=pt()),Xl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function $l(e,t,n,r){if(50<Wl)throw Wl=0,ql=null,Error(a(185));mt(e,n,r),0!==(2&Sl)&&e===Ml||(e===Ml&&(0===(2&Sl)&&(Pl|=n),4===Bl&&iu(e,kl)),eu(e,r),1===n&&0===Sl&&0===(1&t.mode)&&(Ul=Xe()+500,Di&&Ni()))}function eu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-at(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Ml?kl:0);if(0===r)null!==n&&We(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&We(n),1===t)0===e.tag?function(e){Di=!0,Fi(e)}(au.bind(null,e)):Fi(au.bind(null,e)),ni((function(){0===(6&Sl)&&Ni()})),n=null;else{switch(At(r)){case 1:n=Ke;break;case 4:n=$e;break;case 16:default:n=et;break;case 536870912:n=nt}n=Mu(n,tu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tu(e,t){if(Jl=-1,Xl=0,0!==(6&Sl))throw Error(a(327));var n=e.callbackNode;if(Au()&&e.callbackNode!==n)return null;var r=ht(e,e===Ml?kl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=fu(e,r);else{t=r;var i=Sl;Sl|=2;var o=hu();for(Ml===e&&kl===t||(Zl=null,Ul=Xe()+500,uu(e,t));;)try{vu();break}catch(l){cu(e,l)}ga(),_l.current=o,Sl=i,null!==Cl?t=0:(Ml=null,kl=0,t=Bl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=nu(e,i))),1===t)throw n=Rl,uu(e,0),iu(e,r),eu(e,Xe()),n;if(6===t)iu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!rr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=fu(e,r))&&(0!==(o=ft(e))&&(r=o,t=nu(e,o))),1===t))throw n=Rl,uu(e,0),iu(e,r),eu(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:yu(e,Fl,Zl);break;case 3:if(iu(e,r),(130023424&r)===r&&10<(t=Nl+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Yl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=$r(yu.bind(null,e,Fl,Zl),t);break}yu(e,Fl,Zl);break;case 4:if(iu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bl(r/1960))-r)){e.timeoutHandle=$r(yu.bind(null,e,Fl,Zl),r);break}yu(e,Fl,Zl);break;default:throw Error(a(329))}}}return eu(e,Xe()),e.callbackNode===n?tu.bind(null,e):null}function nu(e,t){var n=Ol;return e.current.memoizedState.isDehydrated&&(uu(e,t).flags|=256),2!==(e=fu(e,t))&&(t=Fl,Fl=n,null!==t&&ru(t)),e}function ru(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function iu(e,t){for(t&=~Dl,t&=~Pl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function au(e){if(0!==(6&Sl))throw Error(a(327));Au();var t=ht(e,0);if(0===(1&t))return eu(e,Xe()),null;var n=fu(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=nu(e,r))}if(1===n)throw n=Rl,uu(e,0),iu(e,t),eu(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yu(e,Fl,Zl),eu(e,Xe()),null}function ou(e,t){var n=Sl;Sl|=1;try{return e(t)}finally{0===(Sl=n)&&(Ul=Xe()+500,Di&&Ni())}}function su(e){null!==Vl&&0===Vl.tag&&0===(6&Sl)&&Au();var t=Sl;Sl|=1;var n=El.transition,r=yt;try{if(El.transition=null,yt=1,e)return e()}finally{yt=r,El.transition=n,0===(6&(Sl=t))&&Ni()}}function lu(){Tl=Il.current,bi(Il)}function uu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ei(n)),null!==Cl)for(n=Cl.return;null!==n;){var r=n;switch(Yi(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ti();break;case 3:eo(),bi(Si),bi(Ei),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:bi(ro);break;case 10:ya(r.type._context);break;case 22:case 23:lu()}n=n.return}if(Ml=e,Cl=e=Iu(e.current,null),kl=Tl=t,Bl=0,Rl=null,Dl=Pl=Ll=0,Fl=Ol=null,null!==_a){for(t=0;t<_a.length;t++)if(null!==(r=(n=_a[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}_a=null}return e}function cu(e,t){for(;;){var n=Cl;try{if(ga(),so.current=ns,po){for(var r=co.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(uo=0,fo=ho=co=null,vo=!1,mo=0,wl.current=null,null===n||null===n.return){Bl=1,Rl=t,Cl=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=kl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=fs(s);if(null!==p){p.flags&=-257,ps(p,s,l,0,t),1&p.mode&&ds(o,c,t),u=c;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(u),t.updateQueue=m}else v.add(u);break e}if(0===(1&t)){ds(o,c,t),du();break e}u=Error(a(426))}else if(ea&&1&l.mode){var g=fs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ps(g,s,l,0,t),ca(os(u,l));break e}}o=u=os(u,l),4!==Bl&&(Bl=2),null===Ol?Ol=[o]:Ol.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ra(o,cs(0,u,t));break e;case 1:l=u;var y=o.type,A=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==A&&"function"===typeof A.componentDidCatch&&(null===Gl||!Gl.has(A)))){o.flags|=65536,t&=-t,o.lanes|=t,Ra(o,hs(o,l,t));break e}}o=o.return}while(null!==o)}gu(n)}catch(x){t=x,Cl===n&&null!==n&&(Cl=n=n.return);continue}break}}function hu(){var e=_l.current;return _l.current=ns,null===e?ns:e}function du(){0!==Bl&&3!==Bl&&2!==Bl||(Bl=4),null===Ml||0===(268435455&Ll)&&0===(268435455&Pl)||iu(Ml,kl)}function fu(e,t){var n=Sl;Sl|=2;var r=hu();for(Ml===e&&kl===t||(Zl=null,uu(e,t));;)try{pu();break}catch(i){cu(e,i)}if(ga(),Sl=n,_l.current=r,null!==Cl)throw Error(a(261));return Ml=null,kl=0,Bl}function pu(){for(;null!==Cl;)mu(Cl)}function vu(){for(;null!==Cl&&!qe();)mu(Cl)}function mu(e){var t=xl(e.alternate,e,Tl);e.memoizedProps=e.pendingProps,null===t?gu(e):Cl=t,wl.current=null}function gu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Tl)))return void(Cl=n)}else{if(null!==(n=Vs(n,t)))return n.flags&=32767,void(Cl=n);if(null===e)return Bl=6,void(Cl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Cl=t);Cl=t=e}while(null!==t);0===Bl&&(Bl=5)}function yu(e,t,n){var r=yt,i=El.transition;try{El.transition=null,yt=1,function(e,t,n,r){do{Au()}while(null!==Vl);if(0!==(6&Sl))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ml&&(Cl=Ml=null,kl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Mu(et,(function(){return Au(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=El.transition,El.transition=null;var s=yt;yt=1;var l=Sl;Sl|=4,wl.current=null,function(e,t){if(Xr=Gt,ur(e=lr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var s=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==o||0!==r&&3!==d.nodeType||(u=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=s),f===o&&++h===r&&(u=s),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yr={focusedElem:e,selectionRange:n},Gt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,A=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:da(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(b){bu(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}v=Ks,Ks=!1}(e,n),fl(n,e),cr(Yr),Gt=!!Xr,Yr=Xr=null,e.current=n,vl(n,e,i),Je(),Sl=l,yt=s,El.transition=o}else e.current=n;if(Ql&&(Ql=!1,Vl=e,jl=i),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),eu(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zl)throw zl=!1,e=Hl,Hl=null,e;0!==(1&jl)&&0!==e.tag&&Au(),o=e.pendingLanes,0!==(1&o)?e===ql?Wl++:(Wl=0,ql=e):Wl=0,Ni()}(e,t,n,r)}finally{El.transition=i,yt=r}return null}function Au(){if(null!==Vl){var e=At(jl),t=El.transition,n=yt;try{if(El.transition=null,yt=16>e?16:e,null===Vl)var r=!1;else{if(e=Vl,Vl=null,jl=0,0!==(6&Sl))throw Error(a(331));var i=Sl;for(Sl|=4,Js=e.current;null!==Js;){var o=Js,s=o.child;if(0!==(16&Js.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Js=c;null!==Js;){var h=Js;switch(h.tag){case 0:case 11:case 15:$s(8,h,o)}var d=h.child;if(null!==d)d.return=h,Js=d;else for(;null!==Js;){var f=(h=Js).sibling,p=h.return;if(nl(h),h===c){Js=null;break}if(null!==f){f.return=p,Js=f;break}Js=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Js=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Js=s;else e:for(;null!==Js;){if(0!==(2048&(o=Js).flags))switch(o.tag){case 0:case 11:case 15:$s(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Js=y;break e}Js=o.return}}var A=e.current;for(Js=A;null!==Js;){var x=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Js=x;else e:for(s=A;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:el(9,l)}}catch(_){bu(l,l.return,_)}if(l===s){Js=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Js=b;break e}Js=l.return}}if(Sl=i,Ni(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch(_){}r=!0}return r}finally{yt=n,El.transition=t}}return!1}function xu(e,t,n){e=Ia(e,t=cs(0,t=os(n,t),1),1),t=Yl(),null!==e&&(mt(e,1,t),eu(e,t))}function bu(e,t,n){if(3===e.tag)xu(e,e,n);else for(;null!==t;){if(3===t.tag){xu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Ia(t,e=hs(t,e=os(n,e),1),1),e=Yl(),null!==t&&(mt(t,1,e),eu(t,e));break}}t=t.return}}function _u(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Yl(),e.pingedLanes|=e.suspendedLanes&n,Ml===e&&(kl&n)===n&&(4===Bl||3===Bl&&(130023424&kl)===kl&&500>Xe()-Nl?uu(e,0):Dl|=n),eu(e,t)}function wu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=Yl();null!==(e=Sa(e,t))&&(mt(e,t,n),eu(e,n))}function Eu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),wu(e,n)}function Su(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),wu(e,n)}function Mu(e,t){return je(e,t)}function Cu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ku(e,t,n,r){return new Cu(e,t,n,r)}function Tu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Iu(e,t){var n=e.alternate;return null===n?((n=ku(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Bu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Tu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case w:return Ru(n.children,i,o,t);case E:s=8,i|=8;break;case S:return(e=ku(12,n,t,2|i)).elementType=S,e.lanes=o,e;case T:return(e=ku(13,n,t,i)).elementType=T,e.lanes=o,e;case I:return(e=ku(19,n,t,i)).elementType=I,e.lanes=o,e;case L:return Lu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case M:s=10;break e;case C:s=9;break e;case k:s=11;break e;case B:s=14;break e;case R:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=ku(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ru(e,t,n,r){return(e=ku(7,e,r,t)).lanes=n,e}function Lu(e,t,n,r){return(e=ku(22,e,r,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function Pu(e,t,n){return(e=ku(6,e,null,t)).lanes=n,e}function Du(e,t,n){return(t=ku(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ou(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fu(e,t,n,r,i,a,o,s,l){return e=new Ou(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=ku(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ca(a),e}function Nu(e){if(!e)return wi;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ki(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(ki(n))return Bi(e,n,t)}return t}function Uu(e,t,n,r,i,a,o,s,l){return(e=Fu(n,r,!0,e,0,a,0,s,l)).context=Nu(null),n=e.current,(a=Ta(r=Yl(),i=Kl(n))).callback=void 0!==t&&null!==t?t:null,Ia(n,a,i),e.current.lanes=i,mt(e,i,r),eu(e,r),e}function Zu(e,t,n,r){var i=t.current,a=Yl(),o=Kl(i);return n=Nu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ta(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ia(i,t,o))&&($l(e,i,o,a),Ba(e,i,o)),o}function zu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gu(e,t){Hu(e,t),(e=e.alternate)&&Hu(e,t)}xl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Si.current)ms=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ms=!1,function(e,t,n){switch(t.tag){case 3:Ms(t),ua();break;case 5:to(t);break;case 1:ki(t.type)&&Ri(t);break;case 4:$a(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_i(fa,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_i(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ps(e,t,n):(_i(ro,1&ro.current),null!==(e=zs(e,t,n))?e.sibling:null);_i(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Us(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),_i(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,bs(e,t,n)}return zs(e,t,n)}(e,t,n);ms=0!==(131072&e.flags)}else ms=!1,ea&&0!==(1048576&t.flags)&&Ji(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Zs(e,t),e=t.pendingProps;var i=Ci(t,Ei.current);xa(t,n),i=xo(null,t,r,e,i,n);var o=bo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ki(r)?(o=!0,Ri(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ca(t),i.updater=Fa,t.stateNode=i,i._reactInternals=t,za(t,r,e,n),t=Ss(null,t,r,!0,o,n)):(t.tag=0,ea&&o&&Xi(t),gs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Zs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Tu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===B)return 14}return 2}(r),e=da(r,e),i){case 0:t=ws(null,t,r,e,n);break e;case 1:t=Es(null,t,r,e,n);break e;case 11:t=ys(null,t,r,e,n);break e;case 14:t=As(null,t,r,da(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:da(r,i),n);case 1:return r=t.type,i=t.pendingProps,Es(e,t,r,i=t.elementType===r?i:da(r,i),n);case 3:e:{if(Ms(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ka(e,t),La(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Cs(e,t,r,n,i=os(Error(a(423)),t));break e}if(r!==i){t=Cs(e,t,r,n,i=os(Error(a(424)),t));break e}for($i=ai(t.stateNode.containerInfo.firstChild),Ki=t,ea=!0,ta=null,n=Wa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ua(),r===i){t=zs(e,t,n);break e}gs(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&aa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Kr(r,i)?s=null:null!==o&&Kr(r,o)&&(t.flags|=32),_s(e,t),gs(e,t,s,n),t.child;case 6:return null===e&&aa(t),null;case 13:return Ps(e,t,n);case 4:return $a(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ja(t,null,r,n):gs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ys(e,t,r,i=t.elementType===r?i:da(r,i),n);case 7:return gs(e,t,t.pendingProps,n),t.child;case 8:case 12:return gs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,_i(fa,r._currentValue),r._currentValue=s,null!==o)if(rr(o.value,s)){if(o.children===i.children&&!Si.current){t=zs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Ta(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Aa(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Aa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}gs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,xa(t,n),r=r(i=ba(i)),t.flags|=1,gs(e,t,r,n),t.child;case 14:return i=da(r=t.type,t.pendingProps),As(e,t,r,i=da(r.type,i),n);case 15:return xs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:da(r,i),Zs(e,t),t.tag=1,ki(r)?(e=!0,Ri(t)):e=!1,xa(t,n),Ua(t,r,i),za(t,r,i,n),Ss(null,t,r,!0,e,n);case 19:return Us(e,t,n);case 22:return bs(e,t,n)}throw Error(a(156,t.tag))};var Qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Vu(e){this._internalRoot=e}function ju(e){this._internalRoot=e}function Wu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(){}function Xu(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=zu(o);s.call(e)}}Zu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=zu(o);a.call(e)}}var o=Uu(t,r,e,0,null,!1,0,"",Ju);return e._reactRootContainer=o,e[ci]=o.current,Nr(8===e.nodeType?e.parentNode:e),su(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=zu(l);s.call(e)}}var l=Fu(e,0,!1,null,0,!1,0,"",Ju);return e._reactRootContainer=l,e[ci]=l.current,Nr(8===e.nodeType?e.parentNode:e),su((function(){Zu(t,l,n,r)})),l}(n,t,e,i,r);return zu(o)}ju.prototype.render=Vu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Zu(e,t,null,null)},ju.prototype.unmount=Vu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;su((function(){Zu(null,e,null,null)})),t[ci]=null}},ju.prototype.unstable_scheduleHydration=function(e){if(e){var t=wt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ot(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ct(t.pendingLanes);0!==n&&(gt(t,1|n),eu(t,Xe()),0===(6&Sl)&&(Ul=Xe()+500,Ni()))}break;case 13:su((function(){var t=Sa(e,1);if(null!==t){var n=Yl();$l(t,e,1,n)}})),Gu(e,1)}},bt=function(e){if(13===e.tag){var t=Sa(e,134217728);if(null!==t)$l(t,e,134217728,Yl());Gu(e,134217728)}},_t=function(e){if(13===e.tag){var t=Kl(e),n=Sa(e,t);if(null!==n)$l(n,e,t,Yl());Gu(e,t)}},wt=function(){return yt},Et=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},be=function(e,t,n){switch(t){case"input":if(K(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=gi(r);if(!i)throw Error(a(90));W(r),K(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=ou,ke=su;var Yu={usingClientEntryPoint:!1,Events:[vi,mi,gi,Se,Me,ou]},Ku={findFiberByHostInstance:pi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},$u={bundleType:Ku.bundleType,version:Ku.version,rendererPackageName:Ku.rendererPackageName,rendererConfig:Ku.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:Ku.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{rt=ec.inject($u),it=ec}catch(tc){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Wu(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Wu(e))throw Error(a(299));var n=!1,r="",i=Qu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Fu(e,1,!1,null,0,n,0,r,i),e[ci]=t.current,Nr(8===e.nodeType?e.parentNode:e),new Vu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e){return su(e)},t.hydrate=function(e,t,n){if(!qu(t))throw Error(a(200));return Xu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Wu(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Uu(t,null,e,1,null!=n?n:null,i,0,o,s),e[ci]=t.current,Nr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new ju(t)},t.render=function(e,t,n){if(!qu(t))throw Error(a(200));return Xu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!qu(e))throw Error(a(40));return!!e._reactRootContainer&&(su((function(){Xu(null,null,e,!1,(function(){e._reactRootContainer=null,e[ci]=null}))})),!0)},t.unstable_batchedUpdates=ou,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!qu(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Xu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},4976:function(e,t){"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},3721:function(e,t,n){e.exports=function(e){var t={},r=n(2791),i=n(3100),a=Object.assign;function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var x=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var b=Symbol.iterator;function _(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=b&&e[b]||e["@@iterator"])?e:null}function w(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case c:return"Fragment";case u:return"Portal";case d:return"Profiler";case h:return"StrictMode";case m:return"Suspense";case g:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case p:return(e.displayName||"Context")+".Consumer";case f:return(e._context.displayName||"Context")+".Provider";case v:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case y:return null!==(t=e.displayName||null)?t:w(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return w(e(t))}catch(n){}}return null}function E(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return w(t);case 8:return t===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function S(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function M(e){if(S(e)!==e)throw Error(o(188))}function C(e){var t=e.alternate;if(!t){if(null===(t=S(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return M(i),e;if(a===r)return M(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}function k(e){return null!==(e=C(e))?T(e):null}function T(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=T(e);if(null!==t)return t;e=e.sibling}return null}function I(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=I(e);if(null!==t)return t}e=e.sibling}return null}var B,R=Array.isArray,L=e.getPublicInstance,P=e.getRootHostContext,D=e.getChildHostContext,O=e.prepareForCommit,F=e.resetAfterCommit,N=e.createInstance,U=e.appendInitialChild,Z=e.finalizeInitialChildren,z=e.prepareUpdate,H=e.shouldSetTextContent,G=e.createTextInstance,Q=e.scheduleTimeout,V=e.cancelTimeout,j=e.noTimeout,W=e.isPrimaryRenderer,q=e.supportsMutation,J=e.supportsPersistence,X=e.supportsHydration,Y=e.getInstanceFromNode,K=e.preparePortalMount,$=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,re=e.supportsTestSelectors,ie=e.findFiberRoot,ae=e.getBoundingRect,oe=e.getTextContent,se=e.isHiddenSubtree,le=e.matchAccessibilityRole,ue=e.setFocusIfFocusable,ce=e.setupIntersectionObserver,he=e.appendChild,de=e.appendChildToContainer,fe=e.commitTextUpdate,pe=e.commitMount,ve=e.commitUpdate,me=e.insertBefore,ge=e.insertInContainerBefore,ye=e.removeChild,Ae=e.removeChildFromContainer,xe=e.resetTextContent,be=e.hideInstance,_e=e.hideTextInstance,we=e.unhideInstance,Ee=e.unhideTextInstance,Se=e.clearContainer,Me=e.cloneInstance,Ce=e.createContainerChildSet,ke=e.appendChildToContainerChildSet,Te=e.finalizeContainerChildren,Ie=e.replaceContainerChildren,Be=e.cloneHiddenInstance,Re=e.cloneHiddenTextInstance,Le=e.canHydrateInstance,Pe=e.canHydrateTextInstance,De=e.canHydrateSuspenseInstance,Oe=e.isSuspenseInstancePending,Fe=e.isSuspenseInstanceFallback,Ne=e.registerSuspenseInstanceRetry,Ue=e.getNextHydratableSibling,Ze=e.getFirstHydratableChild,ze=e.getFirstHydratableChildWithinContainer,He=e.getFirstHydratableChildWithinSuspenseInstance,Ge=e.hydrateInstance,Qe=e.hydrateTextInstance,Ve=e.hydrateSuspenseInstance,je=e.getNextHydratableInstanceAfterSuspenseInstance,We=e.commitHydratedContainer,qe=e.commitHydratedSuspenseInstance,Je=e.clearSuspenseBoundary,Xe=e.clearSuspenseBoundaryFromContainer,Ye=e.shouldDeleteUnhydratedTailInstances,Ke=e.didNotMatchHydratedContainerTextInstance,$e=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var rt=Object.prototype.hasOwnProperty,it=[],at=-1;function ot(e){return{current:e}}function st(e){0>at||(e.current=it[at],it[at]=null,at--)}function lt(e,t){at++,it[at]=e.current,e.current=t}var ut={},ct=ot(ut),ht=ot(!1),dt=ut;function ft(e,t){var n=e.type.contextTypes;if(!n)return ut;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function pt(e){return null!==(e=e.childContextTypes)&&void 0!==e}function vt(){st(ht),st(ct)}function mt(e,t,n){if(ct.current!==ut)throw Error(o(168));lt(ct,t),lt(ht,n)}function gt(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,E(e)||"Unknown",i));return a({},n,r)}function yt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ut,dt=ct.current,lt(ct,e),lt(ht,ht.current),!0}function At(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=gt(e,t,dt),r.__reactInternalMemoizedMergedChildContext=e,st(ht),st(ct),lt(ct,e)):st(ht),lt(ht,n)}var xt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(bt(e)/_t|0)|0},bt=Math.log,_t=Math.LN2;var wt=64,Et=4194304;function St(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Mt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=St(s):0!==(a&=o)&&(r=St(a))}else 0!==(o=n&~i)?r=St(o):0!==a&&(r=St(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-xt(t)),r|=e[n],t&=~i;return r}function Ct(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function kt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Tt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function It(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-xt(t)]=n}function Bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Rt=0;function Lt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Pt=i.unstable_scheduleCallback,Dt=i.unstable_cancelCallback,Ot=i.unstable_shouldYield,Ft=i.unstable_requestPaint,Nt=i.unstable_now,Ut=i.unstable_ImmediatePriority,Zt=i.unstable_UserBlockingPriority,zt=i.unstable_NormalPriority,Ht=i.unstable_IdlePriority,Gt=null,Qt=null;var Vt="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},jt=null,Wt=!1,qt=!1;function Jt(e){null===jt?jt=[e]:jt.push(e)}function Xt(){if(!qt&&null!==jt){qt=!0;var e=0,t=Rt;try{var n=jt;for(Rt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}jt=null,Wt=!1}catch(i){throw null!==jt&&(jt=jt.slice(e+1)),Pt(Ut,Xt),i}finally{Rt=t,qt=!1}}return null}var Yt=s.ReactCurrentBatchConfig;function Kt(e,t){if(Vt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rt.call(t,i)||!Vt(e[i],t[i]))return!1}return!0}function $t(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=ot(null),nn=null,rn=null,an=null;function on(){an=rn=nn=null}function sn(e,t,n){W?(lt(tn,t._currentValue),t._currentValue=n):(lt(tn,t._currentValue2),t._currentValue2=n)}function ln(e){var t=tn.current;st(tn),W?e._currentValue=t:e._currentValue2=t}function un(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cn(e,t){nn=e,an=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Oi=!0),e.firstContext=null)}function hn(e){var t=W?e._currentValue:e._currentValue2;if(an!==e)if(e={context:e,memoizedValue:t,next:null},null===rn){if(null===nn)throw Error(o(308));rn=e,nn.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var dn=null,fn=!1;function pn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==qa&&0!==(1&e.mode)&&0===(2&Wa)?(null===(e=n.interleaved)?(t.next=t,null===dn?dn=[n]:dn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function yn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Bt(e,n)}}function An(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function xn(e,t,n,r){var i=e.updateQueue;fn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var u=l,c=u.next;u.next=null,null===s?o=c:s.next=c,s=u;var h=e.alternate;null!==h&&((l=(h=h.updateQueue).lastBaseUpdate)!==s&&(null===l?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(null!==o){var d=i.baseState;for(s=0,h=c=u=null,l=o;;){var f=l.lane,p=l.eventTime;if((r&f)===f){null!==h&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,m=l;switch(f=t,p=n,m.tag){case 1:if("function"===typeof(v=m.payload)){d=v.call(p,d,f);break e}d=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(f="function"===typeof(v=m.payload)?v.call(p,d,f):v)||void 0===f)break e;d=a({},d,f);break e;case 2:fn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===h?(c=h=p,u=d):h=h.next=p,s|=f;if(null===(l=l.next)){if(null===(l=i.shared.pending))break;l=(f=l).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===h&&(u=d),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);to|=s,e.lanes=s,e.memoizedState=d}}function bn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var _n=(new r.Component).refs;function wn(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var En={isMounted:function(e){return!!(e=e._reactInternals)&&S(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=bo(),i=_o(e),a=mn(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),gn(e,a),null!==(t=wo(e,i,r))&&yn(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=bo(),i=_o(e),a=mn(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),gn(e,a),null!==(t=wo(e,i,r))&&yn(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=bo(),r=_o(e),i=mn(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),gn(e,i),null!==(t=wo(e,r,n))&&yn(t,e,r)}};function Sn(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!Kt(n,r)||!Kt(i,a))}function Mn(e,t,n){var r=!1,i=ut,a=t.contextType;return"object"===typeof a&&null!==a?a=hn(a):(i=pt(t)?dt:ct.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?ft(e,i):ut),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=En,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Cn(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&En.enqueueReplaceState(t,t.state,null)}function kn(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=_n,pn(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=hn(a):(a=pt(t)?dt:ct.current,i.context=ft(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(wn(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&En.enqueueReplaceState(i,i.state,null),xn(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var Tn=[],In=0,Bn=null,Rn=0,Ln=[],Pn=0,Dn=null,On=1,Fn="";function Nn(e,t){Tn[In++]=Rn,Tn[In++]=Bn,Bn=e,Rn=t}function Un(e,t,n){Ln[Pn++]=On,Ln[Pn++]=Fn,Ln[Pn++]=Dn,Dn=e;var r=On;e=Fn;var i=32-xt(r)-1;r&=~(1<<i),n+=1;var a=32-xt(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,On=1<<32-xt(t)+i|n<<i|r,Fn=a+e}else On=1<<a|n<<i|r,Fn=e}function Zn(e){null!==e.return&&(Nn(e,1),Un(e,1,0))}function zn(e){for(;e===Bn;)Bn=Tn[--In],Tn[In]=null,Rn=Tn[--In],Tn[In]=null;for(;e===Dn;)Dn=Ln[--Pn],Ln[Pn]=null,Fn=Ln[--Pn],Ln[Pn]=null,On=Ln[--Pn],Ln[Pn]=null}var Hn=null,Gn=null,Qn=!1,Vn=!1,jn=null;function Wn(e,t){var n=Ko(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function qn(e,t){switch(e.tag){case 5:return null!==(t=Le(t,e.type,e.pendingProps))&&(e.stateNode=t,Hn=e,Gn=Ze(t),!0);case 6:return null!==(t=Pe(t,e.pendingProps))&&(e.stateNode=t,Hn=e,Gn=null,!0);case 13:if(null!==(t=De(t))){var n=null!==Dn?{id:On,overflow:Fn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ko(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Hn=e,Gn=null,!0}return!1;default:return!1}}function Jn(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Xn(e){if(Qn){var t=Gn;if(t){var n=t;if(!qn(e,t)){if(Jn(e))throw Error(o(418));t=Ue(n);var r=Hn;t&&qn(e,t)?Wn(r,n):(e.flags=-4097&e.flags|2,Qn=!1,Hn=e)}}else{if(Jn(e))throw Error(o(418));e.flags=-4097&e.flags|2,Qn=!1,Hn=e}}}function Yn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Hn=e}function Kn(e){if(!X||e!==Hn)return!1;if(!Qn)return Yn(e),Qn=!0,!1;if(3!==e.tag&&(5!==e.tag||Ye(e.type)&&!H(e.type,e.memoizedProps))){var t=Gn;if(t){if(Jn(e)){for(e=Gn;e;)e=Ue(e);throw Error(o(418))}for(;t;)Wn(e,t),t=Ue(t)}}if(Yn(e),13===e.tag){if(!X)throw Error(o(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));Gn=je(e)}else Gn=Hn?Ue(e.stateNode):null;return!0}function $n(){X&&(Gn=Hn=null,Vn=Qn=!1)}function er(e){null===jn?jn=[e]:jn.push(e)}function tr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===_n&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function nr(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rr(e){return(0,e._init)(e._payload)}function ir(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=es(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function h(e,t,n,r){return null===t||6!==t.tag?((t=is(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n,r){var a=n.type;return a===c?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===A&&rr(a)===t.type)?((r=i(t,n.props)).ref=tr(e,t,n),r.return=e,r):((r=ts(n.type,n.key,n.props,null,e.mode,r)).ref=tr(e,t,n),r.return=e,r)}function f(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=as(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,a){return null===t||7!==t.tag?((t=ns(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function v(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=is(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case l:return(n=ts(t.type,t.key,t.props,null,e.mode,n)).ref=tr(e,null,t),n.return=e,n;case u:return(t=as(t,e.mode,n)).return=e,t;case A:return v(e,(0,t._init)(t._payload),n)}if(R(t)||_(t))return(t=ns(t,e.mode,n,null)).return=e,t;nr(e,t)}return null}function m(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:h(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===i?d(e,t,n,r):null;case u:return n.key===i?f(e,t,n,r):null;case A:return m(e,t,(i=n._init)(n._payload),r)}if(R(n)||_(n))return null!==i?null:p(e,t,n,r,null);nr(e,n)}return null}function g(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return h(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case l:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case u:return f(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return g(e,t,n,(0,r._init)(r._payload),i)}if(R(r)||_(r))return p(t,e=e.get(n)||null,r,i,null);nr(t,r)}return null}function y(i,o,s,l){for(var u=null,c=null,h=o,d=o=0,f=null;null!==h&&d<s.length;d++){h.index>d?(f=h,h=null):f=h.sibling;var p=m(i,h,s[d],l);if(null===p){null===h&&(h=f);break}e&&h&&null===p.alternate&&t(i,h),o=a(p,o,d),null===c?u=p:c.sibling=p,c=p,h=f}if(d===s.length)return n(i,h),Qn&&Nn(i,d),u;if(null===h){for(;d<s.length;d++)null!==(h=v(i,s[d],l))&&(o=a(h,o,d),null===c?u=h:c.sibling=h,c=h);return Qn&&Nn(i,d),u}for(h=r(i,h);d<s.length;d++)null!==(f=g(h,i,d,s[d],l))&&(e&&null!==f.alternate&&h.delete(null===f.key?d:f.key),o=a(f,o,d),null===c?u=f:c.sibling=f,c=f);return e&&h.forEach((function(e){return t(i,e)})),Qn&&Nn(i,d),u}function x(i,s,l,u){var c=_(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,d=s,f=s=0,p=null,y=l.next();null!==d&&!y.done;f++,y=l.next()){d.index>f?(p=d,d=null):p=d.sibling;var A=m(i,d,y.value,u);if(null===A){null===d&&(d=p);break}e&&d&&null===A.alternate&&t(i,d),s=a(A,s,f),null===h?c=A:h.sibling=A,h=A,d=p}if(y.done)return n(i,d),Qn&&Nn(i,f),c;if(null===d){for(;!y.done;f++,y=l.next())null!==(y=v(i,y.value,u))&&(s=a(y,s,f),null===h?c=y:h.sibling=y,h=y);return Qn&&Nn(i,f),c}for(d=r(i,d);!y.done;f++,y=l.next())null!==(y=g(d,i,f,y.value,u))&&(e&&null!==y.alternate&&d.delete(null===y.key?f:y.key),s=a(y,s,f),null===h?c=y:h.sibling=y,h=y);return e&&d.forEach((function(e){return t(i,e)})),Qn&&Nn(i,f),c}return function e(r,a,o,h){if("object"===typeof o&&null!==o&&o.type===c&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case l:e:{for(var d=o.key,f=a;null!==f;){if(f.key===d){if((d=o.type)===c){if(7===f.tag){n(r,f.sibling),(a=i(f,o.props.children)).return=r,r=a;break e}}else if(f.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===A&&rr(d)===f.type){n(r,f.sibling),(a=i(f,o.props)).ref=tr(r,f,o),a.return=r,r=a;break e}n(r,f);break}t(r,f),f=f.sibling}o.type===c?((a=ns(o.props.children,r.mode,h,o.key)).return=r,r=a):((h=ts(o.type,o.key,o.props,null,r.mode,h)).ref=tr(r,a,o),h.return=r,r=h)}return s(r);case u:e:{for(f=o.key;null!==a;){if(a.key===f){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=as(o,r.mode,h)).return=r,r=a}return s(r);case A:return e(r,a,(f=o._init)(o._payload),h)}if(R(o))return y(r,a,o,h);if(_(o))return x(r,a,o,h);nr(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=is(o,r.mode,h)).return=r,r=a),s(r)):n(r,a)}}var ar=ir(!0),or=ir(!1),sr={},lr=ot(sr),ur=ot(sr),cr=ot(sr);function hr(e){if(e===sr)throw Error(o(174));return e}function dr(e,t){lt(cr,t),lt(ur,e),lt(lr,sr),e=P(t),st(lr),lt(lr,e)}function fr(){st(lr),st(ur),st(cr)}function pr(e){var t=hr(cr.current),n=hr(lr.current);n!==(t=D(n,e.type,t))&&(lt(ur,e),lt(lr,t))}function vr(e){ur.current===e&&(st(lr),st(ur))}var mr=ot(0);function gr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Oe(n)||Fe(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yr=[];function Ar(){for(var e=0;e<yr.length;e++){var t=yr[e];W?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}yr.length=0}var xr=s.ReactCurrentDispatcher,br=s.ReactCurrentBatchConfig,_r=0,wr=null,Er=null,Sr=null,Mr=!1,Cr=!1,kr=0,Tr=0;function Ir(){throw Error(o(321))}function Br(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Vt(e[n],t[n]))return!1;return!0}function Rr(e,t,n,r,i,a){if(_r=a,wr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xr.current=null===e||null===e.memoizedState?pi:vi,e=n(r,i),Cr){a=0;do{if(Cr=!1,kr=0,25<=a)throw Error(o(301));a+=1,Sr=Er=null,t.updateQueue=null,xr.current=mi,e=n(r,i)}while(Cr)}if(xr.current=fi,t=null!==Er&&null!==Er.next,_r=0,Sr=Er=wr=null,Mr=!1,t)throw Error(o(300));return e}function Lr(){var e=0!==kr;return kr=0,e}function Pr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Sr?wr.memoizedState=Sr=e:Sr=Sr.next=e,Sr}function Dr(){if(null===Er){var e=wr.alternate;e=null!==e?e.memoizedState:null}else e=Er.next;var t=null===Sr?wr.memoizedState:Sr.next;if(null!==t)Sr=t,Er=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Er=e).memoizedState,baseState:Er.baseState,baseQueue:Er.baseQueue,queue:Er.queue,next:null},null===Sr?wr.memoizedState=Sr=e:Sr=Sr.next=e}return Sr}function Or(e,t){return"function"===typeof t?t(e):t}function Fr(e){var t=Dr(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Er,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,u=null,c=a;do{var h=c.lane;if((_r&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,s=r):u=u.next=d,wr.lanes|=h,to|=h}c=c.next}while(null!==c&&c!==a);null===u?s=r:u.next=l,Vt(r,t.memoizedState)||(Oi=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,wr.lanes|=a,to|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Nr(e){var t=Dr(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);Vt(a,t.memoizedState)||(Oi=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ur(){}function Zr(e,t){var n=wr,r=Dr(),i=t(),a=!Vt(r.memoizedState,i);if(a&&(r.memoizedState=i,Oi=!0),r=r.queue,Yr(Gr.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==Sr&&1&Sr.memoizedState.tag){if(n.flags|=2048,jr(9,Hr.bind(null,n,r,i,t),void 0,null),null===qa)throw Error(o(349));0!==(30&_r)||zr(n,t,i)}return i}function zr(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=wr.updateQueue)?(t={lastEffect:null,stores:null},wr.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Hr(e,t,n,r){t.value=n,t.getSnapshot=r,Qr(t)&&wo(e,1,-1)}function Gr(e,t,n){return n((function(){Qr(t)&&wo(e,1,-1)}))}function Qr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vt(e,n)}catch(r){return!0}}function Vr(e){var t=Pr();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:e},t.queue=e,e=e.dispatch=li.bind(null,wr,e),[t.memoizedState,e]}function jr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=wr.updateQueue)?(t={lastEffect:null,stores:null},wr.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Wr(){return Dr().memoizedState}function qr(e,t,n,r){var i=Pr();wr.flags|=e,i.memoizedState=jr(1|t,n,void 0,void 0===r?null:r)}function Jr(e,t,n,r){var i=Dr();r=void 0===r?null:r;var a=void 0;if(null!==Er){var o=Er.memoizedState;if(a=o.destroy,null!==r&&Br(r,o.deps))return void(i.memoizedState=jr(t,n,a,r))}wr.flags|=e,i.memoizedState=jr(1|t,n,a,r)}function Xr(e,t){return qr(8390656,8,e,t)}function Yr(e,t){return Jr(2048,8,e,t)}function Kr(e,t){return Jr(4,2,e,t)}function $r(e,t){return Jr(4,4,e,t)}function ei(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ti(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Jr(4,4,ei.bind(null,t,e),n)}function ni(){}function ri(e,t){var n=Dr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Br(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ii(e,t){var n=Dr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Br(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ai(e,t){var n=Rt;Rt=0!==n&&4>n?n:4,e(!0);var r=br.transition;br.transition={};try{e(!1),t()}finally{Rt=n,br.transition=r}}function oi(){return Dr().memoizedState}function si(e,t,n){var r=_o(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ui(e)?ci(t,n):(hi(e,t,n),null!==(e=wo(e,r,n=bo()))&&di(e,t,r))}function li(e,t,n){var r=_o(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ui(e))ci(t,i);else{hi(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Vt(s,o))return}catch(l){}null!==(e=wo(e,r,n=bo()))&&di(e,t,r)}}function ui(e){var t=e.alternate;return e===wr||null!==t&&t===wr}function ci(e,t){Cr=Mr=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hi(e,t,n){null!==qa&&0!==(1&e.mode)&&0===(2&Wa)?(null===(e=t.interleaved)?(n.next=n,null===dn?dn=[t]:dn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function di(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Bt(e,n)}}var fi={readContext:hn,useCallback:Ir,useContext:Ir,useEffect:Ir,useImperativeHandle:Ir,useInsertionEffect:Ir,useLayoutEffect:Ir,useMemo:Ir,useReducer:Ir,useRef:Ir,useState:Ir,useDebugValue:Ir,useDeferredValue:Ir,useTransition:Ir,useMutableSource:Ir,useSyncExternalStore:Ir,useId:Ir,unstable_isNewReconciler:!1},pi={readContext:hn,useCallback:function(e,t){return Pr().memoizedState=[e,void 0===t?null:t],e},useContext:hn,useEffect:Xr,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qr(4194308,4,ei.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qr(4194308,4,e,t)},useInsertionEffect:function(e,t){return qr(4,2,e,t)},useMemo:function(e,t){var n=Pr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Pr();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=si.bind(null,wr,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Pr().memoizedState=e},useState:Vr,useDebugValue:ni,useDeferredValue:function(e){var t=Vr(e),n=t[0],r=t[1];return Xr((function(){var t=br.transition;br.transition={};try{r(e)}finally{br.transition=t}}),[e]),n},useTransition:function(){var e=Vr(!1),t=e[0];return e=ai.bind(null,e[1]),Pr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=wr,i=Pr();if(Qn){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===qa)throw Error(o(349));0!==(30&_r)||zr(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Xr(Gr.bind(null,r,a,e),[e]),r.flags|=2048,jr(9,Hr.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Pr(),t=qa.identifierPrefix;if(Qn){var n=Fn;t=":"+t+"R"+(n=(On&~(1<<32-xt(On)-1)).toString(32)+n),0<(n=kr++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Tr++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vi={readContext:hn,useCallback:ri,useContext:hn,useEffect:Yr,useImperativeHandle:ti,useInsertionEffect:Kr,useLayoutEffect:$r,useMemo:ii,useReducer:Fr,useRef:Wr,useState:function(){return Fr(Or)},useDebugValue:ni,useDeferredValue:function(e){var t=Fr(Or),n=t[0],r=t[1];return Yr((function(){var t=br.transition;br.transition={};try{r(e)}finally{br.transition=t}}),[e]),n},useTransition:function(){return[Fr(Or)[0],Dr().memoizedState]},useMutableSource:Ur,useSyncExternalStore:Zr,useId:oi,unstable_isNewReconciler:!1},mi={readContext:hn,useCallback:ri,useContext:hn,useEffect:Yr,useImperativeHandle:ti,useInsertionEffect:Kr,useLayoutEffect:$r,useMemo:ii,useReducer:Nr,useRef:Wr,useState:function(){return Nr(Or)},useDebugValue:ni,useDeferredValue:function(e){var t=Nr(Or),n=t[0],r=t[1];return Yr((function(){var t=br.transition;br.transition={};try{r(e)}finally{br.transition=t}}),[e]),n},useTransition:function(){return[Nr(Or)[0],Dr().memoizedState]},useMutableSource:Ur,useSyncExternalStore:Zr,useId:oi,unstable_isNewReconciler:!1};function gi(e,t){try{var n="",r=t;do{n+=$t(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function yi(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var Ai,xi,bi,_i,wi="function"===typeof WeakMap?WeakMap:Map;function Ei(e,t,n){(n=mn(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){co||(co=!0,ho=r),yi(0,t)},n}function Si(e,t,n){(n=mn(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){yi(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){yi(0,t),"function"!==typeof r&&(null===fo?fo=new Set([this]):fo.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Mi(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new wi;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=jo.bind(null,e,t,n),t.then(e,e))}function Ci(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ki(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=mn(-1,1)).tag=2,gn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function Ti(e){e.flags|=4}function Ii(e,t){if(null!==e&&e.child===t.child)return!0;if(0!==(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!==(12854&e.flags)||0!==(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(q)Ai=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)U(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},xi=function(){},bi=function(e,t,n,r,i){if((e=e.memoizedProps)!==r){var a=t.stateNode,o=hr(lr.current);n=z(a,n,e,r,i,o),(t.updateQueue=n)&&Ti(t)}},_i=function(e,t,n,r){n!==r&&Ti(t)};else if(J){Ai=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=Be(a,i.type,i.memoizedProps,i)),U(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=Re(a,i.memoizedProps,i)),U(e,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),Ai(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Bi=function e(t,n,r,i){for(var a=n.child;null!==a;){if(5===a.tag){var o=a.stateNode;r&&i&&(o=Be(o,a.type,a.memoizedProps,a)),ke(t,o)}else if(6===a.tag)o=a.stateNode,r&&i&&(o=Re(o,a.memoizedProps,a)),ke(t,o);else if(4!==a.tag)if(22===a.tag&&null!==a.memoizedState)null!==(o=a.child)&&(o.return=a),e(t,a,!0,!0);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===n)break;for(;null===a.sibling;){if(null===a.return||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};xi=function(e,t){var n=t.stateNode;if(!Ii(e,t)){e=n.containerInfo;var r=Ce(e);Bi(r,t,!1,!1),n.pendingChildren=r,Ti(t),Te(e,r)}},bi=function(e,t,n,r,i){var a=e.stateNode,o=e.memoizedProps;if((e=Ii(e,t))&&o===r)t.stateNode=a;else{var s=t.stateNode,l=hr(lr.current),u=null;o!==r&&(u=z(s,n,o,r,i,l)),e&&null===u?t.stateNode=a:(a=Me(a,u,n,o,r,t,e,s),Z(a,n,r,i,l)&&Ti(t),t.stateNode=a,e?Ti(t):Ai(a,t,!1,!1))}},_i=function(e,t,n,r){n!==r?(e=hr(cr.current),n=hr(lr.current),t.stateNode=G(r,e,n,t),Ti(t)):t.stateNode=e.stateNode}}else xi=function(){},bi=function(){},_i=function(){};function Ri(e,t){if(!Qn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Li(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Pi(e,t,n){var r=t.pendingProps;switch(zn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Li(t),null;case 1:case 17:return pt(t.type)&&vt(),Li(t),null;case 3:return r=t.stateNode,fr(),st(ht),st(ct),Ar(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Kn(t)?Ti(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==jn&&(ko(jn),jn=null))),xi(e,t),Li(t),null;case 5:vr(t),n=hr(cr.current);var i=t.type;if(null!==e&&null!=t.stateNode)bi(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Li(t),null}if(e=hr(lr.current),Kn(t)){if(!X)throw Error(o(175));e=Ge(t.stateNode,t.type,t.memoizedProps,n,e,t,!Vn),t.updateQueue=e,null!==e&&Ti(t)}else{var a=N(i,r,n,e,t);Ai(a,t,!1,!1),t.stateNode=a,Z(a,i,r,n,e)&&Ti(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Li(t),null;case 6:if(e&&null!=t.stateNode)_i(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=hr(cr.current),n=hr(lr.current),Kn(t)){if(!X)throw Error(o(176));if(e=t.stateNode,r=t.memoizedProps,(n=Qe(e,r,t,!Vn))&&null!==(i=Hn))switch(a=0!==(1&i.mode),i.tag){case 3:Ke(i.stateNode.containerInfo,e,r,a);break;case 5:$e(i.type,i.memoizedProps,i.stateNode,e,r,a)}n&&Ti(t)}else t.stateNode=G(r,e,n,t)}return Li(t),null;case 13:if(st(mr),r=t.memoizedState,Qn&&null!==Gn&&0!==(1&t.mode)&&0===(128&t.flags)){for(e=Gn;e;)e=Ue(e);return $n(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Kn(t),null===e){if(!r)throw Error(o(318));if(!X)throw Error(o(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(317));Ve(e,t)}else $n(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Li(t),null}return null!==jn&&(ko(jn),jn=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Kn(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&mr.current)?0===$a&&($a=3):Oo())),null!==t.updateQueue&&(t.flags|=4),Li(t),null);case 4:return fr(),xi(e,t),null===e&&K(t.stateNode.containerInfo),Li(t),null;case 10:return ln(t.type._context),Li(t),null;case 19:if(st(mr),null===(i=t.memoizedState))return Li(t),null;if(r=0!==(128&t.flags),null===(a=i.rendering))if(r)Ri(i,!1);else{if(0!==$a||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=gr(e))){for(t.flags|=128,Ri(i,!1),null!==(e=a.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,r=t.child;null!==r;)i=e,(n=r).flags&=14680066,null===(a=n.alternate)?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return lt(mr,1&mr.current|2),t.child}e=e.sibling}null!==i.tail&&Nt()>so&&(t.flags|=128,r=!0,Ri(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=gr(a))){if(t.flags|=128,r=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Ri(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!Qn)return Li(t),null}else 2*Nt()-i.renderingStartTime>so&&1073741824!==n&&(t.flags|=128,r=!0,Ri(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Nt(),t.sibling=null,e=mr.current,lt(mr,r?1&e|2:1&e),t):(Li(t),null);case 22:case 23:return Ro(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ya)&&(Li(t),q&&6&t.subtreeFlags&&(t.flags|=8192)):Li(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}var Di=s.ReactCurrentOwner,Oi=!1;function Fi(e,t,n,r){t.child=null===e?or(t,null,n,r):ar(t,e.child,n,r)}function Ni(e,t,n,r,i){n=n.render;var a=t.ref;return cn(t,i),r=Rr(e,t,n,r,a,i),n=Lr(),null===e||Oi?(Qn&&n&&Zn(t),t.flags|=1,Fi(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ia(e,t,i))}function Ui(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||$o(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ts(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Zi(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:Kt)(o,r)&&e.ref===t.ref)return ia(e,t,i)}return t.flags|=1,(e=es(a,r)).ref=t.ref,e.return=t,t.child=e}function Zi(e,t,n,r,i){if(null!==e&&Kt(e.memoizedProps,r)&&e.ref===t.ref){if(Oi=!1,0===(e.lanes&i))return t.lanes=e.lanes,ia(e,t,i);0!==(131072&e.flags)&&(Oi=!0)}return Gi(e,t,n,r,i)}function zi(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},lt(Ka,Ya),Ya|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,lt(Ka,Ya),Ya|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,lt(Ka,Ya),Ya|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,lt(Ka,Ya),Ya|=r;return Fi(e,t,i,n),t.child}function Hi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Gi(e,t,n,r,i){var a=pt(n)?dt:ct.current;return a=ft(t,a),cn(t,i),n=Rr(e,t,n,r,a,i),r=Lr(),null===e||Oi?(Qn&&r&&Zn(t),t.flags|=1,Fi(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ia(e,t,i))}function Qi(e,t,n,r,i){if(pt(n)){var a=!0;yt(t)}else a=!1;if(cn(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Mn(t,n,r),kn(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=hn(u):u=ft(t,u=pt(n)?dt:ct.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==u)&&Cn(t,o,r,u),fn=!1;var d=t.memoizedState;o.state=d,xn(t,r,o,i),l=t.memoizedState,s!==r||d!==l||ht.current||fn?("function"===typeof c&&(wn(t,n,c,r),l=t.memoizedState),(s=fn||Sn(t,n,s,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,vn(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:en(t.type,s),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=hn(l):l=ft(t,l=pt(n)?dt:ct.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==l)&&Cn(t,o,r,l),fn=!1,d=t.memoizedState,o.state=d,xn(t,r,o,i);var p=t.memoizedState;s!==h||d!==p||ht.current||fn?("function"===typeof f&&(wn(t,n,f,r),p=t.memoizedState),(u=fn||Sn(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Vi(e,t,n,r,a,i)}function Vi(e,t,n,r,i,a){Hi(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&At(t,n,!1),ia(e,t,a);r=t.stateNode,Di.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ar(t,e.child,null,a),t.child=ar(t,null,s,a)):Fi(e,t,s,a),t.memoizedState=r.state,i&&At(t,n,!0),t.child}function ji(e){var t=e.stateNode;t.pendingContext?mt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mt(0,t.context,!1),dr(e,t.containerInfo)}function Wi(e,t,n,r,i){return $n(),er(i),t.flags|=256,Fi(e,t,n,r),t.child}var qi={dehydrated:null,treeContext:null,retryLane:0};function Ji(e){return{baseLanes:e,cachePool:null}}function Xi(e,t,n){var r,i=t.pendingProps,a=mr.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),lt(mr,1&a),null===e)return Xn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:Fe(e)?t.lanes=8:t.lanes=1073741824,null):(a=i.children,e=i.fallback,s?(i=t.mode,s=t.child,a={mode:"hidden",children:a},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=a):s=rs(a,i,0,null),e=ns(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ji(n),t.memoizedState=qi,e):Yi(t,a));if(null!==(a=e.memoizedState)){if(null!==(r=a.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,ea(e,t,n,Error(o(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,a=t.mode,i=rs({mode:"visible",children:i.children},a,0,null),(s=ns(s,a,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!==(1&t.mode)&&ar(t,e.child,null,n),t.child.memoizedState=Ji(n),t.memoizedState=qi,s);if(0===(1&t.mode))t=ea(e,t,n,null);else if(Fe(r))t=ea(e,t,n,Error(o(419)));else if(i=0!==(n&e.childLanes),Oi||i){if(null!==(i=qa)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(i=0!==(s&(i.suspendedLanes|n))?0:s)&&i!==a.retryLane&&(a.retryLane=i,wo(e,i,-1))}Oo(),t=ea(e,t,n,Error(o(421)))}else Oe(r)?(t.flags|=128,t.child=e.child,t=qo.bind(null,e),Ne(r,t),t=null):(n=a.treeContext,X&&(Gn=He(r),Hn=t,Qn=!0,jn=null,Vn=!1,null!==n&&(Ln[Pn++]=On,Ln[Pn++]=Fn,Ln[Pn++]=Dn,On=n.id,Fn=n.overflow,Dn=t)),(t=Yi(t,t.pendingProps.children)).flags|=4096);return t}return s?(i=$i(e,t,i.children,i.fallback,n),s=t.child,a=e.child.memoizedState,s.memoizedState=null===a?Ji(n):{baseLanes:a.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=qi,i):(n=Ki(e,t,i.children,n),t.memoizedState=null,n)}return s?(i=$i(e,t,i.children,i.fallback,n),s=t.child,a=e.child.memoizedState,s.memoizedState=null===a?Ji(n):{baseLanes:a.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=qi,i):(n=Ki(e,t,i.children,n),t.memoizedState=null,n)}function Yi(e,t){return(t=rs({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ki(e,t,n,r){var i=e.child;return e=i.sibling,n=es(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function $i(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,s={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=es(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=es(o,r):(r=ns(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ea(e,t,n,r){return null!==r&&er(r),ar(t,e.child,null,n),(e=Yi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ta(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),un(e.return,t,n)}function na(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function ra(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Fi(e,t,r.children,n),0!==(2&(r=mr.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ta(e,n,t);else if(19===e.tag)ta(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lt(mr,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===gr(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),na(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===gr(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}na(t,!0,n,null,a);break;case"together":na(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ia(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),to|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=es(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=es(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function aa(e,t){switch(zn(t),t.tag){case 1:return pt(t.type)&&vt(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return fr(),st(ht),st(ct),Ar(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return vr(t),null;case 13:if(st(mr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));$n()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return st(mr),null;case 4:return fr(),null;case 10:return ln(t.type._context),null;case 22:case 23:return Ro(),null;default:return null}}var oa=!1,sa=!1,la="function"===typeof WeakSet?WeakSet:Set,ua=null;function ca(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Vo(e,t,r)}else n.current=null}function ha(e,t,n){try{n()}catch(r){Vo(e,t,r)}}var da=!1;function fa(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ha(t,n,a)}i=i.next}while(i!==r)}}function pa(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function va(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=L(n);else e=n;"function"===typeof t?t(e):t.current=e}}function ma(e,t,n){if(Qt&&"function"===typeof Qt.onCommitFiberUnmount)try{Qt.onCommitFiberUnmount(Gt,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&ha(t,n,a),r=r.next}while(r!==e)}break;case 1:if(ca(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Vo(t,n,o)}break;case 5:ca(t,n);break;case 4:q?Ea(e,t,n):J&&J&&(t=t.stateNode.containerInfo,n=Ce(t),Ie(t,n))}}function ga(e,t,n){for(var r=t;;)if(ma(e,r,n),null===r.child||q&&4===r.tag){if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function ya(e){var t=e.alternate;null!==t&&(e.alternate=null,ya(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Aa(e){return 5===e.tag||3===e.tag||4===e.tag}function xa(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Aa(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ba(e){if(q){e:{for(var t=e.return;null!==t;){if(Aa(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(xe(t),n.flags&=-33),wa(e,n=xa(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,_a(e,n=xa(e),t);break;default:throw Error(o(161))}}}function _a(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ge(n,e,t):de(n,e);else if(4!==r&&null!==(e=e.child))for(_a(e,t,n),e=e.sibling;null!==e;)_a(e,t,n),e=e.sibling}function wa(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?me(n,e,t):he(n,e);else if(4!==r&&null!==(e=e.child))for(wa(e,t,n),e=e.sibling;null!==e;)wa(e,t,n),e=e.sibling}function Ea(e,t,n){for(var r,i,a=t,s=!1;;){if(!s){s=a.return;e:for(;;){if(null===s)throw Error(o(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===a.tag||6===a.tag)ga(e,a,n),i?Ae(r,a.stateNode):ye(r,a.stateNode);else if(18===a.tag)i?Xe(r,a.stateNode):Je(r,a.stateNode);else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(ma(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(s=!1)}a.sibling.return=a.return,a=a.sibling}}function Sa(e,t){if(q){switch(t.tag){case 0:case 11:case 14:case 15:return fa(3,t,t.return),pa(3,t),void fa(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&ve(n,a,i,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(o(162));return n=t.memoizedProps,void fe(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(X&&null!==e&&e.memoizedState.isDehydrated&&We(t.stateNode.containerInfo));case 13:case 19:return void Ma(t)}throw Error(o(163))}switch(t.tag){case 0:case 11:case 14:case 15:return fa(3,t,t.return),pa(3,t),void fa(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void Ma(t);case 3:X&&null!==e&&e.memoizedState.isDehydrated&&We(t.stateNode.containerInfo)}e:if(J){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Ie(t.containerInfo,t.pendingChildren);break e}throw Error(o(163))}}function Ma(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new la),t.forEach((function(t){var r=Jo.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ca(e,t,n){ua=e,ka(e,t,n)}function ka(e,t,n){for(var r=0!==(1&e.mode);null!==ua;){var i=ua,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||oa;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||sa;s=oa;var u=sa;if(oa=o,(sa=l)&&!u)for(ua=i;null!==ua;)l=(o=ua).child,22===o.tag&&null!==o.memoizedState?Ba(i):null!==l?(l.return=o,ua=l):Ba(i);for(;null!==a;)ua=a,ka(a,t,n),a=a.sibling;ua=i,oa=s,sa=u}Ta(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,ua=a):Ta(e)}}function Ta(e){for(;null!==ua;){var t=ua;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:sa||pa(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!sa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&bn(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=L(t.child.stateNode);break;case 1:n=t.child.stateNode}bn(t,s,n)}break;case 5:var l=t.stateNode;null===n&&4&t.flags&&pe(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(X&&null===t.memoizedState){var u=t.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var h=c.dehydrated;null!==h&&qe(h)}}}break;default:throw Error(o(163))}sa||512&t.flags&&va(t)}catch(d){Vo(t,t.return,d)}}if(t===e){ua=null;break}if(null!==(n=t.sibling)){n.return=t.return,ua=n;break}ua=t.return}}function Ia(e){for(;null!==ua;){var t=ua;if(t===e){ua=null;break}var n=t.sibling;if(null!==n){n.return=t.return,ua=n;break}ua=t.return}}function Ba(e){for(;null!==ua;){var t=ua;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{pa(4,t)}catch(l){Vo(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Vo(t,i,l)}}var a=t.return;try{va(t)}catch(l){Vo(t,a,l)}break;case 5:var o=t.return;try{va(t)}catch(l){Vo(t,o,l)}}}catch(l){Vo(t,t.return,l)}if(t===e){ua=null;break}var s=t.sibling;if(null!==s){s.return=t.return,ua=s;break}ua=t.return}}var Ra=0,La=1,Pa=2,Da=3,Oa=4;if("function"===typeof Symbol&&Symbol.for){var Fa=Symbol.for;Ra=Fa("selector.component"),La=Fa("selector.has_pseudo_class"),Pa=Fa("selector.role"),Da=Fa("selector.test_id"),Oa=Fa("selector.text")}function Na(e){var t=Y(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(o(364));return t}if(null===(e=ie(e)))throw Error(o(362));return e.stateNode.current}function Ua(e,t){switch(t.$$typeof){case Ra:if(e.type===t.value)return!0;break;case La:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],a=t[i];if(5!==r.tag||!se(r)){for(;null!=a&&Ua(r,a);)a=t[++i];if(i===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,i),r=r.sibling}}t=!1}return t;case Pa:if(5===e.tag&&le(e.stateNode,t.value))return!0;break;case Oa:if((5===e.tag||6===e.tag)&&(null!==(e=oe(e))&&0<=e.indexOf(t.value)))return!0;break;case Da:if(5===e.tag&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Za(e){switch(e.$$typeof){case Ra:return"<"+(w(e.value)||"Unknown")+">";case La:return":has("+(Za(e)||"")+")";case Pa:return'[role="'+e.value+'"]';case Oa:return'"'+e.value+'"';case Da:return'[data-testname="'+e.value+'"]';default:throw Error(o(365))}}function za(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],a=e[r++],o=t[a];if(5!==i.tag||!se(i)){for(;null!=o&&Ua(i,o);)o=t[++a];if(a===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,a),i=i.sibling}}return n}function Ha(e,t){if(!re)throw Error(o(363));e=za(e=Na(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)se(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var Ga=Math.ceil,Qa=s.ReactCurrentDispatcher,Va=s.ReactCurrentOwner,ja=s.ReactCurrentBatchConfig,Wa=0,qa=null,Ja=null,Xa=0,Ya=0,Ka=ot(0),$a=0,eo=null,to=0,no=0,ro=0,io=null,ao=null,oo=0,so=1/0;function lo(){so=Nt()+500}var uo,co=!1,ho=null,fo=null,po=!1,vo=null,mo=0,go=0,yo=null,Ao=-1,xo=0;function bo(){return 0!==(6&Wa)?Nt():-1!==Ao?Ao:Ao=Nt()}function _o(e){return 0===(1&e.mode)?1:0!==(2&Wa)&&0!==Xa?Xa&-Xa:null!==Yt.transition?(0===xo&&(e=wt,0===(4194240&(wt<<=1))&&(wt=64),xo=e),xo):0!==(e=Rt)?e:$()}function wo(e,t,n){if(50<go)throw go=0,yo=null,Error(o(185));var r=Eo(e,t);return null===r?null:(It(r,t,n),0!==(2&Wa)&&r===qa||(r===qa&&(0===(2&Wa)&&(no|=t),4===$a&&To(r,Xa)),So(r,n),1===t&&0===Wa&&0===(1&e.mode)&&(lo(),Wt&&Xt())),r)}function Eo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function So(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-xt(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=Ct(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=Mt(e,e===qa?Xa:0);if(0===r)null!==n&&Dt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Dt(n),1===t)0===e.tag?function(e){Wt=!0,Jt(e)}(Io.bind(null,e)):Jt(Io.bind(null,e)),te?ne((function(){0===Wa&&Xt()})):Pt(Ut,Xt),n=null;else{switch(Lt(r)){case 1:n=Ut;break;case 4:n=Zt;break;case 16:default:n=zt;break;case 536870912:n=Ht}n=Xo(n,Mo.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Mo(e,t){if(Ao=-1,xo=0,0!==(6&Wa))throw Error(o(327));var n=e.callbackNode;if(Go()&&e.callbackNode!==n)return null;var r=Mt(e,e===qa?Xa:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Fo(e,r);else{t=r;var i=Wa;Wa|=2;var a=Do();for(qa===e&&Xa===t||(lo(),Lo(e,t));;)try{Uo();break}catch(l){Po(e,l)}on(),Qa.current=a,Wa=i,null!==Ja?t=0:(qa=null,Xa=0,t=$a)}if(0!==t){if(2===t&&(0!==(i=kt(e))&&(r=i,t=Co(e,i))),1===t)throw n=eo,Lo(e,0),To(e,r),So(e,Nt()),n;if(6===t)To(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Vt(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Fo(e,r))&&(0!==(a=kt(e))&&(r=a,t=Co(e,a))),1===t))throw n=eo,Lo(e,0),To(e,r),So(e,Nt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Ho(e,ao);break;case 3:if(To(e,r),(130023424&r)===r&&10<(t=oo+500-Nt())){if(0!==Mt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){bo(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Q(Ho.bind(null,e,ao),t);break}Ho(e,ao);break;case 4:if(To(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-xt(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Nt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ga(r/1960))-r)){e.timeoutHandle=Q(Ho.bind(null,e,ao),r);break}Ho(e,ao);break;default:throw Error(o(329))}}}return So(e,Nt()),e.callbackNode===n?Mo.bind(null,e):null}function Co(e,t){var n=io;return e.current.memoizedState.isDehydrated&&(Lo(e,t).flags|=256),2!==(e=Fo(e,t))&&(t=ao,ao=n,null!==t&&ko(t)),e}function ko(e){null===ao?ao=e:ao.push.apply(ao,e)}function To(e,t){for(t&=~ro,t&=~no,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-xt(t),r=1<<n;e[n]=-1,t&=~r}}function Io(e){if(0!==(6&Wa))throw Error(o(327));Go();var t=Mt(e,0);if(0===(1&t))return So(e,Nt()),null;var n=Fo(e,t);if(0!==e.tag&&2===n){var r=kt(e);0!==r&&(t=r,n=Co(e,r))}if(1===n)throw n=eo,Lo(e,0),To(e,t),So(e,Nt()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ho(e,ao),So(e,Nt()),null}function Bo(e){null!==vo&&0===vo.tag&&0===(6&Wa)&&Go();var t=Wa;Wa|=1;var n=ja.transition,r=Rt;try{if(ja.transition=null,Rt=1,e)return e()}finally{Rt=r,ja.transition=n,0===(6&(Wa=t))&&Xt()}}function Ro(){Ya=Ka.current,st(Ka)}function Lo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==j&&(e.timeoutHandle=j,V(n)),null!==Ja)for(n=Ja.return;null!==n;){var r=n;switch(zn(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&vt();break;case 3:fr(),st(ht),st(ct),Ar();break;case 5:vr(r);break;case 4:fr();break;case 13:case 19:st(mr);break;case 10:ln(r.type._context);break;case 22:case 23:Ro()}n=n.return}if(qa=e,Ja=e=es(e.current,null),Xa=Ya=t,$a=0,eo=null,ro=no=to=0,ao=io=null,null!==dn){for(t=0;t<dn.length;t++)if(null!==(r=(n=dn[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}dn=null}return e}function Po(e,t){for(;;){var n=Ja;try{if(on(),xr.current=fi,Mr){for(var r=wr.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Mr=!1}if(_r=0,Sr=Er=wr=null,Cr=!1,kr=0,Va.current=null,null===n||null===n.return){$a=1,eo=t,Ja=null;break}e:{var a=e,s=n.return,l=n,u=t;if(t=Xa,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Ci(s);if(null!==p){p.flags&=-257,ki(p,s,l,0,t),1&p.mode&&Mi(a,c,t),u=c;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(u),t.updateQueue=m}else v.add(u);break e}if(0===(1&t)){Mi(a,c,t),Oo();break e}u=Error(o(426))}else if(Qn&&1&l.mode){var g=Ci(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ki(g,s,l,0,t),er(u);break e}}a=u,4!==$a&&($a=2),null===io?io=[a]:io.push(a),u=gi(u,l),l=s;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,An(l,Ei(0,u,t));break e;case 1:a=u;var y=l.type,A=l.stateNode;if(0===(128&l.flags)&&("function"===typeof y.getDerivedStateFromError||null!==A&&"function"===typeof A.componentDidCatch&&(null===fo||!fo.has(A)))){l.flags|=65536,t&=-t,l.lanes|=t,An(l,Si(l,a,t));break e}}l=l.return}while(null!==l)}zo(n)}catch(x){t=x,Ja===n&&null!==n&&(Ja=n=n.return);continue}break}}function Do(){var e=Qa.current;return Qa.current=fi,null===e?fi:e}function Oo(){0!==$a&&3!==$a&&2!==$a||($a=4),null===qa||0===(268435455&to)&&0===(268435455&no)||To(qa,Xa)}function Fo(e,t){var n=Wa;Wa|=2;var r=Do();for(qa===e&&Xa===t||Lo(e,t);;)try{No();break}catch(i){Po(e,i)}if(on(),Wa=n,Qa.current=r,null!==Ja)throw Error(o(261));return qa=null,Xa=0,$a}function No(){for(;null!==Ja;)Zo(Ja)}function Uo(){for(;null!==Ja&&!Ot();)Zo(Ja)}function Zo(e){var t=uo(e.alternate,e,Ya);e.memoizedProps=e.pendingProps,null===t?zo(e):Ja=t,Va.current=null}function zo(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Pi(n,t,Ya)))return void(Ja=n)}else{if(null!==(n=aa(n,t)))return n.flags&=32767,void(Ja=n);if(null===e)return $a=6,void(Ja=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ja=t);Ja=t=e}while(null!==t);0===$a&&($a=5)}function Ho(e,t){var n=Rt,r=ja.transition;try{ja.transition=null,Rt=1,function(e,t,n){do{Go()}while(null!==vo);if(0!==(6&Wa))throw Error(o(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-xt(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,a),e===qa&&(Ja=qa=null,Xa=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||po||(po=!0,Xo(zt,(function(){return Go(),null}))),a=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||a){a=ja.transition,ja.transition=null;var s=Rt;Rt=1;var l=Wa;Wa|=4,Va.current=null,function(e,t){for(O(e.containerInfo),ua=t;null!==ua;)if(t=(e=ua).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,ua=t;else for(;null!==ua;){e=ua;try{var n=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,a=e.stateNode,s=a.getSnapshotBeforeUpdate(e.elementType===e.type?r:en(e.type,r),i);a.__reactInternalSnapshotBeforeUpdate=s}break;case 3:q&&Se(e.stateNode.containerInfo);break;default:throw Error(o(163))}}catch(l){Vo(e,e.return,l)}if(null!==(t=e.sibling)){t.return=e.return,ua=t;break}ua=e.return}n=da,da=!1}(e,r),function(e,t){for(ua=t;null!==ua;){var n=(t=ua).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e;q?Ea(a,i,t):ga(a,i,t);var o=i.alternate;null!==o&&(o.return=null),i.return=null}catch(b){Vo(i,t,b)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,ua=n;else for(;null!==ua;){t=ua;try{var s=t.flags;if(32&s&&q&&xe(t.stateNode),512&s){var l=t.alternate;if(null!==l){var u=l.ref;null!==u&&("function"===typeof u?u(null):u.current=null)}}if(8192&s)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(oo=Nt())}break;case 22:var h=null!==t.memoizedState,d=t.alternate,f=null!==d&&null!==d.memoizedState;if(n=t,q)e:if(r=n,i=h,a=null,q)for(var p=r;;){if(5===p.tag){if(null===a){a=p;var v=p.stateNode;i?be(v):we(p.stateNode,p.memoizedProps)}}else if(6===p.tag){if(null===a){var m=p.stateNode;i?_e(m):Ee(m,p.memoizedProps)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;a===p&&(a=null),p=p.return}a===p&&(a=null),p.sibling.return=p.return,p=p.sibling}if(h&&!f&&0!==(1&n.mode)){ua=n;for(var g=n.child;null!==g;){for(n=ua=g;null!==ua;){var y=(r=ua).child;switch(r.tag){case 0:case 11:case 14:case 15:fa(4,r,r.return);break;case 1:ca(r,r.return);var A=r.stateNode;if("function"===typeof A.componentWillUnmount){var x=r.return;try{A.props=r.memoizedProps,A.state=r.memoizedState,A.componentWillUnmount()}catch(b){Vo(r,x,b)}}break;case 5:ca(r,r.return);break;case 22:if(null!==r.memoizedState){Ia(n);continue}}null!==y?(y.return=r,ua=y):Ia(n)}g=g.sibling}}}switch(4102&s){case 2:ba(t),t.flags&=-3;break;case 6:ba(t),t.flags&=-3,Sa(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Sa(t.alternate,t);break;case 4:Sa(t.alternate,t)}}catch(b){Vo(t,t.return,b)}if(null!==(n=t.sibling)){n.return=t.return,ua=n;break}ua=t.return}}}(e,r),F(e.containerInfo),e.current=r,Ca(r,e,i),Ft(),Wa=l,Rt=s,ja.transition=a}else e.current=r;if(po&&(po=!1,vo=e,mo=i),a=e.pendingLanes,0===a&&(fo=null),function(e){if(Qt&&"function"===typeof Qt.onCommitFiberRoot)try{Qt.onCommitFiberRoot(Gt,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),So(e,Nt()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(co)throw co=!1,e=ho,ho=null,e;0!==(1&mo)&&0!==e.tag&&Go(),a=e.pendingLanes,0!==(1&a)?e===yo?go++:(go=0,yo=e):go=0,Xt()}(e,t,n)}finally{ja.transition=r,Rt=n}return null}function Go(){if(null!==vo){var e=Lt(mo),t=ja.transition,n=Rt;try{if(ja.transition=null,Rt=16>e?16:e,null===vo)var r=!1;else{if(e=vo,vo=null,mo=0,0!==(6&Wa))throw Error(o(331));var i=Wa;for(Wa|=4,ua=e.current;null!==ua;){var a=ua,s=a.child;if(0!==(16&ua.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(ua=c;null!==ua;){var h=ua;switch(h.tag){case 0:case 11:case 15:fa(8,h,a)}var d=h.child;if(null!==d)d.return=h,ua=d;else for(;null!==ua;){var f=(h=ua).sibling,p=h.return;if(ya(h),h===c){ua=null;break}if(null!==f){f.return=p,ua=f;break}ua=p}}}var v=a.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}ua=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,ua=s;else e:for(;null!==ua;){if(0!==(2048&(a=ua).flags))switch(a.tag){case 0:case 11:case 15:fa(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,ua=y;break e}ua=a.return}}var A=e.current;for(ua=A;null!==ua;){var x=(s=ua).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,ua=x;else e:for(s=A;null!==ua;){if(0!==(2048&(l=ua).flags))try{switch(l.tag){case 0:case 11:case 15:pa(9,l)}}catch(_){Vo(l,l.return,_)}if(l===s){ua=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,ua=b;break e}ua=l.return}}if(Wa=i,Xt(),Qt&&"function"===typeof Qt.onPostCommitFiberRoot)try{Qt.onPostCommitFiberRoot(Gt,e)}catch(_){}r=!0}return r}finally{Rt=n,ja.transition=t}}return!1}function Qo(e,t,n){gn(e,t=Ei(0,t=gi(n,t),1)),t=bo(),null!==(e=Eo(e,1))&&(It(e,1,t),So(e,t))}function Vo(e,t,n){if(3===e.tag)Qo(e,e,n);else for(;null!==t;){if(3===t.tag){Qo(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===fo||!fo.has(r))){gn(t,e=Si(t,e=gi(n,e),1)),e=bo(),null!==(t=Eo(t,1))&&(It(t,1,e),So(t,e));break}}t=t.return}}function jo(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=bo(),e.pingedLanes|=e.suspendedLanes&n,qa===e&&(Xa&n)===n&&(4===$a||3===$a&&(130023424&Xa)===Xa&&500>Nt()-oo?Lo(e,0):ro|=n),So(e,t)}function Wo(e,t){0===t&&(0===(1&e.mode)?t=1:(t=Et,0===(130023424&(Et<<=1))&&(Et=4194304)));var n=bo();null!==(e=Eo(e,t))&&(It(e,t,n),So(e,n))}function qo(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Wo(e,n)}function Jo(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Wo(e,n)}function Xo(e,t){return Pt(e,t)}function Yo(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ko(e,t,n,r){return new Yo(e,t,n,r)}function $o(e){return!(!(e=e.prototype)||!e.isReactComponent)}function es(e,t){var n=e.alternate;return null===n?((n=Ko(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ts(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)$o(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case c:return ns(n.children,i,a,t);case h:s=8,i|=8;break;case d:return(e=Ko(12,n,t,2|i)).elementType=d,e.lanes=a,e;case m:return(e=Ko(13,n,t,i)).elementType=m,e.lanes=a,e;case g:return(e=Ko(19,n,t,i)).elementType=g,e.lanes=a,e;case x:return rs(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case f:s=10;break e;case p:s=9;break e;case v:s=11;break e;case y:s=14;break e;case A:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ko(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function ns(e,t,n,r){return(e=Ko(7,e,r,t)).lanes=n,e}function rs(e,t,n,r){return(e=Ko(22,e,r,t)).elementType=x,e.lanes=n,e.stateNode={},e}function is(e,t,n){return(e=Ko(6,e,null,t)).lanes=n,e}function as(e,t,n){return(t=Ko(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function os(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=j,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tt(0),this.expirationTimes=Tt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tt(0),this.identifierPrefix=r,this.onRecoverableError=i,X&&(this.mutableSourceEagerHydrationData=null)}function ss(e,t,n,r,i,a,o,s,l){return e=new os(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ko(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},pn(a),e}function ls(e){if(!e)return ut;e:{if(S(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(pt(n))return gt(e,n,t)}return t}function us(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return null===(e=k(t))?null:e.stateNode}function cs(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function hs(e,t){cs(e,t),(e=e.alternate)&&cs(e,t)}function ds(e){return null===(e=k(e))?null:e.stateNode}function fs(){return null}return uo=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ht.current)Oi=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Oi=!1,function(e,t,n){switch(t.tag){case 3:ji(t),$n();break;case 5:pr(t);break;case 1:pt(t.type)&&yt(t);break;case 4:dr(t,t.stateNode.containerInfo);break;case 10:sn(0,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(lt(mr,1&mr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Xi(e,t,n):(lt(mr,1&mr.current),null!==(e=ia(e,t,n))?e.sibling:null);lt(mr,1&mr.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return ra(e,t,n);t.flags|=128}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(mr,mr.current),r)break;return null;case 22:case 23:return t.lanes=0,zi(e,t,n)}return ia(e,t,n)}(e,t,n);Oi=0!==(131072&e.flags)}else Oi=!1,Qn&&0!==(1048576&t.flags)&&Un(t,Rn,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=ft(t,ct.current);cn(t,n),i=Rr(null,t,r,e,i,n);var a=Lr();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pt(r)?(a=!0,yt(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,pn(t),i.updater=En,t.stateNode=i,i._reactInternals=t,kn(t,r,e,n),t=Vi(null,t,r,!0,a,n)):(t.tag=0,Qn&&a&&Zn(t),Fi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return $o(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===v)return 11;if(e===y)return 14}return 2}(r),e=en(r,e),i){case 0:t=Gi(null,t,r,e,n);break e;case 1:t=Qi(null,t,r,e,n);break e;case 11:t=Ni(null,t,r,e,n);break e;case 14:t=Ui(null,t,r,en(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Gi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 1:return r=t.type,i=t.pendingProps,Qi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 3:e:{if(ji(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,vn(e,t),xn(t,r,null,n);var s=t.memoizedState;if(r=s.element,X&&a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Wi(e,t,r,n,i=Error(o(423)));break e}if(r!==i){t=Wi(e,t,r,n,i=Error(o(424)));break e}for(X&&(Gn=ze(t.stateNode.containerInfo),Hn=t,Qn=!0,jn=null,Vn=!1),n=or(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if($n(),r===i){t=ia(e,t,n);break e}Fi(e,t,r,n)}t=t.child}return t;case 5:return pr(t),null===e&&Xn(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,H(r,i)?s=null:null!==a&&H(r,a)&&(t.flags|=32),Hi(e,t),Fi(e,t,s,n),t.child;case 6:return null===e&&Xn(t),null;case 13:return Xi(e,t,n);case 4:return dr(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ar(t,null,r,n):Fi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ni(e,t,r,i=t.elementType===r?i:en(r,i),n);case 7:return Fi(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,sn(0,r,s=i.value),null!==a)if(Vt(a.value,s)){if(a.children===i.children&&!ht.current){t=ia(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=mn(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),un(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),un(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}Fi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,cn(t,n),r=r(i=hn(i)),t.flags|=1,Fi(e,t,r,n),t.child;case 14:return i=en(r=t.type,t.pendingProps),Ui(e,t,r,i=en(r.type,i),n);case 15:return Zi(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:en(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pt(r)?(e=!0,yt(t)):e=!1,cn(t,n),Mn(t,r,i),kn(t,r,i,n),Vi(null,t,r,!0,e,n);case 19:return ra(e,t,n);case 22:return zi(e,t,n)}throw Error(o(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(wo(e,134217728,bo()),hs(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=bo(),n=_o(e);wo(e,n,t),hs(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=St(t.pendingLanes);0!==n&&(Bt(t,1|n),So(t,Nt()),0===(6&Wa)&&(lo(),Xt()))}break;case 13:var r=bo();Bo((function(){return wo(e,1,r)})),hs(e,1)}},t.batchedUpdates=function(e,t){var n=Wa;Wa|=1;try{return e(t)}finally{0===(Wa=n)&&(lo(),Wt&&Xt())}},t.createComponentSelector=function(e){return{$$typeof:Ra,value:e}},t.createContainer=function(e,t,n,r,i,a,o){return ss(e,t,!1,null,0,r,0,a,o)},t.createHasPseudoClassSelector=function(e){return{$$typeof:La,value:e}},t.createHydrationContainer=function(e,t,n,r,i,a,o,s,l){return(e=ss(n,r,!0,e,0,a,0,s,l)).context=ls(null),n=e.current,(a=mn(r=bo(),i=_o(n))).callback=void 0!==t&&null!==t?t:null,gn(n,a),e.current.lanes=i,It(e,i,r),So(e,r),e},t.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:u,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:Pa,value:e}},t.createTestNameSelector=function(e){return{$$typeof:Da,value:e}},t.createTextSelector=function(e){return{$$typeof:Oa,value:e}},t.deferredUpdates=function(e){var t=Rt,n=ja.transition;try{return ja.transition=null,Rt=16,e()}finally{Rt=t,ja.transition=n}},t.discreteUpdates=function(e,t,n,r,i){var a=Rt,o=ja.transition;try{return ja.transition=null,Rt=1,e(t,n,r,i)}finally{Rt=a,ja.transition=o,0===Wa&&lo()}},t.findAllNodes=Ha,t.findBoundingRects=function(e,t){if(!re)throw Error(o(363));t=Ha(e,t),e=[];for(var n=0;n<t.length;n++)e.push(ae(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,i=r+n.width,a=n.y,s=a+n.height,l=t-1;0<=l;l--)if(t!==l){var u=e[l],c=u.x,h=c+u.width,d=u.y,f=d+u.height;if(r>=c&&a>=d&&i<=h&&s<=f){e.splice(t,1);break}if(!(r!==c||n.width!==u.width||f<a||d>s)){d>a&&(u.height+=d-a,u.y=a),f<s&&(u.height=s-d),e.splice(t,1);break}if(!(a!==d||n.height!==u.height||h<r||c>i)){c>r&&(u.width+=c-r,u.x=r),h<i&&(u.width=i-c),e.splice(t,1);break}}return e},t.findHostInstance=us,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=C(e))?I(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return us(e)},t.flushControlled=function(e){var t=Wa;Wa|=1;var n=ja.transition,r=Rt;try{ja.transition=null,Rt=1,e()}finally{Rt=r,ja.transition=n,0===(Wa=t)&&(lo(),Xt())}},t.flushPassiveEffects=Go,t.flushSync=Bo,t.focusWithin=function(e,t){if(!re)throw Error(o(363));for(t=za(e=Na(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!se(n)){if(5===n.tag&&ue(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Rt},t.getFindAllNodesFailureDescription=function(e,t){if(!re)throw Error(o(363));var n=0,r=[];e=[Na(e),0];for(var i=0;i<e.length;){var a=e[i++],s=e[i++],l=t[s];if((5!==a.tag||!se(a))&&(Ua(a,l)&&(r.push(Za(l)),++s>n&&(n=s)),s<t.length))for(a=a.child;null!==a;)e.push(a,s),a=a.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Za(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?L(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:ds,findFiberByHostInstance:e.findFiberByHostInstance||fs,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Gt=t.inject(e),Qt=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,r){if(!re)throw Error(o(363));e=Ha(e,t);var i=ce(e,n,r).disconnect;return{disconnect:function(){i()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=Rt;try{return Rt=e,t()}finally{Rt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,r){var i=t.current,a=bo(),o=_o(i);return n=ls(n),null===t.context?t.context=n:t.pendingContext=n,(t=mn(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),gn(i,t),null!==(e=wo(i,o,a))&&yn(e,i,o),o},t}},4585:function(e,t,n){"use strict";e.exports=n(4976)},258:function(e,t,n){"use strict";e.exports=n(3721)},5783:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,A="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function b(e){if(m=!1,x(e),!v)if(null!==r(u))v=!0,L(_);else{var t=r(c);null!==t&&P(b,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,y(M),M=-1),p=!0;var a=f;try{for(x(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!T());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(u)&&i(u),x(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&P(b,h.startTime-n),l=!1}return l}finally{d=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,E=!1,S=null,M=-1,C=5,k=-1;function T(){return!(t.unstable_now()-k<C)}function I(){if(null!==S){var e=t.unstable_now();k=e;var n=!0;try{n=S(!0,e)}finally{n?w():(E=!1,S=null)}}else E=!1}if("function"===typeof A)w=function(){A(I)};else if("undefined"!==typeof MessageChannel){var B=new MessageChannel,R=B.port2;B.port1.onmessage=I,w=function(){R.postMessage(null)}}else w=function(){g(I,0)};function L(e){S=e,E||(E=!0,w())}function P(e,n){M=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,L(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(m?(y(M),M=-1):m=!0,P(b,a-o))):(e.sortIndex=s,n(u,e),v||p||(v=!0,L(_))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},3100:function(e,t,n){"use strict";e.exports=n(5783)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function A(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var x=A.prototype=new y;x.constructor=A,v(x,g.prototype),x.isPureReactComponent=!0;var b=Array.isArray,_=Object.prototype.hasOwnProperty,w={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:w.current}}function M(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+k(l,0):a,b(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),T(o,t,i,"",(function(e){return e}))):null!=o&&(M(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",b(e))for(var u=0;u<e.length;u++){var c=a+k(s=e[u],u);l+=T(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=T(s=s.value,t,i,c=a+k(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function B(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},L={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:L,ReactCurrentOwner:w};t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!M(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=A,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=w.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)_.call(t,u)&&!E.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=M,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:B}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,A="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function b(e){if(m=!1,x(e),!v)if(null!==r(u))v=!0,L(_);else{var t=r(c);null!==t&&P(b,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,y(M),M=-1),p=!0;var a=f;try{for(x(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!T());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(u)&&i(u),x(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&P(b,h.startTime-n),l=!1}return l}finally{d=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,E=!1,S=null,M=-1,C=5,k=-1;function T(){return!(t.unstable_now()-k<C)}function I(){if(null!==S){var e=t.unstable_now();k=e;var n=!0;try{n=S(!0,e)}finally{n?w():(E=!1,S=null)}}else E=!1}if("function"===typeof A)w=function(){A(I)};else if("undefined"!==typeof MessageChannel){var B=new MessageChannel,R=B.port2;B.port1.onmessage=I,w=function(){R.postMessage(null)}}else w=function(){g(I,0)};function L(e){S=e,E||(E=!0,w())}function P(e,n){M=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,L(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(m?(y(M),M=-1):m=!0,P(b,a-o))):(e.sortIndex=s,n(u,e),v||p||(v=!0,L(_))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},7809:function(e,t,n){"use strict";var r=n(8018),i=n(5456),a=n(4807),o=n(7240);function s(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}e.exports=function(e,t,n){if(!o(e))return e;if(Array.isArray(t)&&(t=[].concat.apply([],t).join(".")),"string"!==typeof t)return e;for(var l=r(t,{sep:".",brackets:!0}).filter(s),u=l.length,c=-1,h=e;++c<u;){var d=l[c];c===u-1?a(h[d])&&a(n)?h[d]=i({},h[d],n):h[d]=n:(o(h[d])||(h[d]={}),h=h[d])}return e}},7240:function(e){"use strict";e.exports=function(e){return"undefined"!==typeof e&&null!==e&&("object"===typeof e||"function"===typeof e)}},8018:function(e,t,n){"use strict";var r=n(9955);function i(e,t,n,r){var a=e.indexOf(t,n);return"\\"===e.charAt(a-1)?i(e,t,a+1):a}function a(e,t){return!0===t.keepDoubleQuotes&&'"'===e||(!0===t.keepSingleQuotes&&"'"===e||t.keepQuotes)}function o(e,t,n){return"function"===typeof e.keepEscaping?e.keepEscaping(t,n):!0===e.keepEscaping||"\\"===t[n+1]}e.exports=function(e,t,n){if("string"!==typeof e)throw new TypeError("expected a string");"function"===typeof t&&(n=t,t=null),"string"===typeof t&&(t={sep:t});var s,l=r({sep:"."},t),u=l.quotes||['"',"'","`"];!0===l.brackets?s={"<":">","(":")","[":"]","{":"}"}:l.brackets&&(s=l.brackets);var c,h=[],d=[],f=[""],p=l.sep,v=e.length,m=-1;function g(){if(s&&d.length)return s[d[d.length-1]]}for(;++m<v;){var y=e[m],A=e[m+1],x={val:y,idx:m,arr:f,str:e};if(h.push(x),"\\"!==y){if(s&&s[y]){d.push(y);var b=g(),_=m+1;if(-1!==e.indexOf(b,_+1))for(;d.length&&_<v;){var w=e[++_];if("\\"!==w)if(-1===u.indexOf(w)){if(b=g(),d.length&&-1===e.indexOf(b,_+1))break;s[w]?d.push(w):b===w&&d.pop()}else _=i(e,w,_+1);else w++}if(-1===(c=_)){f[f.length-1]+=y;continue}y=e.slice(m,c+1),x.val=y,x.idx=m=c}if(-1!==u.indexOf(y)){if(-1===(c=i(e,y,m+1))){f[f.length-1]+=y;continue}y=!0===a(y,l)?e.slice(m,c+1):e.slice(m+1,c),x.val=y,x.idx=m=c}"function"===typeof n&&(n(x,h),y=x.val,m=x.idx),x.val!==p||!1===x.split?f[f.length-1]+=x.val:f.push("")}else x.val=!0===o(l,e,m)?y+A:A,x.escaped=!0,"function"===typeof n&&n(x),f[f.length-1]+=x.val,m++}return f}},9955:function(e,t,n){"use strict";var r=n(9105),i=n(7823);function a(e,t){for(var n in t)u(t,n)&&(e[n]=t[n])}function o(e){return e&&"string"===typeof e}function s(e){var t={};for(var n in e)t[n]=e[n];return t}function l(e){return e&&"object"===typeof e||r(e)}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=Object.assign||function(e){if(null===e||"undefined"===typeof e)throw new TypeError("Cannot convert undefined or null to object");l(e)||(e={});for(var t=1;t<arguments.length;t++){var n=arguments[t];o(n)&&(n=s(n)),l(n)&&(a(e,n),i(e,n))}return e}},4924:function(e,t,n){"use strict";var r=n(9728).default,i=n(6690).default,a=n(1655).default,o=n(6389).default;t.o=void 0;var s=function(e){a(n,e);var t=o(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).loadAsync=function(t,n){return new Promise((function(r,i){e.load(t,r,n,i)}))},e}return r(n)}(n(672).GLTFLoader);t.o=s},1561:function(e,t,n){"use strict";var r=n(2791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,c=r[1];return s((function(){i.value=n,i.getSnapshot=t,u(i)&&c({inst:i})}),[e,n,t]),o((function(){return u(i)&&c({inst:i}),e((function(){u(i)&&c({inst:i})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},7248:function(e,t,n){"use strict";e.exports=n(1561)},1621:function(e,t,n){var r={"./bohem.webp":7504,"./bohemImg/1.webp":5820,"./bohemImg/2.webp":7635,"./bohemImg/3.webp":5552,"./farah.webp":5560,"./ikon.webp":5846,"./laila.webp":3489,"./maison.webp":6365,"./merci.webp":7765,"./milda.webp":9108,"./moderngo.webp":4817,"./novel.webp":8345,"./orion.webp":9369,"./teengo.webp":1071,"./test.webp":2090,"./trends.webp":3486,"./viva.webp":6488};function i(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=a,e.exports=i,i.id=1621},7504:function(e,t,n){"use strict";e.exports=n.p+"static/media/bohem.3c2b08b16983e7532863.webp"},5820:function(e,t,n){"use strict";e.exports=n.p+"static/media/1.dc7de22838b6b0861039.webp"},7635:function(e,t,n){"use strict";e.exports=n.p+"static/media/2.b9c7e8b0c6a33e62b185.webp"},5552:function(e,t,n){"use strict";e.exports=n.p+"static/media/3.68bbea6a3559868cb725.webp"},5560:function(e,t,n){"use strict";e.exports=n.p+"static/media/farah.36666724b78c818cf842.webp"},5846:function(e,t,n){"use strict";e.exports=n.p+"static/media/ikon.ca0de0d2d2c384beb227.webp"},3489:function(e,t,n){"use strict";e.exports=n.p+"static/media/laila.a1b66ab38c90bac78afb.webp"},6365:function(e,t,n){"use strict";e.exports=n.p+"static/media/maison.006d56093cdf57e73ec0.webp"},7765:function(e,t,n){"use strict";e.exports=n.p+"static/media/merci.2593061f23e85885235c.webp"},9108:function(e,t,n){"use strict";e.exports=n.p+"static/media/milda.ae531a7be4a7e678a724.webp"},4817:function(e,t,n){"use strict";e.exports=n.p+"static/media/moderngo.57276935d48bb09489ba.webp"},8345:function(e,t,n){"use strict";e.exports=n.p+"static/media/novel.4ca3c6bdb466f63edeb6.webp"},9369:function(e,t,n){"use strict";e.exports=n.p+"static/media/orion.47c9e7089375a03e6838.webp"},1071:function(e,t,n){"use strict";e.exports=n.p+"static/media/teengo.0c2bd558972f78d72c31.webp"},2090:function(e,t,n){"use strict";e.exports=n.p+"static/media/test.49ef1e2dcf18eaa12c79.webp"},3486:function(e,t,n){"use strict";e.exports=n.p+"static/media/trends.810491239778ace886af.webp"},6488:function(e,t,n){"use strict";e.exports=n.p+"static/media/viva.49ef1e2dcf18eaa12c79.webp"},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,n){var r=n(4062);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,n){var r=n(3808),i=n(9617),a=n(4993);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,n){var r=n(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,n){var r=n(8698).default,i=n(6115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var r=n(8698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var r=n(8698).default,i=n(5036);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},7326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},5861:function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,l,"next",e)}function l(e){r(o,i,a,s,l,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return i}})},5671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},5647:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9611),i=n(8814);function a(e,t,n){return a=(0,i.Z)()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&(0,r.Z)(a,n.prototype),a},a.apply(null,arguments)}},3144:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9142);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,r.Z)(i.key),i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},7762:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(181);function i(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}},9388:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(1120),i=n(8814),a=n(2963);function o(e){var t=(0,i.Z)();return function(){var n,i=(0,r.Z)(e);if(t){var o=(0,r.Z)(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return(0,a.Z)(this,n)}}},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9142);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},1752:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1120);function i(){return i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,r.Z)(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},i.apply(this,arguments)}},1120:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},136:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9611);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},8814:function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},2963:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1002),i=n(7326);function a(e,t){if(t&&("object"===(0,r.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}},4165:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(I){c=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),s=new C(r||[]);return a(o,"_invoke",{value:w(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=h;var f={};function p(){}function v(){}function m(){}var g={};c(g,s,(function(){return this}));var y=Object.getPrototypeOf,A=y&&y(y(k([])));A&&A!==t&&n.call(A,s)&&(g=A);var x=m.prototype=p.prototype=Object.create(g);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function i(a,o,s,l){var u=d(e[a],e,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==(0,r.Z)(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,s,l)}),(function(e){i("throw",e,s,l)})):t.resolve(h).then((function(e){c.value=e,s(c)}),(function(e){return i("throw",e,s,l)}))}l(u.arg)}var o;a(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=E(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=d(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=d(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function k(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return v.prototype=m,a(x,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:v,configurable:!0}),v.displayName=c(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},b(_.prototype),c(_.prototype,l,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(h(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(x),c(x,u,"Generator"),c(x,s,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(3878);var i=n(181),a=n(5267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||(0,i.Z)(e,t)||(0,a.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var i=n(9199),a=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},8664:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(1120),i=n(9611);var a=n(5647);function o(e){var t="function"===typeof Map?new Map:void 0;return o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return(0,a.Z)(e,arguments,(0,r.Z)(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),(0,i.Z)(o,e)},o(e)}},672:function(e,t,n){"use strict";n.r(t),n.d(t,{GLTFLoader:function(){return su}});var r,i=n(9439),a=n(1752),o=n(1120),s=n(7762),l=n(5671),u=n(3144),c=n(136),h=n(9388),d=n(8664),f=n(3433),p=n(5861),v=n(7326),m=n(4942),g=n(4165),y="148",A=0,x=1,b=2,_=1,w=2,E=3,S=0,M=1,C=2,k=0,T=1,I=2,B=3,R=4,L=5,P=100,D=101,O=102,F=103,N=104,U=200,Z=201,z=202,H=203,G=204,Q=205,V=206,j=207,W=208,q=209,J=210,X=0,Y=1,K=2,$=3,ee=4,te=5,ne=6,re=7,ie=0,ae=1,oe=2,se=0,le=1,ue=2,ce=3,he=4,de=5,fe=301,pe=302,ve=303,me=304,ge=306,ye=1e3,Ae=1001,xe=1002,be=1003,_e=1004,we=1005,Ee=1006,Se=1007,Me=1008,Ce=1009,ke=1010,Te=1011,Ie=1012,Be=1013,Re=1014,Le=1015,Pe=1016,De=1017,Oe=1018,Fe=1020,Ne=1021,Ue=1022,Ze=1023,ze=1024,He=1025,Ge=1026,Qe=1027,Ve=1028,je=1029,We=1030,qe=1031,Je=1033,Xe=33776,Ye=33777,Ke=33778,$e=33779,et=35840,tt=35841,nt=35842,rt=35843,it=36196,at=37492,ot=37496,st=37808,lt=37809,ut=37810,ct=37811,ht=37812,dt=37813,ft=37814,pt=37815,vt=37816,mt=37817,gt=37818,yt=37819,At=37820,xt=37821,bt=36492,_t=2300,wt=2301,Et=2302,St=2400,Mt=2401,Ct=2402,kt=2500,Tt=3e3,It=3001,Bt=3201,Rt=0,Lt=1,Pt="srgb",Dt="srgb-linear",Ot=7680,Ft=35044,Nt="300 es",Ut=1035,Zt=function(){function e(){(0,l.Z)(this,e)}return(0,u.Z)(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}]),e}(),zt=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Ht=1234567,Gt=Math.PI/180,Qt=180/Math.PI;function Vt(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(zt[255&e]+zt[e>>8&255]+zt[e>>16&255]+zt[e>>24&255]+"-"+zt[255&t]+zt[t>>8&255]+"-"+zt[t>>16&15|64]+zt[t>>24&255]+"-"+zt[63&n|128]+zt[n>>8&255]+"-"+zt[n>>16&255]+zt[n>>24&255]+zt[255&r]+zt[r>>8&255]+zt[r>>16&255]+zt[r>>24&255]).toLowerCase()}function jt(e,t,n){return Math.max(t,Math.min(n,e))}function Wt(e,t){return(e%t+t)%t}function qt(e,t,n){return(1-n)*e+n*t}function Jt(e){return 0===(e&e-1)&&0!==e}function Xt(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Yt(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Kt(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function $t(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var en=Object.freeze({__proto__:null,DEG2RAD:Gt,RAD2DEG:Qt,generateUUID:Vt,clamp:jt,euclideanModulo:Wt,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:qt,damp:function(e,t,n,r){return qt(e,t,1-Math.exp(-n*r))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(Wt(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Ht=e);var t=Ht+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Gt},radToDeg:function(e){return e*Qt},isPowerOfTwo:Jt,ceilPowerOfTwo:Xt,floorPowerOfTwo:Yt,setQuaternionFromProperEuler:function(e,t,n,r,i){var a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),u=a((t+r)/2),c=o((t+r)/2),h=a((t-r)/2),d=o((t-r)/2),f=a((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*c,l*h,l*d,s*u);break;case"YZY":e.set(l*d,s*c,l*h,s*u);break;case"ZXZ":e.set(l*h,l*d,s*c,s*u);break;case"XZX":e.set(s*c,l*p,l*f,s*u);break;case"YXY":e.set(l*f,s*c,l*p,s*u);break;case"ZYZ":e.set(l*p,l*f,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:$t,denormalize:Kt}),tn=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,l.Z)(this,t),t.prototype.isVector2=!0,this.x=e,this.y=n}return(0,u.Z)(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:e,value:(0,g.Z)().mark((function e(){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator),nn=function(){function e(){(0,l.Z)(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}return(0,u.Z)(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,l){var u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],h=n[2],d=n[5],f=n[8],p=r[0],v=r[3],m=r[6],g=r[1],y=r[4],A=r[7],x=r[2],b=r[5],_=r[8];return i[0]=a*p+o*g+s*x,i[3]=a*v+o*y+s*b,i[6]=a*m+o*A+s*_,i[1]=l*p+u*g+c*x,i[4]=l*v+u*y+c*b,i[7]=l*m+u*A+c*_,i[2]=h*p+d*g+f*x,i[5]=h*v+d*y+f*b,i[8]=h*m+d*A+f*_,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-n*i*u+n*o*s+r*i*l-r*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=u*a-o*l,h=o*s-u*i,d=l*i-a*s,f=t*c+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);var p=1/f;return e[0]=c*p,e[1]=(r*l-u*n)*p,e[2]=(o*n-r*a)*p,e[3]=h*p,e[4]=(u*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=d*p,e[7]=(n*s-l*t)*p,e[8]=(a*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,a,o){var s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-r*l,r*s,-r*(-l*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){return this.premultiply(rn.makeScale(e,t)),this}},{key:"rotate",value:function(e){return this.premultiply(rn.makeRotation(-e)),this}},{key:"translate",value:function(e,t){return this.premultiply(rn.makeTranslation(e,t)),this}},{key:"makeTranslation",value:function(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}},{key:"makeRotation",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}},{key:"makeScale",value:function(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}(),rn=new nn;function an(e){for(var t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function on(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function sn(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function ln(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var un=(r={},(0,m.Z)(r,Pt,(0,m.Z)({},Dt,sn)),(0,m.Z)(r,Dt,(0,m.Z)({},Pt,ln)),r),cn={legacyMode:!0,get workingColorSpace(){return Dt},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(un[t]&&void 0!==un[t][n]){var r=un[t][n];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},hn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},dn={r:0,g:0,b:0},fn={h:0,s:0,l:0},pn={h:0,s:0,l:0};function vn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function mn(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var gn,yn=function(e){function t(e,n,r){return(0,l.Z)(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===r?this.set(e):this.setRGB(e,n,r)}return(0,u.Z)(t,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pt;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,cn.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:cn.workingColorSpace;return this.r=e,this.g=t,this.b=n,cn.toWorkingColorSpace(this,r),this}},{key:"setHSL",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:cn.workingColorSpace;if(e=Wt(e,1),t=jt(t,0,1),n=jt(n,0,1),0===t)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+t):n+t-n*t,a=2*n-i;this.r=vn(a,i,e+1/3),this.g=vn(a,i,e),this.b=vn(a,i,e-1/3)}return cn.toWorkingColorSpace(this,r),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pt;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var i,a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,cn.toWorkingColorSpace(this,n),r(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,cn.toWorkingColorSpace(this,n),r(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){var s=parseFloat(i[1])/360,l=parseFloat(i[2])/100,u=parseFloat(i[3])/100;return r(i[4]),this.setHSL(s,l,u,n)}}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var c=t[1],h=c.length;if(3===h)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,cn.toWorkingColorSpace(this,n),this;if(6===h)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,cn.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pt,n=hn[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=sn(e.r),this.g=sn(e.g),this.b=sn(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=ln(e.r),this.g=ln(e.g),this.b=ln(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;return cn.fromWorkingColorSpace(mn(this,dn),e),jt(255*dn.r,0,255)<<16^jt(255*dn.g,0,255)<<8^jt(255*dn.b,0,255)<<0}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cn.workingColorSpace;cn.fromWorkingColorSpace(mn(this,dn),t);var n,r,i=dn.r,a=dn.g,o=dn.b,s=Math.max(i,a,o),l=Math.min(i,a,o),u=(l+s)/2;if(l===s)n=0,r=0;else{var c=s-l;switch(r=u<=.5?c/(s+l):c/(2-s-l),s){case i:n=(a-o)/c+(a<o?6:0);break;case a:n=(o-i)/c+2;break;case o:n=(i-a)/c+4}n/=6}return e.h=n,e.s=r,e.l=u,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cn.workingColorSpace;return cn.fromWorkingColorSpace(mn(this,dn),t),e.r=dn.r,e.g=dn.g,e.b=dn.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;return cn.fromWorkingColorSpace(mn(this,dn),e),e!==Pt?"color(".concat(e," ").concat(dn.r," ").concat(dn.g," ").concat(dn.b,")"):"rgb(".concat(255*dn.r|0,",").concat(255*dn.g|0,",").concat(255*dn.b|0,")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(fn),fn.h+=e,fn.s+=t,fn.l+=n,this.setHSL(fn.h,fn.s,fn.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(fn),e.getHSL(pn);var n=qt(fn.h,pn.h,t),r=qt(fn.s,pn.s,t),i=qt(fn.l,pn.l,t);return this.setHSL(n,r,i),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:e,value:(0,g.Z)().mark((function e(){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);yn.NAMES=hn;var An=function(){function e(){(0,l.Z)(this,e)}return(0,u.Z)(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===gn&&(gn=on("canvas")),gn.width=e.width,gn.height=e.height;var n=gn.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=gn}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var t=on("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var r=n.getImageData(0,0,e.width,e.height),i=r.data,a=0;a<i.length;a++)i[a]=255*sn(i[a]/255);return n.putImageData(r,0,0),t}if(e.data){for(var o=e.data.slice(0),s=0;s<o.length;s++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[s]=Math.floor(255*sn(o[s]/255)):o[s]=sn(o[s]);return{data:o,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}(),xn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,l.Z)(this,e),this.isSource=!0,this.uuid=Vt(),this.data=t,this.version=0}return(0,u.Z)(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},r=this.data;if(null!==r){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)r[a].isDataTexture?i.push(bn(r[a].image)):i.push(bn(r[a]))}else i=bn(r);n.url=i}return t||(e.images[this.uuid]=n),n}}]),e}();function bn(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?An.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var _n=0,wn=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ae,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ae,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ee,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Me,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ze,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Ce,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:n.DEFAULT_ANISOTROPY,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Tt;return(0,l.Z)(this,n),(e=t.call(this)).isTexture=!0,Object.defineProperty((0,v.Z)(e),"id",{value:_n++}),e.uuid=Vt(),e.name="",e.source=new xn(r),e.mipmaps=[],e.mapping=i,e.wrapS=a,e.wrapT=o,e.magFilter=s,e.minFilter=u,e.anisotropy=d,e.format=c,e.internalFormat=null,e.type=h,e.offset=new tn(0,0),e.repeat=new tn(1,1),e.center=new tn(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new nn,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=f,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return(0,u.Z)(n,[{key:"image",get:function(){return this.source.data},set:function(e){this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ye:e.x=e.x-Math.floor(e.x);break;case Ae:e.x=e.x<0?0:1;break;case xe:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ye:e.y=e.y-Math.floor(e.y);break;case Ae:e.y=e.y<0?0:1;break;case xe:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}]),n}(Zt);wn.DEFAULT_IMAGE=null,wn.DEFAULT_MAPPING=300,wn.DEFAULT_ANISOTROPY=1;var En=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,l.Z)(this,t),t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}return(0,u.Z)(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,a=.01,o=.1,s=e.elements,l=s[0],u=s[4],c=s[8],h=s[1],d=s[5],f=s[9],p=s[2],v=s[6],m=s[10];if(Math.abs(u-h)<a&&Math.abs(c-p)<a&&Math.abs(f-v)<a){if(Math.abs(u+h)<o&&Math.abs(c+p)<o&&Math.abs(f+v)<o&&Math.abs(l+d+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(l+1)/2,y=(d+1)/2,A=(m+1)/2,x=(u+h)/4,b=(c+p)/4,_=(f+v)/4;return g>y&&g>A?g<a?(n=0,r=.707106781,i=.707106781):(r=x/(n=Math.sqrt(g)),i=b/n):y>A?y<a?(n=.707106781,r=0,i=.707106781):(n=x/(r=Math.sqrt(y)),i=_/r):A<a?(n=.707106781,r=.707106781,i=0):(n=b/(i=Math.sqrt(A)),r=_/i),this.set(n,r,i,t),this}var w=Math.sqrt((v-f)*(v-f)+(c-p)*(c-p)+(h-u)*(h-u));return Math.abs(w)<.001&&(w=1),this.x=(v-f)/w,this.y=(c-p)/w,this.z=(h-u)/w,this.w=Math.acos((l+d+m-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:e,value:(0,g.Z)().mark((function e(){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator),Sn=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,l.Z)(this,n),(e=t.call(this)).isWebGLRenderTarget=!0,e.width=r,e.height=i,e.depth=1,e.scissor=new En(0,0,r,i),e.scissorTest=!1,e.viewport=new En(0,0,r,i);var o={width:r,height:i,depth:1};return e.texture=new wn(o,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),e.texture.isRenderTargetTexture=!0,e.texture.flipY=!1,e.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,e.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,e.texture.minFilter=void 0!==a.minFilter?a.minFilter:Ee,e.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,e.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,e.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,e.samples=void 0!==a.samples?a.samples:0,e}return(0,u.Z)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;var t=Object.assign({},e.texture.image);return this.texture.source=new xn(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Zt),Mn=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,l.Z)(this,n),(e=t.call(this,null)).isDataArrayTexture=!0,e.image={data:r,width:i,height:a,depth:o},e.magFilter=be,e.minFilter=be,e.wrapR=Ae,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return(0,u.Z)(n)}(wn),Cn=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,l.Z)(this,n),(e=t.call(this,null)).isData3DTexture=!0,e.image={data:r,width:i,height:a,depth:o},e.magFilter=be,e.minFilter=be,e.wrapR=Ae,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return(0,u.Z)(n)}(wn),kn=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,l.Z)(this,t),this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}return(0,u.Z)(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(r/2),c=o(i/2),h=s(n/2),d=s(r/2),f=s(i/2);switch(a){case"XYZ":this._x=h*u*c+l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c-h*d*f;break;case"YXZ":this._x=h*u*c+l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c+h*d*f;break;case"ZXY":this._x=h*u*c-l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c-h*d*f;break;case"ZYX":this._x=h*u*c-l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c+h*d*f;break;case"YZX":this._x=h*u*c+l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c-h*d*f;break;case"XZY":this._x=h*u*c-l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],c=t[10],h=n+o+c;if(h>0){var d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(u-s)*d,this._y=(i-l)*d,this._z=(a-r)*d}else if(n>o&&n>c){var f=2*Math.sqrt(1+n-o-c);this._w=(u-s)/f,this._x=.25*f,this._y=(r+a)/f,this._z=(i+l)/f}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(i-l)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+u)/p}else{var v=2*Math.sqrt(1+c-n-o);this._w=(a-r)/v,this._x=(i+l)/v,this._y=(s+u)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(jt(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+a*o+r*l-i*s,this._y=r*u+a*s+i*o-n*l,this._z=i*u+a*l+n*s-r*o,this._w=a*u-n*o-r*s-i*l,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var l=1-t;return this._w=l*a+t*this._w,this._x=l*n+t*this._x,this._y=l*r+t*this._y,this._z=l*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),c=Math.atan2(u,o),h=Math.sin((1-t)*c)/u,d=Math.sin(t*c)/u;return this._w=a*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=i*h+this._z*d,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:e,value:(0,g.Z)().mark((function e(){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))}],[{key:"slerpFlat",value:function(e,t,n,r,i,a,o){var s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],h=i[a+0],d=i[a+1],f=i[a+2],p=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=l,e[t+2]=u,void(e[t+3]=c);if(1===o)return e[t+0]=h,e[t+1]=d,e[t+2]=f,void(e[t+3]=p);if(c!==p||s!==h||l!==d||u!==f){var v=1-o,m=s*h+l*d+u*f+c*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var A=Math.sqrt(y),x=Math.atan2(A,m*g);v=Math.sin(v*x)/A,o=Math.sin(o*x)/A}var b=o*g;if(s=s*v+h*b,l=l*v+d*b,u=u*v+f*b,c=c*v+p*b,v===1-o){var _=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=_,l*=_,u*=_,c*=_}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],l=n[r+2],u=n[r+3],c=i[a],h=i[a+1],d=i[a+2],f=i[a+3];return e[t]=o*f+u*c+s*d-l*h,e[t+1]=s*f+u*h+l*c-o*d,e[t+2]=l*f+u*d+o*h-s*c,e[t+3]=u*f-o*c-s*h-l*d,e}}]),t}(Symbol.iterator),Tn=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,l.Z)(this,t),t.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}return(0,u.Z)(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(Bn.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(Bn.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*r-o*n,u=s*n+o*t-i*r,c=s*r+i*n-a*t,h=-i*t-a*n-o*r;return this.x=l*s+h*-i+u*-o-c*-a,this.y=u*s+h*-a+c*-i-l*-o,this.z=c*s+h*-o+l*-a-u*-i,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return In.copy(this).projectOnVector(e),this.sub(In)}},{key:"reflect",value:function(e){return this.sub(In.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(jt(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:e,value:(0,g.Z)().mark((function e(){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator),In=new Tn,Bn=new kn,Rn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tn(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tn(-1/0,-1/0,-1/0);(0,l.Z)(this,e),this.isBox3=!0,this.min=t,this.max=n}return(0,u.Z)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],h=e[s+2];u<t&&(t=u),c<n&&(n=c),h<r&&(r=h),u>i&&(i=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),h=e.getZ(s);u<t&&(t=u),c<n&&(n=c),h<r&&(r=h),u>i&&(i=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Pn.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var n=e.geometry;if(void 0!==n)if(t&&void 0!=n.attributes&&void 0!==n.attributes.position)for(var r=n.attributes.position,i=0,a=r.count;i<a;i++)Pn.fromBufferAttribute(r,i).applyMatrix4(e.matrixWorld),this.expandByPoint(Pn);else null===n.boundingBox&&n.computeBoundingBox(),Dn.copy(n.boundingBox),Dn.applyMatrix4(e.matrixWorld),this.union(Dn);for(var o=e.children,s=0,l=o.length;s<l;s++)this.expandByObject(o[s],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Pn),Pn.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Hn),Gn.subVectors(this.max,Hn),On.subVectors(e.a,Hn),Fn.subVectors(e.b,Hn),Nn.subVectors(e.c,Hn),Un.subVectors(Fn,On),Zn.subVectors(Nn,Fn),zn.subVectors(On,Nn);var t=[0,-Un.z,Un.y,0,-Zn.z,Zn.y,0,-zn.z,zn.y,Un.z,0,-Un.x,Zn.z,0,-Zn.x,zn.z,0,-zn.x,-Un.y,Un.x,0,-Zn.y,Zn.x,0,-zn.y,zn.x,0];return!!jn(t,On,Fn,Nn,Gn)&&(!!jn(t=[1,0,0,0,1,0,0,0,1],On,Fn,Nn,Gn)&&(Qn.crossVectors(Un,Zn),jn(t=[Qn.x,Qn.y,Qn.z],On,Fn,Nn,Gn)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return Pn.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Pn).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Ln[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ln[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ln[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ln[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ln[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ln[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ln[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ln[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ln)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),Ln=[new Tn,new Tn,new Tn,new Tn,new Tn,new Tn,new Tn,new Tn],Pn=new Tn,Dn=new Rn,On=new Tn,Fn=new Tn,Nn=new Tn,Un=new Tn,Zn=new Tn,zn=new Tn,Hn=new Tn,Gn=new Tn,Qn=new Tn,Vn=new Tn;function jn(e,t,n,r,i){for(var a=0,o=e.length-3;a<=o;a+=3){Vn.fromArray(e,a);var s=i.x*Math.abs(Vn.x)+i.y*Math.abs(Vn.y)+i.z*Math.abs(Vn.z),l=t.dot(Vn),u=n.dot(Vn),c=r.dot(Vn);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}var Wn=new Rn,qn=new Tn,Jn=new Tn,Xn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tn,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,l.Z)(this,e),this.center=t,this.radius=n}return(0,u.Z)(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):Wn.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;qn.subVectors(e,this.center);var t=qn.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.addScaledVector(qn,r/n),this.radius+=r}return this}},{key:"union",value:function(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Jn.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(qn.copy(e.center).add(Jn)),this.expandByPoint(qn.copy(e.center).sub(Jn))),this)}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Yn=new Tn,Kn=new Tn,$n=new Tn,er=new Tn,tr=new Tn,nr=new Tn,rr=new Tn,ir=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tn,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tn(0,0,-1);(0,l.Z)(this,e),this.origin=t,this.direction=n}return(0,u.Z)(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,Yn)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=Yn.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Yn.copy(this.direction).multiplyScalar(t).add(this.origin),Yn.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){Kn.copy(e).add(t).multiplyScalar(.5),$n.copy(t).sub(e).normalize(),er.copy(this.origin).sub(Kn);var i,a,o,s,l=.5*e.distanceTo(t),u=-this.direction.dot($n),c=er.dot(this.direction),h=-er.dot($n),d=er.lengthSq(),f=Math.abs(1-u*u);if(f>0)if(a=u*c-h,s=l*f,(i=u*h-c)>=0)if(a>=-s)if(a<=s){var p=1/f;o=(i*=p)*(i+u*(a*=p)+2*c)+a*(u*i+a+2*h)+d}else a=l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*h)+d;else a=-l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*h)+d;else a<=-s?o=-(i=Math.max(0,-(-u*l+c)))*i+(a=i>0?-l:Math.min(Math.max(-l,-h),l))*(a+2*h)+d:a<=s?(i=0,o=(a=Math.min(Math.max(-l,-h),l))*(a+2*h)+d):o=-(i=Math.max(0,-(u*l+c)))*i+(a=i>0?l:Math.min(Math.max(-l,-h),l))*(a+2*h)+d;else a=u>0?-l:l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*h)+d;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy($n).multiplyScalar(a).add(Kn),o}},{key:"intersectSphere",value:function(e,t){Yn.subVectors(e.center,this.origin);var n=Yn.dot(this.direction),r=Yn.dot(Yn)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(i=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),n>a||i>r?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),c>=0?(o=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(o=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,Yn)}},{key:"intersectTriangle",value:function(e,t,n,r,i){tr.subVectors(t,e),nr.subVectors(n,e),rr.crossVectors(tr,nr);var a,o=this.direction.dot(rr);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}er.subVectors(this.origin,e);var s=a*this.direction.dot(nr.crossVectors(er,nr));if(s<0)return null;var l=a*this.direction.dot(tr.cross(er));if(l<0)return null;if(s+l>o)return null;var u=-a*er.dot(rr);return u<0?null:this.at(u/o,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),ar=function(){function e(){(0,l.Z)(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return(0,u.Z)(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,l,u,c,h,d,f,p,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=a,m[9]=o,m[13]=s,m[2]=l,m[6]=u,m[10]=c,m[14]=h,m[3]=d,m[7]=f,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/or.setFromMatrixColumn(e,0).length(),i=1/or.setFromMatrixColumn(e,1).length(),a=1/or.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=a*u,d=a*c,f=o*u,p=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=d+f*l,t[5]=h-p*l,t[9]=-o*s,t[2]=p-h*l,t[6]=f+d*l,t[10]=a*s}else if("YXZ"===e.order){var v=s*u,m=s*c,g=l*u,y=l*c;t[0]=v+y*o,t[4]=g*o-m,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=m*o-g,t[6]=y+v*o,t[10]=a*s}else if("ZXY"===e.order){var A=s*u,x=s*c,b=l*u,_=l*c;t[0]=A-_*o,t[4]=-a*c,t[8]=b+x*o,t[1]=x+b*o,t[5]=a*u,t[9]=_-A*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var w=a*u,E=a*c,S=o*u,M=o*c;t[0]=s*u,t[4]=S*l-E,t[8]=w*l+M,t[1]=s*c,t[5]=M*l+w,t[9]=E*l-S,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var C=a*s,k=a*l,T=o*s,I=o*l;t[0]=s*u,t[4]=I-C*c,t[8]=T*c+k,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=k*c+T,t[10]=C-I*c}else if("XZY"===e.order){var B=a*s,R=a*l,L=o*s,P=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=B*c+P,t[5]=a*u,t[9]=R*c-L,t[2]=L*c-R,t[6]=o*u,t[10]=P*c+B}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(lr,e,ur)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return dr.subVectors(e,t),0===dr.lengthSq()&&(dr.z=1),dr.normalize(),cr.crossVectors(n,dr),0===cr.lengthSq()&&(1===Math.abs(n.z)?dr.x+=1e-4:dr.z+=1e-4,dr.normalize(),cr.crossVectors(n,dr)),cr.normalize(),hr.crossVectors(dr,cr),r[0]=cr.x,r[4]=hr.x,r[8]=dr.x,r[1]=cr.y,r[5]=hr.y,r[9]=dr.y,r[2]=cr.z,r[6]=hr.z,r[10]=dr.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],f=n[2],p=n[6],v=n[10],m=n[14],g=n[3],y=n[7],A=n[11],x=n[15],b=r[0],_=r[4],w=r[8],E=r[12],S=r[1],M=r[5],C=r[9],k=r[13],T=r[2],I=r[6],B=r[10],R=r[14],L=r[3],P=r[7],D=r[11],O=r[15];return i[0]=a*b+o*S+s*T+l*L,i[4]=a*_+o*M+s*I+l*P,i[8]=a*w+o*C+s*B+l*D,i[12]=a*E+o*k+s*R+l*O,i[1]=u*b+c*S+h*T+d*L,i[5]=u*_+c*M+h*I+d*P,i[9]=u*w+c*C+h*B+d*D,i[13]=u*E+c*k+h*R+d*O,i[2]=f*b+p*S+v*T+m*L,i[6]=f*_+p*M+v*I+m*P,i[10]=f*w+p*C+v*B+m*D,i[14]=f*E+p*k+v*R+m*O,i[3]=g*b+y*S+A*T+x*L,i[7]=g*_+y*M+A*I+x*P,i[11]=g*w+y*C+A*B+x*D,i[15]=g*E+y*k+A*R+x*O,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+i*s*c-r*l*c-i*o*h+n*l*h+r*o*d-n*s*d)+e[7]*(+t*s*d-t*l*h+i*a*h-r*a*d+r*l*u-i*s*u)+e[11]*(+t*l*c-t*o*d-i*a*c+n*a*d+i*o*u-n*l*u)+e[15]*(-r*o*u-t*s*c+t*o*h+r*a*c-n*a*h+n*s*u)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11],f=e[12],p=e[13],v=e[14],m=e[15],g=c*v*l-p*h*l+p*s*d-o*v*d-c*s*m+o*h*m,y=f*h*l-u*v*l-f*s*d+a*v*d+u*s*m-a*h*m,A=u*p*l-f*c*l+f*o*d-a*p*d-u*o*m+a*c*m,x=f*c*s-u*p*s-f*o*h+a*p*h+u*o*v-a*c*v,b=t*g+n*y+r*A+i*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var _=1/b;return e[0]=g*_,e[1]=(p*h*i-c*v*i-p*r*d+n*v*d+c*r*m-n*h*m)*_,e[2]=(o*v*i-p*s*i+p*r*l-n*v*l-o*r*m+n*s*m)*_,e[3]=(c*s*i-o*h*i-c*r*l+n*h*l+o*r*d-n*s*d)*_,e[4]=y*_,e[5]=(u*v*i-f*h*i+f*r*d-t*v*d-u*r*m+t*h*m)*_,e[6]=(f*s*i-a*v*i-f*r*l+t*v*l+a*r*m-t*s*m)*_,e[7]=(a*h*i-u*s*i+u*r*l-t*h*l-a*r*d+t*s*d)*_,e[8]=A*_,e[9]=(f*c*i-u*p*i-f*n*d+t*p*d+u*n*m-t*c*m)*_,e[10]=(a*p*i-f*o*i+f*n*l-t*p*l-a*n*m+t*o*m)*_,e[11]=(u*o*i-a*c*i-u*n*l+t*c*l+a*n*d-t*o*d)*_,e[12]=x*_,e[13]=(u*p*r-f*c*r+f*n*h-t*p*h-u*n*v+t*c*v)*_,e[14]=(f*o*r-a*p*r-f*n*s+t*p*s+a*n*v-t*o*v)*_,e[15]=(a*c*r-u*o*r+u*n*s-t*c*s-a*n*h+t*o*h)*_,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,l=i*a,u=i*o;return this.set(l*a+n,l*o-r*s,l*s+r*o,0,l*o+r*s,u*o+n,u*s-r*a,0,l*s-r*o,u*s+r*a,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,l=i+i,u=a+a,c=o+o,h=i*l,d=i*u,f=i*c,p=a*u,v=a*c,m=o*c,g=s*l,y=s*u,A=s*c,x=n.x,b=n.y,_=n.z;return r[0]=(1-(p+m))*x,r[1]=(d+A)*x,r[2]=(f-y)*x,r[3]=0,r[4]=(d-A)*b,r[5]=(1-(h+m))*b,r[6]=(v+g)*b,r[7]=0,r[8]=(f+y)*_,r[9]=(v-g)*_,r[10]=(1-(h+p))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=or.set(r[0],r[1],r[2]).length(),a=or.set(r[4],r[5],r[6]).length(),o=or.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],sr.copy(this);var s=1/i,l=1/a,u=1/o;return sr.elements[0]*=s,sr.elements[1]*=s,sr.elements[2]*=s,sr.elements[4]*=l,sr.elements[5]*=l,sr.elements[6]*=l,sr.elements[8]*=u,sr.elements[9]*=u,sr.elements[10]*=u,t.setFromRotationMatrix(sr),n.x=i,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,i,a){var o=this.elements,s=2*i/(t-e),l=2*i/(n-r),u=(t+e)/(t-e),c=(n+r)/(n-r),h=-(a+i)/(a-i),d=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),l=1/(n-r),u=1/(a-i),c=(t+e)*s,h=(n+r)*l,d=(a+i)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}(),or=new Tn,sr=new ar,lr=new Tn(0,0,0),ur=new Tn(1,1,1),cr=new Tn,hr=new Tn,dr=new Tn,fr=new ar,pr=new kn,vr=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;(0,l.Z)(this,t),this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}return(0,u.Z)(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],l=r[5],u=r[9],c=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(jt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-jt(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(jt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-jt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(jt(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-jt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return fr.makeRotationFromQuaternion(e),this.setFromRotationMatrix(fr,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return pr.setFromEuler(this),this.setFromQuaternion(pr,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:e,value:(0,g.Z)().mark((function e(){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))},{key:"toVector3",value:function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}]),t}(Symbol.iterator);vr.DefaultOrder="XYZ",vr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var mr=function(){function e(){(0,l.Z)(this,e),this.mask=1}return(0,u.Z)(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}(),gr=0,yr=new Tn,Ar=new kn,xr=new ar,br=new Tn,_r=new Tn,wr=new Tn,Er=new kn,Sr=new Tn(1,0,0),Mr=new Tn(0,1,0),Cr=new Tn(0,0,1),kr={type:"added"},Tr={type:"removed"},Ir=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;(0,l.Z)(this,n),(e=t.call(this)).isObject3D=!0,Object.defineProperty((0,v.Z)(e),"id",{value:gr++}),e.uuid=Vt(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var r=new Tn,i=new vr,a=new kn,o=new Tn(1,1,1);return i._onChange((function(){a.setFromEuler(i,!1)})),a._onChange((function(){i.setFromQuaternion(a,void 0,!1)})),Object.defineProperties((0,v.Z)(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new ar},normalMatrix:{value:new nn}}),e.matrix=new ar,e.matrixWorld=new ar,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.matrixWorldAutoUpdate=n.DefaultMatrixWorldAutoUpdate,e.layers=new mr,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return(0,u.Z)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return Ar.setFromAxisAngle(e,t),this.quaternion.multiply(Ar),this}},{key:"rotateOnWorldAxis",value:function(e,t){return Ar.setFromAxisAngle(e,t),this.quaternion.premultiply(Ar),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Sr,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Mr,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(Cr,e)}},{key:"translateOnAxis",value:function(e,t){return yr.copy(e).applyQuaternion(this.quaternion),this.position.add(yr.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Sr,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Mr,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(Cr,e)}},{key:"localToWorld",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(xr.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?br.copy(e):br.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),_r.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?xr.lookAt(_r,br,this.up):xr.lookAt(br,_r,this.up),this.quaternion.setFromRotationMatrix(xr),r&&(xr.extractRotation(r.matrixWorld),Ar.setFromRotationMatrix(xr),this.quaternion.premultiply(Ar.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(kr)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Tr)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(Tr)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),xr.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),xr.multiply(e.parent.matrixWorld)),e.applyMatrix4(xr),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getObjectsByProperty",value:function(e,t){var n=[];this[e]===t&&n.push(this);for(var r=0,i=this.children.length;r<i;r++){var a=this.children[r].getObjectsByProperty(e,t);a.length>0&&(n=n.concat(a))}return n}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_r,e,wr),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_r,Er,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++){var i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++){var o=r[i];!0===o.matrixWorldAutoUpdate&&o.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var u=o[s];i(e.shapes,u)}else i(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],h=0,d=this.material.length;h<d;h++)c.push(i(e.materials,this.material[h]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var f=0;f<this.children.length;f++)r.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var v=this.animations[p];r.animations.push(i(e.animations,v))}}if(t){var m=E(e.geometries),g=E(e.materials),y=E(e.textures),A=E(e.images),x=E(e.shapes),b=E(e.skeletons),_=E(e.animations),w=E(e.nodes);m.length>0&&(n.geometries=m),g.length>0&&(n.materials=g),y.length>0&&(n.textures=y),A.length>0&&(n.images=A),x.length>0&&(n.shapes=x),b.length>0&&(n.skeletons=b),_.length>0&&(n.animations=_),w.length>0&&(n.nodes=w)}return n.object=r,n;function E(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(Zt);Ir.DefaultUp=new Tn(0,1,0),Ir.DefaultMatrixAutoUpdate=!0,Ir.DefaultMatrixWorldAutoUpdate=!0;var Br=new Tn,Rr=new Tn,Lr=new Tn,Pr=new Tn,Dr=new Tn,Or=new Tn,Fr=new Tn,Nr=new Tn,Ur=new Tn,Zr=new Tn,zr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tn,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tn,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Tn;(0,l.Z)(this,e),this.a=t,this.b=n,this.c=r}return(0,u.Z)(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Br.subVectors(this.c,this.b),Rr.subVectors(this.a,this.b),.5*Br.cross(Rr).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,i,a){return e.getUV(t,this.a,this.b,this.c,n,r,i,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,i=this.a,a=this.b,o=this.c;Dr.subVectors(a,i),Or.subVectors(o,i),Nr.subVectors(e,i);var s=Dr.dot(Nr),l=Or.dot(Nr);if(s<=0&&l<=0)return t.copy(i);Ur.subVectors(e,a);var u=Dr.dot(Ur),c=Or.dot(Ur);if(u>=0&&c<=u)return t.copy(a);var h=s*c-u*l;if(h<=0&&s>=0&&u<=0)return n=s/(s-u),t.copy(i).addScaledVector(Dr,n);Zr.subVectors(e,o);var d=Dr.dot(Zr),f=Or.dot(Zr);if(f>=0&&d<=f)return t.copy(o);var p=d*l-s*f;if(p<=0&&l>=0&&f<=0)return r=l/(l-f),t.copy(i).addScaledVector(Or,r);var v=u*f-d*c;if(v<=0&&c-u>=0&&d-f>=0)return Fr.subVectors(o,a),r=(c-u)/(c-u+(d-f)),t.copy(a).addScaledVector(Fr,r);var m=1/(v+p+h);return n=p*m,r=h*m,t.copy(i).addScaledVector(Dr,n).addScaledVector(Or,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),Br.subVectors(e,t),r.cross(Br);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){Br.subVectors(r,t),Rr.subVectors(n,t),Lr.subVectors(e,t);var a=Br.dot(Br),o=Br.dot(Rr),s=Br.dot(Lr),l=Rr.dot(Rr),u=Rr.dot(Lr),c=a*l-o*o;if(0===c)return i.set(-2,-1,-1);var h=1/c,d=(l*s-o*u)*h,f=(a*u-o*s)*h;return i.set(1-d-f,f,d)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,Pr),Pr.x>=0&&Pr.y>=0&&Pr.x+Pr.y<=1}},{key:"getUV",value:function(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,Pr),s.set(0,0),s.addScaledVector(i,Pr.x),s.addScaledVector(a,Pr.y),s.addScaledVector(o,Pr.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return Br.subVectors(n,t),Rr.subVectors(e,t),Br.cross(Rr).dot(r)<0}}]),e}(),Hr=0,Gr=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.call(this)).isMaterial=!0,Object.defineProperty((0,v.Z)(e),"id",{value:Hr++}),e.uuid=Vt(),e.name="",e.type="Material",e.blending=T,e.side=S,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=G,e.blendDst=Q,e.blendEquation=P,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=$,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=519,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=Ot,e.stencilZFail=Ot,e.stencilZPass=Ot,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return(0,u.Z)(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==T&&(n.blending=this.blending),this.side!==S&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(Zt),Qr=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this)).isMeshBasicMaterial=!0,r.type="MeshBasicMaterial",r.color=new yn(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=ie,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return(0,u.Z)(n,[{key:"copy",value:function(e){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(Gr),Vr=new Tn,jr=new tn,Wr=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,l.Z)(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=r,this.usage=Ft,this.updateRange={offset:0,count:-1},this.version=0}return(0,u.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)jr.fromBufferAttribute(this,t),jr.applyMatrix3(e),this.setXY(t,jr.x,jr.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)Vr.fromBufferAttribute(this,r),Vr.applyMatrix3(e),this.setXYZ(r,Vr.x,Vr.y,Vr.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)Vr.fromBufferAttribute(this,t),Vr.applyMatrix4(e),this.setXYZ(t,Vr.x,Vr.y,Vr.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Vr.fromBufferAttribute(this,t),Vr.applyNormalMatrix(e),this.setXYZ(t,Vr.x,Vr.y,Vr.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Vr.fromBufferAttribute(this,t),Vr.transformDirection(e),this.setXYZ(t,Vr.x,Vr.y,Vr.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){var t=this.array[e*this.itemSize];return this.normalized&&(t=Kt(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){var t=this.array[e*this.itemSize+1];return this.normalized&&(t=Kt(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){var t=this.array[e*this.itemSize+2];return this.normalized&&(t=Kt(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){var t=this.array[e*this.itemSize+3];return this.normalized&&(t=Kt(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),r=$t(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),r=$t(r,this.array),i=$t(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Ft&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}},{key:"copyColorsArray",value:function(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}},{key:"copyVector2sArray",value:function(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}},{key:"copyVector3sArray",value:function(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}},{key:"copyVector4sArray",value:function(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}]),e}(),qr=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){return(0,l.Z)(this,n),t.call(this,new Uint16Array(e),r,i)}return(0,u.Z)(n)}(Wr),Jr=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){return(0,l.Z)(this,n),t.call(this,new Uint32Array(e),r,i)}return(0,u.Z)(n)}(Wr),Xr=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){return(0,l.Z)(this,n),t.call(this,new Float32Array(e),r,i)}return(0,u.Z)(n)}(Wr),Yr=0,Kr=new ar,$r=new Ir,ei=new Tn,ti=new Rn,ni=new Rn,ri=new Tn,ii=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.call(this)).isBufferGeometry=!0,Object.defineProperty((0,v.Z)(e),"id",{value:Yr++}),e.uuid=Vt(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return(0,u.Z)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(an(e)?Jr:qr)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new nn).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return Kr.makeRotationFromQuaternion(e),this.applyMatrix4(Kr),this}},{key:"rotateX",value:function(e){return Kr.makeRotationX(e),this.applyMatrix4(Kr),this}},{key:"rotateY",value:function(e){return Kr.makeRotationY(e),this.applyMatrix4(Kr),this}},{key:"rotateZ",value:function(e){return Kr.makeRotationZ(e),this.applyMatrix4(Kr),this}},{key:"translate",value:function(e,t,n){return Kr.makeTranslation(e,t,n),this.applyMatrix4(Kr),this}},{key:"scale",value:function(e,t,n){return Kr.makeScale(e,t,n),this.applyMatrix4(Kr),this}},{key:"lookAt",value:function(e){return $r.lookAt(e),$r.updateMatrix(),this.applyMatrix4($r.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ei).negate(),this.translate(ei.x,ei.y,ei.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Xr(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Rn);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Tn(-1/0,-1/0,-1/0),new Tn(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];ti.setFromBufferAttribute(i),this.morphTargetsRelative?(ri.addVectors(this.boundingBox.min,ti.min),this.boundingBox.expandByPoint(ri),ri.addVectors(this.boundingBox.max,ti.max),this.boundingBox.expandByPoint(ri)):(this.boundingBox.expandByPoint(ti.min),this.boundingBox.expandByPoint(ti.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new Xn);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Tn,1/0);if(e){var n=this.boundingSphere.center;if(ti.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];ni.setFromBufferAttribute(a),this.morphTargetsRelative?(ri.addVectors(ti.min,ni.min),ti.expandByPoint(ri),ri.addVectors(ti.max,ni.max),ti.expandByPoint(ri)):(ti.expandByPoint(ni.min),ti.expandByPoint(ni.max))}ti.getCenter(n);for(var o=0,s=0,l=e.count;s<l;s++)ri.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(ri));if(t)for(var u=0,c=t.length;u<c;u++)for(var h=t[u],d=this.morphTargetsRelative,f=0,p=h.count;f<p;f++)ri.fromBufferAttribute(h,f),d&&(ei.fromBufferAttribute(e,f),ri.add(ei)),o=Math.max(o,n.distanceToSquared(ri));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Wr(new Float32Array(4*o),4));for(var s=this.getAttribute("tangent").array,l=[],u=[],c=0;c<o;c++)l[c]=new Tn,u[c]=new Tn;var h=new Tn,d=new Tn,f=new Tn,p=new tn,v=new tn,m=new tn,g=new Tn,y=new Tn,A=this.groups;0===A.length&&(A=[{start:0,count:n.length}]);for(var x=0,b=A.length;x<b;++x)for(var _=A[x],w=_.start,E=w,S=w+_.count;E<S;E+=3)O(n[E+0],n[E+1],n[E+2]);for(var M=new Tn,C=new Tn,k=new Tn,T=new Tn,I=0,B=A.length;I<B;++I)for(var R=A[I],L=R.start,P=L,D=L+R.count;P<D;P+=3)F(n[P+0]),F(n[P+1]),F(n[P+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function O(e,t,n){h.fromArray(r,3*e),d.fromArray(r,3*t),f.fromArray(r,3*n),p.fromArray(a,2*e),v.fromArray(a,2*t),m.fromArray(a,2*n),d.sub(h),f.sub(h),v.sub(p),m.sub(p);var i=1/(v.x*m.y-m.x*v.y);isFinite(i)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(f,-v.y).multiplyScalar(i),y.copy(f).multiplyScalar(v.x).addScaledVector(d,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),u[e].add(y),u[t].add(y),u[n].add(y))}function F(e){k.fromArray(i,3*e),T.copy(k);var t=l[e];M.copy(t),M.sub(k.multiplyScalar(k.dot(t))).normalize(),C.crossVectors(T,t);var n=C.dot(u[e])<0?-1:1;s[4*e]=M.x,s[4*e+1]=M.y,s[4*e+2]=M.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new Wr(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new Tn,o=new Tn,s=new Tn,l=new Tn,u=new Tn,c=new Tn,h=new Tn,d=new Tn;if(e)for(var f=0,p=e.count;f<p;f+=3){var v=e.getX(f+0),m=e.getX(f+1),g=e.getX(f+2);a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),h.subVectors(s,o),d.subVectors(a,o),h.cross(d),l.fromBufferAttribute(n,v),u.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),l.add(h),u.add(h),c.add(h),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(m,u.x,u.y,u.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var y=0,A=t.count;y<A;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),h.subVectors(s,o),d.subVectors(a,o),h.cross(d),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)ri.fromBufferAttribute(e,t),ri.normalize(),e.setXYZ(t,ri.x,ri.y,ri.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0,l=0,u=t.length;l<u;l++){o=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(var c=0;c<r;c++)a[s++]=n[o++]}return new Wr(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,i=this.attributes;for(var a in i){var o=e(i[a],r);t.setAttribute(a,o)}var s=this.morphAttributes;for(var l in s){for(var u=[],c=s[l],h=0,d=c.length;h<d;h++){var f=e(c[h],r);u.push(f)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,v=0,m=p.length;v<m;v++){var g=p[v];t.addGroup(g.start,g.count,g.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i){var o=i[a];e.data.attributes[a]=o.toJSON(e.data)}var s={},l=!1;for(var u in this.morphAttributes){for(var c=this.morphAttributes[u],h=[],d=0,f=c.length;d<f;d++){var p=c[d];h.push(p.toJSON(e.data))}h.length>0&&(s[u]=h,l=!0)}l&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(e.data.groups=JSON.parse(JSON.stringify(v)));var m=this.boundingSphere;return null!==m&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var a=r[i];this.setAttribute(i,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var l=[],u=o[s],c=0,h=u.length;c<h;c++)l.push(u[c].clone(t));this.morphAttributes[s]=l}this.morphTargetsRelative=e.morphTargetsRelative;for(var d=e.groups,f=0,p=d.length;f<p;f++){var v=d[f];this.addGroup(v.start,v.count,v.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Zt),ai=new ar,oi=new ir,si=new Xn,li=new Tn,ui=new Tn,ci=new Tn,hi=new Tn,di=new Tn,fi=new tn,pi=new tn,vi=new tn,mi=new Tn,gi=new Tn,yi=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ii,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Qr;return(0,l.Z)(this,n),(e=t.call(this)).isMesh=!0,e.type="Mesh",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,u.Z)(n,[{key:"copy",value:function(e,t){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}},{key:"getVertexPosition",value:function(e,t){var n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);var o=this.morphTargetInfluences;if(i&&o){di.set(0,0,0);for(var s=0,l=i.length;s<l;s++){var u=o[s],c=i[s];0!==u&&(hi.fromBufferAttribute(c,e),a?di.addScaledVector(hi,u):di.addScaledVector(hi.sub(t),u))}t.add(di)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r&&(null===n.boundingSphere&&n.computeBoundingSphere(),si.copy(n.boundingSphere),si.applyMatrix4(i),!1!==e.ray.intersectsSphere(si)&&(ai.copy(i).invert(),oi.copy(e.ray).applyMatrix4(ai),null===n.boundingBox||!1!==oi.intersectsBox(n.boundingBox)))){var a,o=n.index,s=n.attributes.position,l=n.attributes.uv,u=n.attributes.uv2,c=n.groups,h=n.drawRange;if(null!==o)if(Array.isArray(r))for(var d=0,f=c.length;d<f;d++)for(var p=c[d],v=r[p.materialIndex],m=Math.max(p.start,h.start),g=Math.min(o.count,Math.min(p.start+p.count,h.start+h.count));m<g;m+=3){var y=o.getX(m),A=o.getX(m+1),x=o.getX(m+2);(a=Ai(this,v,e,oi,l,u,y,A,x))&&(a.faceIndex=Math.floor(m/3),a.face.materialIndex=p.materialIndex,t.push(a))}else for(var b=Math.max(0,h.start),_=Math.min(o.count,h.start+h.count);b<_;b+=3){var w=o.getX(b),E=o.getX(b+1),S=o.getX(b+2);(a=Ai(this,r,e,oi,l,u,w,E,S))&&(a.faceIndex=Math.floor(b/3),t.push(a))}else if(void 0!==s)if(Array.isArray(r))for(var M=0,C=c.length;M<C;M++)for(var k=c[M],T=r[k.materialIndex],I=Math.max(k.start,h.start),B=Math.min(s.count,Math.min(k.start+k.count,h.start+h.count));I<B;I+=3){(a=Ai(this,T,e,oi,l,u,I,I+1,I+2))&&(a.faceIndex=Math.floor(I/3),a.face.materialIndex=k.materialIndex,t.push(a))}else for(var R=Math.max(0,h.start),L=Math.min(s.count,h.start+h.count);R<L;R+=3){(a=Ai(this,r,e,oi,l,u,R,R+1,R+2))&&(a.faceIndex=Math.floor(R/3),t.push(a))}}}}]),n}(Ir);function Ai(e,t,n,r,i,a,o,s,l){e.getVertexPosition(o,li),e.getVertexPosition(s,ui),e.getVertexPosition(l,ci);var u=function(e,t,n,r,i,a,o,s){if(null===(t.side===M?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side===S,s)))return null;gi.copy(s),gi.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(gi);return l<n.near||l>n.far?null:{distance:l,point:gi.clone(),object:e}}(e,t,n,r,li,ui,ci,mi);if(u){i&&(fi.fromBufferAttribute(i,o),pi.fromBufferAttribute(i,s),vi.fromBufferAttribute(i,l),u.uv=zr.getUV(mi,li,ui,ci,fi,pi,vi,new tn)),a&&(fi.fromBufferAttribute(a,o),pi.fromBufferAttribute(a,s),vi.fromBufferAttribute(a,l),u.uv2=zr.getUV(mi,li,ui,ci,fi,pi,vi,new tn));var c={a:o,b:s,c:l,normal:new Tn,materialIndex:0};zr.getNormal(li,ui,ci,c.normal),u.face=c}return u}var xi=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;(0,l.Z)(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:i,depth:a,widthSegments:o,heightSegments:s,depthSegments:u};var c=(0,v.Z)(e);o=Math.floor(o),s=Math.floor(s),u=Math.floor(u);var h=[],d=[],f=[],p=[],m=0,g=0;function y(e,t,n,r,i,a,o,s,l,u,v){for(var y=a/l,A=o/u,x=a/2,b=o/2,_=s/2,w=l+1,E=u+1,S=0,M=0,C=new Tn,k=0;k<E;k++)for(var T=k*A-b,I=0;I<w;I++){var B=I*y-x;C[e]=B*r,C[t]=T*i,C[n]=_,d.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=s>0?1:-1,f.push(C.x,C.y,C.z),p.push(I/l),p.push(1-k/u),S+=1}for(var R=0;R<u;R++)for(var L=0;L<l;L++){var P=m+L+w*R,D=m+L+w*(R+1),O=m+(L+1)+w*(R+1),F=m+(L+1)+w*R;h.push(P,D,F),h.push(D,O,F),M+=6}c.addGroup(g,M,v),g+=M,m+=S}return y("z","y","x",-1,-1,a,i,r,u,s,0),y("z","y","x",1,-1,a,i,-r,u,s,1),y("x","z","y",1,1,r,a,i,o,u,2),y("x","z","y",1,-1,r,a,-i,o,u,3),y("x","y","z",1,-1,r,i,a,o,s,4),y("x","y","z",-1,-1,r,i,-a,o,s,5),e.setIndex(h),e.setAttribute("position",new Xr(d,3)),e.setAttribute("normal",new Xr(f,3)),e.setAttribute("uv",new Xr(p,2)),e}return(0,u.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(ii);function bi(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function _i(e){for(var t={},n=0;n<e.length;n++){var r=bi(e[n]);for(var i in r)t[i]=r[i]}return t}function wi(e){return null===e.getRenderTarget()&&e.outputEncoding===It?Pt:Dt}var Ei={clone:bi,merge:_i},Si=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this)).isShaderMaterial=!0,r.type="ShaderMaterial",r.defines={},r.uniforms={},r.uniformsGroups=[],r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&r.setValues(e),r}return(0,u.Z)(n,[{key:"copy",value:function(e){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=bi(e.uniforms),this.uniformsGroups=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=(0,a.Z)((0,o.Z)(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var s={};for(var l in this.extensions)!0===this.extensions[l]&&(s[l]=!0);return Object.keys(s).length>0&&(t.extensions=s),t}}]),n}(Gr),Mi=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.call(this)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new ar,e.projectionMatrix=new ar,e.projectionMatrixInverse=new ar,e}return(0,u.Z)(n,[{key:"copy",value:function(e,t){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){(0,a.Z)((0,o.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){(0,a.Z)((0,o.Z)(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Ir),Ci=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return(0,l.Z)(this,n),(e=t.call(this)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=i,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return(0,u.Z)(n,[{key:"copy",value:function(e,t){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Qt*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Gt*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*Qt*Math.atan(Math.tan(.5*Gt*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*Gt*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var l=this.filmOffset;0!==l&&(i+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=(0,a.Z)((0,o.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(Mi),ki=-90,Ti=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){var a;(0,l.Z)(this,n),(a=t.call(this)).type="CubeCamera",a.renderTarget=i;var o=new Ci(ki,1,e,r);o.layers=a.layers,o.up.set(0,1,0),o.lookAt(1,0,0),a.add(o);var s=new Ci(ki,1,e,r);s.layers=a.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),a.add(s);var u=new Ci(ki,1,e,r);u.layers=a.layers,u.up.set(0,0,-1),u.lookAt(0,1,0),a.add(u);var c=new Ci(ki,1,e,r);c.layers=a.layers,c.up.set(0,0,1),c.lookAt(0,-1,0),a.add(c);var h=new Ci(ki,1,e,r);h.layers=a.layers,h.up.set(0,1,0),h.lookAt(0,0,1),a.add(h);var d=new Ci(ki,1,e,r);return d.layers=a.layers,d.up.set(0,1,0),d.lookAt(0,0,-1),a.add(d),a}return(0,u.Z)(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=(0,i.Z)(this.children,6),a=r[0],o=r[1],s=r[2],l=r[3],u=r[4],c=r[5],h=e.getRenderTarget(),d=e.toneMapping,f=e.xr.enabled;e.toneMapping=se,e.xr.enabled=!1;var p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,a),e.setRenderTarget(n,1),e.render(t,o),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,l),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=p,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(h),e.toneMapping=d,e.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}]),n}(Ir),Ii=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a,o,s,u,c,h,d){var f;return(0,l.Z)(this,n),e=void 0!==e?e:[],r=void 0!==r?r:fe,(f=t.call(this,e,r,i,a,o,s,u,c,h,d)).isCubeTexture=!0,f.flipY=!1,f}return(0,u.Z)(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(wn),Bi=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,l.Z)(this,n),(e=t.call(this,r,r,i)).isWebGLCubeRenderTarget=!0;var a={width:r,height:r,depth:1},o=[a,a,a,a,a,a];return e.texture=new Ii(o,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),e.texture.isRenderTargetTexture=!0,e.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,e.texture.minFilter=void 0!==i.minFilter?i.minFilter:Ee,e}return(0,u.Z)(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new xi(5,5,5),o=new Si({name:"CubemapFromEquirect",uniforms:bi(n),vertexShader:r,fragmentShader:i,side:M,blending:k});o.uniforms.tEquirect.value=t;var s=new yi(a,o),l=t.minFilter;return t.minFilter===Me&&(t.minFilter=Ee),new Ti(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}]),n}(Sn),Ri=new Tn,Li=new Tn,Pi=new nn,Di=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tn(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,l.Z)(this,e),this.isPlane=!0,this.normal=t,this.constant=n}return(0,u.Z)(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=Ri.subVectors(n,t).cross(Li.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(Ri),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||Pi.getNormalMatrix(e),r=this.coplanarPoint(Ri).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Oi=new Xn,Fi=new Tn,Ni=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Di,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Di,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Di,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Di,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Di,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Di;(0,l.Z)(this,e),this.planes=[t,n,r,i,a,o]}return(0,u.Z)(e,[{key:"set",value:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],d=n[9],f=n[10],p=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return t[0].setComponents(o-r,c-s,p-h,y-v).normalize(),t[1].setComponents(o+r,c+s,p+h,y+v).normalize(),t[2].setComponents(o+i,c+l,p+d,y+m).normalize(),t[3].setComponents(o-i,c-l,p-d,y-m).normalize(),t[4].setComponents(o-a,c-u,p-f,y-g).normalize(),t[5].setComponents(o+a,c+u,p+f,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Oi.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Oi)}},{key:"intersectsSprite",value:function(e){return Oi.center.set(0,0,0),Oi.radius=.7071067811865476,Oi.applyMatrix4(e.matrixWorld),this.intersectsSphere(Oi)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(Fi.x=r.normal.x>0?e.max.x:e.min.x,Fi.y=r.normal.y>0?e.max.y:e.min.y,Fi.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Fi)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function Ui(){var e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Zi(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){var a=r.get(t);(!a||a.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);void 0===o?r.set(t,function(t,r){var i,a=t.array,o=t.usage,s=e.createBuffer();if(e.bindBuffer(r,s),e.bufferData(r,a,o),t.onUploadCallback(),a instanceof Float32Array)i=5126;else if(a instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");i=5131}else i=5123;else if(a instanceof Int16Array)i=5122;else if(a instanceof Uint32Array)i=5125;else if(a instanceof Int32Array)i=5124;else if(a instanceof Int8Array)i=5120;else if(a instanceof Uint8Array)i=5121;else{if(!(a instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);i=5121}return{buffer:s,type:i,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(!function(t,r,i){var a=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1),r.onUploadCallback()}(o.buffer,t,i),o.version=t.version)}}}}var zi=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,l.Z)(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:i,widthSegments:a,heightSegments:o};for(var s=r/2,u=i/2,c=Math.floor(a),h=Math.floor(o),d=c+1,f=h+1,p=r/c,v=i/h,m=[],g=[],y=[],A=[],x=0;x<f;x++)for(var b=x*v-u,_=0;_<d;_++){var w=_*p-s;g.push(w,-b,0),y.push(0,0,1),A.push(_/c),A.push(1-x/h)}for(var E=0;E<h;E++)for(var S=0;S<c;S++){var M=S+d*E,C=S+d*(E+1),k=S+1+d*(E+1),T=S+1+d*E;m.push(M,C,T),m.push(C,k,T)}return e.setIndex(m),e.setAttribute("position",new Xr(g,3)),e.setAttribute("normal",new Xr(y,3)),e.setAttribute("uv",new Xr(A,2)),e}return(0,u.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(ii),Hi={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Gi={common:{diffuse:{value:new yn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new nn},uv2Transform:{value:new nn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new tn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new yn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new yn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new nn}},sprite:{diffuse:{value:new yn(16777215)},opacity:{value:1},center:{value:new tn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new nn}}},Qi={basic:{uniforms:_i([Gi.common,Gi.specularmap,Gi.envmap,Gi.aomap,Gi.lightmap,Gi.fog]),vertexShader:Hi.meshbasic_vert,fragmentShader:Hi.meshbasic_frag},lambert:{uniforms:_i([Gi.common,Gi.specularmap,Gi.envmap,Gi.aomap,Gi.lightmap,Gi.emissivemap,Gi.bumpmap,Gi.normalmap,Gi.displacementmap,Gi.fog,Gi.lights,{emissive:{value:new yn(0)}}]),vertexShader:Hi.meshlambert_vert,fragmentShader:Hi.meshlambert_frag},phong:{uniforms:_i([Gi.common,Gi.specularmap,Gi.envmap,Gi.aomap,Gi.lightmap,Gi.emissivemap,Gi.bumpmap,Gi.normalmap,Gi.displacementmap,Gi.fog,Gi.lights,{emissive:{value:new yn(0)},specular:{value:new yn(1118481)},shininess:{value:30}}]),vertexShader:Hi.meshphong_vert,fragmentShader:Hi.meshphong_frag},standard:{uniforms:_i([Gi.common,Gi.envmap,Gi.aomap,Gi.lightmap,Gi.emissivemap,Gi.bumpmap,Gi.normalmap,Gi.displacementmap,Gi.roughnessmap,Gi.metalnessmap,Gi.fog,Gi.lights,{emissive:{value:new yn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Hi.meshphysical_vert,fragmentShader:Hi.meshphysical_frag},toon:{uniforms:_i([Gi.common,Gi.aomap,Gi.lightmap,Gi.emissivemap,Gi.bumpmap,Gi.normalmap,Gi.displacementmap,Gi.gradientmap,Gi.fog,Gi.lights,{emissive:{value:new yn(0)}}]),vertexShader:Hi.meshtoon_vert,fragmentShader:Hi.meshtoon_frag},matcap:{uniforms:_i([Gi.common,Gi.bumpmap,Gi.normalmap,Gi.displacementmap,Gi.fog,{matcap:{value:null}}]),vertexShader:Hi.meshmatcap_vert,fragmentShader:Hi.meshmatcap_frag},points:{uniforms:_i([Gi.points,Gi.fog]),vertexShader:Hi.points_vert,fragmentShader:Hi.points_frag},dashed:{uniforms:_i([Gi.common,Gi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Hi.linedashed_vert,fragmentShader:Hi.linedashed_frag},depth:{uniforms:_i([Gi.common,Gi.displacementmap]),vertexShader:Hi.depth_vert,fragmentShader:Hi.depth_frag},normal:{uniforms:_i([Gi.common,Gi.bumpmap,Gi.normalmap,Gi.displacementmap,{opacity:{value:1}}]),vertexShader:Hi.meshnormal_vert,fragmentShader:Hi.meshnormal_frag},sprite:{uniforms:_i([Gi.sprite,Gi.fog]),vertexShader:Hi.sprite_vert,fragmentShader:Hi.sprite_frag},background:{uniforms:{uvTransform:{value:new nn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Hi.background_vert,fragmentShader:Hi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Hi.backgroundCube_vert,fragmentShader:Hi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Hi.cube_vert,fragmentShader:Hi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Hi.equirect_vert,fragmentShader:Hi.equirect_frag},distanceRGBA:{uniforms:_i([Gi.common,Gi.displacementmap,{referencePosition:{value:new Tn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Hi.distanceRGBA_vert,fragmentShader:Hi.distanceRGBA_frag},shadow:{uniforms:_i([Gi.lights,Gi.fog,{color:{value:new yn(0)},opacity:{value:1}}]),vertexShader:Hi.shadow_vert,fragmentShader:Hi.shadow_frag}};Qi.physical={uniforms:_i([Qi.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new tn(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new yn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new tn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new yn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new yn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Hi.meshphysical_vert,fragmentShader:Hi.meshphysical_frag};var Vi={r:0,b:0,g:0};function ji(e,t,n,r,i,a,o){var s,l,u=new yn(0),c=!0===a?0:1,h=null,d=0,f=null;function p(t,n){t.getRGB(Vi,wi(e)),r.buffers.color.setClear(Vi.r,Vi.g,Vi.b,n,o)}return{getClearColor:function(){return u},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;u.set(e),p(u,c=t)},getClearAlpha:function(){return c},setClearAlpha:function(e){p(u,c=e)},render:function(r,a){var o=!1,v=!0===a.isScene?a.background:null;v&&v.isTexture&&(v=(a.backgroundBlurriness>0?n:t).get(v));var m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(v=null),null===v?p(u,c):v&&v.isColor&&(p(v,1),o=!0),(e.autoClear||o)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===ge)?(void 0===l&&((l=new yi(new xi(1,1,1),new Si({name:"BackgroundCubeMaterial",uniforms:bi(Qi.backgroundCube.uniforms),vertexShader:Qi.backgroundCube.vertexShader,fragmentShader:Qi.backgroundCube.fragmentShader,side:M,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=v,l.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=a.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,l.material.toneMapped=v.encoding!==It,h===v&&d===v.version&&f===e.toneMapping||(l.material.needsUpdate=!0,h=v,d=v.version,f=e.toneMapping),l.layers.enableAll(),r.unshift(l,l.geometry,l.material,0,0,null)):v&&v.isTexture&&(void 0===s&&((s=new yi(new zi(2,2),new Si({name:"BackgroundMaterial",uniforms:bi(Qi.background.uniforms),vertexShader:Qi.background.vertexShader,fragmentShader:Qi.background.fragmentShader,side:S,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(s)),s.material.uniforms.t2D.value=v,s.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,s.material.toneMapped=v.encoding!==It,!0===v.matrixAutoUpdate&&v.updateMatrix(),s.material.uniforms.uvTransform.value.copy(v.matrix),h===v&&d===v.version&&f===e.toneMapping||(s.material.needsUpdate=!0,h=v,d=v.version,f=e.toneMapping),s.layers.enableAll(),r.unshift(s,s.geometry,s.material,0,0,null))}}}function Wi(e,t,n,r){var i=e.getParameter(34921),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},l=f(null),u=l,c=!1;function h(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function f(e){for(var t=[],n=[],r=[],a=0;a<i;a++)t[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){for(var e=u.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function v(e){m(e,0)}function m(n,i){var a=u.newAttributes,o=u.enabledAttributes,s=u.attributeDivisors;(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==i)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function g(){for(var t=u.newAttributes,n=u.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,i,a,o,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,a,o,s):e.vertexAttribIPointer(t,n,i,o,s)}function A(){x(),c=!0,u!==l&&h((u=l).object)}function x(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,d,A,x){var b=!1;if(o){var _=function(t,n,i){var o=!0===i.wireframe,l=s[t.id];void 0===l&&(l={},s[t.id]=l);var u=l[n.id];void 0===u&&(u={},l[n.id]=u);var c=u[o];void 0===c&&(c=f(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),u[o]=c);return c}(A,d,l);u!==_&&h((u=_).object),b=function(e,t,n,r){var i=u.attributes,a=t.attributes,o=0,s=n.getAttributes();for(var l in s){if(s[l].location>=0){var c=i[l],h=a[l];if(void 0===h&&("instanceMatrix"===l&&e.instanceMatrix&&(h=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(h=e.instanceColor)),void 0===c)return!0;if(c.attribute!==h)return!0;if(h&&c.data!==h.data)return!0;o++}}return u.attributesNum!==o||u.index!==r}(i,A,d,x),b&&function(e,t,n,r){var i={},a=t.attributes,o=0,s=n.getAttributes();for(var l in s){if(s[l].location>=0){var c=a[l];void 0===c&&("instanceMatrix"===l&&e.instanceMatrix&&(c=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(c=e.instanceColor));var h={};h.attribute=c,c&&c.data&&(h.data=c.data),i[l]=h,o++}}u.attributes=i,u.attributesNum=o,u.index=r}(i,A,d,x)}else{var w=!0===l.wireframe;u.geometry===A.id&&u.program===d.id&&u.wireframe===w||(u.geometry=A.id,u.program=d.id,u.wireframe=w,b=!0)}null!==x&&n.update(x,34963),(b||c)&&(c=!1,function(i,a,o,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();var l=s.attributes,u=o.getAttributes(),c=a.defaultAttributeValues;for(var h in u){var d=u[h];if(d.location>=0){var f=l[h];if(void 0===f&&("instanceMatrix"===h&&i.instanceMatrix&&(f=i.instanceMatrix),"instanceColor"===h&&i.instanceColor&&(f=i.instanceColor)),void 0!==f){var A=f.normalized,x=f.itemSize,b=n.get(f);if(void 0===b)continue;var _=b.buffer,w=b.type,E=b.bytesPerElement;if(f.isInterleavedBufferAttribute){var S=f.data,M=S.stride,C=f.offset;if(S.isInstancedInterleavedBuffer){for(var k=0;k<d.locationSize;k++)m(d.location+k,S.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=S.meshPerAttribute*S.count)}else for(var T=0;T<d.locationSize;T++)v(d.location+T);e.bindBuffer(34962,_);for(var I=0;I<d.locationSize;I++)y(d.location+I,x/d.locationSize,w,A,M*E,(C+x/d.locationSize*I)*E)}else{if(f.isInstancedBufferAttribute){for(var B=0;B<d.locationSize;B++)m(d.location+B,f.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=f.meshPerAttribute*f.count)}else for(var R=0;R<d.locationSize;R++)v(d.location+R);e.bindBuffer(34962,_);for(var L=0;L<d.locationSize;L++)y(d.location+L,x/d.locationSize,w,A,x*E,x/d.locationSize*L*E)}}else if(void 0!==c){var P=c[h];if(void 0!==P)switch(P.length){case 2:e.vertexAttrib2fv(d.location,P);break;case 3:e.vertexAttrib3fv(d.location,P);break;case 4:e.vertexAttrib4fv(d.location,P);break;default:e.vertexAttrib1fv(d.location,P)}}}}g()}(i,l,d,A),null!==x&&e.bindBuffer(34963,n.get(x).buffer))},reset:A,resetDefaultState:x,dispose:function(){for(var e in A(),s){var t=s[e];for(var n in t){var r=t[n];for(var i in r)d(r[i].object),delete r[i];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var i in r)d(r[i].object),delete r[i];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)d(r[i].object),delete r[i];delete n[e.id]}}},initAttributes:p,enableAttribute:v,disableUnusedAttributes:g}}function qi(e,t,n,r){var i,a=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,o,s){if(0!==s){var l,u;if(a)l=e,u="drawArraysInstanced";else if(u="drawArraysInstancedANGLE",null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](i,r,o,s),n.update(o,i,s)}}}function Ji(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var l=a||t.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),h=e.getParameter(35660),d=e.getParameter(3379),f=e.getParameter(34076),p=e.getParameter(34921),v=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),y=h>0,A=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:A,floatVertexTextures:y&&A,maxSamples:a?e.getParameter(36183):0}}function Xi(e){var t=this,n=null,r=0,i=!1,a=!1,o=new Di,s=new nn,l={value:null,needsUpdate:!1};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(e,n,r,i){var a=null!==e?e.length:0,u=null;if(0!==a){if(u=l.value,!0!==i||null===u){var c=r+4*a,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===u||u.length<c)&&(u=new Float32Array(c));for(var d=0,f=r;d!==a;++d,f+=4)o.copy(e[d]).applyMatrix4(h,s),o.normal.toArray(u,f),u[f+3]=o.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){var o=0!==e.length||t||0!==r||i;return i=t,n=c(e,a,0),r=e.length,o},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1,u()},this.setState=function(t,o,s){var h=t.clippingPlanes,d=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!i||null===h||0===h.length||a&&!f)a?c(null):u();else{var v=a?0:r,m=4*v,g=p.clippingState||null;l.value=g,g=c(h,o,m,s);for(var y=0;y!==m;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=v}}}function Yi(e){var t=new WeakMap;function n(e,t){return t===ve?e.mapping=fe:t===me&&(e.mapping=pe),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var a=i.mapping;if(a===ve||a===me){if(t.has(i))return n(t.get(i).texture,i.mapping);var o=i.image;if(o&&o.height>0){var s=new Bi(o.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}return i},dispose:function(){t=new WeakMap}}}var Ki=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return(0,l.Z)(this,n),(e=t.call(this)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=i,e.top=a,e.bottom=o,e.near=s,e.far=u,e.updateProjectionMatrix(),e}return(0,u.Z)(n,[{key:"copy",value:function(e,t){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=l*this.view.offsetX)+l*this.view.width,s=(o-=u*this.view.offsetY)-u*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=(0,a.Z)((0,o.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(Mi),$i=[.125,.215,.35,.446,.526,.582],ea=20,ta=new Ki,na=new yn,ra=null,ia=(1+Math.sqrt(5))/2,aa=1/ia,oa=[new Tn(1,1,1),new Tn(-1,1,1),new Tn(1,1,-1),new Tn(-1,1,-1),new Tn(0,ia,aa),new Tn(0,ia,-aa),new Tn(aa,0,ia),new Tn(-aa,0,ia),new Tn(ia,aa,0),new Tn(-ia,aa,0)],sa=function(){function e(t){(0,l.Z)(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return(0,u.Z)(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;ra=this._renderer.getRenderTarget(),this._setSize(256);var i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=ha(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=ca(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(ra),e.scissorTest=!1,ua(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===fe||e.mapping===pe?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),ra=this._renderer.getRenderTarget();var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Ee,minFilter:Ee,generateMipmaps:!1,type:Pe,format:Ze,encoding:Tt,depthBuffer:!1},r=la(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=la(e,t,n);var i=this._lodMax,a=function(e){for(var t=[],n=[],r=[],i=e,a=e-4+1+$i.length,o=0;o<a;o++){var s=Math.pow(2,i);n.push(s);var l=1/s;o>e-4?l=$i[o-e+4-1]:0===o&&(l=0),r.push(l);for(var u=1/(s-2),c=-u,h=1+u,d=[c,c,h,c,h,h,c,c,h,h,c,h],f=6,p=6,v=3,m=2,g=1,y=new Float32Array(v*p*f),A=new Float32Array(m*p*f),x=new Float32Array(g*p*f),b=0;b<f;b++){var _=b%3*2/3-1,w=b>2?0:-1,E=[_,w,0,_+2/3,w,0,_+2/3,w+1,0,_,w,0,_+2/3,w+1,0,_,w+1,0];y.set(E,v*p*b),A.set(d,m*p*b);var S=[b,b,b,b,b,b];x.set(S,g*p*b)}var M=new ii;M.setAttribute("position",new Wr(y,v)),M.setAttribute("uv",new Wr(A,m)),M.setAttribute("faceIndex",new Wr(x,g)),t.push(M),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(i);this._sizeLods=a.sizeLods,this._lodPlanes=a.lodPlanes,this._sigmas=a.sigmas,this._blurMaterial=function(e,t,n){var r=new Float32Array(ea),i=new Tn(0,1,0),a=new Si({name:"SphericalGaussianBlur",defines:{n:ea,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:k,depthTest:!1,depthWrite:!1});return a}(i,e,t)}return r}},{key:"_compileMaterial",value:function(e){var t=new yi(this._lodPlanes[0],e);this._renderer.compile(t,ta)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=new Ci(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,u=s.toneMapping;s.getClearColor(na),s.toneMapping=se,s.autoClear=!1;var c=new Qr({name:"PMREM.Background",side:M,depthWrite:!1,depthTest:!1}),h=new yi(new xi,c),d=!1,f=e.background;f?f.isColor&&(c.color.copy(f),e.background=null,d=!0):(c.color.copy(na),d=!0);for(var p=0;p<6;p++){var v=p%3;0===v?(i.up.set(0,a[p],0),i.lookAt(o[p],0,0)):1===v?(i.up.set(0,0,a[p]),i.lookAt(0,o[p],0)):(i.up.set(0,a[p],0),i.lookAt(0,0,o[p]));var m=this._cubeSize;ua(r,v*m,p>2?m:0,m,m),s.setRenderTarget(r),d&&s.render(h,i),s.render(e,i)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=u,s.autoClear=l,e.background=f}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,r=e.mapping===fe||e.mapping===pe;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=ha()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=ca());var i=r?this._cubemapMaterial:this._equirectMaterial,a=new yi(this._lodPlanes[0],i);i.uniforms.envMap.value=e;var o=this._cubeSize;ua(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,ta)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<this._lodPlanes.length;r++){var i=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=oa[(r-1)%oa.length];this._blur(e,r-1,r,i,a)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,a,o){var s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var u=new yi(this._lodPlanes[r],l),c=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,f=i/d,p=isFinite(i)?1+Math.floor(3*f):ea;p>ea&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(ea));for(var v=[],m=0,g=0;g<ea;++g){var y=g/f,A=Math.exp(-y*y/2);v.push(A),0===g?m+=A:g<p&&(m+=2*A)}for(var x=0;x<v.length;x++)v[x]=v[x]/m;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=v,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o);var b=this._lodMax;c.dTheta.value=d,c.mipInt.value=b-n;var _=this._sizeLods[r];ua(t,3*_*(r>b-4?r-b+4:0),4*(this._cubeSize-_),3*_,2*_),s.setRenderTarget(t),s.render(u,ta)}}]),e}();function la(e,t,n){var r=new Sn(e,t,n);return r.texture.mapping=ge,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function ua(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function ca(){return new Si({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:k,depthTest:!1,depthWrite:!1})}function ha(){return new Si({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:k,depthTest:!1,depthWrite:!1})}function da(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){var a=i.mapping,o=a===ve||a===me,s=a===fe||a===pe;if(o||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;var l=t.get(i);return null===n&&(n=new sa(e)),l=o?n.fromEquirectangular(i,l):n.fromCubemap(i,l),t.set(i,l),l.texture}if(t.has(i))return t.get(i).texture;var u=i.image;if(o&&u&&u.height>0||s&&u&&function(e){for(var t=0,n=6,r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(u)){null===n&&(n=new sa(e));var c=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,c),i.addEventListener("dispose",r),c.texture}return null}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function fa(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function pa(e,t,n,r){var i={},a=new WeakMap;function o(e){var s=e.target;for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);s.removeEventListener("dispose",o),delete i[s.id];var u=a.get(s);u&&(t.remove(u),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,i=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var l=0,u=s.length;l<u;l+=3){var c=s[l+0],h=s[l+1],d=s[l+2];n.push(c,h,h,d,d,c)}}else{var f=i.array;o=i.version;for(var p=0,v=f.length/3-1;p<v;p+=3){var m=p+0,g=p+1,y=p+2;n.push(m,g,g,y,y,m)}}var A=new(an(n)?Jr:qr)(n,1);A.version=o;var x=a.get(e);x&&t.remove(x),a.set(e,A)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var i=e.morphAttributes;for(var a in i)for(var o=i[a],s=0,l=o.length;s<l;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function va(e,t,n,r){var i,a,o,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,a,t*o),n.update(r,i,1)},this.renderInstances=function(r,l,u){if(0!==u){var c,h;if(s)c=e,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](i,l,a,r*o,u),n.update(l,i,u)}}}function ma(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function ga(e,t){return e[0]-t[0]}function ya(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Aa(e,t,n){for(var r={},i=new Float32Array(8),a=new WeakMap,o=new En,s=[],l=0;l<8;l++)s[l]=[l,0];return{update:function(l,u,c,h){var d=l.morphTargetInfluences;if(!0===t.isWebGL2){var f=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==f?f.length:0,v=a.get(u);if(void 0===v||v.count!==p){void 0!==v&&v.texture.dispose();var m=void 0!==u.morphAttributes.position,g=void 0!==u.morphAttributes.normal,y=void 0!==u.morphAttributes.color,A=u.morphAttributes.position||[],x=u.morphAttributes.normal||[],b=u.morphAttributes.color||[],_=0;!0===m&&(_=1),!0===g&&(_=2),!0===y&&(_=3);var w=u.attributes.position.count*_,E=1;w>t.maxTextureSize&&(E=Math.ceil(w/t.maxTextureSize),w=t.maxTextureSize);var S=new Float32Array(w*E*4*p),M=new Mn(S,w,E,p);M.type=Le,M.needsUpdate=!0;for(var C=4*_,k=0;k<p;k++)for(var T=A[k],I=x[k],B=b[k],R=w*E*4*k,L=0;L<T.count;L++){var P=L*C;!0===m&&(o.fromBufferAttribute(T,L),S[R+P+0]=o.x,S[R+P+1]=o.y,S[R+P+2]=o.z,S[R+P+3]=0),!0===g&&(o.fromBufferAttribute(I,L),S[R+P+4]=o.x,S[R+P+5]=o.y,S[R+P+6]=o.z,S[R+P+7]=0),!0===y&&(o.fromBufferAttribute(B,L),S[R+P+8]=o.x,S[R+P+9]=o.y,S[R+P+10]=o.z,S[R+P+11]=4===B.itemSize?o.w:1)}v={count:p,texture:M,size:new tn(w,E)},a.set(u,v),u.addEventListener("dispose",(function e(){M.dispose(),a.delete(u),u.removeEventListener("dispose",e)}))}for(var D=0,O=0;O<d.length;O++)D+=d[O];var F=u.morphTargetsRelative?1:1-D;h.getUniforms().setValue(e,"morphTargetBaseInfluence",F),h.getUniforms().setValue(e,"morphTargetInfluences",d),h.getUniforms().setValue(e,"morphTargetsTexture",v.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",v.size)}else{var N=void 0===d?0:d.length,U=r[u.id];if(void 0===U||U.length!==N){U=[];for(var Z=0;Z<N;Z++)U[Z]=[Z,0];r[u.id]=U}for(var z=0;z<N;z++){var H=U[z];H[0]=z,H[1]=d[z]}U.sort(ya);for(var G=0;G<8;G++)G<N&&U[G][1]?(s[G][0]=U[G][0],s[G][1]=U[G][1]):(s[G][0]=Number.MAX_SAFE_INTEGER,s[G][1]=0);s.sort(ga);for(var Q=u.morphAttributes.position,V=u.morphAttributes.normal,j=0,W=0;W<8;W++){var q=s[W],J=q[0],X=q[1];J!==Number.MAX_SAFE_INTEGER&&X?(Q&&u.getAttribute("morphTarget"+W)!==Q[J]&&u.setAttribute("morphTarget"+W,Q[J]),V&&u.getAttribute("morphNormal"+W)!==V[J]&&u.setAttribute("morphNormal"+W,V[J]),i[W]=X,j+=X):(Q&&!0===u.hasAttribute("morphTarget"+W)&&u.deleteAttribute("morphTarget"+W),V&&!0===u.hasAttribute("morphNormal"+W)&&u.deleteAttribute("morphNormal"+W),i[W]=0)}var Y=u.morphTargetsRelative?1:1-j;h.getUniforms().setValue(e,"morphTargetBaseInfluence",Y),h.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function xa(e,t,n,r){var i=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var o=r.render.frame,s=e.geometry,l=t.get(e,s);return i.get(l)!==o&&(t.update(l),i.set(l,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}var ba=new wn,_a=new Mn,wa=new Cn,Ea=new Ii,Sa=[],Ma=[],Ca=new Float32Array(16),ka=new Float32Array(9),Ta=new Float32Array(4);function Ia(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=Sa[i];if(void 0===a&&(a=new Float32Array(i),Sa[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function Ba(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Ra(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function La(e,t){var n=Ma[t];void 0===n&&(n=new Int32Array(t),Ma[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Pa(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Da(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ba(n,t))return;e.uniform2fv(this.addr,t),Ra(n,t)}}function Oa(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Ba(n,t))return;e.uniform3fv(this.addr,t),Ra(n,t)}}function Fa(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ba(n,t))return;e.uniform4fv(this.addr,t),Ra(n,t)}}function Na(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Ba(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Ra(n,t)}else{if(Ba(n,r))return;Ta.set(r),e.uniformMatrix2fv(this.addr,!1,Ta),Ra(n,r)}}function Ua(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Ba(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Ra(n,t)}else{if(Ba(n,r))return;ka.set(r),e.uniformMatrix3fv(this.addr,!1,ka),Ra(n,r)}}function Za(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Ba(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Ra(n,t)}else{if(Ba(n,r))return;Ca.set(r),e.uniformMatrix4fv(this.addr,!1,Ca),Ra(n,r)}}function za(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Ha(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ba(n,t))return;e.uniform2iv(this.addr,t),Ra(n,t)}}function Ga(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Ba(n,t))return;e.uniform3iv(this.addr,t),Ra(n,t)}}function Qa(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ba(n,t))return;e.uniform4iv(this.addr,t),Ra(n,t)}}function Va(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function ja(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ba(n,t))return;e.uniform2uiv(this.addr,t),Ra(n,t)}}function Wa(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Ba(n,t))return;e.uniform3uiv(this.addr,t),Ra(n,t)}}function qa(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ba(n,t))return;e.uniform4uiv(this.addr,t),Ra(n,t)}}function Ja(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||ba,i)}function Xa(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||wa,i)}function Ya(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||Ea,i)}function Ka(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||_a,i)}function $a(e,t){e.uniform1fv(this.addr,t)}function eo(e,t){var n=Ia(t,this.size,2);e.uniform2fv(this.addr,n)}function to(e,t){var n=Ia(t,this.size,3);e.uniform3fv(this.addr,n)}function no(e,t){var n=Ia(t,this.size,4);e.uniform4fv(this.addr,n)}function ro(e,t){var n=Ia(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function io(e,t){var n=Ia(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function ao(e,t){var n=Ia(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function oo(e,t){e.uniform1iv(this.addr,t)}function so(e,t){e.uniform2iv(this.addr,t)}function lo(e,t){e.uniform3iv(this.addr,t)}function uo(e,t){e.uniform4iv(this.addr,t)}function co(e,t){e.uniform1uiv(this.addr,t)}function ho(e,t){e.uniform2uiv(this.addr,t)}function fo(e,t){e.uniform3uiv(this.addr,t)}function po(e,t){e.uniform4uiv(this.addr,t)}function vo(e,t,n){var r=this.cache,i=t.length,a=La(n,i);Ba(r,a)||(e.uniform1iv(this.addr,a),Ra(r,a));for(var o=0;o!==i;++o)n.setTexture2D(t[o]||ba,a[o])}function mo(e,t,n){var r=this.cache,i=t.length,a=La(n,i);Ba(r,a)||(e.uniform1iv(this.addr,a),Ra(r,a));for(var o=0;o!==i;++o)n.setTexture3D(t[o]||wa,a[o])}function go(e,t,n){var r=this.cache,i=t.length,a=La(n,i);Ba(r,a)||(e.uniform1iv(this.addr,a),Ra(r,a));for(var o=0;o!==i;++o)n.setTextureCube(t[o]||Ea,a[o])}function yo(e,t,n){var r=this.cache,i=t.length,a=La(n,i);Ba(r,a)||(e.uniform1iv(this.addr,a),Ra(r,a));for(var o=0;o!==i;++o)n.setTexture2DArray(t[o]||_a,a[o])}var Ao=(0,u.Z)((function e(t,n,r){(0,l.Z)(this,e),this.id=t,this.addr=r,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Pa;case 35664:return Da;case 35665:return Oa;case 35666:return Fa;case 35674:return Na;case 35675:return Ua;case 35676:return Za;case 5124:case 35670:return za;case 35667:case 35671:return Ha;case 35668:case 35672:return Ga;case 35669:case 35673:return Qa;case 5125:return Va;case 36294:return ja;case 36295:return Wa;case 36296:return qa;case 35678:case 36198:case 36298:case 36306:case 35682:return Ja;case 35679:case 36299:case 36307:return Xa;case 35680:case 36300:case 36308:case 36293:return Ya;case 36289:case 36303:case 36311:case 36292:return Ka}}(n.type)})),xo=(0,u.Z)((function e(t,n,r){(0,l.Z)(this,e),this.id=t,this.addr=r,this.cache=[],this.size=n.size,this.setValue=function(e){switch(e){case 5126:return $a;case 35664:return eo;case 35665:return to;case 35666:return no;case 35674:return ro;case 35675:return io;case 35676:return ao;case 5124:case 35670:return oo;case 35667:case 35671:return so;case 35668:case 35672:return lo;case 35669:case 35673:return uo;case 5125:return co;case 36294:return ho;case 36295:return fo;case 36296:return po;case 35678:case 36198:case 36298:case 36306:case 35682:return vo;case 35679:case 36299:case 36307:return mo;case 35680:case 36300:case 36308:case 36293:return go;case 36289:case 36303:case 36311:case 36292:return yo}}(n.type)})),bo=function(){function e(t){(0,l.Z)(this,e),this.id=t,this.seq=[],this.map={}}return(0,u.Z)(e,[{key:"setValue",value:function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}}}]),e}(),_o=/(\w+)(\])?(\[|\.)?/g;function wo(e,t){e.seq.push(t),e.map[t.id]=t}function Eo(e,t,n){var r=e.name,i=r.length;for(_o.lastIndex=0;;){var a=_o.exec(r),o=_o.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===i){wo(n,void 0===u?new Ao(s,e,t):new xo(s,e,t));break}var c=n.map[s];void 0===c&&wo(n,c=new bo(s)),n=c}}var So=function(){function e(t,n){(0,l.Z)(this,e),this.seq=[],this.map={};for(var r=t.getProgramParameter(n,35718),i=0;i<r;++i){var a=t.getActiveUniform(n,i);Eo(a,t.getUniformLocation(n,a.name),this)}}return(0,u.Z)(e,[{key:"setValue",value:function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)}},{key:"setOptional",value:function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)}}],[{key:"upload",value:function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}}},{key:"seqWithValue",value:function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n}}]),e}();function Mo(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}var Co=0;function ko(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";var a=/ERROR: 0:(\d+)/.exec(i);if(a){var o=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){for(var n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length),o=i;o<a;o++){var s=o+1;r.push("".concat(s===t?">":" "," ").concat(s,": ").concat(n[o]))}return r.join("\n")}(e.getShaderSource(t),o)}return i}function To(e,t){var n=function(e){switch(e){case Tt:return["Linear","( value )"];case It:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Io(e,t){var n;switch(t){case le:n="Linear";break;case ue:n="Reinhard";break;case ce:n="OptimizedCineon";break;case he:n="ACESFilmic";break;case de:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Bo(e){return""!==e}function Ro(e,t){var n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Lo(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Po=/^[ \t]*#include +<([\w\d./]+)>/gm;function Do(e){return e.replace(Po,Oo)}function Oo(e,t){var n=Hi[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Do(n)}var Fo=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function No(e){return e.replace(Fo,Uo)}function Uo(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function Zo(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function zo(e,t,n,r){var i,a,o=e.getContext(),s=n.defines,l=n.vertexShader,u=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===_?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===w?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===E&&(t="SHADOWMAP_TYPE_VSM"),t}(n),h=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case fe:case pe:t="ENVMAP_TYPE_CUBE";break;case ge:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),d=function(e){var t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===pe&&(t="ENVMAP_MODE_REFRACTION");return t}(n),f=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case ie:t="ENVMAP_BLENDING_MULTIPLY";break;case ae:t="ENVMAP_BLENDING_MIX";break;case oe:t="ENVMAP_BLENDING_ADD"}return t}(n),p=function(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),v=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Bo).join("\n")}(n),m=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),g=o.createProgram(),y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=[m].filter(Bo).join("\n")).length>0&&(i+="\n"),(a=[v,m].filter(Bo).join("\n")).length>0&&(a+="\n")):(i=[Zo(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Bo).join("\n"),a=[v,Zo(n),"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",n.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==se?"#define TONE_MAPPING":"",n.toneMapping!==se?Hi.tonemapping_pars_fragment:"",n.toneMapping!==se?Io("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Hi.encodings_pars_fragment,To("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Bo).join("\n")),l=Lo(l=Ro(l=Do(l),n),n),u=Lo(u=Ro(u=Do(u),n),n),l=No(l),u=No(u),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",i=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#define varying in",n.glslVersion===Nt?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Nt?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var A,x,b=y+a+u,S=Mo(o,35633,y+i+l),M=Mo(o,35632,b);if(o.attachShader(g,S),o.attachShader(g,M),void 0!==n.index0AttributeName?o.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),e.debug.checkShaderErrors){var C=o.getProgramInfoLog(g).trim(),k=o.getShaderInfoLog(S).trim(),T=o.getShaderInfoLog(M).trim(),I=!0,B=!0;if(!1===o.getProgramParameter(g,35714)){I=!1;var R=ko(o,S,"vertex"),L=ko(o,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(g,35715)+"\n\nProgram Info Log: "+C+"\n"+R+"\n"+L)}else""!==C?console.warn("THREE.WebGLProgram: Program Info Log:",C):""!==k&&""!==T||(B=!1);B&&(this.diagnostics={runnable:I,programLog:C,vertexShader:{log:k,prefix:i},fragmentShader:{log:T,prefix:a}})}return o.deleteShader(S),o.deleteShader(M),this.getUniforms=function(){return void 0===A&&(A=new So(o,g)),A},this.getAttributes=function(){return void 0===x&&(x=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var a=e.getActiveAttrib(t,i),o=a.name,s=1;35674===a.type&&(s=2),35675===a.type&&(s=3),35676===a.type&&(s=4),n[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(o,g)),x},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=Co++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=S,this.fragmentShader=M,this}var Ho=0,Go=function(){function e(){(0,l.Z)(this,e),this.shaderCache=new Map,this.materialCache=new Map}return(0,u.Z)(e,[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}},{key:"remove",value:function(e){var t,n=this.materialCache.get(e),r=(0,s.Z)(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code)}}catch(a){r.e(a)}finally{r.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new Qo(e),t.set(e,n)),n}}]),e}(),Qo=(0,u.Z)((function e(t){(0,l.Z)(this,e),this.id=Ho++,this.code=t,this.usedTimes=0}));function Vo(e,t,n,r,i,a,o){var s=new mr,l=new Go,u=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,d=i.vertexTextures,f=i.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(a,s,u,v,m){var g=v.fog,y=m.geometry,A=a.isMeshStandardMaterial?v.environment:null,x=(a.isMeshStandardMaterial?n:t).get(a.envMap||A),b=x&&x.mapping===ge?x.image.height:null,_=p[a.type];null!==a.precision&&(f=i.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",f,"instead.");var w,E,S,k,I=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,B=void 0!==I?I.length:0,R=0;if(void 0!==y.morphAttributes.position&&(R=1),void 0!==y.morphAttributes.normal&&(R=2),void 0!==y.morphAttributes.color&&(R=3),_){var L=Qi[_];w=L.vertexShader,E=L.fragmentShader}else w=a.vertexShader,E=a.fragmentShader,l.update(a),S=l.getVertexShaderID(a),k=l.getFragmentShaderID(a);var P=e.getRenderTarget(),D=a.alphaTest>0,O=a.clearcoat>0,F=a.iridescence>0;return{isWebGL2:c,shaderID:_,shaderName:a.type,vertexShader:w,fragmentShader:E,defines:a.defines,customVertexShaderID:S,customFragmentShaderID:k,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:f,instancing:!0===m.isInstancedMesh,instancingColor:!0===m.isInstancedMesh&&null!==m.instanceColor,supportsVertexTextures:d,outputEncoding:null===P?e.outputEncoding:!0===P.isXRRenderTarget?P.texture.encoding:Tt,map:!!a.map,matcap:!!a.matcap,envMap:!!x,envMapMode:x&&x.mapping,envMapCubeUVHeight:b,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===Lt,tangentSpaceNormalMap:a.normalMapType===Rt,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===It,clearcoat:O,clearcoatMap:O&&!!a.clearcoatMap,clearcoatRoughnessMap:O&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:O&&!!a.clearcoatNormalMap,iridescence:F,iridescenceMap:F&&!!a.iridescenceMap,iridescenceThicknessMap:F&&!!a.iridescenceThicknessMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&a.blending===T,alphaMap:!!a.alphaMap,alphaTest:D,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!y.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUvs:!!a.map||!!a.bumpMap||!!a.normalMap||!!a.specularMap||!!a.alphaMap||!!a.emissiveMap||!!a.roughnessMap||!!a.metalnessMap||!!a.clearcoatMap||!!a.clearcoatRoughnessMap||!!a.clearcoatNormalMap||!!a.iridescenceMap||!!a.iridescenceThicknessMap||!!a.displacementMap||!!a.transmissionMap||!!a.thicknessMap||!!a.specularIntensityMap||!!a.specularColorMap||!!a.sheenColorMap||!!a.sheenRoughnessMap,uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap)&&!!a.displacementMap,fog:!!g,useFog:!0===a.fog,fogExp2:g&&g.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===m.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:B,morphTextureStride:R,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:se,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===C,flipSided:a.side===M,useDepthPacking:!!a.depthPacking,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0);t.supportsVertexTextures&&s.enable(1);t.instancing&&s.enable(2);t.instancingColor&&s.enable(3);t.map&&s.enable(4);t.matcap&&s.enable(5);t.envMap&&s.enable(6);t.lightMap&&s.enable(7);t.aoMap&&s.enable(8);t.emissiveMap&&s.enable(9);t.bumpMap&&s.enable(10);t.normalMap&&s.enable(11);t.objectSpaceNormalMap&&s.enable(12);t.tangentSpaceNormalMap&&s.enable(13);t.clearcoat&&s.enable(14);t.clearcoatMap&&s.enable(15);t.clearcoatRoughnessMap&&s.enable(16);t.clearcoatNormalMap&&s.enable(17);t.iridescence&&s.enable(18);t.iridescenceMap&&s.enable(19);t.iridescenceThicknessMap&&s.enable(20);t.displacementMap&&s.enable(21);t.specularMap&&s.enable(22);t.roughnessMap&&s.enable(23);t.metalnessMap&&s.enable(24);t.gradientMap&&s.enable(25);t.alphaMap&&s.enable(26);t.alphaTest&&s.enable(27);t.vertexColors&&s.enable(28);t.vertexAlphas&&s.enable(29);t.vertexUvs&&s.enable(30);t.vertexTangents&&s.enable(31);t.uvsVertexOnly&&s.enable(32);e.push(s.mask),s.disableAll(),t.fog&&s.enable(0);t.useFog&&s.enable(1);t.flatShading&&s.enable(2);t.logarithmicDepthBuffer&&s.enable(3);t.skinning&&s.enable(4);t.morphTargets&&s.enable(5);t.morphNormals&&s.enable(6);t.morphColors&&s.enable(7);t.premultipliedAlpha&&s.enable(8);t.shadowMapEnabled&&s.enable(9);t.physicallyCorrectLights&&s.enable(10);t.doubleSided&&s.enable(11);t.flipSided&&s.enable(12);t.useDepthPacking&&s.enable(13);t.dithering&&s.enable(14);t.specularIntensityMap&&s.enable(15);t.specularColorMap&&s.enable(16);t.transmission&&s.enable(17);t.transmissionMap&&s.enable(18);t.thicknessMap&&s.enable(19);t.sheen&&s.enable(20);t.sheenColorMap&&s.enable(21);t.sheenRoughnessMap&&s.enable(22);t.decodeVideoTexture&&s.enable(23);t.opaque&&s.enable(24);e.push(s.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=p[e.type];if(n){var r=Qi[n];t=Ei.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,i=0,o=u.length;i<o;i++){var s=u[i];if(s.cacheKey===n){++(r=s).usedTimes;break}}return void 0===r&&(r=new zo(e,n,t,a),u.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){var t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function jo(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Wo(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function qo(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Jo(){var e=[],t=0,n=[],r=[],i=[];function a(n,r,i,a,o,s){var l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,s,l,u){var c=a(e,t,o,s,l,u);o.transmission>0?r.push(c):!0===o.transparent?i.push(c):n.push(c)},unshift:function(e,t,o,s,l,u){var c=a(e,t,o,s,l,u);o.transmission>0?r.unshift(c):!0===o.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(var n=t,r=e.length;n<r;n++){var i=e[n];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Wo),r.length>1&&r.sort(t||qo),i.length>1&&i.sort(t||qo)}}}function Xo(){var e=new WeakMap;return{get:function(t,n){var r,i=e.get(t);return void 0===i?(r=new Jo,e.set(t,[r])):n>=i.length?(r=new Jo,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function Yo(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Tn,color:new yn};break;case"SpotLight":n={position:new Tn,direction:new Tn,color:new yn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Tn,color:new yn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Tn,skyColor:new yn,groundColor:new yn};break;case"RectAreaLight":n={color:new yn,position:new Tn,halfWidth:new Tn,halfHeight:new Tn}}return e[t.id]=n,n}}}var Ko=0;function $o(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function es(e,t){for(var n=new Yo,r=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tn,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0},a=0;a<9;a++)i.probe.push(new Tn);var o=new Tn,s=new ar,l=new ar;return{setup:function(a,o){for(var s=0,l=0,u=0,c=0;c<9;c++)i.probe[c].set(0,0,0);var h=0,d=0,f=0,p=0,v=0,m=0,g=0,y=0,A=0,x=0;a.sort($o);for(var b=!0!==o?Math.PI:1,_=0,w=a.length;_<w;_++){var E=a[_],S=E.color,M=E.intensity,C=E.distance,k=E.shadow&&E.shadow.map?E.shadow.map.texture:null;if(E.isAmbientLight)s+=S.r*M*b,l+=S.g*M*b,u+=S.b*M*b;else if(E.isLightProbe)for(var T=0;T<9;T++)i.probe[T].addScaledVector(E.sh.coefficients[T],M);else if(E.isDirectionalLight){var I=n.get(E);if(I.color.copy(E.color).multiplyScalar(E.intensity*b),E.castShadow){var B=E.shadow,R=r.get(E);R.shadowBias=B.bias,R.shadowNormalBias=B.normalBias,R.shadowRadius=B.radius,R.shadowMapSize=B.mapSize,i.directionalShadow[h]=R,i.directionalShadowMap[h]=k,i.directionalShadowMatrix[h]=E.shadow.matrix,m++}i.directional[h]=I,h++}else if(E.isSpotLight){var L=n.get(E);L.position.setFromMatrixPosition(E.matrixWorld),L.color.copy(S).multiplyScalar(M*b),L.distance=C,L.coneCos=Math.cos(E.angle),L.penumbraCos=Math.cos(E.angle*(1-E.penumbra)),L.decay=E.decay,i.spot[f]=L;var P=E.shadow;if(E.map&&(i.spotLightMap[A]=E.map,A++,P.updateMatrices(E),E.castShadow&&x++),i.spotLightMatrix[f]=P.matrix,E.castShadow){var D=r.get(E);D.shadowBias=P.bias,D.shadowNormalBias=P.normalBias,D.shadowRadius=P.radius,D.shadowMapSize=P.mapSize,i.spotShadow[f]=D,i.spotShadowMap[f]=k,y++}f++}else if(E.isRectAreaLight){var O=n.get(E);O.color.copy(S).multiplyScalar(M),O.halfWidth.set(.5*E.width,0,0),O.halfHeight.set(0,.5*E.height,0),i.rectArea[p]=O,p++}else if(E.isPointLight){var F=n.get(E);if(F.color.copy(E.color).multiplyScalar(E.intensity*b),F.distance=E.distance,F.decay=E.decay,E.castShadow){var N=E.shadow,U=r.get(E);U.shadowBias=N.bias,U.shadowNormalBias=N.normalBias,U.shadowRadius=N.radius,U.shadowMapSize=N.mapSize,U.shadowCameraNear=N.camera.near,U.shadowCameraFar=N.camera.far,i.pointShadow[d]=U,i.pointShadowMap[d]=k,i.pointShadowMatrix[d]=E.shadow.matrix,g++}i.point[d]=F,d++}else if(E.isHemisphereLight){var Z=n.get(E);Z.skyColor.copy(E.color).multiplyScalar(M*b),Z.groundColor.copy(E.groundColor).multiplyScalar(M*b),i.hemi[v]=Z,v++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Gi.LTC_FLOAT_1,i.rectAreaLTC2=Gi.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Gi.LTC_HALF_1,i.rectAreaLTC2=Gi.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=u;var z=i.hash;z.directionalLength===h&&z.pointLength===d&&z.spotLength===f&&z.rectAreaLength===p&&z.hemiLength===v&&z.numDirectionalShadows===m&&z.numPointShadows===g&&z.numSpotShadows===y&&z.numSpotMaps===A||(i.directional.length=h,i.spot.length=f,i.rectArea.length=p,i.point.length=d,i.hemi.length=v,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=y+A-x,i.spotLightMap.length=A,i.numSpotLightShadowsWithMaps=x,z.directionalLength=h,z.pointLength=d,z.spotLength=f,z.rectAreaLength=p,z.hemiLength=v,z.numDirectionalShadows=m,z.numPointShadows=g,z.numSpotShadows=y,z.numSpotMaps=A,i.version=Ko++)},setupView:function(e,t){for(var n=0,r=0,a=0,u=0,c=0,h=t.matrixWorldInverse,d=0,f=e.length;d<f;d++){var p=e[d];if(p.isDirectionalLight){var v=i.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(o),v.direction.transformDirection(h),n++}else if(p.isSpotLight){var m=i.spot[a];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(h),m.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(o),m.direction.transformDirection(h),a++}else if(p.isRectAreaLight){var g=i.rectArea[u];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(h),l.identity(),s.copy(p.matrixWorld),s.premultiply(h),l.extractRotation(s),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(l),g.halfHeight.applyMatrix4(l),u++}else if(p.isPointLight){var y=i.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(h),r++}else if(p.isHemisphereLight){var A=i.hemi[c];A.direction.setFromMatrixPosition(p.matrixWorld),A.direction.transformDirection(h),c++}}},state:i}}function ts(e,t){var n=new es(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function ns(e,t){var n=new WeakMap;return{get:function(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=n.get(r);return void 0===o?(i=new ts(e,t),n.set(r,[i])):a>=o.length?(i=new ts(e,t),o.push(i)):i=o[a],i},dispose:function(){n=new WeakMap}}}var rs=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this)).isMeshDepthMaterial=!0,r.type="MeshDepthMaterial",r.depthPacking=3200,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.setValues(e),r}return(0,u.Z)(n,[{key:"copy",value:function(e){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(Gr),is=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this)).isMeshDistanceMaterial=!0,r.type="MeshDistanceMaterial",r.referencePosition=new Tn,r.nearDistance=1,r.farDistance=1e3,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.setValues(e),r}return(0,u.Z)(n,[{key:"copy",value:function(e){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(Gr),as="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",os="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function ss(e,t,n){var r=new Ni,i=new tn,a=new tn,o=new En,s=new rs({depthPacking:Bt}),l=new is,u={},c=n.maxTextureSize,h={0:M,1:S,2:C},d=new Si({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new tn},radius:{value:4}},vertexShader:as,fragmentShader:os}),f=d.clone();f.defines.HORIZONTAL_PASS=1;var p=new ii;p.setAttribute("position",new Wr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var v=new yi(p,d),m=this;function g(n,r){var a=t.update(v);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Sn(i.x,i.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,d,v,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,f,v,null)}function y(t,n,r,i,a,o){var c=null,d=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==d)c=d;else if(c=!0===r.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){var f=c.uuid,p=n.uuid,v=u[f];void 0===v&&(v={},u[f]=v);var m=v[p];void 0===m&&(m=c.clone(),v[p]=m),c=m}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=o===E?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],c.alphaMap=n.alphaMap,c.alphaTest=n.alphaTest,c.map=n.map,c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.displacementMap=n.displacementMap,c.displacementScale=n.displacementScale,c.displacementBias=n.displacementBias,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,!0===r.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(r.matrixWorld),c.nearDistance=i,c.farDistance=a),c}function A(n,i,a,o,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===E)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var l=t.update(n),u=n.material;if(Array.isArray(u))for(var c=l.groups,h=0,d=c.length;h<d;h++){var f=c[h],p=u[f.materialIndex];if(p&&p.visible){var v=y(n,p,o,a.near,a.far,s);e.renderBufferDirect(a,null,l,v,n,f)}}else if(u.visible){var m=y(n,u,o,a.near,a.far,s);e.renderBufferDirect(a,null,l,m,n,null)}}for(var g=n.children,x=0,b=g.length;x<b;x++)A(g[x],i,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=_,this.render=function(t,n,s){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var l=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(k),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var f=0,p=t.length;f<p;f++){var v=t[f],y=v.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){i.copy(y.mapSize);var x=y.getFrameExtents();if(i.multiply(x),a.copy(y.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/x.x),i.x=a.x*x.x,y.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/x.y),i.y=a.y*x.y,y.mapSize.y=a.y)),null===y.map){var b=this.type!==E?{minFilter:be,magFilter:be}:{};y.map=new Sn(i.x,i.y,b),y.map.texture.name=v.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var _=y.getViewportCount(),w=0;w<_;w++){var S=y.getViewport(w);o.set(a.x*S.x,a.y*S.y,a.x*S.z,a.y*S.w),d.viewport(o),y.updateMatrices(v,w),r=y.getFrustum(),A(n,s,y.camera,v,this.type)}!0!==y.isPointLightShadow&&this.type===E&&g(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(l,u,h)}}}function ls(e,t,n){var r,i,a=n.isWebGL2;var o=new function(){var t=!1,n=new En,r=null,i=new En(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?Ee(2929):Se(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case X:e.depthFunc(512);break;case Y:e.depthFunc(519);break;case K:e.depthFunc(513);break;case $:e.depthFunc(515);break;case ee:e.depthFunc(514);break;case te:e.depthFunc(518);break;case ne:e.depthFunc(516);break;case re:e.depthFunc(517);break;default:e.depthFunc(515)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},l=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(e){t||(e?Ee(2960):Se(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&l===r||(e.stencilOp(t,n,r),o=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null}}},u=new WeakMap,c=new WeakMap,h={},d={},f=new WeakMap,p=[],v=null,g=!1,y=null,_=null,w=null,E=null,S=null,ie=null,ae=null,oe=!1,se=null,le=null,ue=null,ce=null,he=null,de=e.getParameter(35661),fe=!1,pe=0,ve=e.getParameter(7938);-1!==ve.indexOf("WebGL")?(pe=parseFloat(/^WebGL (\d)/.exec(ve)[1]),fe=pe>=1):-1!==ve.indexOf("OpenGL ES")&&(pe=parseFloat(/^OpenGL ES (\d)/.exec(ve)[1]),fe=pe>=2);var me=null,ge={},ye=e.getParameter(3088),Ae=e.getParameter(2978),xe=(new En).fromArray(ye),be=(new En).fromArray(Ae);function _e(t,n,r){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return a}var we={};function Ee(t){!0!==h[t]&&(e.enable(t),h[t]=!0)}function Se(t){!1!==h[t]&&(e.disable(t),h[t]=!1)}we[3553]=_e(3553,3553,1),we[34067]=_e(34067,34069,6),o.setClear(0,0,0,1),s.setClear(1),l.setClear(0),Ee(2929),s.setFunc($),Ie(!1),Be(x),Ee(2884),Te(k);var Me=(r={},(0,m.Z)(r,P,32774),(0,m.Z)(r,D,32778),(0,m.Z)(r,O,32779),r);if(a)Me[F]=32775,Me[N]=32776;else{var Ce=t.get("EXT_blend_minmax");null!==Ce&&(Me[F]=Ce.MIN_EXT,Me[N]=Ce.MAX_EXT)}var ke=(i={},(0,m.Z)(i,U,0),(0,m.Z)(i,Z,1),(0,m.Z)(i,z,768),(0,m.Z)(i,G,770),(0,m.Z)(i,J,776),(0,m.Z)(i,W,774),(0,m.Z)(i,V,772),(0,m.Z)(i,H,769),(0,m.Z)(i,Q,771),(0,m.Z)(i,q,775),(0,m.Z)(i,j,773),i);function Te(t,n,r,i,a,o,s,l){if(t!==k){if(!1===g&&(Ee(3042),g=!0),t===L)a=a||n,o=o||r,s=s||i,n===_&&a===S||(e.blendEquationSeparate(Me[n],Me[a]),_=n,S=a),r===w&&i===E&&o===ie&&s===ae||(e.blendFuncSeparate(ke[r],ke[i],ke[o],ke[s]),w=r,E=i,ie=o,ae=s),y=t,oe=!1;else if(t!==y||l!==oe){if(_===P&&S===P||(e.blendEquation(32774),_=P,S=P),l)switch(t){case T:e.blendFuncSeparate(1,771,1,771);break;case I:e.blendFunc(1,1);break;case B:e.blendFuncSeparate(0,769,0,1);break;case R:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case T:e.blendFuncSeparate(770,771,1,771);break;case I:e.blendFunc(770,1);break;case B:e.blendFuncSeparate(0,769,0,1);break;case R:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}w=null,E=null,ie=null,ae=null,y=t,oe=l}}else!0===g&&(Se(3042),g=!1)}function Ie(t){se!==t&&(t?e.frontFace(2304):e.frontFace(2305),se=t)}function Be(t){t!==A?(Ee(2884),t!==le&&(t===x?e.cullFace(1029):t===b?e.cullFace(1028):e.cullFace(1032))):Se(2884),le=t}function Re(t,n,r){t?(Ee(32823),ce===n&&he===r||(e.polygonOffset(n,r),ce=n,he=r)):Se(32823)}return{buffers:{color:o,depth:s,stencil:l},enable:Ee,disable:Se,bindFramebuffer:function(t,n){return d[t]!==n&&(e.bindFramebuffer(t,n),d[t]=n,a&&(36009===t&&(d[36160]=n),36160===t&&(d[36009]=n)),!0)},drawBuffers:function(r,i){var a=p,o=!1;if(r)if(void 0===(a=f.get(i))&&(a=[],f.set(i,a)),r.isWebGLMultipleRenderTargets){var s=r.texture;if(a.length!==s.length||36064!==a[0]){for(var l=0,u=s.length;l<u;l++)a[l]=36064+l;a.length=s.length,o=!0}}else 36064!==a[0]&&(a[0]=36064,o=!0);else 1029!==a[0]&&(a[0]=1029,o=!0);o&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return v!==t&&(e.useProgram(t),v=t,!0)},setBlending:Te,setMaterial:function(e,t){e.side===C?Se(2884):Ee(2884);var n=e.side===M;t&&(n=!n),Ie(n),e.blending===T&&!1===e.transparent?Te(k):Te(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),o.setMask(e.colorWrite);var r=e.stencilWrite;l.setTest(r),r&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Re(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?Ee(32926):Se(32926)},setFlipSided:Ie,setCullFace:Be,setLineWidth:function(t){t!==ue&&(fe&&e.lineWidth(t),ue=t)},setPolygonOffset:Re,setScissorTest:function(e){e?Ee(3089):Se(3089)},activeTexture:function(t){void 0===t&&(t=33984+de-1),me!==t&&(e.activeTexture(t),me=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===me?33984+de-1:me);var i=ge[r];void 0===i&&(i={type:void 0,texture:void 0},ge[r]=i),i.type===t&&i.texture===n||(me!==r&&(e.activeTexture(r),me=r),e.bindTexture(t,n||we[t]),i.type=t,i.texture=n)},unbindTexture:function(){var t=ge[me];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){var r=c.get(n);void 0===r&&(r=new WeakMap,c.set(n,r));var i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){var r=c.get(n).get(t);u.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),u.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===xe.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),xe.copy(t))},viewport:function(t){!1===be.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),be.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===a&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),h={},me=null,ge={},d={},f=new WeakMap,p=[],v=null,g=!1,y=null,_=null,w=null,E=null,S=null,ie=null,ae=null,oe=!1,se=null,le=null,ue=null,ce=null,he=null,xe.set(0,0,e.canvas.width,e.canvas.height),be.set(0,0,e.canvas.width,e.canvas.height),o.reset(),s.reset(),l.reset()}}}function us(e,t,n,r,i,a,o){var s,l,u,c=i.isWebGL2,h=i.maxTextures,d=i.maxCubemapSize,f=i.maxTextureSize,p=i.maxSamples,v=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,g="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),y=new WeakMap,A=new WeakMap,x=!1;try{x="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(V){}function b(e,t){return x?new OffscreenCanvas(e,t):on("canvas")}function _(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?Yt:Math.floor,o=a(i*e.width),s=a(i*e.height);void 0===u&&(u=b(o,s));var l=n?b(o,s):u;return l.width=o,l.height=s,l.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function w(e){return Jt(e.width)&&Jt(e.height)}function E(e,t){return e.generateMipmaps&&t&&e.minFilter!==be&&e.minFilter!==Ee}function S(t){e.generateMipmap(t)}function M(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===c)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=r;return 6403===r&&(5126===i&&(s=33326),5131===i&&(s=33325),5121===i&&(s=33321)),33319===r&&(5126===i&&(s=33328),5131===i&&(s=33327),5121===i&&(s=33323)),6408===r&&(5126===i&&(s=34836),5131===i&&(s=34842),5121===i&&(s=a===It&&!1===o?35907:32856),32819===i&&(s=32854),32820===i&&(s=32855)),33325!==s&&33326!==s&&33327!==s&&33328!==s&&34842!==s&&34836!==s||t.get("EXT_color_buffer_float"),s}function C(e,t,n){return!0===E(e,n)||e.isFramebufferTexture&&e.minFilter!==be&&e.minFilter!==Ee?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function k(e){return e===be||e===_e||e===we?9728:9729}function T(e){var t=e.target;t.removeEventListener("dispose",T),function(e){var t=r.get(e);if(void 0===t.__webglInit)return;var n=e.source,i=A.get(n);if(i){var a=i[t.__cacheKey];a.usedTimes--,0===a.usedTimes&&B(e),0===Object.keys(i).length&&A.delete(n)}r.remove(e)}(t),t.isVideoTexture&&y.delete(t)}function I(t){var n=t.target;n.removeEventListener("dispose",I),function(t){var n=t.texture,i=r.get(t),a=r.get(n);void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(i.__webglFramebuffer[s]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[s]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(var l=0;l<i.__webglColorRenderbuffer.length;l++)i.__webglColorRenderbuffer[l]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[l]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(var u=0,c=n.length;u<c;u++){var h=r.get(n[u]);h.__webglTexture&&(e.deleteTexture(h.__webglTexture),o.memory.textures--),r.remove(n[u])}r.remove(n),r.remove(t)}(n)}function B(t){var n=r.get(t);e.deleteTexture(n.__webglTexture);var i=t.source;delete A.get(i)[n.__cacheKey],o.memory.textures--}var R=0;function L(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;y.get(e)!==t&&(y.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&i.__version!==e.version){var a=e.image;if(null===a)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==a.complete)return void N(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,i.__webglTexture,33984+t)}var P=(s={},(0,m.Z)(s,ye,10497),(0,m.Z)(s,Ae,33071),(0,m.Z)(s,xe,33648),s),D=(l={},(0,m.Z)(l,be,9728),(0,m.Z)(l,_e,9984),(0,m.Z)(l,we,9986),(0,m.Z)(l,Ee,9729),(0,m.Z)(l,Se,9985),(0,m.Z)(l,Me,9987),l);function O(n,a,o){if(o?(e.texParameteri(n,10242,P[a.wrapS]),e.texParameteri(n,10243,P[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,P[a.wrapR]),e.texParameteri(n,10240,D[a.magFilter]),e.texParameteri(n,10241,D[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===Ae&&a.wrapT===Ae||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,k(a.magFilter)),e.texParameteri(n,10241,k(a.minFilter)),a.minFilter!==be&&a.minFilter!==Ee&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(a.magFilter===be)return;if(a.minFilter!==we&&a.minFilter!==Me)return;if(a.type===Le&&!1===t.has("OES_texture_float_linear"))return;if(!1===c&&a.type===Pe&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function F(t,n){var r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",T));var i=n.source,a=A.get(i);void 0===a&&(a={},A.set(i,a));var s=function(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),a[s].usedTimes++;var l=a[t.__cacheKey];void 0!==l&&(a[t.__cacheKey].usedTimes--,0===l.usedTimes&&B(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return r}function N(t,i,o){var s=3553;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(s=35866),i.isData3DTexture&&(s=32879);var l=F(t,i),u=i.source;n.bindTexture(s,t.__webglTexture,33984+o);var h=r.get(u);if(u.version!==h.__version||!0===l){n.activeTexture(33984+o),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);var d,p=function(e){return!c&&(e.wrapS!==Ae||e.wrapT!==Ae||e.minFilter!==be&&e.minFilter!==Ee)}(i)&&!1===w(i.image),v=_(i.image,p,!1,f),m=w(v=Q(i,v))||c,g=a.convert(i.format,i.encoding),y=a.convert(i.type),A=M(i.internalFormat,g,y,i.encoding,i.isVideoTexture);O(s,i,m);var x=i.mipmaps,b=c&&!0!==i.isVideoTexture,k=void 0===h.__version||!0===l,T=C(i,v,m);if(i.isDepthTexture)A=6402,c?A=i.type===Le?36012:i.type===Re?33190:i.type===Fe?35056:33189:i.type===Le&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Ge&&6402===A&&i.type!==Ie&&i.type!==Re&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Re,y=a.convert(i.type)),i.format===Qe&&6402===A&&(A=34041,i.type!==Fe&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Fe,y=a.convert(i.type))),k&&(b?n.texStorage2D(3553,1,A,v.width,v.height):n.texImage2D(3553,0,A,v.width,v.height,0,g,y,null));else if(i.isDataTexture)if(x.length>0&&m){b&&k&&n.texStorage2D(3553,T,A,x[0].width,x[0].height);for(var I=0,B=x.length;I<B;I++)d=x[I],b?n.texSubImage2D(3553,I,0,0,d.width,d.height,g,y,d.data):n.texImage2D(3553,I,A,d.width,d.height,0,g,y,d.data);i.generateMipmaps=!1}else b?(k&&n.texStorage2D(3553,T,A,v.width,v.height),n.texSubImage2D(3553,0,0,0,v.width,v.height,g,y,v.data)):n.texImage2D(3553,0,A,v.width,v.height,0,g,y,v.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){b&&k&&n.texStorage3D(35866,T,A,x[0].width,x[0].height,v.depth);for(var R=0,L=x.length;R<L;R++)d=x[R],i.format!==Ze?null!==g?b?n.compressedTexSubImage3D(35866,R,0,0,0,d.width,d.height,v.depth,g,d.data,0,0):n.compressedTexImage3D(35866,R,A,d.width,d.height,v.depth,0,d.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):b?n.texSubImage3D(35866,R,0,0,0,d.width,d.height,v.depth,g,y,d.data):n.texImage3D(35866,R,A,d.width,d.height,v.depth,0,g,y,d.data)}else{b&&k&&n.texStorage2D(3553,T,A,x[0].width,x[0].height);for(var P=0,D=x.length;P<D;P++)d=x[P],i.format!==Ze?null!==g?b?n.compressedTexSubImage2D(3553,P,0,0,d.width,d.height,g,d.data):n.compressedTexImage2D(3553,P,A,d.width,d.height,0,d.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):b?n.texSubImage2D(3553,P,0,0,d.width,d.height,g,y,d.data):n.texImage2D(3553,P,A,d.width,d.height,0,g,y,d.data)}else if(i.isDataArrayTexture)b?(k&&n.texStorage3D(35866,T,A,v.width,v.height,v.depth),n.texSubImage3D(35866,0,0,0,0,v.width,v.height,v.depth,g,y,v.data)):n.texImage3D(35866,0,A,v.width,v.height,v.depth,0,g,y,v.data);else if(i.isData3DTexture)b?(k&&n.texStorage3D(32879,T,A,v.width,v.height,v.depth),n.texSubImage3D(32879,0,0,0,0,v.width,v.height,v.depth,g,y,v.data)):n.texImage3D(32879,0,A,v.width,v.height,v.depth,0,g,y,v.data);else if(i.isFramebufferTexture){if(k)if(b)n.texStorage2D(3553,T,A,v.width,v.height);else for(var N=v.width,U=v.height,Z=0;Z<T;Z++)n.texImage2D(3553,Z,A,N,U,0,g,y,null),N>>=1,U>>=1}else if(x.length>0&&m){b&&k&&n.texStorage2D(3553,T,A,x[0].width,x[0].height);for(var z=0,H=x.length;z<H;z++)d=x[z],b?n.texSubImage2D(3553,z,0,0,g,y,d):n.texImage2D(3553,z,A,g,y,d);i.generateMipmaps=!1}else b?(k&&n.texStorage2D(3553,T,A,v.width,v.height),n.texSubImage2D(3553,0,0,0,g,y,v)):n.texImage2D(3553,0,A,g,y,v);E(i,m)&&S(s),h.__version=u.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function U(t,i,o,s,l){var u=a.convert(o.format,o.encoding),c=a.convert(o.type),h=M(o.internalFormat,u,c,o.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,u,c,null):n.texImage2D(l,0,h,i.width,i.height,0,u,c,null)),n.bindFramebuffer(36160,t),G(i)?v.framebufferTexture2DMultisampleEXT(36160,s,l,r.get(o).__webglTexture,0,H(i)):(3553===l||l>=34069&&l<=34074)&&e.framebufferTexture2D(36160,s,l,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function Z(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r||G(n)){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===Le?i=36012:o.type===Re&&(i=33190));var s=H(n);G(n)?v.renderbufferStorageMultisampleEXT(36161,s,i,n.width,n.height):e.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){var l=H(n);r&&!1===G(n)?e.renderbufferStorageMultisample(36161,l,35056,n.width,n.height):G(n)?v.renderbufferStorageMultisampleEXT(36161,l,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else for(var u=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture],c=0;c<u.length;c++){var h=u[c],d=a.convert(h.format,h.encoding),f=a.convert(h.type),p=M(h.internalFormat,d,f,h.encoding),m=H(n);r&&!1===G(n)?e.renderbufferStorageMultisample(36161,m,p,n.width,n.height):G(n)?v.renderbufferStorageMultisampleEXT(36161,m,p,n.width,n.height):e.renderbufferStorage(36161,p,n.width,n.height)}e.bindRenderbuffer(36161,null)}function z(t){var i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),L(i.depthTexture,0);var a=r.get(i.depthTexture).__webglTexture,o=H(i);if(i.depthTexture.format===Ge)G(i)?v.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,o):e.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==Qe)throw new Error("Unknown depthTexture format");G(i)?v.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,o):e.framebufferTexture2D(36160,33306,3553,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=e.createRenderbuffer(),Z(i.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),Z(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function H(e){return Math.min(p,e.samples)}function G(e){var n=r.get(e);return c&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function Q(e,n){var r=e.encoding,i=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===Ut||r!==Tt&&(r===It?!1===c?!0===t.has("EXT_sRGB")&&i===Ze?(e.format=Ut,e.minFilter=Ee,e.generateMipmaps=!1):n=An.sRGBToLinear(n):i===Ze&&a===Ce||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){var e=R;return e>=h&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+h),R+=1,e},this.resetTextureUnits=function(){R=0},this.setTexture2D=L,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?N(i,e,t):n.bindTexture(35866,i.__webglTexture,33984+t)},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?N(i,e,t):n.bindTexture(32879,i.__webglTexture,33984+t)},this.setTextureCube=function(t,i){var o=r.get(t);t.version>0&&o.__version!==t.version?function(t,i,o){if(6!==i.image.length)return;var s=F(t,i),l=i.source;n.bindTexture(34067,t.__webglTexture,33984+o);var u=r.get(l);if(l.version!==u.__version||!0===s){n.activeTexture(33984+o),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);for(var h=i.isCompressedTexture||i.image[0].isCompressedTexture,f=i.image[0]&&i.image[0].isDataTexture,p=[],v=0;v<6;v++)p[v]=h||f?f?i.image[v].image:i.image[v]:_(i.image[v],!1,!0,d),p[v]=Q(i,p[v]);var m,g=p[0],y=w(g)||c,A=a.convert(i.format,i.encoding),x=a.convert(i.type),b=M(i.internalFormat,A,x,i.encoding),k=c&&!0!==i.isVideoTexture,T=void 0===u.__version||!0===s,I=C(i,g,y);if(O(34067,i,y),h){k&&T&&n.texStorage2D(34067,I,b,g.width,g.height);for(var B=0;B<6;B++){m=p[B].mipmaps;for(var R=0;R<m.length;R++){var L=m[R];i.format!==Ze?null!==A?k?n.compressedTexSubImage2D(34069+B,R,0,0,L.width,L.height,A,L.data):n.compressedTexImage2D(34069+B,R,b,L.width,L.height,0,L.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):k?n.texSubImage2D(34069+B,R,0,0,L.width,L.height,A,x,L.data):n.texImage2D(34069+B,R,b,L.width,L.height,0,A,x,L.data)}}}else{m=i.mipmaps,k&&T&&(m.length>0&&I++,n.texStorage2D(34067,I,b,p[0].width,p[0].height));for(var P=0;P<6;P++)if(f){k?n.texSubImage2D(34069+P,0,0,0,p[P].width,p[P].height,A,x,p[P].data):n.texImage2D(34069+P,0,b,p[P].width,p[P].height,0,A,x,p[P].data);for(var D=0;D<m.length;D++){var N=m[D].image[P].image;k?n.texSubImage2D(34069+P,D+1,0,0,N.width,N.height,A,x,N.data):n.texImage2D(34069+P,D+1,b,N.width,N.height,0,A,x,N.data)}}else{k?n.texSubImage2D(34069+P,0,0,0,A,x,p[P]):n.texImage2D(34069+P,0,b,A,x,p[P]);for(var U=0;U<m.length;U++){var Z=m[U];k?n.texSubImage2D(34069+P,U+1,0,0,A,x,Z.image[P]):n.texImage2D(34069+P,U+1,b,A,x,Z.image[P])}}}E(i,y)&&S(34067),u.__version=l.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}(o,t,i):n.bindTexture(34067,o.__webglTexture,33984+i)},this.rebindTextures=function(e,t,n){var i=r.get(e);void 0!==t&&U(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&z(e)},this.setupRenderTarget=function(t){var s=t.texture,l=r.get(t),u=r.get(s);t.addEventListener("dispose",I),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=s.version,o.memory.textures++);var h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,f=w(t)||c;if(h){l.__webglFramebuffer=[];for(var p=0;p<6;p++)l.__webglFramebuffer[p]=e.createFramebuffer()}else{if(l.__webglFramebuffer=e.createFramebuffer(),d)if(i.drawBuffers)for(var v=t.texture,m=0,g=v.length;m<g;m++){var y=r.get(v[m]);void 0===y.__webglTexture&&(y.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(c&&t.samples>0&&!1===G(t)){var A=d?s:[s];l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer);for(var x=0;x<A.length;x++){var b=A[x];l.__webglColorRenderbuffer[x]=e.createRenderbuffer(),e.bindRenderbuffer(36161,l.__webglColorRenderbuffer[x]);var _=a.convert(b.format,b.encoding),C=a.convert(b.type),k=M(b.internalFormat,_,C,b.encoding,!0===t.isXRRenderTarget),T=H(t);e.renderbufferStorageMultisample(36161,T,k,t.width,t.height),e.framebufferRenderbuffer(36160,36064+x,36161,l.__webglColorRenderbuffer[x])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),Z(l.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,u.__webglTexture),O(34067,s,f);for(var B=0;B<6;B++)U(l.__webglFramebuffer[B],t,s,36064,34069+B);E(s,f)&&S(34067),n.unbindTexture()}else if(d){for(var R=t.texture,L=0,P=R.length;L<P;L++){var D=R[L],F=r.get(D);n.bindTexture(3553,F.__webglTexture),O(3553,D,f),U(l.__webglFramebuffer,t,D,36064+L,3553),E(D,f)&&S(3553)}n.unbindTexture()}else{var N=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(c?N=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(N,u.__webglTexture),O(N,s,f),U(l.__webglFramebuffer,t,s,36064,N),E(s,f)&&S(N),n.unbindTexture()}t.depthBuffer&&z(t)},this.updateRenderTargetMipmap=function(e){for(var t=w(e)||c,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=0,o=i.length;a<o;a++){var s=i[a];if(E(s,t)){var l=e.isWebGLCubeRenderTarget?34067:3553,u=r.get(s).__webglTexture;n.bindTexture(l,u),S(l),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(c&&t.samples>0&&!1===G(t)){var i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,o=t.height,s=16384,l=[],u=t.stencilBuffer?33306:36096,h=r.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(var f=0;f<i.length;f++)n.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+f,36161,null),n.bindFramebuffer(36160,h.__webglFramebuffer),e.framebufferTexture2D(36009,36064+f,3553,null,0);n.bindFramebuffer(36008,h.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,h.__webglFramebuffer);for(var p=0;p<i.length;p++){l.push(36064+p),t.depthBuffer&&l.push(u);var v=void 0!==h.__ignoreDepthValues&&h.__ignoreDepthValues;if(!1===v&&(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024)),d&&e.framebufferRenderbuffer(36008,36064,36161,h.__webglColorRenderbuffer[p]),!0===v&&(e.invalidateFramebuffer(36008,[u]),e.invalidateFramebuffer(36009,[u])),d){var m=r.get(i[p]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,m,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,9728),g&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),d)for(var y=0;y<i.length;y++){n.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+y,36161,h.__webglColorRenderbuffer[y]);var A=r.get(i[y]).__webglTexture;n.bindFramebuffer(36160,h.__webglFramebuffer),e.framebufferTexture2D(36009,36064+y,3553,A,0)}n.bindFramebuffer(36009,h.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=z,this.setupFrameBufferTexture=U,this.useMultisampledRTT=G}function cs(e,t,n){var r=n.isWebGL2;return{convert:function(n){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n===Ce)return 5121;if(n===De)return 32819;if(n===Oe)return 32820;if(n===ke)return 5120;if(n===Te)return 5122;if(n===Ie)return 5123;if(n===Be)return 5124;if(n===Re)return 5125;if(n===Le)return 5126;if(n===Pe)return r?5131:null!==(i=t.get("OES_texture_half_float"))?i.HALF_FLOAT_OES:null;if(n===Ne)return 6406;if(n===Ze)return 6408;if(n===ze)return 6409;if(n===He)return 6410;if(n===Ge)return 6402;if(n===Qe)return 34041;if(n===Ue)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===Ut)return null!==(i=t.get("EXT_sRGB"))?i.SRGB_ALPHA_EXT:null;if(n===Ve)return 6403;if(n===je)return 36244;if(n===We)return 33319;if(n===qe)return 33320;if(n===Je)return 36249;if(n===Xe||n===Ye||n===Ke||n===$e)if(a===It){if(null===(i=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===Xe)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Ye)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Ke)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===$e)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(i=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===Xe)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ye)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Ke)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===$e)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===et||n===tt||n===nt||n===rt){if(null===(i=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===et)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===tt)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===nt)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===rt)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===it)return null!==(i=t.get("WEBGL_compressed_texture_etc1"))?i.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===at||n===ot){if(null===(i=t.get("WEBGL_compressed_texture_etc")))return null;if(n===at)return a===It?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(n===ot)return a===It?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(n===st||n===lt||n===ut||n===ct||n===ht||n===dt||n===ft||n===pt||n===vt||n===mt||n===gt||n===yt||n===At||n===xt){if(null===(i=t.get("WEBGL_compressed_texture_astc")))return null;if(n===st)return a===It?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===lt)return a===It?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===ut)return a===It?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===ct)return a===It?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===ht)return a===It?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===dt)return a===It?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===ft)return a===It?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===pt)return a===It?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===vt)return a===It?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===mt)return a===It?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===gt)return a===It?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===yt)return a===It?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===At)return a===It?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===xt)return a===It?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===bt){if(null===(i=t.get("EXT_texture_compression_bptc")))return null;if(n===bt)return a===It?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===Fe?r?34042:null!==(i=t.get("WEBGL_depth_texture"))?i.UNSIGNED_INT_24_8_WEBGL:null:void 0!==e[n]?e[n]:null}}}var hs=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,l.Z)(this,n),(e=t.call(this)).isArrayCamera=!0,e.cameras=r,e}return(0,u.Z)(n)}(Ci),ds=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.call(this)).isGroup=!0,e.type="Group",e}return(0,u.Z)(n)}(Ir),fs={type:"move"},ps=function(){function e(){(0,l.Z)(this,e),this._targetRay=null,this._grip=null,this._hand=null}return(0,u.Z)(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new ds,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new ds,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Tn,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Tn),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new ds,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Tn,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Tn),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"connect",value:function(e){if(e&&e.hand){var t=this._hand;if(t){var n,r=(0,s.Z)(e.hand.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this._getHandJoint(t,i)}}catch(a){r.e(a)}finally{r.f()}}}return this.dispatchEvent({type:"connected",data:e}),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,i=null,a=null,o=this._targetRay,l=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(u&&e.hand){a=!0;var c,h=(0,s.Z)(e.hand.values());try{for(h.s();!(c=h.n()).done;){var d=c.value,f=t.getJointPose(d,n),p=this._getHandJoint(u,d);null!==f&&(p.matrix.fromArray(f.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.jointRadius=f.radius),p.visible=null!==f}}catch(y){h.e(y)}finally{h.f()}var v=u.joints["index-finger-tip"],m=u.joints["thumb-tip"],g=v.position.distanceTo(m.position);u.inputState.pinching&&g>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&g<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),i.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(i.linearVelocity)):l.hasLinearVelocity=!1,i.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(i.angularVelocity)):l.hasAngularVelocity=!1);null!==o&&(null===(r=t.getPose(e.targetRaySpace,n))&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(fs)))}return null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==i),null!==u&&(u.visible=null!==a),this}},{key:"_getHandJoint",value:function(e,t){if(void 0===e.joints[t.jointName]){var n=new ds;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}]),e}(),vs=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a,o,s,u,c,h,d){var f;if((0,l.Z)(this,n),(d=void 0!==d?d:Ge)!==Ge&&d!==Qe)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&d===Ge&&(i=Re),void 0===i&&d===Qe&&(i=Fe),(f=t.call(this,null,a,o,s,u,c,d,i,h)).isDepthTexture=!0,f.image={width:e,height:r},f.magFilter=void 0!==u?u:be,f.minFilter=void 0!==c?c:be,f.flipY=!1,f.generateMipmaps=!1,f}return(0,u.Z)(n)}(wn),ms=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i;(0,l.Z)(this,n),i=t.call(this);var a=(0,v.Z)(i),o=null,u=1,c=null,h="local-floor",d=null,f=null,m=null,y=null,A=null,x=null,b=r.getContextAttributes(),_=null,w=null,E=[],S=[],M=new Set,C=new Map,k=new Ci;k.layers.enable(1),k.viewport=new En;var T=new Ci;T.layers.enable(2),T.viewport=new En;var I=[k,T],B=new hs;B.layers.enable(1),B.layers.enable(2);var R=null,L=null;function P(e){var t=S.indexOf(e.inputSource);if(-1!==t){var n=E[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}}function D(){o.removeEventListener("select",P),o.removeEventListener("selectstart",P),o.removeEventListener("selectend",P),o.removeEventListener("squeeze",P),o.removeEventListener("squeezestart",P),o.removeEventListener("squeezeend",P),o.removeEventListener("end",D),o.removeEventListener("inputsourceschange",O);for(var t=0;t<E.length;t++){var n=S[t];null!==n&&(S[t]=null,E[t].disconnect(n))}R=null,L=null,e.setRenderTarget(_),A=null,y=null,m=null,o=null,w=null,z.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}function O(e){for(var t=0;t<e.removed.length;t++){var n=e.removed[t],r=S.indexOf(n);r>=0&&(S[r]=null,E[r].disconnect(n))}for(var i=0;i<e.added.length;i++){var a=e.added[i],o=S.indexOf(a);if(-1===o){for(var s=0;s<E.length;s++){if(s>=S.length){S.push(a),o=s;break}if(null===S[s]){S[s]=a,o=s;break}}if(-1===o)break}var l=E[o];l&&l.connect(a)}}i.cameraAutoUpdate=!0,i.enabled=!1,i.isPresenting=!1,i.getController=function(e){var t=E[e];return void 0===t&&(t=new ps,E[e]=t),t.getTargetRaySpace()},i.getControllerGrip=function(e){var t=E[e];return void 0===t&&(t=new ps,E[e]=t),t.getGripSpace()},i.getHand=function(e){var t=E[e];return void 0===t&&(t=new ps,E[e]=t),t.getHandSpace()},i.setFramebufferScaleFactor=function(e){u=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},i.setReferenceSpaceType=function(e){h=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},i.getReferenceSpace=function(){return d||c},i.setReferenceSpace=function(e){d=e},i.getBaseLayer=function(){return null!==y?y:A},i.getBinding=function(){return m},i.getFrame=function(){return x},i.getSession=function(){return o},i.setSession=function(){var t=(0,p.Z)((0,g.Z)().mark((function t(n){var i,s,l,f,p;return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(o=n)){t.next=25;break}if(_=e.getRenderTarget(),o.addEventListener("select",P),o.addEventListener("selectstart",P),o.addEventListener("selectend",P),o.addEventListener("squeeze",P),o.addEventListener("squeezestart",P),o.addEventListener("squeezeend",P),o.addEventListener("end",D),o.addEventListener("inputsourceschange",O),!0===b.xrCompatible){t.next=14;break}return t.next=14,r.makeXRCompatible();case 14:return void 0===o.renderState.layers||!1===e.capabilities.isWebGL2?(i={antialias:void 0!==o.renderState.layers||b.antialias,alpha:b.alpha,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:u},A=new XRWebGLLayer(o,r,i),o.updateRenderState({baseLayer:A}),w=new Sn(A.framebufferWidth,A.framebufferHeight,{format:Ze,type:Ce,encoding:e.outputEncoding,stencilBuffer:b.stencil})):(s=null,l=null,f=null,b.depth&&(f=b.stencil?35056:33190,s=b.stencil?Qe:Ge,l=b.stencil?Fe:Re),p={colorFormat:32856,depthFormat:f,scaleFactor:u},m=new XRWebGLBinding(o,r),y=m.createProjectionLayer(p),o.updateRenderState({layers:[y]}),w=new Sn(y.textureWidth,y.textureHeight,{format:Ze,type:Ce,depthTexture:new vs(y.textureWidth,y.textureHeight,l,void 0,void 0,void 0,void 0,void 0,void 0,s),stencilBuffer:b.stencil,encoding:e.outputEncoding,samples:b.antialias?4:0}),e.properties.get(w).__ignoreDepthValues=y.ignoreDepthValues),w.isXRRenderTarget=!0,this.setFoveation(1),d=null,t.next=20,o.requestReferenceSpace(h);case 20:c=t.sent,z.setContext(o),z.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"});case 25:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();var F=new Tn,N=new Tn;function U(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}i.updateCamera=function(e){if(null!==o){B.near=T.near=k.near=e.near,B.far=T.far=k.far=e.far,R===B.near&&L===B.far||(o.updateRenderState({depthNear:B.near,depthFar:B.far}),R=B.near,L=B.far);var t=e.parent,n=B.cameras;U(B,t);for(var r=0;r<n.length;r++)U(n[r],t);B.matrixWorld.decompose(B.position,B.quaternion,B.scale),e.matrix.copy(B.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);for(var i=e.children,a=0,s=i.length;a<s;a++)i[a].updateMatrixWorld(!0);2===n.length?function(e,t,n){F.setFromMatrixPosition(t.matrixWorld),N.setFromMatrixPosition(n.matrixWorld);var r=F.distanceTo(N),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(a[8]+1)/a[0],d=o*c,f=o*h,p=r/(-c+h),v=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var m=o+p,g=s+p,y=d-v,A=f+(r-v),x=l*s/g*m,b=u*s/g*m;e.projectionMatrix.makePerspective(y,A,x,b,m,g)}(B,k,T):B.projectionMatrix.copy(k.projectionMatrix)}},i.getCamera=function(){return B},i.getFoveation=function(){return null!==y?y.fixedFoveation:null!==A?A.fixedFoveation:void 0},i.setFoveation=function(e){null!==y&&(y.fixedFoveation=e),null!==A&&void 0!==A.fixedFoveation&&(A.fixedFoveation=e)},i.getPlanes=function(){return M};var Z=null;var z=new Ui;return z.setAnimationLoop((function(t,n){if(f=n.getViewerPose(d||c),x=n,null!==f){var r=f.views;null!==A&&(e.setRenderTargetFramebuffer(w,A.framebuffer),e.setRenderTarget(w));var i=!1;r.length!==B.cameras.length&&(B.cameras.length=0,i=!0);for(var o=0;o<r.length;o++){var l=r[o],u=null;if(null!==A)u=A.getViewport(l);else{var h=m.getViewSubImage(y,l);u=h.viewport,0===o&&(e.setRenderTargetTextures(w,h.colorTexture,y.ignoreDepthValues?void 0:h.depthStencilTexture),e.setRenderTarget(w))}var p=I[o];void 0===p&&((p=new Ci).layers.enable(o),p.viewport=new En,I[o]=p),p.matrix.fromArray(l.transform.matrix),p.projectionMatrix.fromArray(l.projectionMatrix),p.viewport.set(u.x,u.y,u.width,u.height),0===o&&B.matrix.copy(p.matrix),!0===i&&B.cameras.push(p)}}for(var v=0;v<E.length;v++){var g=S[v],b=E[v];null!==g&&void 0!==b&&b.update(g,n,d||c)}if(Z&&Z(t,n),n.detectedPlanes){a.dispatchEvent({type:"planesdetected",data:n.detectedPlanes});var _,k=null,T=(0,s.Z)(M);try{for(T.s();!(_=T.n()).done;){var R=_.value;n.detectedPlanes.has(R)||(null===k&&(k=[]),k.push(R))}}catch(z){T.e(z)}finally{T.f()}if(null!==k){var L,P=(0,s.Z)(k);try{for(P.s();!(L=P.n()).done;){var D=L.value;M.delete(D),C.delete(D),a.dispatchEvent({type:"planeremoved",data:D})}}catch(z){P.e(z)}finally{P.f()}}var O,F=(0,s.Z)(n.detectedPlanes);try{for(F.s();!(O=F.n()).done;){var N=O.value;if(M.has(N)){var U=C.get(N);N.lastChangedTime>U&&(C.set(N,N.lastChangedTime),a.dispatchEvent({type:"planechanged",data:N}))}else M.add(N),C.set(N,n.lastChangedTime),a.dispatchEvent({type:"planeadded",data:N})}}catch(z){F.e(z)}finally{F.f()}}x=null})),i.setAnimationLoop=function(e){Z=e},i.dispose=function(){},i}return(0,u.Z)(n)}(Zt);function gs(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,r.side===M&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),r.side===M&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);var i,a,o=t.get(r).envMap;if(o&&(n.envMap.value=o,n.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;var s=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*s}r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?i=r.map:r.specularMap?i=r.specularMap:r.displacementMap?i=r.displacementMap:r.normalMap?i=r.normalMap:r.bumpMap?i=r.bumpMap:r.roughnessMap?i=r.roughnessMap:r.metalnessMap?i=r.metalnessMap:r.alphaMap?i=r.alphaMap:r.emissiveMap?i=r.emissiveMap:r.clearcoatMap?i=r.clearcoatMap:r.clearcoatNormalMap?i=r.clearcoatNormalMap:r.clearcoatRoughnessMap?i=r.clearcoatRoughnessMap:r.iridescenceMap?i=r.iridescenceMap:r.iridescenceThicknessMap?i=r.iridescenceThicknessMap:r.specularIntensityMap?i=r.specularIntensityMap:r.specularColorMap?i=r.specularColorMap:r.transmissionMap?i=r.transmissionMap:r.thicknessMap?i=r.thicknessMap:r.sheenColorMap?i=r.sheenColorMap:r.sheenRoughnessMap&&(i=r.sheenRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),n.uvTransform.value.copy(i.matrix)),r.aoMap?a=r.aoMap:r.lightMap&&(a=r.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,wi(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,r,i,a,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);var r=t.get(n).envMap;r&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===M&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,o)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,a):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function ys(e,t,n,r){var i={},a={},o=[],s=n.isWebGL2?e.getParameter(35375):0;function l(e,t,n){var r=e.value;if(void 0===n[t]){if("number"===typeof r)n[t]=r;else{for(var i=Array.isArray(r)?r:[r],a=[],o=0;o<i.length;o++)a.push(i[o].clone());n[t]=a}return!0}if("number"===typeof r){if(n[t]!==r)return n[t]=r,!0}else for(var s=Array.isArray(n[t])?n[t]:[n[t]],l=Array.isArray(r)?r:[r],u=0;u<s.length;u++){var c=s[u];if(!1===c.equals(l[u]))return c.copy(l[u]),!0}return!1}function u(e){var t={boundary:0,storage:0};return"number"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function c(t){var n=t.target;n.removeEventListener("dispose",c);var r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){var n=t.program;r.uniformBlockBinding(e,n)},update:function(n,h){var d=i[n.id];void 0===d&&(!function(e){for(var t=e.uniforms,n=0,r=16,i=0,a=0,o=t.length;a<o;a++){for(var s=t[a],l={boundary:0,storage:0},c=Array.isArray(s.value)?s.value:[s.value],h=0,d=c.length;h<d;h++){var f=u(c[h]);l.boundary+=f.boundary,l.storage+=f.storage}if(s.__data=new Float32Array(l.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=n,a>0)0!==(i=n%r)&&r-i-l.boundary<0&&(n+=r-i,s.__offset=n);n+=l.storage}(i=n%r)>0&&(n+=r-i);e.__size=n,e.__cache={}}(n),d=function(t){var n=function(){for(var e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;var r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(35345,r),e.bufferData(35345,i,a),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",c));var f=h.program;r.updateUBOMapping(n,f);var p=t.render.frame;a[n.id]!==p&&(!function(t){var n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(35345,n);for(var o=0,s=r.length;o<s;o++){var c=r[o];if(!0===l(c,o,a)){for(var h=c.__offset,d=Array.isArray(c.value)?c.value:[c.value],f=0,p=0;p<d.length;p++){var v=d[p],m=u(v);"number"===typeof v?(c.__data[0]=v,e.bufferSubData(35345,h+f,c.__data)):v.isMatrix3?(c.__data[0]=v.elements[0],c.__data[1]=v.elements[1],c.__data[2]=v.elements[2],c.__data[3]=v.elements[0],c.__data[4]=v.elements[3],c.__data[5]=v.elements[4],c.__data[6]=v.elements[5],c.__data[7]=v.elements[0],c.__data[8]=v.elements[6],c.__data[9]=v.elements[7],c.__data[10]=v.elements[8],c.__data[11]=v.elements[0]):(v.toArray(c.__data,f),f+=m.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,h,c.__data)}}e.bindBuffer(35345,null)}(n),a[n.id]=p)},dispose:function(){for(var t in i)e.deleteBuffer(i[t]);o=[],i={},a={}}}}function As(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;var t,n=void 0!==e.canvas?e.canvas:function(){var e=on("canvas");return e.style.display="block",e}(),r=void 0!==e.context?e.context:null,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;t=null!==r?r.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;var h=null,d=null,f=[],p=[];this.domElement=n,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Tt,this.physicallyCorrectLights=!1,this.toneMapping=se,this.toneMappingExposure=1;var v=this,m=!1,g=0,A=0,x=null,b=-1,_=null,w=new En,E=new En,C=null,k=n.width,T=n.height,I=1,B=null,R=null,L=new En(0,0,k,T),P=new En(0,0,k,T),D=!1,O=new Ni,F=!1,N=!1,U=null,Z=new ar,z=new tn,H=new Tn,G={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Q(){return null===x?I:1}var V,j,W,q,J,X,Y,K,$,ee,te,ne,re,ie,ae,oe,le,ue,ce,he,de,fe,pe,ve,me=r;function ge(e,t){for(var r=0;r<e.length;r++){var i=e[r],a=n.getContext(i,t);if(null!==a)return a}return null}try{var ye={alpha:!0,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if("setAttribute"in n&&n.setAttribute("data-engine","three.js r".concat(y)),n.addEventListener("webglcontextlost",_e,!1),n.addEventListener("webglcontextrestored",we,!1),n.addEventListener("webglcontextcreationerror",Ee,!1),null===me){var Ae=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&Ae.shift(),null===(me=ge(Ae,ye)))throw ge(Ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===me.getShaderPrecisionFormat&&(me.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ze){throw console.error("THREE.WebGLRenderer: "+ze.message),ze}function xe(){V=new fa(me),j=new Ji(me,V,e),V.init(j),fe=new cs(me,V,j),W=new ls(me,V,j),q=new ma,J=new jo,X=new us(me,V,W,J,j,fe,q),Y=new Yi(v),K=new da(v),$=new Zi(me,j),pe=new Wi(me,V,$,j),ee=new pa(me,$,q,pe),te=new xa(me,ee,$,q),ce=new Aa(me,j,X),oe=new Xi(J),ne=new Vo(v,Y,K,V,j,pe,oe),re=new gs(v,J),ie=new Xo,ae=new ns(V,j),ue=new ji(v,Y,K,W,te,t,s),le=new ss(v,te,j),ve=new ys(me,q,j,W),he=new qi(me,V,q,j),de=new va(me,V,q,j),q.programs=ne.programs,v.capabilities=j,v.extensions=V,v.properties=J,v.renderLists=ie,v.shadowMap=le,v.state=W,v.info=q}xe();var be=new ms(v,me);function _e(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function we(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;var e=q.autoReset,t=le.enabled,n=le.autoUpdate,r=le.needsUpdate,i=le.type;xe(),q.autoReset=e,le.enabled=t,le.autoUpdate=n,le.needsUpdate=r,le.type=i}function Ee(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Se(e){var t=e.target;t.removeEventListener("dispose",Se),function(e){(function(e){var t=J.get(e).programs;void 0!==t&&(t.forEach((function(e){ne.releaseProgram(e)})),e.isShaderMaterial&&ne.releaseShaderCache(e))})(e),J.remove(e)}(t)}this.xr=be,this.getContext=function(){return me},this.getContextAttributes=function(){return me.getContextAttributes()},this.forceContextLoss=function(){var e=V.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=V.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(e){void 0!==e&&(I=e,this.setSize(k,T,!1))},this.getSize=function(e){return e.set(k,T)},this.setSize=function(e,t,r){be.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(k=e,T=t,n.width=Math.floor(e*I),n.height=Math.floor(t*I),!1!==r&&(n.style.width=e+"px",n.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(k*I,T*I).floor()},this.setDrawingBufferSize=function(e,t,r){k=e,T=t,I=r,n.width=Math.floor(e*r),n.height=Math.floor(t*r),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(w)},this.getViewport=function(e){return e.copy(L)},this.setViewport=function(e,t,n,r){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,n,r),W.viewport(w.copy(L).multiplyScalar(I).floor())},this.getScissor=function(e){return e.copy(P)},this.setScissor=function(e,t,n,r){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,r),W.scissor(E.copy(P).multiplyScalar(I).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(e){W.setScissorTest(D=e)},this.setOpaqueSort=function(e){B=e},this.setTransparentSort=function(e){R=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(){var e=0;(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(e|=16384),(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e|=256),(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(e|=1024),me.clear(e)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",_e,!1),n.removeEventListener("webglcontextrestored",we,!1),n.removeEventListener("webglcontextcreationerror",Ee,!1),ie.dispose(),ae.dispose(),J.dispose(),Y.dispose(),K.dispose(),te.dispose(),pe.dispose(),ve.dispose(),ne.dispose(),be.dispose(),be.removeEventListener("sessionstart",Te),be.removeEventListener("sessionend",Ie),U&&(U.dispose(),U=null),Be.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=G);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=G);X.resetTextureUnits();var a=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===x?v.outputEncoding:!0===x.isXRRenderTarget?x.texture.encoding:Tt,l=(r.isMeshStandardMaterial?K:Y).get(r.envMap||o),u=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,f=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,m=r.toneMapped?v.toneMapping:se,g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==g?g.length:0,A=J.get(r),w=d.state.lights;if(!0===F&&(!0===N||e!==_)){var E=e===_&&r.id===b;oe.setState(r,e,E)}var S=!1;r.version===A.__version?A.needsLights&&A.lightsStateVersion!==w.state.version||A.outputEncoding!==s||i.isInstancedMesh&&!1===A.instancing?S=!0:i.isInstancedMesh||!0!==A.instancing?i.isSkinnedMesh&&!1===A.skinning?S=!0:i.isSkinnedMesh||!0!==A.skinning?A.envMap!==l||!0===r.fog&&A.fog!==a?S=!0:void 0===A.numClippingPlanes||A.numClippingPlanes===oe.numPlanes&&A.numIntersection===oe.numIntersection?(A.vertexAlphas!==u||A.vertexTangents!==c||A.morphTargets!==h||A.morphNormals!==f||A.morphColors!==p||A.toneMapping!==m||!0===j.isWebGL2&&A.morphTargetsCount!==y)&&(S=!0):S=!0:S=!0:S=!0:(S=!0,A.__version=r.version);var M=A.currentProgram;!0===S&&(M=Ne(r,t,i));var C=!1,k=!1,B=!1,R=M.getUniforms(),L=A.uniforms;W.useProgram(M.program)&&(C=!0,k=!0,B=!0);r.id!==b&&(b=r.id,k=!0);if(C||_!==e){if(R.setValue(me,"projectionMatrix",e.projectionMatrix),j.logarithmicDepthBuffer&&R.setValue(me,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),_!==e&&(_=e,k=!0,B=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var P=R.map.cameraPosition;void 0!==P&&P.setValue(me,H.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&R.setValue(me,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&R.setValue(me,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){R.setOptional(me,i,"bindMatrix"),R.setOptional(me,i,"bindMatrixInverse");var D=i.skeleton;D&&(j.floatVertexTextures?(null===D.boneTexture&&D.computeBoneTexture(),R.setValue(me,"boneTexture",D.boneTexture,X),R.setValue(me,"boneTextureSize",D.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var O=n.morphAttributes;(void 0!==O.position||void 0!==O.normal||void 0!==O.color&&!0===j.isWebGL2)&&ce.update(i,n,r,M);(k||A.receiveShadow!==i.receiveShadow)&&(A.receiveShadow=i.receiveShadow,R.setValue(me,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(L.envMap.value=l,L.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);k&&(R.setValue(me,"toneMappingExposure",v.toneMappingExposure),A.needsLights&&(z=B,(Z=L).ambientLightColor.needsUpdate=z,Z.lightProbe.needsUpdate=z,Z.directionalLights.needsUpdate=z,Z.directionalLightShadows.needsUpdate=z,Z.pointLights.needsUpdate=z,Z.pointLightShadows.needsUpdate=z,Z.spotLights.needsUpdate=z,Z.spotLightShadows.needsUpdate=z,Z.rectAreaLights.needsUpdate=z,Z.hemisphereLights.needsUpdate=z),a&&!0===r.fog&&re.refreshFogUniforms(L,a),re.refreshMaterialUniforms(L,r,I,T,U),So.upload(me,A.uniformsList,L,X));var Z,z;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(So.upload(me,A.uniformsList,L,X),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&R.setValue(me,"center",i.center);if(R.setValue(me,"modelViewMatrix",i.modelViewMatrix),R.setValue(me,"normalMatrix",i.normalMatrix),R.setValue(me,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial)for(var Q=r.uniformsGroups,V=0,q=Q.length;V<q;V++)if(j.isWebGL2){var $=Q[V];ve.update($,M),ve.bind($,M)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return M}(e,t,n,r,i);W.setMaterial(r,o);var l=n.index,u=1;!0===r.wireframe&&(l=ee.getWireframeAttribute(n),u=2);var c=n.drawRange,h=n.attributes.position,f=c.start*u,p=(c.start+c.count)*u;null!==a&&(f=Math.max(f,a.start*u),p=Math.min(p,(a.start+a.count)*u)),null!==l?(f=Math.max(f,0),p=Math.min(p,l.count)):void 0!==h&&null!==h&&(f=Math.max(f,0),p=Math.min(p,h.count));var m=p-f;if(!(m<0||m===1/0)){var g;pe.setup(i,r,s,n,l);var y=he;if(null!==l&&(g=$.get(l),(y=de).setIndex(g)),i.isMesh)!0===r.wireframe?(W.setLineWidth(r.wireframeLinewidth*Q()),y.setMode(1)):y.setMode(4);else if(i.isLine){var A=r.linewidth;void 0===A&&(A=1),W.setLineWidth(A*Q()),i.isLineSegments?y.setMode(1):i.isLineLoop?y.setMode(2):y.setMode(3)}else i.isPoints?y.setMode(0):i.isSprite&&y.setMode(4);if(i.isInstancedMesh)y.renderInstances(f,m,i.count);else if(n.isInstancedBufferGeometry){var w=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,E=Math.min(n.instanceCount,w);y.renderInstances(f,m,E)}else y.render(f,m)}},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&3===e.side?(e.side=M,e.needsUpdate=!0,Ne(e,t,n),e.side=S,e.needsUpdate=!0,Ne(e,t,n),e.side=3):Ne(e,t,n)}(d=ae.get(e)).init(),p.push(d),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(v.physicallyCorrectLights),e.traverse((function(t){var r=t.material;if(r)if(Array.isArray(r))for(var i=0;i<r.length;i++){n(r[i],e,t)}else n(r,e,t)})),p.pop(),d=null};var ke=null;function Te(){Be.stop()}function Ie(){Be.start()}var Be=new Ui;function Re(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||O.intersectsSprite(e)){r&&H.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Z);var i=te.update(e),a=e.material;a.visible&&h.push(e,i,a,n,H.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==q.render.frame&&(e.skeleton.update(),e.skeleton.frame=q.render.frame),!e.frustumCulled||O.intersectsObject(e))){r&&H.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Z);var o=te.update(e),s=e.material;if(Array.isArray(s))for(var l=o.groups,u=0,c=l.length;u<c;u++){var f=l[u],p=s[f.materialIndex];p&&p.visible&&h.push(e,o,p,n,H.z,f)}else s.visible&&h.push(e,o,s,n,H.z,null)}for(var v=e.children,m=0,g=v.length;m<g;m++)Re(v[m],t,n,r)}}function De(e,t,n,r){var i=e.opaque,a=e.transmissive,s=e.transparent;d.setupLightsView(n),a.length>0&&function(e,t,n){var r=j.isWebGL2;null===U&&(U=new Sn(1,1,{generateMipmaps:!0,type:V.has("EXT_color_buffer_half_float")?Pe:Ce,minFilter:Me,samples:r&&!0===o?4:0}));v.getDrawingBufferSize(z),r?U.setSize(z.x,z.y):U.setSize(Yt(z.x),Yt(z.y));var i=v.getRenderTarget();v.setRenderTarget(U),v.clear();var a=v.toneMapping;v.toneMapping=se,Oe(e,t,n),v.toneMapping=a,X.updateMultisampleRenderTarget(U),X.updateRenderTargetMipmap(U),v.setRenderTarget(i)}(i,t,n),r&&W.viewport(w.copy(r)),i.length>0&&Oe(i,t,n),a.length>0&&Oe(a,t,n),s.length>0&&Oe(s,t,n),W.buffers.depth.setTest(!0),W.buffers.depth.setMask(!0),W.buffers.color.setMask(!0),W.setPolygonOffset(!1)}function Oe(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,l=o.geometry,u=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&Fe(s,t,n,l,u,c)}}function Fe(e,t,n,r,i,a){e.onBeforeRender(v,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(v,t,n,r,e,a),!0===i.transparent&&3===i.side?(i.side=M,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,a),i.side=S,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,a),i.side=3):v.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(v,t,n,r,i,a)}function Ne(e,t,n){!0!==t.isScene&&(t=G);var r=J.get(e),i=d.state.lights,a=d.state.shadowsArray,o=i.state.version,s=ne.getParameters(e,i.state,a,t,n),l=ne.getProgramCacheKey(s),u=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?K:Y).get(e.envMap||r.environment),void 0===u&&(e.addEventListener("dispose",Se),u=new Map,r.programs=u);var c=u.get(l);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===o)return Ue(e,s),c}else s.uniforms=ne.getUniforms(e),e.onBuild(n,s,v),e.onBeforeCompile(s,v),c=ne.acquireProgram(s,l),u.set(l,c),r.uniforms=s.uniforms;var h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=oe.uniform),Ue(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);var f=c.getUniforms(),p=So.seqWithValue(f.seq,h);return r.currentProgram=c,r.uniformsList=p,c}function Ue(e,t){var n=J.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Be.setAnimationLoop((function(e){ke&&ke(e)})),"undefined"!==typeof self&&Be.setContext(self),this.setAnimationLoop=function(e){ke=e,be.setAnimationLoop(e),null===e?Be.stop():Be.start()},be.addEventListener("sessionstart",Te),be.addEventListener("sessionend",Ie),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==m){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===be.enabled&&!0===be.isPresenting&&(!0===be.cameraAutoUpdate&&be.updateCamera(t),t=be.getCamera()),!0===e.isScene&&e.onBeforeRender(v,e,t,x),(d=ae.get(e,p.length)).init(),p.push(d),Z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),O.setFromProjectionMatrix(Z),N=this.localClippingEnabled,F=oe.init(this.clippingPlanes,N,t),(h=ie.get(e,f.length)).init(),f.push(h),Re(e,t,0,v.sortObjects),h.finish(),!0===v.sortObjects&&h.sort(B,R),!0===F&&oe.beginShadows();var n=d.state.shadowsArray;if(le.render(n,e,t),!0===F&&oe.endShadows(),!0===this.info.autoReset&&this.info.reset(),ue.render(h,e),d.setupLights(v.physicallyCorrectLights),t.isArrayCamera)for(var r=t.cameras,i=0,a=r.length;i<a;i++){var o=r[i];De(h,e,o,o.viewport)}else De(h,e,t);null!==x&&(X.updateMultisampleRenderTarget(x),X.updateRenderTargetMipmap(x)),!0===e.isScene&&e.onAfterRender(v,e,t),pe.resetDefaultState(),b=-1,_=null,p.pop(),d=p.length>0?p[p.length-1]:null,f.pop(),h=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(e,t,n){J.get(e.texture).__webglTexture=t,J.get(e.depthTexture).__webglTexture=n;var r=J.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===V.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){var n=J.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;x=e,g=t,A=n;var r=!0,i=null,a=!1,o=!1;if(e){var s=J.get(e);void 0!==s.__useDefaultFramebuffer?(W.bindFramebuffer(36160,null),r=!1):void 0===s.__webglFramebuffer?X.setupRenderTarget(e):s.__hasExternalTextures&&X.rebindTextures(e,J.get(e.texture).__webglTexture,J.get(e.depthTexture).__webglTexture);var l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(o=!0);var u=J.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=u[t],a=!0):i=j.isWebGL2&&e.samples>0&&!1===X.useMultisampledRTT(e)?J.get(e).__webglMultisampledFramebuffer:u,w.copy(e.viewport),E.copy(e.scissor),C=e.scissorTest}else w.copy(L).multiplyScalar(I).floor(),E.copy(P).multiplyScalar(I).floor(),C=D;if(W.bindFramebuffer(36160,i)&&j.drawBuffers&&r&&W.drawBuffers(e,i),W.viewport(w),W.scissor(E),W.setScissorTest(C),a){var c=J.get(e.texture);me.framebufferTexture2D(36160,36064,34069+t,c.__webglTexture,n)}else if(o){var h=J.get(e.texture),d=t||0;me.framebufferTextureLayer(36160,36064,h.__webglTexture,n||0,d)}b=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(e&&e.isWebGLRenderTarget){var s=J.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){W.bindFramebuffer(36160,s);try{var l=e.texture,u=l.format,c=l.type;if(u!==Ze&&fe.convert(u)!==me.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=c===Pe&&(V.has("EXT_color_buffer_half_float")||j.isWebGL2&&V.has("EXT_color_buffer_float"));if(c!==Ce&&fe.convert(c)!==me.getParameter(35738)&&(c!==Le||!(j.isWebGL2||V.has("OES_texture_float")||V.has("WEBGL_color_buffer_float")))&&!h)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&me.readPixels(t,n,r,i,fe.convert(u),fe.convert(c),a)}finally{var d=null!==x?J.get(x).__webglFramebuffer:null;W.bindFramebuffer(36160,d)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r);X.setTexture2D(t,0),me.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,a),W.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,a=t.image.height,o=fe.convert(n.format),s=fe.convert(n.type);X.setTexture2D(n,0),me.pixelStorei(37440,n.flipY),me.pixelStorei(37441,n.premultiplyAlpha),me.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?me.texSubImage2D(3553,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?me.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):me.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&me.generateMipmap(3553),W.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(v.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,l=e.max.z-e.min.z+1,u=fe.convert(r.format),c=fe.convert(r.type);if(r.isData3DTexture)X.setTexture3D(r,0),a=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");X.setTexture2DArray(r,0),a=35866}me.pixelStorei(37440,r.flipY),me.pixelStorei(37441,r.premultiplyAlpha),me.pixelStorei(3317,r.unpackAlignment);var h=me.getParameter(3314),d=me.getParameter(32878),f=me.getParameter(3316),p=me.getParameter(3315),m=me.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;me.pixelStorei(3314,g.width),me.pixelStorei(32878,g.height),me.pixelStorei(3316,e.min.x),me.pixelStorei(3315,e.min.y),me.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?me.texSubImage3D(a,i,t.x,t.y,t.z,o,s,l,u,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),me.compressedTexSubImage3D(a,i,t.x,t.y,t.z,o,s,l,u,g.data)):me.texSubImage3D(a,i,t.x,t.y,t.z,o,s,l,u,c,g),me.pixelStorei(3314,h),me.pixelStorei(32878,d),me.pixelStorei(3316,f),me.pixelStorei(3315,p),me.pixelStorei(32877,m),0===i&&r.generateMipmaps&&me.generateMipmap(a),W.unbindTexture()}},this.initTexture=function(e){e.isCubeTexture?X.setTextureCube(e,0):e.isData3DTexture?X.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?X.setTexture2DArray(e,0):X.setTexture2D(e,0),W.unbindTexture()},this.resetState=function(){g=0,A=0,x=null,W.reset(),pe.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var xs=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n)}(As);xs.prototype.isWebGL1Renderer=!0;var bs=function(){function e(t,n){(0,l.Z)(this,e),this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=Ft,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Vt()}return(0,u.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Vt()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Vt()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}(),_s=new Tn,ws=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,l.Z)(this,e),this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=i}return(0,u.Z)(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)_s.fromBufferAttribute(this,t),_s.applyMatrix4(e),this.setXYZ(t,_s.x,_s.y,_s.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)_s.fromBufferAttribute(this,t),_s.applyNormalMatrix(e),this.setXYZ(t,_s.x,_s.y,_s.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)_s.fromBufferAttribute(this,t),_s.transformDirection(e),this.setXYZ(t,_s.x,_s.y,_s.z);return this}},{key:"setX",value:function(e,t){return this.normalized&&(t=$t(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.normalized&&(t=$t(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.normalized&&(t=$t(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.normalized&&(t=$t(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){var t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Kt(t,this.array)),t}},{key:"getY",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Kt(t,this.array)),t}},{key:"getZ",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Kt(t,this.array)),t}},{key:"getW",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Kt(t,this.array)),t}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),r=$t(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),r=$t(r,this.array),i=$t(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[i+a]);return new Wr(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}();var Es=new Tn,Ss=new En,Ms=new En,Cs=new Tn,ks=new ar,Ts=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i;return(0,l.Z)(this,n),(i=t.call(this,e,r)).isSkinnedMesh=!0,i.type="SkinnedMesh",i.bindMode="attached",i.bindMatrix=new ar,i.bindMatrixInverse=new ar,i}return(0,u.Z)(n,[{key:"copy",value:function(e,t){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new En,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){(0,a.Z)((0,o.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;Ss.fromBufferAttribute(r.attributes.skinIndex,e),Ms.fromBufferAttribute(r.attributes.skinWeight,e),Es.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var i=0;i<4;i++){var a=Ms.getComponent(i);if(0!==a){var o=Ss.getComponent(i);ks.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(Cs.copy(Es).applyMatrix4(ks),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(yi),Is=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.call(this)).isBone=!0,e.type="Bone",e}return(0,u.Z)(n)}(Ir),Bs=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:be,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:be,p=arguments.length>10?arguments[10]:void 0,v=arguments.length>11?arguments[11]:void 0;return(0,l.Z)(this,n),(e=t.call(this,null,u,c,h,d,f,o,s,p,v)).isDataTexture=!0,e.image={data:r,width:i,height:a},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return(0,u.Z)(n)}(wn),Rs=new ar,Ls=new ar,Ps=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,l.Z)(this,e),this.uuid=Vt(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return(0,u.Z)(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new ar)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new ar;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,i=this.bones.length;r<i;r++){var a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=e.length;i<a;i++){var o=e[i]?e[i].matrixWorld:Ls;Rs.multiplyMatrices(o,t[i]),Rs.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=Xt(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new Bs(t,e,e,Ze,Le);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var i=e.bones[n],a=t[i];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),a=new Is),this.bones.push(a),this.boneInverses.push((new ar).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,i=t.length;r<i;r++){var a=t[r];e.bones.push(a.uuid);var o=n[r];e.boneInverses.push(o.toArray())}return e}}]),e}(),Ds=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,l.Z)(this,n),(a=t.call(this,e,r,i)).isInstancedBufferAttribute=!0,a.meshPerAttribute=o,a}return(0,u.Z)(n,[{key:"copy",value:function(e){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=(0,a.Z)((0,o.Z)(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(Wr),Os=new ar,Fs=new ar,Ns=[],Us=new ar,Zs=new yi,zs=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){var a;(0,l.Z)(this,n),(a=t.call(this,e,r)).isInstancedMesh=!0,a.instanceMatrix=new Ds(new Float32Array(16*i),16),a.instanceColor=null,a.count=i,a.frustumCulled=!1;for(var o=0;o<i;o++)a.setMatrixAt(o,Us);return a}return(0,u.Z)(n,[{key:"copy",value:function(e,t){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(Zs.geometry=this.geometry,Zs.material=this.material,void 0!==Zs.material)for(var i=0;i<r;i++){this.getMatrixAt(i,Os),Fs.multiplyMatrices(n,Os),Zs.matrixWorld=Fs,Zs.raycast(e,Ns);for(var a=0,o=Ns.length;a<o;a++){var s=Ns[a];s.instanceId=i,s.object=this,t.push(s)}Ns.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new Ds(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(yi),Hs=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this)).isLineBasicMaterial=!0,r.type="LineBasicMaterial",r.color=new yn(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.fog=!0,r.setValues(e),r}return(0,u.Z)(n,[{key:"copy",value:function(e){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}]),n}(Gr),Gs=new Tn,Qs=new Tn,Vs=new ar,js=new ir,Ws=new Xn,qs=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ii,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Hs;return(0,l.Z)(this,n),(e=t.call(this)).isLine=!0,e.type="Line",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,u.Z)(n,[{key:"copy",value:function(e,t){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)Gs.fromBufferAttribute(t,r-1),Qs.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Gs.distanceTo(Qs);e.setAttribute("lineDistance",new Xr(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ws.copy(n.boundingSphere),Ws.applyMatrix4(r),Ws.radius+=i,!1!==e.ray.intersectsSphere(Ws)){Vs.copy(r).invert(),js.copy(e.ray).applyMatrix4(Vs);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new Tn,u=new Tn,c=new Tn,h=new Tn,d=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(null!==f)for(var v=Math.max(0,a.start),m=Math.min(f.count,a.start+a.count)-1;v<m;v+=d){var g=f.getX(v),y=f.getX(v+1);if(l.fromBufferAttribute(p,g),u.fromBufferAttribute(p,y),!(js.distanceSqToSegment(l,u,h,c)>s)){h.applyMatrix4(this.matrixWorld);var A=e.ray.origin.distanceTo(h);A<e.near||A>e.far||t.push({distance:A,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(var x=Math.max(0,a.start),b=Math.min(p.count,a.start+a.count)-1;x<b;x+=d){if(l.fromBufferAttribute(p,x),u.fromBufferAttribute(p,x+1),!(js.distanceSqToSegment(l,u,h,c)>s)){h.applyMatrix4(this.matrixWorld);var _=e.ray.origin.distanceTo(h);_<e.near||_>e.far||t.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}]),n}(Ir),Js=new Tn,Xs=new Tn,Ys=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i;return(0,l.Z)(this,n),(i=t.call(this,e,r)).isLineSegments=!0,i.type="LineSegments",i}return(0,u.Z)(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)Js.fromBufferAttribute(t,r),Xs.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Js.distanceTo(Xs);e.setAttribute("lineDistance",new Xr(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),n}(qs),Ks=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i;return(0,l.Z)(this,n),(i=t.call(this,e,r)).isLineLoop=!0,i.type="LineLoop",i}return(0,u.Z)(n)}(qs),$s=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this)).isPointsMaterial=!0,r.type="PointsMaterial",r.color=new yn(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.fog=!0,r.setValues(e),r}return(0,u.Z)(n,[{key:"copy",value:function(e){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(Gr),el=new ar,tl=new ir,nl=new Xn,rl=new Tn,il=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ii,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $s;return(0,l.Z)(this,n),(e=t.call(this)).isPoints=!0,e.type="Points",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,u.Z)(n,[{key:"copy",value:function(e,t){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),nl.copy(n.boundingSphere),nl.applyMatrix4(r),nl.radius+=i,!1!==e.ray.intersectsSphere(nl)){el.copy(r).invert(),tl.copy(e.ray).applyMatrix4(el);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=n.index,u=n.attributes.position;if(null!==l)for(var c=Math.max(0,a.start),h=Math.min(l.count,a.start+a.count);c<h;c++){var d=l.getX(c);rl.fromBufferAttribute(u,d),al(rl,d,s,r,e,t,this)}else for(var f=Math.max(0,a.start),p=Math.min(u.count,a.start+a.count);f<p;f++)rl.fromBufferAttribute(u,f),al(rl,f,s,r,e,t,this)}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}]),n}(Ir);function al(e,t,n,r,i,a,o){var s=tl.distanceSqToPoint(e);if(s<n){var l=new Tn;tl.closestPointToPoint(e,l),l.applyMatrix4(r);var u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;a.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:t,face:null,object:o})}}var ol=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this)).isMeshStandardMaterial=!0,r.defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new yn(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new yn(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Rt,r.normalScale=new tn(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return(0,u.Z)(n,[{key:"copy",value:function(e){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Gr),sl=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this)).isMeshPhysicalMaterial=!0,r.defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new tn(1,1),r.clearcoatNormalMap=null,r.ior=1.5,Object.defineProperty((0,v.Z)(r),"reflectivity",{get:function(){return jt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),r.iridescenceMap=null,r.iridescenceIOR=1.3,r.iridescenceThicknessRange=[100,400],r.iridescenceThicknessMap=null,r.sheenColor=new yn(0),r.sheenColorMap=null,r.sheenRoughness=1,r.sheenRoughnessMap=null,r.transmissionMap=null,r.thickness=0,r.thicknessMap=null,r.attenuationDistance=1/0,r.attenuationColor=new yn(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularColor=new yn(1,1,1),r.specularColorMap=null,r._sheen=0,r._clearcoat=0,r._iridescence=0,r._transmission=0,r.setValues(e),r}return(0,u.Z)(n,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}},{key:"iridescence",get:function(){return this._iridescence},set:function(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=(0,f.Z)(e.iridescenceThicknessRange),this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}]),n}(ol);function ll(e,t,n){return cl(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function ul(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function cl(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function hl(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n}function dl(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,l=0;l!==t;++l)i[o++]=e[s+l];return i}function fl(e,t,n,r){for(var i=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[r])&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[r])&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(o=a[r])&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}}var pl=function(){function e(t,n,r,i){(0,l.Z)(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return(0,u.Z)(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var l=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var u=n+a>>>1;e<t[u]?a=u:n=u+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}(),vl=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a){var o;return(0,l.Z)(this,n),(o=t.call(this,e,r,i,a))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:St,endingEnd:St},o}return(0,u.Z)(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case Mt:i=e,o=2*t-n;break;case Ct:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Mt:a=e,s=2*n-t;break;case Ct:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=a*u}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(r-t),p=f*f,v=p*f,m=-h*v+2*h*p-h*f,g=(1+h)*v+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*v+(1.5+d)*p+.5*f,A=d*v-d*p,x=0;x!==o;++x)i[x]=m*a[u+x]+g*a[l+x]+y*a[s+x]+A*a[c+x];return i}}]),n}(pl),ml=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a){return(0,l.Z)(this,n),t.call(this,e,r,i,a)}return(0,u.Z)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(n-t)/(r-t),c=1-u,h=0;h!==o;++h)i[h]=a[l+h]*c+a[s+h]*u;return i}}]),n}(pl),gl=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a){return(0,l.Z)(this,n),t.call(this,e,r,i,a)}return(0,u.Z)(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(pl),yl=function(){function e(t,n,r,i){if((0,l.Z)(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=ul(n,this.TimeBufferType),this.values=ul(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return(0,u.Z)(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new gl(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new ml(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new vl(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case _t:t=this.InterpolantFactoryMethodDiscrete;break;case wt:t=this.InterpolantFactoryMethodLinear;break;case Et:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return _t;case this.InterpolantFactoryMethodLinear:return wt;case this.InterpolantFactoryMethodSmooth:return Et}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=ll(n,i,a),this.values=ll(this.values,i*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&cl(r))for(var l=0,u=r.length;l!==u;++l){var c=r[l];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=ll(this.times),t=ll(this.values),n=this.getValueSize(),r=this.getInterpolation()===Et,i=e.length-1,a=1,o=1;o<i;++o){var s=!1,l=e[o];if(l!==e[o+1]&&(1!==o||l!==e[0]))if(r)s=!0;else for(var u=o*n,c=u-n,h=u+n,d=0;d!==n;++d){var f=t[u+d];if(f!==t[c+d]||f!==t[h+d]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var p=o*n,v=a*n,m=0;m!==n;++m)t[v+m]=t[p+m]}++a}}if(i>0){e[a]=e[i];for(var g=i*n,y=a*n,A=0;A!==n;++A)t[y+A]=t[g+A];++a}return a!==e.length?(this.times=ll(e,0,a),this.values=ll(t,0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=ll(this.times,0),t=ll(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:ul(e.times,Array),values:ul(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();yl.prototype.TimeBufferType=Float32Array,yl.prototype.ValueBufferType=Float32Array,yl.prototype.DefaultInterpolation=wt;var Al=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n)}(yl);Al.prototype.ValueTypeName="bool",Al.prototype.ValueBufferType=Array,Al.prototype.DefaultInterpolation=_t,Al.prototype.InterpolantFactoryMethodLinear=void 0,Al.prototype.InterpolantFactoryMethodSmooth=void 0;var xl=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n)}(yl);xl.prototype.ValueTypeName="color";var bl=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n)}(yl);bl.prototype.ValueTypeName="number";var _l=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a){return(0,l.Z)(this,n),t.call(this,e,r,i,a)}return(0,u.Z)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),l=e*o,u=l+o;l!==u;l+=4)kn.slerpFlat(i,0,a,l-o,a,l,s);return i}}]),n}(pl),wl=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new _l(this.times,this.values,this.getValueSize(),e)}}]),n}(yl);wl.prototype.ValueTypeName="quaternion",wl.prototype.DefaultInterpolation=wt,wl.prototype.InterpolantFactoryMethodSmooth=void 0;var El=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n)}(yl);El.prototype.ValueTypeName="string",El.prototype.ValueBufferType=Array,El.prototype.DefaultInterpolation=_t,El.prototype.InterpolantFactoryMethodLinear=void 0,El.prototype.InterpolantFactoryMethodSmooth=void 0;var Sl=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n)}(yl);Sl.prototype.ValueTypeName="vector";var Ml=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:kt;(0,l.Z)(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Vt(),this.duration<0&&this.resetDuration()}return(0,u.Z)(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(Cl(n[i]).scale(r));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,a=n.length;i!==a;++i)t.push(yl.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],l=[];s.push((o+i-1)%i,o,(o+1)%i),l.push(0,1,0);var u=hl(s);s=dl(s,1,u),l=dl(l,1,u),r||0!==s[0]||(s.push(i),l.push(l[0])),a.push(new bl(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/n))}return new this(e,-1,a)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],l=s.name.match(i);if(l&&l.length>1){var u=l[1],c=r[u];c||(r[u]=c=[]),c.push(s)}}var h=[];for(var d in r)h.push(this.CreateFromMorphTargetSequence(d,r[d],t,n));return h}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var a=[],o=[];fl(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,l=e.hierarchy||[],u=0;u<l.length;u++){var c=l[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){var h={},d=void 0;for(d=0;d<c.length;d++)if(c[d].morphTargets)for(var f=0;f<c[d].morphTargets.length;f++)h[c[d].morphTargets[f]]=-1;for(var p in h){for(var v=[],m=[],g=0;g!==c[d].morphTargets.length;++g){var y=c[d];v.push(y.time),m.push(y.morphTarget===p?1:0)}r.push(new bl(".morphTargetInfluence["+p+"]",v,m))}s=h.length*a}else{var A=".bones["+t[u].name+"]";n(Sl,A+".position",c,"pos",r),n(wl,A+".quaternion",c,"rot",r),n(Sl,A+".scale",c,"scl",r)}}return 0===r.length?null:new this(i,s,r,o)}}]),e}();function Cl(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return bl;case"vector":case"vector2":case"vector3":case"vector4":return Sl;case"color":return xl;case"quaternion":return wl;case"bool":case"boolean":return Al;case"string":return El}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];fl(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var kl={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Tl=(0,u.Z)((function e(t,n,r){(0,l.Z)(this,e);var i=this,a=!1,o=0,s=0,u=void 0,c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return u?u(e):e},this.setURLModifier=function(e){return u=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){var t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=c.length;t<n;t+=2){var r=c[t],i=c[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}})),Il=new Tl,Bl=function(){function e(t){(0,l.Z)(this,e),this.manager=void 0!==t?t:Il,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return(0,u.Z)(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),Rl={},Ll=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i;return(0,l.Z)(this,n),(i=t.call(this,e)).response=r,i}return(0,u.Z)(n)}((0,d.Z)(Error)),Pl=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e){return(0,l.Z)(this,n),t.call(this,e)}return(0,u.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=kl.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;if(void 0===Rl[e]){Rl[e]=[],Rl[e].push({onLoad:t,onProgress:n,onError:r});var o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(o).then((function(t){if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;var n=Rl[e],r=t.body.getReader(),i=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),a=i?parseInt(i):0,o=0!==a,s=0,l=new ReadableStream({start:function(e){!function t(){r.read().then((function(r){var i=r.done,l=r.value;if(i)e.close();else{s+=l.byteLength;for(var u=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a}),c=0,h=n.length;c<h;c++){var d=n[c];d.onProgress&&d.onProgress(u)}e.enqueue(l),t()}}))}()}});return new Response(l)}throw new Ll('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((function(e){switch(l){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((function(e){return(new DOMParser).parseFromString(e,s)}));case"json":return e.json();default:if(void 0===s)return e.text();var t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((function(e){return r.decode(e)}))}})).then((function(t){kl.add(e,t);var n=Rl[e];delete Rl[e];for(var r=0,i=n.length;r<i;r++){var a=n[r];a.onLoad&&a.onLoad(t)}})).catch((function(t){var n=Rl[e];if(void 0===n)throw i.manager.itemError(e),t;delete Rl[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e)})).finally((function(){i.manager.itemEnd(e)})),this.manager.itemStart(e)}else Rl[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(Bl),Dl=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e){return(0,l.Z)(this,n),t.call(this,e)}return(0,u.Z)(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=kl.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o=on("img");function s(){u(),kl.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){u(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function u(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}]),n}(Bl),Ol=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e){return(0,l.Z)(this,n),t.call(this,e)}return(0,u.Z)(n,[{key:"load",value:function(e,t,n,r){var i=new wn,a=new Dl(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}]),n}(Bl),Fl=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,l.Z)(this,n),(r=t.call(this)).isLight=!0,r.type="Light",r.color=new yn(e),r.intensity=i,r}return(0,u.Z)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,t){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=(0,a.Z)((0,o.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(Ir),Nl=new ar,Ul=new Tn,Zl=new Tn,zl=function(){function e(t){(0,l.Z)(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new tn(512,512),this.map=null,this.mapPass=null,this.matrix=new ar,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ni,this._frameExtents=new tn(1,1),this._viewportCount=1,this._viewports=[new En(0,0,1,1)]}return(0,u.Z)(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;Ul.setFromMatrixPosition(e.matrixWorld),t.position.copy(Ul),Zl.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Zl),t.updateMatrixWorld(),Nl.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Nl),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Nl)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),Hl=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.call(this,new Ci(50,1,.5,500))).isSpotLightShadow=!0,e.focus=1,e}return(0,u.Z)(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*Qt*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;r===t.fov&&i===t.aspect&&s===t.far||(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),(0,a.Z)((0,o.Z)(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(zl),Gl=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return(0,l.Z)(this,n),(i=t.call(this,e,r)).isSpotLight=!0,i.type="SpotLight",i.position.copy(Ir.DefaultUp),i.updateMatrix(),i.target=new Ir,i.distance=a,i.angle=o,i.penumbra=s,i.decay=u,i.map=null,i.shadow=new Hl,i}return(0,u.Z)(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(Fl),Ql=new ar,Vl=new Tn,jl=new Tn,Wl=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.call(this,new Ci(90,1,.5,500))).isPointLightShadow=!0,e._frameExtents=new tn(4,2),e._viewportCount=6,e._viewports=[new En(2,1,1,1),new En(0,1,1,1),new En(3,1,1,1),new En(1,1,1,1),new En(3,0,1,1),new En(1,0,1,1)],e._cubeDirections=[new Tn(1,0,0),new Tn(-1,0,0),new Tn(0,0,1),new Tn(0,0,-1),new Tn(0,1,0),new Tn(0,-1,0)],e._cubeUps=[new Tn(0,1,0),new Tn(0,1,0),new Tn(0,1,0),new Tn(0,1,0),new Tn(0,0,1),new Tn(0,0,-1)],e}return(0,u.Z)(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Vl.setFromMatrixPosition(e.matrixWorld),n.position.copy(Vl),jl.copy(n.position),jl.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(jl),n.updateMatrixWorld(),r.makeTranslation(-Vl.x,-Vl.y,-Vl.z),Ql.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ql)}}]),n}(zl),ql=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return(0,l.Z)(this,n),(i=t.call(this,e,r)).isPointLight=!0,i.type="PointLight",i.distance=a,i.decay=o,i.shadow=new Wl,i}return(0,u.Z)(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(Fl),Jl=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.call(this,new Ki(-5,5,5,-5,.5,500))).isDirectionalLightShadow=!0,e}return(0,u.Z)(n)}(zl),Xl=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i;return(0,l.Z)(this,n),(i=t.call(this,e,r)).isDirectionalLight=!0,i.type="DirectionalLight",i.position.copy(Ir.DefaultUp),i.updateMatrix(),i.target=new Ir,i.shadow=new Jl,i}return(0,u.Z)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return(0,a.Z)((0,o.Z)(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(Fl),Yl=function(){function e(){(0,l.Z)(this,e)}return(0,u.Z)(e,null,[{key:"decodeText",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(i){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),e}(),Kl=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return(0,u.Z)(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=kl.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){kl.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}]),n}(Bl);var $l="\\[\\]\\.:\\/",eu=new RegExp("["+$l+"]","g"),tu="[^"+$l+"]",nu="[^"+$l.replace("\\.","")+"]",ru=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",tu)+/(WCOD+)?/.source.replace("WCOD",nu)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",tu)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",tu)+"$"),iu=["material","materials","bones","map"],au=function(){function e(t,n,r){(0,l.Z)(this,e);var i=r||ou.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,i)}return(0,u.Z)(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),ou=function(){function e(t,n,r){(0,l.Z)(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return(0,u.Z)(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var l=t[i];if(void 0!==l){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else void 0!==l.fromArray&&void 0!==l.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(c=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else{var h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(eu,"")}},{key:"parseTrackName",value:function(e){var t=ru.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==iu.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(r)return r}return null}}]),e}();ou.Composite=au,ou.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ou.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ou.prototype.GetterByBindingType=[ou.prototype._getValue_direct,ou.prototype._getValue_array,ou.prototype._getValue_arrayElement,ou.prototype._getValue_toArray],ou.prototype.SetterByBindingTypeAndVersioning=[[ou.prototype._setValue_direct,ou.prototype._setValue_direct_setNeedsUpdate,ou.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ou.prototype._setValue_array,ou.prototype._setValue_array_setNeedsUpdate,ou.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ou.prototype._setValue_arrayElement,ou.prototype._setValue_arrayElement_setNeedsUpdate,ou.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ou.prototype._setValue_fromArray,ou.prototype._setValue_fromArray_setNeedsUpdate,ou.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:y}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=y);var su=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).dracoLoader=null,r.ktx2Loader=null,r.meshoptDecoder=null,r.pluginCallbacks=[],r.register((function(e){return new fu(e)})),r.register((function(e){return new xu(e)})),r.register((function(e){return new bu(e)})),r.register((function(e){return new vu(e)})),r.register((function(e){return new mu(e)})),r.register((function(e){return new gu(e)})),r.register((function(e){return new yu(e)})),r.register((function(e){return new du(e)})),r.register((function(e){return new Au(e)})),r.register((function(e){return new pu(e)})),r.register((function(e){return new cu(e)})),r.register((function(e){return new _u(e)})),r.register((function(e){return new wu(e)})),r}return(0,u.Z)(n,[{key:"load",value:function(e,t,n,r){var i,a=this;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Yl.extractUrlBase(e),this.manager.itemStart(e);var o=function(t){r?r(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},s=new Pl(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{a.parse(n,i,(function(n){t(n),a.manager.itemEnd(e)}),o)}catch(r){o(r)}}),n,o)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){var i,a={},o={};if("string"===typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer){if(Yl.decodeText(new Uint8Array(e,0,4))===Eu){try{a[uu.KHR_BINARY_GLTF]=new Cu(e)}catch(f){return void(r&&r(f))}i=JSON.parse(a[uu.KHR_BINARY_GLTF].content)}else i=JSON.parse(Yl.decodeText(new Uint8Array(e)))}else i=e;if(void 0===i.asset||i.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var s=new Ku(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});s.fileLoader.setRequestHeader(this.requestHeader);for(var l=0;l<this.pluginCallbacks.length;l++){var u=this.pluginCallbacks[l](s);o[u.name]=u,a[u.name]=!0}if(i.extensionsUsed)for(var c=0;c<i.extensionsUsed.length;++c){var h=i.extensionsUsed[c],d=i.extensionsRequired||[];switch(h){case uu.KHR_MATERIALS_UNLIT:a[h]=new hu;break;case uu.KHR_DRACO_MESH_COMPRESSION:a[h]=new ku(i,this.dracoLoader);break;case uu.KHR_TEXTURE_TRANSFORM:a[h]=new Tu;break;case uu.KHR_MESH_QUANTIZATION:a[h]=new Iu;break;default:d.indexOf(h)>=0&&void 0===o[h]&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}s.setExtensions(a),s.setPlugins(o),s.parse(n,r)}}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}]),n}(Bl);function lu(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var uu={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},cu=function(){function e(t){(0,l.Z)(this,e),this.parser=t,this.name=uu.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return(0,u.Z)(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var i,a=t.json,o=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],s=new yn(16777215);void 0!==o.color&&s.fromArray(o.color);var l=void 0!==o.range?o.range:0;switch(o.type){case"directional":(i=new Xl(s)).target.position.set(0,0,-1),i.add(i.target);break;case"point":(i=new ql(s)).distance=l;break;case"spot":(i=new Gl(s)).distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,i.angle=o.spot.outerConeAngle,i.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return i.position.set(0,0,0),i.decay=2,ju(i,o),void 0!==o.intensity&&(i.intensity=o.intensity),i.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(i),t.cache.add(n,r),r}},{key:"getDependency",value:function(e,t){if("light"===e)return this._loadLight(t)}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}]),e}(),hu=function(){function e(){(0,l.Z)(this,e),this.name=uu.KHR_MATERIALS_UNLIT}return(0,u.Z)(e,[{key:"getMaterialType",value:function(){return Qr}},{key:"extendParams",value:function(e,t,n){var r=[];e.color=new yn(1,1,1),e.opacity=1;var i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var a=i.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,It))}return Promise.all(r)}}]),e}(),du=function(){function e(t){(0,l.Z)(this,e),this.parser=t,this.name=uu.KHR_MATERIALS_EMISSIVE_STRENGTH}return(0,u.Z)(e,[{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}]),e}(),fu=function(){function e(t){(0,l.Z)(this,e),this.parser=t,this.name=uu.KHR_MATERIALS_CLEARCOAT}return(0,u.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?sl:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new tn(o,o)}return Promise.all(i)}}]),e}(),pu=function(){function e(t){(0,l.Z)(this,e),this.parser=t,this.name=uu.KHR_MATERIALS_IRIDESCENCE}return(0,u.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?sl:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(i)}}]),e}(),vu=function(){function e(t){(0,l.Z)(this,e),this.parser=t,this.name=uu.KHR_MATERIALS_SHEEN}return(0,u.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?sl:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[];t.sheenColor=new yn(0,0,0),t.sheenRoughness=0,t.sheen=1;var a=r.extensions[this.name];return void 0!==a.sheenColorFactor&&t.sheenColor.fromArray(a.sheenColorFactor),void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,It)),void 0!==a.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(i)}}]),e}(),mu=function(){function e(t){(0,l.Z)(this,e),this.parser=t,this.name=uu.KHR_MATERIALS_TRANSMISSION}return(0,u.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?sl:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}]),e}(),gu=function(){function e(t){(0,l.Z)(this,e),this.parser=t,this.name=uu.KHR_MATERIALS_VOLUME}return(0,u.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?sl:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;var o=a.attenuationColor||[1,1,1];return t.attenuationColor=new yn(o[0],o[1],o[2]),Promise.all(i)}}]),e}(),yu=function(){function e(t){(0,l.Z)(this,e),this.parser=t,this.name=uu.KHR_MATERIALS_IOR}return(0,u.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?sl:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}]),e}(),Au=function(){function e(t){(0,l.Z)(this,e),this.parser=t,this.name=uu.KHR_MATERIALS_SPECULAR}return(0,u.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?sl:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));var o=a.specularColorFactor||[1,1,1];return t.specularColor=new yn(o[0],o[1],o[2]),void 0!==a.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,It)),Promise.all(i)}}]),e}(),xu=function(){function e(t){(0,l.Z)(this,e),this.parser=t,this.name=uu.KHR_TEXTURE_BASISU}return(0,u.Z)(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var i=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,a)}}]),e}(),bu=function(){function e(t){(0,l.Z)(this,e),this.parser=t,this.name=uu.EXT_TEXTURE_WEBP,this.isSupported=null}return(0,u.Z)(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var a=i.extensions[t],o=r.images[a.source],s=n.textureLoader;if(o.uri){var l=n.options.manager.getHandler(o.uri);null!==l&&(s=l)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,a.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),_u=function(){function e(t){(0,l.Z)(this,e),this.name=uu.EXT_MESHOPT_COMPRESSION,this.parser=t}return(0,u.Z)(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then((function(e){var t=r.byteOffset||0,n=r.byteLength||0,i=r.count,o=r.byteStride,s=new Uint8Array(e,t,n);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(i,o,s,r.mode,r.filter).then((function(e){return e.buffer})):a.ready.then((function(){var e=new ArrayBuffer(i*o);return a.decodeGltfBuffer(new Uint8Array(e),i,o,s,r.mode,r.filter),e}))}))}return null}}]),e}(),wu=function(){function e(t){(0,l.Z)(this,e),this.name=uu.EXT_MESH_GPU_INSTANCING,this.parser=t}return(0,u.Z)(e,[{key:"createNodeMesh",value:function(e){var t=this,n=this.parser.json,r=n.nodes[e];if(!r.extensions||!r.extensions[this.name]||void 0===r.mesh)return null;var i,a=n.meshes[r.mesh],o=(0,s.Z)(a.primitives);try{for(o.s();!(i=o.n()).done;){var l=i.value;if(l.mode!==Pu.TRIANGLES&&l.mode!==Pu.TRIANGLE_STRIP&&l.mode!==Pu.TRIANGLE_FAN&&void 0!==l.mode)return null}}catch(p){o.e(p)}finally{o.f()}var u=r.extensions[this.name].attributes,c=[],h={},d=function(e){c.push(t.parser.getDependency("accessor",u[e]).then((function(t){return h[e]=t,h[e]})))};for(var f in u)d(f);return c.length<1?null:(c.push(this.parser.createNodeMesh(e)),Promise.all(c).then((function(e){var n,r=e.pop(),i=r.isGroup?r.children:[r],a=e[0].count,o=[],l=(0,s.Z)(i);try{for(l.s();!(n=l.n()).done;){for(var u=n.value,c=new ar,d=new Tn,f=new kn,v=new Tn(1,1,1),m=new zs(u.geometry,u.material,a),g=0;g<a;g++)h.TRANSLATION&&d.fromBufferAttribute(h.TRANSLATION,g),h.ROTATION&&f.fromBufferAttribute(h.ROTATION,g),h.SCALE&&v.fromBufferAttribute(h.SCALE,g),m.setMatrixAt(g,c.compose(d,f,v));for(var y in h)"TRANSLATION"!==y&&"ROTATION"!==y&&"SCALE"!==y&&u.geometry.setAttribute(y,h[y]);Ir.prototype.copy.call(m,u),m.frustumCulled=!1,t.parser.assignFinalMaterial(m),o.push(m)}}catch(p){l.e(p)}finally{l.f()}return r.isGroup?(r.clear(),r.add.apply(r,o),r):o[0]})))}}]),e}(),Eu="glTF",Su=1313821514,Mu=5130562,Cu=(0,u.Z)((function e(t){(0,l.Z)(this,e),this.name=uu.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,12);if(this.header={magic:Yl.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Eu)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=this.header.length-12,i=new DataView(t,12),a=0;a<r;){var o=i.getUint32(a,!0);a+=4;var s=i.getUint32(a,!0);if(a+=4,s===Su){var u=new Uint8Array(t,12+a,o);this.content=Yl.decodeText(u)}else if(s===Mu){var c=12+a;this.body=t.slice(c,c+o)}a+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")})),ku=function(){function e(t,n){if((0,l.Z)(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=uu.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return(0,u.Z)(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},s={},l={};for(var u in a){var c=Uu[u]||u.toLowerCase();o[c]=a[u]}for(var h in e.attributes){var d=Uu[h]||h.toLowerCase();if(void 0!==a[h]){var f=n.accessors[e.attributes[h]],p=Du[f.componentType];l[d]=p.name,s[d]=!0===f.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}t(e)}),o,l)}))}))}}]),e}(),Tu=function(){function e(){(0,l.Z)(this,e),this.name=uu.KHR_TEXTURE_TRANSFORM}return(0,u.Z)(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}]),e}(),Iu=(0,u.Z)((function e(){(0,l.Z)(this,e),this.name=uu.KHR_MESH_QUANTIZATION})),Bu=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a){return(0,l.Z)(this,n),t.call(this,e,r,i,a)}return(0,u.Z)(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,a=0;a!==r;a++)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,l=3*o,u=r-t,c=(n-t)/u,h=c*c,d=h*c,f=e*l,p=f-l,v=-2*d+3*h,m=d-h,g=1-v,y=m-h+c,A=0;A!==o;A++){var x=a[p+A+o],b=a[p+A+s]*u,_=a[f+A+o],w=a[f+A]*u;i[A]=g*x+y*b+v*_+m*w}return i}}]),n}(pl),Ru=new kn,Lu=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"interpolate_",value:function(e,t,r,i){var s=(0,a.Z)((0,o.Z)(n.prototype),"interpolate_",this).call(this,e,t,r,i);return Ru.fromArray(s).normalize().toArray(s),s}}]),n}(Bu),Pu={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Du={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Ou={9728:be,9729:Ee,9984:_e,9985:Se,9986:we,9987:Me},Fu={33071:Ae,33648:xe,10497:ye},Nu={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Uu={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Zu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},zu={CUBICSPLINE:void 0,LINEAR:wt,STEP:_t},Hu="OPAQUE",Gu="MASK",Qu="BLEND";function Vu(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function ju(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Wu(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(var a=0,o=i.length;a<o;a++)e.morphTargetDictionary[i[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function qu(e){var t=e.extensions&&e.extensions[uu.KHR_DRACO_MESH_COMPRESSION];return t?"draco:"+t.bufferView+":"+t.indices+":"+Ju(t.attributes):e.indices+":"+Ju(e.attributes)+":"+e.mode}function Ju(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function Xu(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var Yu=new ar,Ku=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,l.Z)(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new lu,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};var r=!1,i=!1,a=-1;"undefined"!==typeof navigator&&(r=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),a=(i=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"===typeof createImageBitmap||r||i&&a<98?this.textureLoader=new Ol(this.options.manager):this.textureLoader=new Kl(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Pl(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return(0,u.Z)(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var a={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};Vu(i,a,r),ju(a,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(a)}))).then((function(){e(a)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,i=t.length;r<i;r++)for(var a=t[r].joints,o=0,s=a.length;o<s;o++)e[a[o]].isBone=!0;for(var l=0,u=e.length;l<u;l++){var c=e[l];void 0!==c.mesh&&(this._addNodeRef(this.meshCache,c.mesh),void 0!==c.skin&&(n[c.mesh].isSkinnedMesh=!0)),void 0!==c.camera&&this._addNodeRef(this.cameraCache,c.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var r=this;if(e.refs[t]<=1)return n;var a=n.clone();return function e(t,n){var a=r.associations.get(t);null!=a&&r.associations.set(n,a);var o,l=(0,s.Z)(t.children.entries());try{for(l.s();!(o=l.n()).done;){var u=(0,i.Z)(o.value,2),c=u[0];e(u[1],n.children[c])}}catch(h){l.e(h)}finally{l.f()}}(n,a),a.name+="_instance_"+e.uses[t]++,a}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var i=e(t[r]);i&&n.push(i)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:if(!(r=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}))))throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[uu.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,i){n.load(Yl.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){var i=Nu[r.type],a=Du[r.componentType],o=!0===r.normalized,s=new a(r.count*i);return Promise.resolve(new Wr(s,i,o))}var l=[];return void 0!==r.bufferView?l.push(this.getDependency("bufferView",r.bufferView)):l.push(null),void 0!==r.sparse&&(l.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),l.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(l).then((function(e){var i,a,o=e[0],s=Nu[r.type],l=Du[r.componentType],u=l.BYTES_PER_ELEMENT,c=u*s,h=r.byteOffset||0,d=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,f=!0===r.normalized;if(d&&d!==c){var p=Math.floor(h/d),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count,m=t.cache.get(v);m||(i=new l(o,p*d,r.count*d/u),m=new bs(i,d/u),t.cache.add(v,m)),a=new ws(m,s,h%d/u,f)}else i=null===o?new l(r.count*s):new l(o,h,r.count*s),a=new Wr(i,s,f);if(void 0!==r.sparse){var g=Nu.SCALAR,y=Du[r.sparse.indices.componentType],A=r.sparse.indices.byteOffset||0,x=r.sparse.values.byteOffset||0,b=new y(e[1],A,r.sparse.count*g),_=new l(e[2],x,r.sparse.count*s);null!==o&&(a=new Wr(a.array.slice(),a.itemSize,a.normalized));for(var w=0,E=b.length;w<E;w++){var S=b[w];if(a.setX(S,_[w*s]),s>=2&&a.setY(S,_[w*s+1]),s>=3&&a.setZ(S,_[w*s+2]),s>=4&&a.setW(S,_[w*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r],a=this.textureLoader;if(i.uri){var o=n.manager.getHandler(i.uri);null!==o&&(a=o)}return this.loadTextureImage(e,r,a)}},{key:"loadTextureImage",value:function(e,t,n){var r=this,i=this.json,a=i.textures[e],o=i.images[t],s=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[s])return this.textureCache[s];var l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=a.name||o.name||"";var n=(i.samplers||{})[a.sampler]||{};return t.magFilter=Ou[n.magFilter]||Ee,t.minFilter=Ou[n.minFilter]||Me,t.wrapS=Fu[n.wrapS]||ye,t.wrapT=Fu[n.wrapT]||ye,r.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[s]=l,l}},{key:"loadImageSource",value:function(e,t){var n=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((function(e){return e.clone()}));var i=n.images[e],a=self.URL||self.webkitURL,o=i.uri||"",s=!1;if(void 0!==i.bufferView)o=this.getDependency("bufferView",i.bufferView).then((function(e){s=!0;var t=new Blob([e],{type:i.mimeType});return o=a.createObjectURL(t)}));else if(void 0===i.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var l=Promise.resolve(o).then((function(e){return new Promise((function(n,i){var a=n;!0===t.isImageBitmapLoader&&(a=function(e){var t=new wn(e);t.needsUpdate=!0,n(t)}),t.load(Yl.resolveURL(e,r.path),a,void 0,i)}))})).then((function(e){var t;return!0===s&&a.revokeObjectURL(o),e.userData.mimeType=i.mimeType||((t=i.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e}));return this.sourceCache[e]=l,l}},{key:"assignTexture",value:function(e,t,n,r){var i=this;return this.getDependency("texture",n.index).then((function(a){if(!a)return null;if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),i.extensions[uu.KHR_TEXTURE_TRANSFORM]){var o=void 0!==n.extensions?n.extensions[uu.KHR_TEXTURE_TRANSFORM]:void 0;if(o){var s=i.associations.get(a);a=i.extensions[uu.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),i.associations.set(a,s)}}return void 0!==r&&(a.encoding=r),e[t]=a,a}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){var o="PointsMaterial:"+n.uuid,s=this.cache.get(o);s||(s=new $s,Gr.prototype.copy.call(s,n),s.color.copy(n.color),s.map=n.map,s.sizeAttenuation=!1,this.cache.add(o,s)),n=s}else if(e.isLine){var l="LineBasicMaterial:"+n.uuid,u=this.cache.get(l);u||(u=new Hs,Gr.prototype.copy.call(u,n),u.color.copy(n.color),this.cache.add(l,u)),n=u}if(r||i||a){var c="ClonedMaterial:"+n.uuid+":";r&&(c+="derivative-tangents:"),i&&(c+="vertex-colors:"),a&&(c+="flat-shading:");var h=this.cache.get(c);h||(h=n.clone(),i&&(h.vertexColors=!0),a&&(h.flatShading=!0),r&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(c,h),this.associations.set(h,this.associations.get(n))),n=h}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}},{key:"getMaterialType",value:function(){return ol}},{key:"loadMaterial",value:function(e){var t,n=this,r=this.json,i=this.extensions,a=r.materials[e],o={},s=[];if((a.extensions||{})[uu.KHR_MATERIALS_UNLIT]){var l=i[uu.KHR_MATERIALS_UNLIT];t=l.getMaterialType(),s.push(l.extendParams(o,a,n))}else{var u=a.pbrMetallicRoughness||{};if(o.color=new yn(1,1,1),o.opacity=1,Array.isArray(u.baseColorFactor)){var c=u.baseColorFactor;o.color.fromArray(c),o.opacity=c[3]}void 0!==u.baseColorTexture&&s.push(n.assignTexture(o,"map",u.baseColorTexture,It)),o.metalness=void 0!==u.metallicFactor?u.metallicFactor:1,o.roughness=void 0!==u.roughnessFactor?u.roughnessFactor:1,void 0!==u.metallicRoughnessTexture&&(s.push(n.assignTexture(o,"metalnessMap",u.metallicRoughnessTexture)),s.push(n.assignTexture(o,"roughnessMap",u.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),s.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)}))))}!0===a.doubleSided&&(o.side=C);var h=a.alphaMode||Hu;if(h===Qu?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,h===Gu&&(o.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==Qr&&(s.push(n.assignTexture(o,"normalMap",a.normalTexture)),o.normalScale=new tn(1,1),void 0!==a.normalTexture.scale)){var d=a.normalTexture.scale;o.normalScale.set(d,d)}return void 0!==a.occlusionTexture&&t!==Qr&&(s.push(n.assignTexture(o,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(o.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==Qr&&(o.emissive=(new yn).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==Qr&&s.push(n.assignTexture(o,"emissiveMap",a.emissiveTexture,It)),Promise.all(s).then((function(){var r=new t(o);return a.name&&(r.name=a.name),ju(r,a),n.associations.set(r,{materials:e}),a.extensions&&Vu(i,r,a),r}))}},{key:"createUniqueName",value:function(e){for(var t=ou.sanitizeNodeName(e||""),n=t,r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[uu.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return $u(n,e,t)}))}for(var a=[],o=0,s=e.length;o<s;o++){var l=e[o],u=qu(l),c=r[u];if(c)a.push(c.promise);else{var h=void 0;h=l.extensions&&l.extensions[uu.KHR_DRACO_MESH_COMPRESSION]?i(l):$u(new ii,l,t),r[u]={primitive:l,promise:h},a.push(h)}}return Promise.all(a)}},{key:"loadMesh",value:function(e){for(var t,n=this,r=this.json,i=this.extensions,a=r.meshes[e],o=a.primitives,s=[],l=0,u=o.length;l<u;l++){var c=void 0===o[l].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new ol({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:S})),t.DefaultMaterial):this.getDependency("material",o[l].material);s.push(c)}return s.push(n.loadGeometries(o)),Promise.all(s).then((function(t){for(var r=t.slice(0,t.length-1),s=t[t.length-1],l=[],u=0,c=s.length;u<c;u++){var h=s[u],d=o[u],f=void 0,p=r[u];if(d.mode===Pu.TRIANGLES||d.mode===Pu.TRIANGLE_STRIP||d.mode===Pu.TRIANGLE_FAN||void 0===d.mode)!0!==(f=!0===a.isSkinnedMesh?new Ts(h,p):new yi(h,p)).isSkinnedMesh||f.geometry.attributes.skinWeight.normalized||f.normalizeSkinWeights(),d.mode===Pu.TRIANGLE_STRIP?f.geometry=ec(f.geometry,1):d.mode===Pu.TRIANGLE_FAN&&(f.geometry=ec(f.geometry,2));else if(d.mode===Pu.LINES)f=new Ys(h,p);else if(d.mode===Pu.LINE_STRIP)f=new qs(h,p);else if(d.mode===Pu.LINE_LOOP)f=new Ks(h,p);else{if(d.mode!==Pu.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);f=new il(h,p)}Object.keys(f.geometry.morphAttributes).length>0&&Wu(f,a),f.name=n.createUniqueName(a.name||"mesh_"+e),ju(f,a),d.extensions&&Vu(i,f,d),n.assignFinalMaterial(f),l.push(f)}for(var v=0,m=l.length;v<m;v++)n.associations.set(l[v],{meshes:e,primitives:v});if(1===l.length)return l[0];var g=new ds;n.associations.set(g,{meshes:e});for(var y=0,A=l.length;y<A;y++)g.add(l[y]);return g}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new Ci(en.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new Ki(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),ju(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){for(var t=this.json.skins[e],n=[],r=0,i=t.joints.length;r<i;r++)n.push(this.getDependency("node",t.joints[r]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){for(var n=e.pop(),r=e,i=[],a=[],o=0,s=r.length;o<s;o++){var l=r[o];if(l){i.push(l);var u=new ar;null!==n&&u.fromArray(n.array,16*o),a.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}return new Ps(i,a)}))}},{key:"loadAnimation",value:function(e){for(var t=this.json.animations[e],n=[],r=[],i=[],a=[],o=[],s=0,l=t.channels.length;s<l;s++){var u=t.channels[s],c=t.samplers[u.sampler],h=u.target,d=h.node,f=void 0!==t.parameters?t.parameters[c.input]:c.input,p=void 0!==t.parameters?t.parameters[c.output]:c.output;n.push(this.getDependency("node",d)),r.push(this.getDependency("accessor",f)),i.push(this.getDependency("accessor",p)),a.push(c),o.push(h)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(a),Promise.all(o)]).then((function(n){for(var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=[],u=function(){var e,t=r[c],n=i[c],u=a[c],h=o[c],d=s[c];if(void 0===t)return"continue";switch(t.updateMatrix(),Zu[d.path]){case Zu.weights:e=bl;break;case Zu.rotation:e=wl;break;default:e=Sl}var f=t.name?t.name:t.uuid,p=void 0!==h.interpolation?zu[h.interpolation]:wt,v=[];Zu[d.path]===Zu.weights?t.traverse((function(e){e.morphTargetInfluences&&v.push(e.name?e.name:e.uuid)})):v.push(f);var m=u.array;if(u.normalized){for(var g=Xu(m.constructor),y=new Float32Array(m.length),A=0,x=m.length;A<x;A++)y[A]=m[A]*g;m=y}for(var b=0,_=v.length;b<_;b++){var w=new e(v[b]+"."+Zu[d.path],n.array,m,p);"CUBICSPLINE"===h.interpolation&&(w.createInterpolant=function(e){return new(this instanceof wl?Lu:Bu)(this.times,this.values,this.getValueSize()/3,e)},w.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(w)}},c=0,h=r.length;c<h;c++)u();var d=t.name?t.name:"animation_"+e;return new Ml(d,void 0,l)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}},{key:"loadNode",value:function(e){var t=this.json,n=this.extensions,r=this,i=t.nodes[e],a=i.name?r.createUniqueName(i.name):"";return function(){var t=[],n=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));n&&t.push(n),void 0!==i.camera&&t.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)}));for(var a=[],o=i.children||[],s=0,l=o.length;s<l;s++)a.push(r.getDependency("node",o[s]));var u=void 0===i.skin?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([Promise.all(t),Promise.all(a),u])}().then((function(t){var o,s=t[0],l=t[1],u=t[2];if((o=!0===i.isBone?new Is:s.length>1?new ds:1===s.length?s[0]:new Ir)!==s[0])for(var c=0,h=s.length;c<h;c++)o.add(s[c]);if(i.name&&(o.userData.name=i.name,o.name=a),ju(o,i),i.extensions&&Vu(n,o,i),void 0!==i.matrix){var d=new ar;d.fromArray(i.matrix),o.applyMatrix4(d)}else void 0!==i.translation&&o.position.fromArray(i.translation),void 0!==i.rotation&&o.quaternion.fromArray(i.rotation),void 0!==i.scale&&o.scale.fromArray(i.scale);r.associations.has(o)||r.associations.set(o,{}),r.associations.get(o).nodes=e,null!==u&&o.traverse((function(e){e.isSkinnedMesh&&e.bind(u,Yu)}));for(var f=0,p=l.length;f<p;f++)o.add(l[f]);return o}))}},{key:"loadScene",value:function(e){var t=this.extensions,n=this.json.scenes[e],r=this,a=new ds;n.name&&(a.name=r.createUniqueName(n.name)),ju(a,n),n.extensions&&Vu(t,a,n);for(var o=n.nodes||[],l=[],u=0,c=o.length;u<c;u++)l.push(r.getDependency("node",o[u]));return Promise.all(l).then((function(e){for(var t=0,n=e.length;t<n;t++)a.add(e[t]);return r.associations=function(e){var t,n=new Map,a=(0,s.Z)(r.associations);try{for(a.s();!(t=a.n()).done;){var o=(0,i.Z)(t.value,2),l=o[0],u=o[1];(l instanceof Gr||l instanceof wn)&&n.set(l,u)}}catch(c){a.e(c)}finally{a.f()}return e.traverse((function(e){var t=r.associations.get(e);null!=t&&n.set(e,t)})),n}(a),a}))}}]),e}();function $u(e,t,n){var r=t.attributes,i=[];function a(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var o in r){var s=Uu[o]||o.toLowerCase();s in e.attributes||i.push(a(r[o],s))}if(void 0!==t.indices&&!e.index){var l=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(l)}return ju(e,t),function(e,t,n){var r=t.attributes,i=new Rn;if(void 0!==r.POSITION){var a=n.json.accessors[r.POSITION],o=a.min,s=a.max;if(void 0!==o&&void 0!==s){if(i.set(new Tn(o[0],o[1],o[2]),new Tn(s[0],s[1],s[2])),a.normalized){var l=Xu(Du[a.componentType]);i.min.multiplyScalar(l),i.max.multiplyScalar(l)}var u=t.targets;if(void 0!==u){for(var c=new Tn,h=new Tn,d=0,f=u.length;d<f;d++){var p=u[d];if(void 0!==p.POSITION){var v=n.json.accessors[p.POSITION],m=v.min,g=v.max;if(void 0!==m&&void 0!==g){if(h.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),h.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),h.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),v.normalized){var y=Xu(Du[v.componentType]);h.multiplyScalar(y)}c.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(c)}e.boundingBox=i;var A=new Xn;i.getCenter(A.center),A.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=A}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,i=!1,a=!1,o=0,s=t.length;o<s;o++){var l=t[o];if(void 0!==l.POSITION&&(r=!0),void 0!==l.NORMAL&&(i=!0),void 0!==l.COLOR_0&&(a=!0),r&&i&&a)break}if(!r&&!i&&!a)return Promise.resolve(e);for(var u=[],c=[],h=[],d=0,f=t.length;d<f;d++){var p=t[d];if(r){var v=void 0!==p.POSITION?n.getDependency("accessor",p.POSITION):e.attributes.position;u.push(v)}if(i){var m=void 0!==p.NORMAL?n.getDependency("accessor",p.NORMAL):e.attributes.normal;c.push(m)}if(a){var g=void 0!==p.COLOR_0?n.getDependency("accessor",p.COLOR_0):e.attributes.color;h.push(g)}}return Promise.all([Promise.all(u),Promise.all(c),Promise.all(h)]).then((function(t){var n=t[0],o=t[1],s=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),a&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function ec(e,t){var n=e.getIndex();if(null===n){var r=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<i.count;a++)r.push(a);e.setIndex(r),n=e.getIndex()}var o=n.count-2,s=[];if(2===t)for(var l=1;l<=o;l++)s.push(n.getX(0)),s.push(n.getX(l)),s.push(n.getX(l+1));else for(var u=0;u<o;u++)u%2===0?(s.push(n.getX(u)),s.push(n.getX(u+1)),s.push(n.getX(u+2))):(s.push(n.getX(u+2)),s.push(n.getX(u+1)),s.push(n.getX(u)));s.length/3!==o&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(s),c}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".abfa1211.chunk.js"},n.miniCssF=function(e){},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="majolikaxr:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,l;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var d=function(t,n){s.onerror=s.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],l=r[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkmajolikaxr=self.webpackChunkmajolikaxr||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),n.nc=void 0,function(){"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:function(){return Tu},AddEquation:function(){return Kl},AddOperation:function(){return Eu},AdditiveAnimationBlendMode:function(){return ih},AdditiveBlending:function(){return ql},AlphaFormat:function(){return sc},AlwaysDepth:function(){return vu},AlwaysStencilFunc:function(){return Lh},AmbientLight:function(){return Nb},AmbientLightProbe:function(){return e_},AnimationAction:function(){return T_},AnimationClip:function(){return sb},AnimationLoader:function(){return gb},AnimationMixer:function(){return B_},AnimationObjectGroup:function(){return k_},AnimationUtils:function(){return qx},ArcCurve:function(){return hA},ArrayCamera:function(){return Ng},ArrowHelper:function(){return _w},Audio:function(){return d_},AudioAnalyser:function(){return y_},AudioContext:function(){return Yb},AudioListener:function(){return h_},AudioLoader:function(){return Kb},AxesHelper:function(){return ww},BackSide:function(){return Gl},BasicDepthPacking:function(){return ch},BasicShadowMap:function(){return Nl},Bone:function(){return My},BooleanKeyframeTrack:function(){return eb},Box2:function(){return G_},Box3:function(){return Nd},Box3Helper:function(){return Aw},BoxBufferGeometry:function(){return Sw},BoxGeometry:function(){return Xp},BoxHelper:function(){return yw},BufferAttribute:function(){return dp},BufferGeometry:function(){return Ip},BufferGeometryLoader:function(){return Vb},ByteType:function(){return Yu},Cache:function(){return cb},Camera:function(){return nv},CameraHelper:function(){return fw},CanvasTexture:function(){return lA},CapsuleBufferGeometry:function(){return Mw},CapsuleGeometry:function(){return RA},CatmullRomCurve3:function(){return gA},CineonToneMapping:function(){return ku},CircleBufferGeometry:function(){return Cw},CircleGeometry:function(){return LA},ClampToEdgeWrapping:function(){return Nu},Clock:function(){return a_},Color:function(){return np},ColorKeyframeTrack:function(){return tb},ColorManagement:function(){return bd},CompressedArrayTexture:function(){return sA},CompressedTexture:function(){return oA},CompressedTextureLoader:function(){return yb},ConeBufferGeometry:function(){return kw},ConeGeometry:function(){return DA},CubeCamera:function(){return av},CubeReflectionMapping:function(){return Ru},CubeRefractionMapping:function(){return Lu},CubeTexture:function(){return ov},CubeTextureLoader:function(){return xb},CubeUVReflectionMapping:function(){return Ou},CubicBezierCurve:function(){return bA},CubicBezierCurve3:function(){return _A},CubicInterpolant:function(){return Xx},CullFaceBack:function(){return Dl},CullFaceFront:function(){return Ol},CullFaceFrontBack:function(){return Fl},CullFaceNone:function(){return Pl},Curve:function(){return uA},CurvePath:function(){return TA},CustomBlending:function(){return Yl},CustomToneMapping:function(){return Iu},CylinderBufferGeometry:function(){return Tw},CylinderGeometry:function(){return PA},Cylindrical:function(){return z_},Data3DTexture:function(){return Bd},DataArrayTexture:function(){return Td},DataTexture:function(){return Cy},DataTextureLoader:function(){return bb},DataUtils:function(){return up},DecrementStencilOp:function(){return _h},DecrementWrapStencilOp:function(){return Eh},DefaultLoadingManager:function(){return db},DepthFormat:function(){return hc},DepthStencilFormat:function(){return dc},DepthTexture:function(){return Hg},DirectionalLight:function(){return Fb},DirectionalLightHelper:function(){return cw},DiscreteInterpolant:function(){return Kx},DisplayP3ColorSpace:function(){return gh},DodecahedronBufferGeometry:function(){return Iw},DodecahedronGeometry:function(){return FA},DoubleSide:function(){return Ql},DstAlphaFactor:function(){return uu},DstColorFactor:function(){return hu},DynamicCopyUsage:function(){return zh},DynamicDrawUsage:function(){return Dh},DynamicReadUsage:function(){return Nh},EdgesGeometry:function(){return HA},EllipseCurve:function(){return cA},EqualDepth:function(){return yu},EqualStencilFunc:function(){return kh},EquirectangularReflectionMapping:function(){return Pu},EquirectangularRefractionMapping:function(){return Du},Euler:function(){return _f},EventDispatcher:function(){return jh},ExtrudeBufferGeometry:function(){return Bw},ExtrudeGeometry:function(){return yx},FileLoader:function(){return mb},Float16BufferAttribute:function(){return xp},Float32BufferAttribute:function(){return bp},Float64BufferAttribute:function(){return _p},FloatType:function(){return nc},Fog:function(){return Xg},FogExp2:function(){return Jg},FramebufferTexture:function(){return aA},FrontSide:function(){return Hl},Frustum:function(){return pv},GLBufferAttribute:function(){return O_},GLSL1:function(){return Gh},GLSL3:function(){return Qh},GreaterDepth:function(){return xu},GreaterEqualDepth:function(){return Au},GreaterEqualStencilFunc:function(){return Rh},GreaterStencilFunc:function(){return Ih},GridHelper:function(){return aw},Group:function(){return Ug},HalfFloatType:function(){return rc},HemisphereLight:function(){return Eb},HemisphereLightHelper:function(){return iw},HemisphereLightProbe:function(){return $b},IcosahedronBufferGeometry:function(){return Rw},IcosahedronGeometry:function(){return xx},ImageBitmapLoader:function(){return Xb},ImageLoader:function(){return Ab},ImageUtils:function(){return _d},IncrementStencilOp:function(){return bh},IncrementWrapStencilOp:function(){return wh},InstancedBufferAttribute:function(){return By},InstancedBufferGeometry:function(){return Qb},InstancedInterleavedBuffer:function(){return D_},InstancedMesh:function(){return Uy},Int16BufferAttribute:function(){return mp},Int32BufferAttribute:function(){return yp},Int8BufferAttribute:function(){return fp},IntType:function(){return ec},InterleavedBuffer:function(){return Kg},InterleavedBufferAttribute:function(){return ey},Interpolant:function(){return Jx},InterpolateDiscrete:function(){return Yc},InterpolateLinear:function(){return Kc},InterpolateSmooth:function(){return $c},InvertStencilOp:function(){return Sh},KeepStencilOp:function(){return Ah},KeyframeTrack:function(){return $x},LOD:function(){return yy},LatheBufferGeometry:function(){return Lw},LatheGeometry:function(){return BA},Layers:function(){return wf},LessDepth:function(){return mu},LessEqualDepth:function(){return gu},LessEqualStencilFunc:function(){return Th},LessStencilFunc:function(){return Ch},Light:function(){return wb},LightProbe:function(){return zb},Line:function(){return jy},Line3:function(){return j_},LineBasicMaterial:function(){return Zy},LineCurve:function(){return wA},LineCurve3:function(){return EA},LineDashedMaterial:function(){return zx},LineLoop:function(){return Xy},LineSegments:function(){return Jy},LinearEncoding:function(){return lh},LinearFilter:function(){return Vu},LinearInterpolant:function(){return Yx},LinearMipMapLinearFilter:function(){return Ju},LinearMipMapNearestFilter:function(){return Wu},LinearMipmapLinearFilter:function(){return qu},LinearMipmapNearestFilter:function(){return ju},LinearSRGBColorSpace:function(){return mh},LinearToneMapping:function(){return Mu},Loader:function(){return fb},LoaderUtils:function(){return Gb},LoadingManager:function(){return hb},LoopOnce:function(){return qc},LoopPingPong:function(){return Xc},LoopRepeat:function(){return Jc},LuminanceAlphaFormat:function(){return cc},LuminanceFormat:function(){return uc},MOUSE:function(){return Rl},Material:function(){return Yf},MaterialLoader:function(){return Hb},MathUtils:function(){return od},Matrix3:function(){return ld},Matrix4:function(){return df},MaxEquation:function(){return nu},Mesh:function(){return qp},MeshBasicMaterial:function(){return ip},MeshDepthMaterial:function(){return Rg},MeshDistanceMaterial:function(){return Lg},MeshLambertMaterial:function(){return Ux},MeshMatcapMaterial:function(){return Zx},MeshNormalMaterial:function(){return Nx},MeshPhongMaterial:function(){return Ox},MeshPhysicalMaterial:function(){return Dx},MeshStandardMaterial:function(){return Px},MeshToonMaterial:function(){return Fx},MinEquation:function(){return tu},MirroredRepeatWrapping:function(){return Uu},MixOperation:function(){return wu},MultiplyBlending:function(){return Xl},MultiplyOperation:function(){return _u},NearestFilter:function(){return Zu},NearestMipMapLinearFilter:function(){return Qu},NearestMipMapNearestFilter:function(){return Hu},NearestMipmapLinearFilter:function(){return Gu},NearestMipmapNearestFilter:function(){return zu},NeverDepth:function(){return pu},NeverStencilFunc:function(){return Mh},NoBlending:function(){return jl},NoColorSpace:function(){return ph},NoToneMapping:function(){return Su},NormalAnimationBlendMode:function(){return rh},NormalBlending:function(){return Wl},NotEqualDepth:function(){return bu},NotEqualStencilFunc:function(){return Bh},NumberKeyframeTrack:function(){return nb},Object3D:function(){return Ff},ObjectLoader:function(){return jb},ObjectSpaceNormalMap:function(){return fh},OctahedronBufferGeometry:function(){return Pw},OctahedronGeometry:function(){return bx},OneFactor:function(){return iu},OneMinusDstAlphaFactor:function(){return cu},OneMinusDstColorFactor:function(){return du},OneMinusSrcAlphaFactor:function(){return lu},OneMinusSrcColorFactor:function(){return ou},OrthographicCamera:function(){return kv},PCFShadowMap:function(){return Ul},PCFSoftShadowMap:function(){return Zl},PMREMGenerator:function(){return Fv},Path:function(){return IA},PerspectiveCamera:function(){return rv},Plane:function(){return hv},PlaneBufferGeometry:function(){return Dw},PlaneGeometry:function(){return gv},PlaneHelper:function(){return xw},PointLight:function(){return Db},PointLightHelper:function(){return ew},Points:function(){return nA},PointsMaterial:function(){return Yy},PolarGridHelper:function(){return ow},PolyhedronBufferGeometry:function(){return Ow},PolyhedronGeometry:function(){return OA},PositionalAudio:function(){return g_},PropertyBinding:function(){return C_},PropertyMixer:function(){return A_},QuadraticBezierCurve:function(){return SA},QuadraticBezierCurve3:function(){return MA},Quaternion:function(){return Pd},QuaternionKeyframeTrack:function(){return ib},QuaternionLinearInterpolant:function(){return rb},RED_GREEN_RGTC2_Format:function(){return jc},RED_RGTC1_Format:function(){return Qc},REVISION:function(){return Bl},RGBADepthPacking:function(){return hh},RGBAFormat:function(){return lc},RGBAIntegerFormat:function(){return gc},RGBA_ASTC_10x10_Format:function(){return Zc},RGBA_ASTC_10x5_Format:function(){return Fc},RGBA_ASTC_10x6_Format:function(){return Nc},RGBA_ASTC_10x8_Format:function(){return Uc},RGBA_ASTC_12x10_Format:function(){return zc},RGBA_ASTC_12x12_Format:function(){return Hc},RGBA_ASTC_4x4_Format:function(){return Tc},RGBA_ASTC_5x4_Format:function(){return Ic},RGBA_ASTC_5x5_Format:function(){return Bc},RGBA_ASTC_6x5_Format:function(){return Rc},RGBA_ASTC_6x6_Format:function(){return Lc},RGBA_ASTC_8x5_Format:function(){return Pc},RGBA_ASTC_8x6_Format:function(){return Dc},RGBA_ASTC_8x8_Format:function(){return Oc},RGBA_BPTC_Format:function(){return Gc},RGBA_ETC2_EAC_Format:function(){return kc},RGBA_PVRTC_2BPPV1_Format:function(){return Sc},RGBA_PVRTC_4BPPV1_Format:function(){return Ec},RGBA_S3TC_DXT1_Format:function(){return Ac},RGBA_S3TC_DXT3_Format:function(){return xc},RGBA_S3TC_DXT5_Format:function(){return bc},RGB_ETC1_Format:function(){return Mc},RGB_ETC2_Format:function(){return Cc},RGB_PVRTC_2BPPV1_Format:function(){return wc},RGB_PVRTC_4BPPV1_Format:function(){return _c},RGB_S3TC_DXT1_Format:function(){return yc},RGFormat:function(){return vc},RGIntegerFormat:function(){return mc},RawShaderMaterial:function(){return Lx},Ray:function(){return hf},Raycaster:function(){return F_},RectAreaLight:function(){return Ub},RedFormat:function(){return fc},RedIntegerFormat:function(){return pc},ReinhardToneMapping:function(){return Cu},RepeatWrapping:function(){return Fu},ReplaceStencilOp:function(){return xh},ReverseSubtractEquation:function(){return eu},RingBufferGeometry:function(){return Fw},RingGeometry:function(){return _x},SIGNED_RED_GREEN_RGTC2_Format:function(){return Wc},SIGNED_RED_RGTC1_Format:function(){return Vc},SRGBColorSpace:function(){return vh},Scene:function(){return Yg},ShaderChunk:function(){return yv},ShaderLib:function(){return xv},ShaderMaterial:function(){return tv},ShadowMaterial:function(){return Rx},Shape:function(){return GA},ShapeBufferGeometry:function(){return Nw},ShapeGeometry:function(){return wx},ShapePath:function(){return Ew},ShapeUtils:function(){return vx},ShortType:function(){return Ku},Skeleton:function(){return Iy},SkeletonHelper:function(){return K_},SkinnedMesh:function(){return Sy},Source:function(){return wd},Sphere:function(){return nf},SphereBufferGeometry:function(){return Uw},SphereGeometry:function(){return Ex},Spherical:function(){return Z_},SphericalHarmonics3:function(){return Zb},SplineCurve:function(){return CA},SpotLight:function(){return Ib},SpotLightHelper:function(){return q_},Sprite:function(){return py},SpriteMaterial:function(){return ty},SrcAlphaFactor:function(){return su},SrcAlphaSaturateFactor:function(){return fu},SrcColorFactor:function(){return au},StaticCopyUsage:function(){return Zh},StaticDrawUsage:function(){return Ph},StaticReadUsage:function(){return Fh},StereoCamera:function(){return i_},StreamCopyUsage:function(){return Hh},StreamDrawUsage:function(){return Oh},StreamReadUsage:function(){return Uh},StringKeyframeTrack:function(){return ab},SubtractEquation:function(){return $l},SubtractiveBlending:function(){return Jl},TOUCH:function(){return Ll},TangentSpaceNormalMap:function(){return dh},TetrahedronBufferGeometry:function(){return Zw},TetrahedronGeometry:function(){return Sx},Texture:function(){return Md},TextureLoader:function(){return _b},TorusBufferGeometry:function(){return zw},TorusGeometry:function(){return Mx},TorusKnotBufferGeometry:function(){return Hw},TorusKnotGeometry:function(){return Cx},Triangle:function(){return Jf},TriangleFanDrawMode:function(){return sh},TriangleStripDrawMode:function(){return oh},TrianglesDrawMode:function(){return ah},TubeBufferGeometry:function(){return Gw},TubeGeometry:function(){return kx},TwoPassDoubleSide:function(){return Vl},UVMapping:function(){return Bu},Uint16BufferAttribute:function(){return gp},Uint32BufferAttribute:function(){return Ap},Uint8BufferAttribute:function(){return pp},Uint8ClampedBufferAttribute:function(){return vp},Uniform:function(){return R_},UniformsGroup:function(){return P_},UniformsLib:function(){return Av},UniformsUtils:function(){return ev},UnsignedByteType:function(){return Xu},UnsignedInt248Type:function(){return oc},UnsignedIntType:function(){return tc},UnsignedShort4444Type:function(){return ic},UnsignedShort5551Type:function(){return ac},UnsignedShortType:function(){return $u},VSMShadowMap:function(){return zl},Vector2:function(){return sd},Vector3:function(){return Dd},Vector4:function(){return Cd},VectorKeyframeTrack:function(){return ob},VideoTexture:function(){return iA},WebGL1Renderer:function(){return Wg},WebGL3DRenderTarget:function(){return Rd},WebGLArrayRenderTarget:function(){return Id},WebGLCubeRenderTarget:function(){return sv},WebGLMultipleRenderTargets:function(){return Ld},WebGLRenderTarget:function(){return kd},WebGLRenderer:function(){return jg},WebGLUtils:function(){return Fg},WireframeGeometry:function(){return Tx},WrapAroundEnding:function(){return nh},ZeroCurvatureEnding:function(){return eh},ZeroFactor:function(){return ru},ZeroSlopeEnding:function(){return th},ZeroStencilOp:function(){return yh},_SRGBAFormat:function(){return Vh},sRGBEncoding:function(){return uh}});var t=n(2791),r=n.t(t,2),i=n(1250);n.p;var a=n(4165),o=n(5861),s=n(9439),l=n(4164),u=n(5671),c=n(3144);function h(e,t){-1===e.indexOf(t)&&e.push(t)}function d(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var f=function(){function e(){(0,u.Z)(this,e),this.subscriptions=[]}return(0,c.Z)(e,[{key:"add",value:function(e){var t=this;return h(this.subscriptions,e),function(){return d(t.subscriptions,e)}}},{key:"notify",value:function(e,t,n){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(var i=0;i<r;i++){var a=this.subscriptions[i];a&&a(e,t,n)}}},{key:"getSize",value:function(){return this.subscriptions.length}},{key:"clear",value:function(){this.subscriptions.length=0}}]),e}();function p(e,t){return t?e*(1e3/t):0}var v=function(e){return e};var m=["prepare","read","update","preRender","render","postRender"];var g=function(e,t){var n=!1,r=!0,i={delta:0,timestamp:0,isProcessing:!1},a=m.reduce((function(e,t){return e[t]=function(e){var t=[],n=[],r=0,i=!1,a=!1,o=new WeakSet,s={schedule:function(e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,s=a?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),-1===s.indexOf(e)&&(s.push(e),a&&i&&(r=t.length)),e},cancel:function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1),o.delete(e)},process:function(l){if(i)a=!0;else{i=!0;var u=[n,t];if(t=u[0],(n=u[1]).length=0,r=t.length)for(var c=0;c<r;c++){var h=t[c];h(l),o.has(h)&&(s.schedule(h),e())}i=!1,a&&(a=!1,s.process(l))}}};return s}((function(){return n=!0})),e}),{}),o=function(e){return a[e].process(i)},s=function a(){var s=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(s-i.timestamp,40),1),i.timestamp=s,i.isProcessing=!0,m.forEach(o),i.isProcessing=!1,n&&t&&(r=!1,e(a))},l=m.reduce((function(t,o){var l=a[o];return t[o]=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,i.isProcessing||e(s)),l.schedule(t,a,o)},t}),{});return{schedule:l,cancel:function(e){return m.forEach((function(t){return a[t].cancel(e)}))},state:i,steps:a}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:v,!0),y=g.schedule,A=g.cancel,x=g.state,b=g.steps,_={current:void 0},w=function(){function e(t){var n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,u.Z)(this,e),this.version="10.16.1",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r.prev=r.current,r.current=e;var n=x.delta,i=x.timestamp;r.lastUpdated!==i&&(r.timeDelta=n,r.lastUpdated=i,y.postRender(r.scheduleVelocityCheck)),r.prev!==r.current&&r.events.change&&r.events.change.notify(r.current),r.events.velocityChange&&r.events.velocityChange.notify(r.getVelocity()),t&&r.events.renderRequest&&r.events.renderRequest.notify(r.current)},this.scheduleVelocityCheck=function(){return y.postRender(r.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==r.lastUpdated&&(r.prev=r.current,r.events.velocityChange&&r.events.velocityChange.notify(r.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=(n=this.current,!isNaN(parseFloat(n))),this.owner=i.owner}return(0,c.Z)(e,[{key:"onChange",value:function(e){return this.on("change",e)}},{key:"on",value:function(e,t){var n=this;this.events[e]||(this.events[e]=new f);var r=this.events[e].add(t);return"change"===e?function(){r(),y.read((function(){n.events.change.getSize()||n.stop()}))}:r}},{key:"clearListeners",value:function(){for(var e in this.events)this.events[e].clear()}},{key:"attach",value:function(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}},{key:"set",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}},{key:"setWithVelocity",value:function(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}},{key:"jump",value:function(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}},{key:"get",value:function(){return _.current&&_.current.push(this),this.current}},{key:"getPrevious",value:function(){return this.prev}},{key:"getVelocity",value:function(){return this.canTrackVelocity?p(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}},{key:"start",value:function(e){var t=this;return this.stop(),new Promise((function(n){t.hasAnimated=!0,t.animation=e(n),t.events.animationStart&&t.events.animationStart.notify()})).then((function(){t.events.animationComplete&&t.events.animationComplete.notify(),t.clearAnimation()}))}},{key:"stop",value:function(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}},{key:"isAnimating",value:function(){return!!this.animation}},{key:"clearAnimation",value:function(){delete this.animation}},{key:"destroy",value:function(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}]),e}();function E(e,t){return new w(e,t)}var S=(0,t.createContext)({transformPagePoint:function(e){return e},isStatic:!1,reducedMotion:"never"});function M(e){var n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}function C(e){var n=M((function(){return E(e)}));if((0,t.useContext)(S).isStatic){var r=(0,t.useState)(e),i=(0,s.Z)(r,2)[1];(0,t.useEffect)((function(){return n.on("change",i)}),[])}return n}var k="undefined"!==typeof document,T={current:null},I={current:!1};function B(){if(I.current=!0,k)if(window.matchMedia){var e=window.matchMedia("(prefers-reduced-motion)"),t=function(){return T.current=e.matches};e.addListener(t),t()}else T.current=!1}function R(){!I.current&&B();var e=(0,t.useState)(T.current);return(0,s.Z)(e,1)[0]}var L=n(4942);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,L.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=n(3433),F=v,N=v;var U=function(e){return Math.round(1e5*e)/1e5},Z=/(-)?([\d]*\.?[\d])+/g,z=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,H=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function G(e){return"string"===typeof e}var Q=function(e,t,n){return Math.min(Math.max(n,e),t)},V={test:function(e){return"number"===typeof e},parse:parseFloat,transform:function(e){return e}},j=D(D({},V),{},{transform:function(e){return Q(0,1,e)}}),W=D(D({},V),{},{default:1}),q=function(e,t){return function(n){return Boolean(G(n)&&H.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t))}},J=function(e,t,n){return function(r){var i;if(!G(r))return r;var a=r.match(Z),o=(0,s.Z)(a,4),l=o[0],u=o[1],c=o[2],h=o[3];return i={},(0,L.Z)(i,e,parseFloat(l)),(0,L.Z)(i,t,parseFloat(u)),(0,L.Z)(i,n,parseFloat(c)),(0,L.Z)(i,"alpha",void 0!==h?parseFloat(h):1),i}},X=D(D({},V),{},{transform:function(e){return Math.round(function(e){return Q(0,255,e)}(e))}}),Y={test:q("rgb","red"),parse:J("red","green","blue"),transform:function(e){var t=e.red,n=e.green,r=e.blue,i=e.alpha,a=void 0===i?1:i;return"rgba("+X.transform(t)+", "+X.transform(n)+", "+X.transform(r)+", "+U(j.transform(a))+")"}};var K={test:q("#"),parse:function(e){var t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:Y.transform},$=function(e){return{test:function(t){return G(t)&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return"".concat(t).concat(e)}}},ee=$("deg"),te=$("%"),ne=$("px"),re=$("vh"),ie=$("vw"),ae=D(D({},te),{},{parse:function(e){return te.parse(e)/100},transform:function(e){return te.transform(100*e)}}),oe={test:q("hsl","hue"),parse:J("hue","saturation","lightness"),transform:function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha,a=void 0===i?1:i;return"hsla("+Math.round(t)+", "+te.transform(U(n))+", "+te.transform(U(r))+", "+U(j.transform(a))+")"}},se={test:function(e){return Y.test(e)||K.test(e)||oe.test(e)},parse:function(e){return Y.test(e)?Y.parse(e):oe.test(e)?oe.parse(e):K.parse(e)},transform:function(e){return G(e)?e:e.hasOwnProperty("red")?Y.transform(e):oe.transform(e)}},le=function(e,t,n){return-n*e+n*t+e};function ue(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var ce=function(e,t,n){var r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},he=[K,Y,oe];function de(e){var t=function(e){return he.find((function(t){return t.test(e)}))}(e);N(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."));var n=t.parse(e);return t===oe&&(n=function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha;t/=360,r/=100;var a=0,o=0,s=0;if(n/=100){var l=r<.5?r*(1+n):r+n-r*n,u=2*r-l;a=ue(u,l,t+1/3),o=ue(u,l,t),s=ue(u,l,t-1/3)}else a=o=s=r;return{red:Math.round(255*a),green:Math.round(255*o),blue:Math.round(255*s),alpha:i}}(n)),n}var fe=function(e,t){var n=de(e),r=de(t),i=D({},n);return function(e){return i.red=ce(n.red,r.red,e),i.green=ce(n.green,r.green,e),i.blue=ce(n.blue,r.blue,e),i.alpha=le(n.alpha,r.alpha,e),Y.transform(i)}},pe=function(e,t){return function(n){return t(e(n))}},ve=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(pe)},me=function(e){return function(t){return"string"===typeof t&&t.startsWith(e)}},ge=me("--"),ye=me("var(--");var Ae={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:v},xe={regex:z,countKey:"Colors",token:"${c}",parse:se.parse},be={regex:Z,countKey:"Numbers",token:"${n}",parse:V.parse};function _e(e,t){var n,r=t.regex,i=t.countKey,a=t.token,o=t.parse,s=e.tokenised.match(r);s&&(e["num"+i]=s.length,e.tokenised=e.tokenised.replace(r,a),(n=e.values).push.apply(n,(0,O.Z)(s.map(o))))}function we(e){var t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&_e(n,Ae),_e(n,xe),_e(n,be),n}function Ee(e){return we(e).values}function Se(e){var t=we(e),n=t.values,r=t.numColors,i=t.numVars,a=t.tokenised,o=n.length;return function(e){for(var t=a,n=0;n<o;n++)t=n<i?t.replace(Ae.token,e[n]):n<i+r?t.replace(xe.token,se.transform(e[n])):t.replace(be.token,U(e[n]));return t}}var Me=function(e){return"number"===typeof e?0:e};var Ce={test:function(e){var t,n;return isNaN(e)&&G(e)&&((null===(t=e.match(Z))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(z))||void 0===n?void 0:n.length)||0)>0},parse:Ee,createTransformer:Se,getAnimatableNone:function(e){var t=Ee(e);return Se(e)(t.map(Me))}},ke=function(e,t){return function(n){return"".concat(n>0?t:e)}};function Te(e,t){return"number"===typeof e?function(n){return le(e,t,n)}:se.test(e)?fe(e,t):e.startsWith("var(")?ke(e,t):Re(e,t)}var Ie=function(e,t){var n=(0,O.Z)(e),r=n.length,i=e.map((function(e,n){return Te(e,t[n])}));return function(e){for(var t=0;t<r;t++)n[t]=i[t](e);return n}},Be=function(e,t){var n=D(D({},e),t),r={};for(var i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=Te(e[i],t[i]));return function(e){for(var t in r)n[t]=r[t](e);return n}},Re=function(e,t){var n=Ce.createTransformer(t),r=we(e),i=we(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?ve(Ie(r.values,i.values),n):(F(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),ke(e,t))},Le=function(e,t,n){var r=t-e;return 0===r?1:(n-e)/r},Pe=function(e,t){return function(n){return le(e,t,n)}};function De(e,t,n){for(var r=[],i=n||function(e){return"number"===typeof e?Pe:"string"===typeof e?se.test(e)?fe:Re:Array.isArray(e)?Ie:"object"===typeof e?Be:Pe}(e[0]),a=e.length-1,o=0;o<a;o++){var s=i(e[o],e[o+1]);if(t){var l=Array.isArray(t)?t[o]||v:t;s=ve(l,s)}r.push(s)}return r}function Oe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.clamp,i=void 0===r||r,a=n.ease,o=n.mixer,s=e.length;if(N(s===t.length,"Both input and output ranges must be the same length"),1===s)return function(){return t[0]};e[0]>e[s-1]&&(e=(0,O.Z)(e).reverse(),t=(0,O.Z)(t).reverse());var l=De(t,a,o),u=l.length,c=function(t){var n=0;if(u>1)for(;n<e.length-2&&!(t<e[n+1]);n++);var r=Le(e[n],e[n+1],t);return l[n](r)};return i?function(t){return c(Q(e[0],e[s-1],t))}:c}var Fe=function(e){return function(e){return"object"===typeof e&&e.mix}(e)?e.mix:void 0};var Ne=k?t.useLayoutEffect:t.useEffect;function Ue(e,t){var n=C(t()),r=function(){return n.set(t())};return r(),Ne((function(){var t=function(){return y.update(r,!1,!0)},n=e.map((function(e){return e.on("change",t)}));return function(){n.forEach((function(e){return e()})),A(r)}})),n}function Ze(e,t,n,r){if("function"===typeof e)return function(e){_.current=[],e();var t=Ue(_.current,e);return _.current=void 0,t}(e);var i="function"===typeof t?t:function(){var e=!Array.isArray(arguments.length<=0?void 0:arguments[0]),t=e?0:-1,n=0+t<0||arguments.length<=0+t?void 0:arguments[0+t],r=2+t<0||arguments.length<=2+t?void 0:arguments[2+t],i=3+t<0||arguments.length<=3+t?void 0:arguments[3+t],a=Oe(1+t<0||arguments.length<=1+t?void 0:arguments[1+t],r,D({mixer:Fe(r[0])},i));return e?a(n):a}(t,n,r);return Array.isArray(e)?ze(e,i):ze([e],(function(e){var t=(0,s.Z)(e,1)[0];return i(t)}))}function ze(e,t){var n=M((function(){return[]}));return Ue(e,(function(){n.length=0;for(var r=e.length,i=0;i<r;i++)n[i]=e[i].get();return t(n)}))}function He(e,t,n){var r;if("string"===typeof e){var i=document;t&&(N(Boolean(t.current),"Scope provided, but no element detected."),i=t.current),n?(null!==(r=n[e])&&void 0!==r||(n[e]=i.querySelectorAll(e)),e=n[e]):e=i.querySelectorAll(e)}else e instanceof Element&&(e=[e]);return Array.from(e||[])}var Ge=new WeakMap;function Qe(e){var t;return function(){return void 0===t&&(t=e()),t}}var Ve=Qe((function(){return void 0!==window.ScrollTimeline})),je=function(){function e(t){(0,u.Z)(this,e),this.animations=t.filter(Boolean)}return(0,c.Z)(e,[{key:"then",value:function(e,t){return Promise.all(this.animations).then(e).catch(t)}},{key:"getAll",value:function(e){return this.animations[0][e]}},{key:"setAll",value:function(e,t){for(var n=0;n<this.animations.length;n++)this.animations[n][e]=t}},{key:"attachTimeline",value:function(e){var t=this,n=this.animations.map((function(t){if(!Ve()||!t.attachTimeline)return t.pause(),function(e,t){var n,r=function(){var r=t.currentTime,i=(null===r?0:r.value)/100;n!==i&&e(i),n=i};return y.update(r,!0),function(){return A(r)}}((function(e){t.time=t.duration*e}),e);t.attachTimeline(e)}));return function(){n.forEach((function(e,n){e&&e(),t.animations[n].stop()}))}}},{key:"time",get:function(){return this.getAll("time")},set:function(e){this.setAll("time",e)}},{key:"speed",get:function(){return this.getAll("speed")},set:function(e){this.setAll("speed",e)}},{key:"duration",get:function(){for(var e=0,t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}},{key:"runAll",value:function(e){this.animations.forEach((function(t){return t[e]()}))}},{key:"play",value:function(){this.runAll("play")}},{key:"pause",value:function(){this.runAll("pause")}},{key:"stop",value:function(){this.runAll("stop")}},{key:"cancel",value:function(){this.runAll("cancel")}},{key:"complete",value:function(){this.runAll("complete")}}]),e}();function We(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var qe=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Je=new Set(qe),Xe=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},Ye="data-"+Xe("framerAppearId"),Ke=function(e){return 1e3*e},$e=function(e){return e/1e3},et=!1,tt=function(e){return Array.isArray(e)&&"number"===typeof e[0]};function nt(e){return Boolean(!e||"string"===typeof e&&it[e]||tt(e)||Array.isArray(e)&&e.every(nt))}var rt=function(e){var t=(0,s.Z)(e,4),n=t[0],r=t[1],i=t[2],a=t[3];return"cubic-bezier(".concat(n,", ").concat(r,", ").concat(i,", ").concat(a,")")},it={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rt([0,.65,.55,1]),circOut:rt([.55,0,1,.45]),backIn:rt([.31,.01,.66,-.59]),backOut:rt([.33,1.53,.69,.99])};function at(e){if(e)return tt(e)?rt(e):Array.isArray(e)?e.map(at):it[e]}var ot=function(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e},st=1e-7,lt=12;function ut(e,t,n,r){if(e===t&&n===r)return v;var i=function(t){return function(e,t,n,r,i){var a,o,s=0;do{(a=ot(o=t+(n-t)/2,r,i)-e)>0?n=o:t=o}while(Math.abs(a)>st&&++s<lt);return o}(t,0,1,e,n)};return function(e){return 0===e||1===e?e:ot(i(e),t,r)}}var ct=ut(.42,0,1,1),ht=ut(0,0,.58,1),dt=ut(.42,0,.58,1),ft=function(e){return Array.isArray(e)&&"number"!==typeof e[0]},pt=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},vt=function(e){return function(t){return 1-e(1-t)}},mt=function(e){return 1-Math.sin(Math.acos(e))},gt=vt(mt),yt=pt(gt),At=ut(.33,1.53,.69,.99),xt=vt(At),bt=pt(xt),_t={linear:v,easeIn:ct,easeInOut:dt,easeOut:ht,circIn:mt,circInOut:yt,circOut:gt,backIn:xt,backInOut:bt,backOut:At,anticipate:function(e){return(e*=2)<1?.5*xt(e):.5*(2-Math.pow(2,-10*(e-1)))}},wt=function(e){if(Array.isArray(e)){N(4===e.length,"Cubic bezier arrays must contain four numerical values.");var t=(0,s.Z)(e,4);return ut(t[0],t[1],t[2],t[3])}return"string"===typeof e?(N(void 0!==_t[e],"Invalid easing type '".concat(e,"'")),_t[e]):e};function Et(e,t){for(var n=e[e.length-1],r=1;r<=t;r++){var i=Le(0,t,r);e.push(le(n,1,i))}}function St(e){var t=[0];return Et(t,e.length-1),t}function Mt(e,t){return e.map((function(){return t||dt})).splice(0,e.length-1)}function Ct(e){var t=e.duration,n=void 0===t?300:t,r=e.keyframes,i=e.times,a=e.ease,o=void 0===a?"easeInOut":a,s=ft(o)?o.map(wt):wt(o),l={done:!1,value:r[0]},u=function(e,t){return e.map((function(e){return e*t}))}(i&&i.length===r.length?i:St(r),n),c=Oe(u,r,{ease:Array.isArray(s)?s:Mt(r,s)});return{calculatedDuration:n,next:function(e){return l.value=c(e),l.done=e>=n,l}}}var kt=5;function Tt(e,t,n){var r=Math.max(t-kt,0);return p(n-e(r),t-r)}var It=.001,Bt=.01,Rt=10,Lt=.05,Pt=1;function Dt(e){var t,n,r=e.duration,i=void 0===r?800:r,a=e.bounce,o=void 0===a?.25:a,s=e.velocity,l=void 0===s?0:s,u=e.mass,c=void 0===u?1:u;F(i<=Ke(Rt),"Spring duration must be 10 seconds or less");var h=1-o;h=Q(Lt,Pt,h),i=Q(Bt,Rt,$e(i)),h<1?(t=function(e){var t=e*h,n=t*i,r=t-l,a=Ft(e,h),o=Math.exp(-n);return It-r/a*o},n=function(e){var n=e*h*i,r=n*l+l,a=Math.pow(h,2)*Math.pow(e,2)*i,o=Math.exp(-n),s=Ft(Math.pow(e,2),h);return(-t(e)+It>0?-1:1)*((r-a)*o)/s}):(t=function(e){return Math.exp(-e*i)*((e-l)*i+1)-It},n=function(e){return Math.exp(-e*i)*(i*i*(l-e))});var d=function(e,t,n){for(var r=n,i=1;i<Ot;i++)r-=e(r)/t(r);return r}(t,n,5/i);if(i=Ke(i),isNaN(d))return{stiffness:100,damping:10,duration:i};var f=Math.pow(d,2)*c;return{stiffness:f,damping:2*h*Math.sqrt(c*f),duration:i}}var Ot=12;function Ft(e,t){return e*Math.sqrt(1-t*t)}var Nt=["keyframes","restDelta","restSpeed"],Ut=["duration","bounce"],Zt=["stiffness","damping","mass"];function zt(e,t){return t.some((function(t){return void 0!==e[t]}))}function Ht(e){var t,n=e.keyframes,r=e.restDelta,i=e.restSpeed,a=We(e,Nt),o=n[0],s=n[n.length-1],l={done:!1,value:o},u=function(e){var t=D({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!zt(e,Zt)&&zt(e,Ut)){var n=Dt(e);(t=D(D(D({},t),n),{},{velocity:0,mass:1})).isResolvedFromDuration=!0}return t}(a),c=u.stiffness,h=u.damping,d=u.mass,f=u.velocity,p=u.duration,v=u.isResolvedFromDuration,m=f?-$e(f):0,g=h/(2*Math.sqrt(c*d)),y=s-o,A=$e(Math.sqrt(c/d)),x=Math.abs(y)<5;if(i||(i=x?.01:2),r||(r=x?.005:.5),g<1){var b=Ft(A,g);t=function(e){var t=Math.exp(-g*A*e);return s-t*((m+g*A*y)/b*Math.sin(b*e)+y*Math.cos(b*e))}}else if(1===g)t=function(e){return s-Math.exp(-A*e)*(y+(m+A*y)*e)};else{var _=A*Math.sqrt(g*g-1);t=function(e){var t=Math.exp(-g*A*e),n=Math.min(_*e,300);return s-t*((m+g*A*y)*Math.sinh(n)+_*y*Math.cosh(n))/_}}return{calculatedDuration:v&&p||null,next:function(e){var n=t(e);if(v)l.done=e>=p;else{var a=m;0!==e&&(a=g<1?Tt(t,e,n):0);var o=Math.abs(a)<=i,u=Math.abs(s-n)<=r;l.done=o&&u}return l.value=l.done?s:n,l}}}function Gt(e){var t=e.keyframes,n=e.velocity,r=void 0===n?0:n,i=e.power,a=void 0===i?.8:i,o=e.timeConstant,s=void 0===o?325:o,l=e.bounceDamping,u=void 0===l?10:l,c=e.bounceStiffness,h=void 0===c?500:c,d=e.modifyTarget,f=e.min,p=e.max,v=e.restDelta,m=void 0===v?.5:v,g=e.restSpeed,y=t[0],A={done:!1,value:y},x=function(e){return void 0===f?p:void 0===p||Math.abs(f-e)<Math.abs(p-e)?f:p},b=a*r,_=y+b,w=void 0===d?_:d(_);w!==_&&(b=w-y);var E,S,M=function(e){return-b*Math.exp(-e/s)},C=function(e){return w+M(e)},k=function(e){var t=M(e),n=C(e);A.done=Math.abs(t)<=m,A.value=A.done?w:n},T=function(e){(function(e){return void 0!==f&&e<f||void 0!==p&&e>p})(A.value)&&(E=e,S=Ht({keyframes:[A.value,x(A.value)],velocity:Tt(C,e,A.value),damping:u,stiffness:h,restDelta:m,restSpeed:g}))};return T(0),{calculatedDuration:null,next:function(e){var t=!1;return S||void 0!==E||(t=!0,k(e),T(e)),void 0!==E&&e>E?S.next(e-E):(!t&&k(e),A)}}}var Qt=function(e){var t=function(t){var n=t.timestamp;return e(n)};return{start:function(){return y.update(t,!0)},stop:function(){return A(t)},now:function(){return x.isProcessing?x.timestamp:performance.now()}}},Vt=2e4;function jt(e){for(var t=0,n=e.next(t);!n.done&&t<Vt;)t+=50,n=e.next(t);return t>=Vt?1/0:t}var Wt=["autoplay","delay","driver","keyframes","type","repeat","repeatDelay","repeatType","onPlay","onStop","onComplete","onUpdate"],qt={decay:Gt,inertia:Gt,tween:Ct,keyframes:Ct,spring:Ht};function Jt(e){var t,n,r,i=e.autoplay,a=void 0===i||i,o=e.delay,s=void 0===o?0:o,l=e.driver,u=void 0===l?Qt:l,c=e.keyframes,h=e.type,d=void 0===h?"keyframes":h,f=e.repeat,p=void 0===f?0:f,v=e.repeatDelay,m=void 0===v?0:v,g=e.repeatType,y=void 0===g?"loop":g,A=e.onPlay,x=e.onStop,b=e.onComplete,_=e.onUpdate,w=We(e,Wt),E=1,S=!1,M=function(){n=new Promise((function(e){t=e}))};M();var C,k=qt[d]||Ct;k!==Ct&&"number"!==typeof c[0]&&(C=Oe([0,100],c,{clamp:!1}),c=[0,100]);var T,I=k(D(D({},w),{},{keyframes:c}));"mirror"===y&&(T=k(D(D({},w),{},{keyframes:(0,O.Z)(c).reverse(),velocity:-(w.velocity||0)})));var B="idle",R=null,L=null,P=null;null===I.calculatedDuration&&p&&(I.calculatedDuration=jt(I));var F=I.calculatedDuration,N=1/0,U=1/0;null!==F&&(U=(N=F+m)*(p+1)-m);var Z=0,z=function(e){if(null!==L){E>0&&(L=Math.min(L,e)),E<0&&(L=Math.min(e-U/E,L));var t=(Z=null!==R?R:Math.round(e-L)*E)-s*(E>=0?1:-1),n=E>=0?t<0:t>U;Z=Math.max(t,0),"finished"===B&&null===R&&(Z=U);var r=Z,i=I;if(p){var a=Z/N,o=Math.floor(a),l=a%1;!l&&a>=1&&(l=1),1===l&&o--,o=Math.min(o,p+1);var u=Boolean(o%2);u&&("reverse"===y?(l=1-l,m&&(l-=m/N)):"mirror"===y&&(i=T));var h=Q(0,1,l);Z>U&&(h="reverse"===y&&u?1:0),r=h*N}var d=n?{done:!1,value:c[0]}:i.next(r);C&&(d.value=C(d.value));var f=d.done;n||null===F||(f=E>=0?Z>=U:Z<=0);var v=null===R&&("finished"===B||"running"===B&&f);return _&&_(d.value),v&&V(),d}},H=function(){r&&r.stop(),r=void 0},G=function(){B="idle",H(),t(),M(),L=P=null},V=function(){B="finished",b&&b(),H(),t()},j=function(){if(!S){r||(r=u(z));var e=r.now();A&&A(),null!==R?L=e-R:L&&"finished"!==B||(L=e),"finished"===B&&M(),P=L,R=null,B="running",r.start()}};a&&j();var W={then:function(e,t){return n.then(e,t)},get time(){return $e(Z)},set time(e){e=Ke(e),Z=e,null===R&&r&&0!==E?L=r.now()-e/E:R=e},get duration(){var e=null===I.calculatedDuration?jt(I):I.calculatedDuration;return $e(e)},get speed(){return E},set speed(e){e!==E&&r&&(E=e,W.time=$e(Z))},get state(){return B},play:j,pause:function(){B="paused",R=Z},stop:function(){S=!0,"idle"!==B&&(B="idle",x&&x(),G())},cancel:function(){null!==P&&z(P),G()},complete:function(){B="finished"},sample:function(e){return L=0,z(e)}};return W}var Xt=["onUpdate","onComplete"],Yt=Qe((function(){return Object.hasOwnProperty.call(Element.prototype,"animate")})),Kt=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function $t(e,t,n){n.onUpdate;var r=n.onComplete,i=We(n,Xt);if(!(Yt()&&Kt.has(t)&&!i.repeatDelay&&"mirror"!==i.repeatType&&0!==i.damping&&"inertia"!==i.type))return!1;var a,o,s=!1,l=function(){o=new Promise((function(e){a=e}))};l();var u=i.keyframes,c=i.duration,h=void 0===c?300:c,d=i.ease,f=i.times;if(function(e,t){return"spring"===t.type||"backgroundColor"===e||!nt(t.ease)}(t,i)){for(var p=Jt(D(D({},i),{},{repeat:0,delay:0})),m={done:!1,value:u[0]},g=[],x=0;!m.done&&x<2e4;)m=p.sample(x),g.push(m.value),x+=10;f=void 0,u=g,h=x-10,d="linear"}var b=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.delay,a=void 0===i?0:i,o=r.duration,s=r.repeat,l=void 0===s?0:s,u=r.repeatType,c=void 0===u?"loop":u,h=r.ease,d=r.times,f=(0,L.Z)({},t,n);d&&(f.offset=d);var p=at(h);return Array.isArray(p)&&(f.easing=p),e.animate(f,{delay:a,duration:o,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:l+1,direction:"reverse"===c?"alternate":"normal"})}(e.owner.current,t,u,D(D({},i),{},{duration:h,ease:d,times:f})),_=function(){return b.cancel()},w=function(){y.update(_),a(),l()};b.onfinish=function(){e.set(function(e,t){var n=t.repeat,r=t.repeatType;return e[n&&"loop"!==(void 0===r?"loop":r)&&n%2===1?0:e.length-1]}(u,i)),r&&r(),w()};var E={then:function(e,t){return o.then(e,t)},attachTimeline:function(e){return b.timeline=e,b.onfinish=null,v},get time(){return $e(b.currentTime||0)},set time(e){b.currentTime=Ke(e)},get speed(){return b.playbackRate},set speed(e){b.playbackRate=e},get duration(){return $e(h)},play:function(){s||(b.play(),A(_))},pause:function(){return b.pause()},stop:function(){if(s=!0,"idle"!==b.playState){var t=b.currentTime;if(t){var n=Jt(D(D({},i),{},{autoplay:!1}));e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}w()}},complete:function(){return b.finish()},cancel:w};return E}var en={type:"spring",stiffness:500,damping:25,restSpeed:10},tn={type:"keyframes",duration:.8},nn={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rn=function(e,t){var n=t.keyframes;return n.length>2?tn:Je.has(e)?e.startsWith("scale")?function(e){return{type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}}(n[1]):en:nn},an=function(e,t){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!Ce.test(t)&&"0"!==t||t.startsWith("url(")))},on=new Set(["brightness","contrast","saturate","opacity"]);function sn(e){var t=e.slice(0,-1).split("("),n=(0,s.Z)(t,2),r=n[0],i=n[1];if("drop-shadow"===r)return e;var a=i.match(Z)||[],o=(0,s.Z)(a,1)[0];if(!o)return e;var l=i.replace(o,""),u=on.has(r)?1:0;return o!==i&&(u*=100),r+"("+u+l+")"}var ln=/([a-z-]*)\(.*?\)/g,un=D(D({},Ce),{},{getAnimatableNone:function(e){var t=e.match(ln);return t?t.map(sn).join(" "):e}}),cn=D(D({},V),{},{transform:Math.round}),hn={borderWidth:ne,borderTopWidth:ne,borderRightWidth:ne,borderBottomWidth:ne,borderLeftWidth:ne,borderRadius:ne,radius:ne,borderTopLeftRadius:ne,borderTopRightRadius:ne,borderBottomRightRadius:ne,borderBottomLeftRadius:ne,width:ne,maxWidth:ne,height:ne,maxHeight:ne,size:ne,top:ne,right:ne,bottom:ne,left:ne,padding:ne,paddingTop:ne,paddingRight:ne,paddingBottom:ne,paddingLeft:ne,margin:ne,marginTop:ne,marginRight:ne,marginBottom:ne,marginLeft:ne,rotate:ee,rotateX:ee,rotateY:ee,rotateZ:ee,scale:W,scaleX:W,scaleY:W,scaleZ:W,skew:ee,skewX:ee,skewY:ee,distance:ne,translateX:ne,translateY:ne,translateZ:ne,x:ne,y:ne,z:ne,perspective:ne,transformPerspective:ne,opacity:j,originX:ae,originY:ae,originZ:ne,zIndex:cn,fillOpacity:j,strokeOpacity:j,numOctaves:cn},dn=D(D({},hn),{},{color:se,backgroundColor:se,outlineColor:se,fill:se,stroke:se,borderColor:se,borderTopColor:se,borderRightColor:se,borderBottomColor:se,borderLeftColor:se,filter:un,WebkitFilter:un}),fn=function(e){return dn[e]};function pn(e,t){var n=fn(e);return n!==un&&(n=Ce),n.getAnimatableNone?n.getAnimatableNone(t):void 0}var vn=function(e){return/^0[^.\s]+$/.test(e)};function mn(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||vn(e):void 0}var gn=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];function yn(e,t){return e[t]||e.default||e}var An=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(i){var a=yn(r,e)||{},o=a.delay||r.delay||0,s=r.elapsed,l=void 0===s?0:s;l-=Ke(o);var u=function(e,t,n,r){var i,a=an(t,n);i=Array.isArray(n)?(0,O.Z)(n):[null,n];for(var o=void 0!==r.from?r.from:e.get(),s=void 0,l=[],u=0;u<i.length;u++)null===i[u]&&(i[u]=0===u?o:i[u-1]),mn(i[u])&&l.push(u),"string"===typeof i[u]&&"none"!==i[u]&&"0"!==i[u]&&(s=i[u]);if(a&&l.length&&s)for(var c=0;c<l.length;c++)i[l[c]]=pn(t,s);return i}(t,e,n,a),c=u[0],h=u[u.length-1],d=an(e,c),f=an(e,h);F(d===f,"You are trying to animate ".concat(e,' from "').concat(c,'" to "').concat(h,'". ').concat(c," is not an animatable value - to enable this animation set ").concat(c," to a value animatable to ").concat(h," via the `style` property."));var p=D(D({keyframes:u,velocity:t.getVelocity(),ease:"easeOut"},a),{},{delay:-l,onUpdate:function(e){t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:function(){i(),a.onComplete&&a.onComplete()}});if(function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from,e.elapsed;var t=We(e,gn);return!!Object.keys(t).length}(a)||(p=D(D({},p),rn(e,p))),p.duration&&(p.duration=Ke(p.duration)),p.repeatDelay&&(p.repeatDelay=Ke(p.repeatDelay)),!d||!f||et||!1===a.type)return function(e){var t=e.keyframes,n=e.delay,r=e.onUpdate,i=e.onComplete,a=function(){return r&&r(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:v,pause:v,stop:v,then:function(e){return e(),Promise.resolve()},cancel:v,complete:v}};return n?Jt({keyframes:[0,1],duration:0,delay:n,onComplete:a}):a()}(et?D(D({},p),{},{delay:0}):p);if(t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){var m=$t(t,e,p);if(m)return m}return Jt(p)}},xn=function(e){return Boolean(e&&e.getVelocity)};function bn(e){return Boolean(xn(e)&&e.add)}var _n=function(e){return/^\-?\d*\.?\d+$/.test(e)},wn=function(e){return Array.isArray(e)},En=function(e){return Boolean(e&&"object"===typeof e&&e.mix&&e.toValue)},Sn=function(e){return wn(e)?e[e.length-1]||0:e},Mn=function(e){return function(t){return t.test(e)}},Cn=[V,ne,te,ee,ie,re,{test:function(e){return"auto"===e},parse:function(e){return e}}],kn=function(e){return Cn.find(Mn(e))},Tn=[].concat((0,O.Z)(Cn),[se,Ce]),In=function(e){return Tn.find(Mn(e))};function Bn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),t}function Rn(e,t,n){var r=e.getProps();return Bn(r,t,void 0!==n?n:r.custom,function(e){var t={};return e.values.forEach((function(e,n){return t[n]=e.get()})),t}(e),function(e){var t={};return e.values.forEach((function(e,n){return t[n]=e.getVelocity()})),t}(e))}var Ln=["transitionEnd","transition"];function Pn(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,E(n))}function Dn(e,t){var n=Rn(e,t),r=n?e.makeTargetAnimatable(n,!1):{},i=r.transitionEnd,a=void 0===i?{}:i,o=(r.transition,We(r,Ln));for(var s in o=D(D({},o),a)){Pn(e,s,Sn(o[s]))}}function On(e,t){if(t)return(t[e]||t.default||t).from}var Fn=["transition","transitionEnd"];function Nn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.delay,i=void 0===r?0:r,a=n.transitionOverride,o=n.type,s=e.makeTargetAnimatable(t),l=s.transition,u=void 0===l?e.getDefaultTransition():l,c=s.transitionEnd,h=We(s,Fn),d=e.getValue("willChange");a&&(u=a);var f=[],p=o&&e.animationState&&e.animationState.getState()[o],v=function(t){var n=e.getValue(t),r=h[t];if(!n||void 0===r||p&&function(e,t){var n=e.protectedKeys,r=e.needsAnimating,i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}(p,t))return"continue";var a=D({delay:i,elapsed:0},u);if(window.HandoffAppearAnimations&&!n.hasAnimated){var o=e.getProps()[Ye];o&&(a.elapsed=window.HandoffAppearAnimations(o,t,n,y))}n.start(An(t,n,r,e.shouldReduceMotion&&Je.has(t)?{type:!1}:a));var s=n.animation;bn(d)&&(d.add(t),s.then((function(){return d.remove(t)}))),f.push(s)};for(var m in h)v(m);return c&&Promise.all(f).then((function(){c&&Dn(e,c)})),f}function Un(e){return e instanceof SVGElement&&"svg"!==e.tagName}var Zn=n(1752),zn=n(1120),Hn=n(136),Gn=n(9388),Qn={};function Vn(e,t){var n=t.layout,r=t.layoutId;return Je.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!Qn[e]||"opacity"===e)}function jn(e,t){var n=e.style,r={};for(var i in n)(xn(n[i])||t.style&&xn(t.style[i])||Vn(i,e))&&(r[i]=n[i]);return r}function Wn(e,t){var n=jn(e,t);for(var r in e){if(xn(e[r])||xn(t[r]))n[-1!==qe.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return n}var qn=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;var Jn=4;function Xn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;N(n<=Jn,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));var r=function(e){var t=qn.exec(e);if(!t)return[,];var n=(0,s.Z)(t,3);return[n[1],n[2]]}(e),i=(0,s.Z)(r,2),a=i[0],o=i[1];if(a){var l=window.getComputedStyle(t).getPropertyValue(a);if(l){var u=l.trim();return _n(u)?parseFloat(u):u}return ye(o)?Xn(o,t,n+1):o}}function Yn(e,t,n){var r=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t)),i=e.current;if(!(i instanceof Element))return{target:r,transitionEnd:n};for(var a in n&&(n=D({},n)),e.values.forEach((function(e){var t=e.get();if(ye(t)){var n=Xn(t,i);n&&e.set(n)}})),r){var o=r[a];if(ye(o)){var s=Xn(o,i);s&&(r[a]=s,n||(n={}),void 0===n[a]&&(n[a]=o))}}return{target:r,transitionEnd:n}}var Kn=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),$n=function(e){return Kn.has(e)},er=function(e){return e===V||e===ne},tr=function(e,t){return parseFloat(e.split(", ")[t])},nr=function(e,t){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var a=i.match(/^matrix3d\((.+)\)$/);if(a)return tr(a[1],t);var o=i.match(/^matrix\((.+)\)$/);return o?tr(o[1],e):0}},rr=new Set(["x","y","z"]),ir=qe.filter((function(e){return!rr.has(e)}));var ar={width:function(e,t){var n=e.x,r=t.paddingLeft,i=void 0===r?"0":r,a=t.paddingRight,o=void 0===a?"0":a;return n.max-n.min-parseFloat(i)-parseFloat(o)},height:function(e,t){var n=e.y,r=t.paddingTop,i=void 0===r?"0":r,a=t.paddingBottom,o=void 0===a?"0":a;return n.max-n.min-parseFloat(i)-parseFloat(o)},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,r=t.top;return parseFloat(r)+(n.max-n.min)},right:function(e,t){var n=e.x,r=t.left;return parseFloat(r)+(n.max-n.min)},x:nr(4,13),y:nr(5,14)};ar.translateX=ar.x,ar.translateY=ar.y;var or=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=D({},t),r=D({},r);var i=Object.keys(t).filter($n),a=[],o=!1,l=[];if(i.forEach((function(i){var s=e.getValue(i);if(e.hasValue(i)){var u,c=n[i],h=kn(c),d=t[i];if(wn(d)){var f=d.length,p=null===d[0]?1:0;c=d[p],h=kn(c);for(var v=p;v<f&&null!==d[v];v++)u?N(kn(d[v])===u,"All keyframes must be of the same type"):(u=kn(d[v]),N(u===h||er(h)&&er(u),"Keyframes must be of the same dimension as the current value"))}else u=kn(d);if(h!==u)if(er(h)&&er(u)){var m=s.get();"string"===typeof m&&s.set(parseFloat(m)),"string"===typeof d?t[i]=parseFloat(d):Array.isArray(d)&&u===ne&&(t[i]=d.map(parseFloat))}else(null===h||void 0===h?void 0:h.transform)&&(null===u||void 0===u?void 0:u.transform)&&(0===c||0===d)?0===c?s.set(u.transform(c)):t[i]=h.transform(d):(o||(a=function(e){var t=[];return ir.forEach((function(n){var r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.render(),t}(e),o=!0),l.push(i),r[i]=void 0!==r[i]?r[i]:t[i],s.jump(d))}})),l.length){var u=l.indexOf("height")>=0?window.pageYOffset:null,c=function(e,t,n){var r=t.measureViewportBox(),i=t.current,a=getComputedStyle(i),o=a.display,s={};"none"===o&&t.setStaticValue("display",e.display||"block"),n.forEach((function(e){s[e]=ar[e](r,a)})),t.render();var l=t.measureViewportBox();return n.forEach((function(n){var r=t.getValue(n);r&&r.jump(s[n]),e[n]=ar[n](l,a)})),e}(t,e,l);return a.length&&a.forEach((function(t){var n=(0,s.Z)(t,2),r=n[0],i=n[1];e.getValue(r).set(i)})),e.render(),k&&null!==u&&window.scrollTo({top:u}),{target:c,transitionEnd:r}}return{target:t,transitionEnd:r}};function sr(e,t,n,r){return function(e){return Object.keys(e).some($n)}(t)?or(e,t,n,r):{target:t,transitionEnd:r}}var lr=function(){return{x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}},ur=function(){return{x:{min:0,max:0},y:{min:0,max:0}}};function cr(e){return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function hr(e){return"object"===typeof e&&"function"===typeof e.start}function dr(e){return"string"===typeof e||Array.isArray(e)}var fr=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pr=["initial"].concat(fr);function vr(e){return hr(e.animate)||pr.some((function(t){return dr(e[t])}))}function mr(e){return Boolean(vr(e)||e.variants)}var gr={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yr={},Ar=function(e){yr[e]={isEnabled:function(t){return gr[e].some((function(e){return!!t[e]}))}}};for(var xr in gr)Ar(xr);var br=["willChange"],_r=["children"],wr=Object.keys(yr),Er=wr.length,Sr=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Mr=pr.length,Cr=function(){function e(t){var n=this,r=t.parent,i=t.props,a=t.presenceContext,o=t.reducedMotionConfig,s=t.visualState,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,u.Z)(this,e),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=function(){return n.notify("Update",n.latestValues)},this.render=function(){n.current&&(n.triggerBuild(),n.renderInstance(n.current,n.renderState,n.props.style,n.projection))},this.scheduleRender=function(){return y.render(n.render,!1,!0)};var c=s.latestValues,h=s.renderState;this.latestValues=c,this.baseTarget=D({},c),this.initialValues=i.initial?D({},c):{},this.renderState=h,this.parent=r,this.props=i,this.presenceContext=a,this.depth=r?r.depth+1:0,this.reducedMotionConfig=o,this.options=l,this.isControllingVariants=vr(i),this.isVariantNode=mr(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(r&&r.current);var d=this.scrapeMotionValuesFromProps(i,{}),f=d.willChange,p=We(d,br);for(var v in p){var m=p[v];void 0!==c[v]&&xn(m)&&(m.set(c[v],!1),bn(f)&&f.add(v))}}return(0,c.Z)(e,[{key:"scrapeMotionValuesFromProps",value:function(e,t){return{}}},{key:"mount",value:function(e){var t=this;this.current=e,Ge.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((function(e,n){return t.bindToMotionValue(n,e)})),I.current||B(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||T.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}},{key:"unmount",value:function(){for(var e in Ge.delete(this.current),this.projection&&this.projection.unmount(),A(this.notifyUpdate),A(this.render),this.valueSubscriptions.forEach((function(e){return e()})),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[e].clear();for(var t in this.features)this.features[t].unmount();this.current=null}},{key:"bindToMotionValue",value:function(e,t){var n=this,r=Je.has(e),i=t.on("change",(function(t){n.latestValues[e]=t,n.props.onUpdate&&y.update(n.notifyUpdate,!1,!0),r&&n.projection&&(n.projection.isTransformDirty=!0)})),a=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,(function(){i(),a()}))}},{key:"sortNodePosition",value:function(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}},{key:"loadFeatures",value:function(e,t,n,r){for(var i,a,o=this,s=(e.children,We(e,_r)),l=0;l<Er;l++){var u=wr[l],c=yr[u],h=c.isEnabled,d=c.Feature,f=c.ProjectionNode,p=c.MeasureLayout;f&&(i=f),h(s)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),p&&(a=p))}if(!this.projection&&i){this.projection=new i(this.latestValues,this.parent&&this.parent.projection);var v=s.layoutId,m=s.layout,g=s.drag,y=s.dragConstraints,A=s.layoutScroll,x=s.layoutRoot;this.projection.setOptions({layoutId:v,layout:m,alwaysMeasureLayout:Boolean(g)||y&&cr(y),visualElement:this,scheduleRender:function(){return o.scheduleRender()},animationType:"string"===typeof m?m:"both",initialPromotionConfig:r,layoutScroll:A,layoutRoot:x})}return a}},{key:"updateFeatures",value:function(){for(var e in this.features){var t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}},{key:"triggerBuild",value:function(){this.build(this.renderState,this.latestValues,this.options,this.props)}},{key:"measureViewportBox",value:function(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ur()}},{key:"getStaticValue",value:function(e){return this.latestValues[e]}},{key:"setStaticValue",value:function(e,t){this.latestValues[e]=t}},{key:"makeTargetAnimatable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}},{key:"update",value:function(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(var n=0;n<Sr.length;n++){var r=Sr[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);var i=e["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=function(e,t,n){var r=t.willChange;for(var i in t){var a=t[i],o=n[i];if(xn(a))e.addValue(i,a),bn(r)&&r.add(i);else if(xn(o))e.addValue(i,E(a,{owner:e})),bn(r)&&r.remove(i);else if(o!==a)if(e.hasValue(i)){var s=e.getValue(i);!s.hasAnimated&&s.set(a)}else{var l=e.getStaticValue(i);e.addValue(i,E(void 0!==l?l:a,{owner:e}))}}for(var u in n)void 0===t[u]&&e.removeValue(u);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}},{key:"getProps",value:function(){return this.props}},{key:"getVariant",value:function(e){return this.props.variants?this.props.variants[e]:void 0}},{key:"getDefaultTransition",value:function(){return this.props.transition}},{key:"getTransformPagePoint",value:function(){return this.props.transformPagePoint}},{key:"getClosestVariantNode",value:function(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}},{key:"getVariantContext",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){var e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}for(var t={},n=0;n<Mr;n++){var r=pr[n],i=this.props[r];(dr(i)||!1===i)&&(t[r]=i)}return t}},{key:"addVariantChild",value:function(e){var t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),function(){return t.variantChildren.delete(e)}}},{key:"addValue",value:function(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}},{key:"removeValue",value:function(e){this.values.delete(e);var t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}},{key:"hasValue",value:function(e){return this.values.has(e)}},{key:"getValue",value:function(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];var n=this.values.get(e);return void 0===n&&void 0!==t&&(n=E(t,{owner:this}),this.addValue(e,n)),n}},{key:"readValue",value:function(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}},{key:"setBaseTarget",value:function(e,t){this.baseTarget[e]=t}},{key:"getBaseTarget",value:function(e){var t,n=this.props.initial,r="string"===typeof n||"object"===typeof n?null===(t=Bn(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==r)return r;var i=this.getBaseTargetFromProps(this.props,e);return void 0===i||xn(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}},{key:"on",value:function(e,t){return this.events[e]||(this.events[e]=new f),this.events[e].add(t)}},{key:"notify",value:function(e){if(this.events[e]){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.events[e]).notify.apply(t,r)}}}]),e}(),kr=["transition","transitionEnd"],Tr=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"sortInstanceNodePosition",value:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1}},{key:"getBaseTargetFromProps",value:function(e,t){return e.style?e.style[t]:void 0}},{key:"removeValueFromRenderState",value:function(e,t){var n=t.vars,r=t.style;delete n[e],delete r[e]}},{key:"makeTargetAnimatableFromInstance",value:function(e,t,n){var r=e.transition,i=e.transitionEnd,a=We(e,kr),o=t.transformValues,s=function(e,t,n){var r={};for(var i in e){var a=On(i,t);if(void 0!==a)r[i]=a;else{var o=n.getValue(i);o&&(r[i]=o.get())}}return r}(a,r||{},this);if(o&&(i&&(i=o(i)),a&&(a=o(a)),s&&(s=o(s))),n){!function(e,t,n){var r,i,a=Object.keys(t).filter((function(t){return!e.hasValue(t)})),o=a.length;if(o)for(var s=0;s<o;s++){var l=a[s],u=t[l],c=null;Array.isArray(u)&&(c=u[0]),null===c&&(c=null!==(i=null!==(r=n[l])&&void 0!==r?r:e.readValue(l))&&void 0!==i?i:t[l]),void 0!==c&&null!==c&&("string"===typeof c&&(_n(c)||vn(c))?c=parseFloat(c):!In(c)&&Ce.test(u)&&(c=pn(l,u)),e.addValue(l,E(c,{owner:e})),void 0===n[l]&&(n[l]=c),null!==c&&e.setBaseTarget(l,c))}}(this,a,s);var l=function(e,t,n,r){var i=Yn(e,t,r);return sr(e,t=i.target,n,r=i.transitionEnd)}(this,a,s,i);i=l.transitionEnd,a=l.target}return D({transition:r,transitionEnd:i},a)}}]),n}(Cr),Ir={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Br=qe.length;var Rr=function(e,t){return t&&"number"===typeof e?t.transform(e):e};function Lr(e,t,n,r){var i=e.style,a=e.vars,o=e.transform,s=e.transformOrigin,l=!1,u=!1,c=!0;for(var h in t){var d=t[h];if(ge(h))a[h]=d;else{var f=hn[h],p=Rr(d,f);if(Je.has(h)){if(l=!0,o[h]=p,!c)continue;d!==(f.default||0)&&(c=!1)}else h.startsWith("origin")?(u=!0,s[h]=p):i[h]=p}}if(t.transform||(l||r?i.transform=function(e,t,n,r){for(var i=t.enableHardwareAcceleration,a=void 0===i||i,o=t.allowTransformNone,s=void 0===o||o,l="",u=0;u<Br;u++){var c=qe[u];if(void 0!==e[c]){var h=Ir[c]||c;l+="".concat(h,"(").concat(e[c],") ")}}return a&&!e.z&&(l+="translateZ(0)"),l=l.trim(),r?l=r(e,n?"":l):s&&n&&(l="none"),l}(e.transform,n,c,r):i.transform&&(i.transform="none")),u){var v=s.originX,m=void 0===v?"50%":v,g=s.originY,y=void 0===g?"50%":g,A=s.originZ,x=void 0===A?0:A;i.transformOrigin="".concat(m," ").concat(y," ").concat(x)}}function Pr(e,t,n){return"string"===typeof e?e:ne.transform(t+n*e)}var Dr={offset:"stroke-dashoffset",array:"stroke-dasharray"},Or={offset:"strokeDashoffset",array:"strokeDasharray"};var Fr=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function Nr(e,t,n,r,i){var a=t.attrX,o=t.attrY,s=t.attrScale,l=t.originX,u=t.originY,c=t.pathLength,h=t.pathSpacing,d=void 0===h?1:h,f=t.pathOffset,p=void 0===f?0:f;if(Lr(e,We(t,Fr),n,i),r)e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);else{e.attrs=e.style,e.style={};var v=e.attrs,m=e.style,g=e.dimensions;v.transform&&(g&&(m.transform=v.transform),delete v.transform),g&&(void 0!==l||void 0!==u||m.transform)&&(m.transformOrigin=function(e,t,n){var r=Pr(t,e.x,e.width),i=Pr(n,e.y,e.height);return"".concat(r," ").concat(i)}(g,void 0!==l?l:.5,void 0!==u?u:.5)),void 0!==a&&(v.x=a),void 0!==o&&(v.y=o),void 0!==s&&(v.scale=s),void 0!==c&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;var a=i?Dr:Or;e[a.offset]=ne.transform(-r);var o=ne.transform(t),s=ne.transform(n);e[a.array]="".concat(o," ").concat(s)}(v,c,d,p,!1)}}var Ur=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Zr(e,t,n,r){var i=t.style,a=t.vars;for(var o in Object.assign(e.style,i,r&&r.getProjectionStyles(n)),a)e.style.setProperty(o,a[o])}function zr(e,t,n,r){for(var i in Zr(e,t,void 0,r),t.attrs)e.setAttribute(Ur.has(i)?i:Xe(i),t.attrs[i])}var Hr=function(e){return"string"===typeof e&&"svg"===e.toLowerCase()},Gr=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.apply(this,arguments)).isSVGTag=!1,e}return(0,c.Z)(n,[{key:"getBaseTargetFromProps",value:function(e,t){return e[t]}},{key:"readValueFromInstance",value:function(e,t){if(Je.has(t)){var n=fn(t);return n&&n.default||0}return t=Ur.has(t)?t:Xe(t),e.getAttribute(t)}},{key:"measureInstanceViewportBox",value:function(){return ur()}},{key:"scrapeMotionValuesFromProps",value:function(e,t){return Wn(e,t)}},{key:"build",value:function(e,t,n,r){Nr(e,t,n,this.isSVGTag,r.transformTemplate)}},{key:"renderInstance",value:function(e,t,n,r){zr(e,t,0,r)}},{key:"mount",value:function(e){this.isSVGTag=Hr(e.tagName),(0,Zn.Z)((0,zn.Z)(n.prototype),"mount",this).call(this,e)}}]),n}(Tr);function Qr(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function Vr(e){return void 0===e||1===e}function jr(e){var t=e.scale,n=e.scaleX,r=e.scaleY;return!Vr(t)||!Vr(n)||!Vr(r)}function Wr(e){return jr(e)||qr(e)||e.z||e.rotate||e.rotateX||e.rotateY}function qr(e){return Jr(e.x)||Jr(e.y)}function Jr(e){return e&&"0%"!==e}function Xr(e,t,n){return n+t*(e-n)}function Yr(e,t,n,r,i){return void 0!==i&&(e=Xr(e,i,r)),Xr(e,n,r)+t}function Kr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=Yr(e.min,t,n,r,i),e.max=Yr(e.max,t,n,r,i)}function $r(e,t){var n=t.x,r=t.y;Kr(e.x,n.translate,n.scale,n.originPoint),Kr(e.y,r.translate,r.scale,r.originPoint)}function ei(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function ti(e,t){e.min=e.min+t,e.max=e.max+t}function ni(e,t,n){var r=(0,s.Z)(n,3),i=r[0],a=r[1],o=r[2],l=void 0!==t[o]?t[o]:.5,u=le(e.min,e.max,l);Kr(e,t[i],t[a],u,t.scale)}var ri=["x","scaleX","originX"],ii=["y","scaleY","originY"];function ai(e,t){ni(e.x,t,ri),ni(e.y,t,ii)}function oi(e,t){return Qr(function(e,t){if(!t)return e;var n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}var si=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"readValueFromInstance",value:function(e,t){if(Je.has(t)){var n=fn(t);return n&&n.default||0}var r,i=(r=e,window.getComputedStyle(r)),a=(ge(t)?i.getPropertyValue(t):i[t])||0;return"string"===typeof a?a.trim():a}},{key:"measureInstanceViewportBox",value:function(e,t){return oi(e,t.transformPagePoint)}},{key:"build",value:function(e,t,n,r){Lr(e,t,n,r.transformTemplate)}},{key:"scrapeMotionValuesFromProps",value:function(e,t){return jn(e,t)}},{key:"handleChildMotionValue",value:function(){var e=this;this.childSubscription&&(this.childSubscription(),delete this.childSubscription);var t=this.props.children;xn(t)&&(this.childSubscription=t.on("change",(function(t){e.current&&(e.current.textContent="".concat(t))})))}},{key:"renderInstance",value:function(e,t,n,r){Zr(e,t,n,r)}}]),n}(Tr);function li(e){var t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=Un(e)?new Gr(t,{enableHardwareAcceleration:!1}):new si(t,{enableHardwareAcceleration:!0});n.mount(e),Ge.set(e,n)}function ui(e,t,n){var r=xn(e)?e:E(e);return r.start(An("",r,t,n)),r.animation}function ci(e,t,n,r){var i;return"number"===typeof t?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):"<"===t?n:null!==(i=r.get(t))&&void 0!==i?i:e}var hi=function(e,t,n){var r=t-e;return((n-e)%r+r)%r+e};function di(e,t){return ft(e)?e[hi(0,e.length,t)]:e}function fi(e,t,n,r,i,a){!function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];i.at>t&&i.at<n&&(d(e,i),r--)}}(e,i,a);for(var o=0;o<t.length;o++)e.push({value:t[o],at:le(i,a,r[o]),easing:di(n,o)})}function pi(e,t){return e.at===t.at?null===e.value?1:null===t.value?-1:0:e.at-t.at}var vi=["defaultTransition"],mi=["delay","times","type"],gi="easeInOut";function yi(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.defaultTransition,r=void 0===n?{}:n,i=We(t,vi),a=arguments.length>2?arguments[2]:void 0,o=r.duration||.3,l=new Map,u=new Map,c={},h=new Map,d=0,f=0,p=0,v=function(){var t=e[m];if("string"===typeof t)return h.set(t,f),"continue";if(!Array.isArray(t))return h.set(t.name,ci(f,t.at,d,h)),"continue";var n=(0,s.Z)(t,3),i=n[0],l=n[1],v=n[2],g=void 0===v?{}:v;void 0!==g.at&&(f=ci(f,g.at,d,h));var y=0,A=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=function(e){return Array.isArray(e)?e:[e]}(e),l=t.delay,u=void 0===l?0:l,c=t.times,h=void 0===c?St(s):c,d=t.type,v=void 0===d?"keyframes":d,m=We(t,mi),g=t.ease,A=void 0===g?r.ease||"easeOut":g,x=t.duration,b="function"===typeof u?u(i,a):u,_=s.length;if(_<=2&&"spring"===v){var w=100;if(2===_&&wi(s)){var E=s[1]-s[0];w=Math.abs(E)}var S=D({},m);void 0!==x&&(S.duration=Ke(x));var M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=Ht(D({keyframes:[0,t]},e)),r=Math.min(jt(n),Vt);return{type:"keyframes",ease:function(e){return n.next(r*e).value/t},duration:$e(r)}}(S,w);A=M.ease,x=M.duration}null!==x&&void 0!==x||(x=o);var C=f+b,k=C+x;1===h.length&&0===h[0]&&(h[1]=1);var T=h.length-s.length;T>0&&Et(h,T),1===s.length&&s.unshift(null),fi(n,s,A,h,C,k),y=Math.max(b+x,y),p=Math.max(k,p)};if(xn(i)){A(l,g,xi("default",Ai(i,u)))}else{for(var x=He(i,a,c),b=x.length,_=0;_<b;_++){var w=Ai(x[_],u);for(var E in l)A(l[E],bi(g,E),xi(E,w),_,b)}d=f,f+=y}},m=0;m<e.length;m++)v();return u.forEach((function(e,t){for(var n in e){var a=e[n];a.sort(pi);for(var o=[],s=[],u=[],c=0;c<a.length;c++){var h=a[c],d=h.at,f=h.value,v=h.easing;o.push(f),s.push(Le(0,p,d)),u.push(v||"easeOut")}0!==s[0]&&(s.unshift(0),o.unshift(o[0]),u.unshift(gi)),1!==s[s.length-1]&&(s.push(1),o.push(null)),l.has(t)||l.set(t,{keyframes:{},transition:{}});var m=l.get(t);m.keyframes[n]=o,m.transition[n]=D(D({},r),{},{duration:p,ease:u,times:s},i)}})),l}function Ai(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function xi(e,t){return t[e]||(t[e]=[]),t[e]}function bi(e,t){return e[t]?D(D({},e),e[t]):D({},e)}var _i=function(e){return"number"===typeof e},wi=function(e){return e.every(_i)};function Ei(e,t,n,r){var i=He(e,r),a=i.length;N(Boolean(a),"No valid element provided.");for(var o=[],s=0;s<a;s++){var l=i[s];Ge.has(l)||li(l);var u=Ge.get(l),c=D({},n);"function"===typeof c.delay&&(c.delay=c.delay(s,a)),o.push.apply(o,(0,O.Z)(Nn(u,D(D({},t),{},{transition:c}),{})))}return new je(o)}var Si,Mi=function(e,t,n){var r,i;return i=e,r=Array.isArray(i)&&Array.isArray(i[0])?function(e,t,n){var r=[];return yi(e,t,n).forEach((function(e,t){var n,i=e.keyframes,a=e.transition;n=xn(t)?ui(t,i.default,a.default):Ei(t,i,a),r.push(n)})),new je(r)}(e,t,Si):function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?Ei(e,t,n,Si):ui(e,t,n),Si&&Si.animations.push(r),r},Ci=(0,t.createContext)({}),ki=(0,t.createContext)(null),Ti=(0,t.createContext)({strict:!1});function Ii(e){var n=function(e,t){if(vr(e)){var n=e.initial,r=e.animate;return{initial:!1===n||dr(n)?n:void 0,animate:dr(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(Ci)),r=n.initial,i=n.animate;return(0,t.useMemo)((function(){return{initial:r,animate:i}}),[Bi(r),Bi(i)])}function Bi(e){return Array.isArray(e)?e.join(" "):e}var Ri=(0,t.createContext)({}),Li=(0,t.createContext)({}),Pi=Symbol.for("motionComponentSymbol");function Di(e){var n=e.preloadedFeatures,r=e.createVisualElement,i=e.useRender,a=e.useVisualState,o=e.Component;n&&function(e){for(var t in e)yr[t]=D(D({},yr[t]),e[t])}(n);var s=(0,t.forwardRef)((function(e,s){var l,u=D(D(D({},(0,t.useContext)(S)),e),{},{layoutId:Oi(e)}),c=u.isStatic,h=Ii(e),d=a(e,c);if(!c&&k){h.visualElement=function(e,n,r,i){var a=(0,t.useContext)(Ci).visualElement,o=(0,t.useContext)(Ti),s=(0,t.useContext)(ki),l=(0,t.useContext)(S).reducedMotion,u=(0,t.useRef)();i=i||o.renderer,!u.current&&i&&(u.current=i(e,{visualState:n,parent:a,props:r,presenceContext:s,blockInitialAnimation:!!s&&!1===s.initial,reducedMotionConfig:l}));var c=u.current;(0,t.useInsertionEffect)((function(){c&&c.update(r,s)}));var h=(0,t.useRef)(Boolean(window.HandoffAppearAnimations));return Ne((function(){c&&(c.render(),h.current&&c.animationState&&c.animationState.animateChanges())})),(0,t.useEffect)((function(){c&&(c.updateFeatures(),!h.current&&c.animationState&&c.animationState.animateChanges(),window.HandoffAppearAnimations=void 0,h.current=!1)})),c}(o,d,u,r);var f=(0,t.useContext)(Li),p=(0,t.useContext)(Ti).strict;h.visualElement&&(l=h.visualElement.loadFeatures(u,p,n,f))}return t.createElement(Ci.Provider,{value:h},l&&h.visualElement?t.createElement(l,D({visualElement:h.visualElement},u)):null,i(o,e,function(e,n,r){return(0,t.useCallback)((function(t){t&&e.mount&&e.mount(t),n&&(t?n.mount(t):n.unmount()),r&&("function"===typeof r?r(t):cr(r)&&(r.current=t))}),[n])}(d,h.visualElement,s),d,c,h.visualElement))}));return s[Pi]=o,s}function Oi(e){var n=e.layoutId,r=(0,t.useContext)(Ri).id;return r&&void 0!==n?r+"-"+n:n}function Fi(e){function t(t){return Di(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;var n=new Map;return new Proxy(t,{get:function(e,r){return n.has(r)||n.set(r,t(r)),n.get(r)}})}var Ni=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ui(e){return"string"===typeof e&&!e.includes("-")&&!!(Ni.indexOf(e)>-1||/[A-Z]/.test(e))}var Zi=function(){return{style:{},transform:{},transformOrigin:{},vars:{}}};function zi(e,t,n){for(var r in t)xn(t[r])||Vn(r,n)||(e[r]=t[r])}function Hi(e,n,r){var i={};return zi(i,e.style||{},e),Object.assign(i,function(e,n,r){var i=e.transformTemplate;return(0,t.useMemo)((function(){var e=Zi();return Lr(e,n,{enableHardwareAcceleration:!r},i),Object.assign({},e.vars,e.style)}),[n])}(e,n,r)),e.transformValues?e.transformValues(i):i}function Gi(e,t,n){var r={},i=Hi(e,t,n);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}var Qi=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function Vi(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||Qi.has(e)}var ji,Wi=function(e){return!Vi(e)};try{(ji=require("@emotion/is-prop-valid").default)&&(Wi=function(e){return e.startsWith("on")?!Vi(e):ji(e)})}catch(EQ){}var qi=function(){return D(D({},Zi()),{},{attrs:{}})};function Ji(e,n,r,i){var a=(0,t.useMemo)((function(){var t=qi();return Nr(t,n,{enableHardwareAcceleration:!1},Hr(i),e.transformTemplate),D(D({},t.attrs),{},{style:D({},t.style)})}),[n]);if(e.style){var o={};zi(o,e.style,e),a.style=D(D({},o),a.style)}return a}function Xi(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(n,r,i,a,o){var s=a.latestValues,l=(Ui(n)?Ji:Gi)(r,s,o,n),u=function(e,t,n){var r={};for(var i in e)"values"===i&&"object"===typeof e.values||(Wi(i)||!0===n&&Vi(i)||!t&&!Vi(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(r,"string"===typeof n,e),c=D(D(D({},u),l),{},{ref:i}),h=r.children,d=(0,t.useMemo)((function(){return xn(h)?h.get():h}),[h]);return(0,t.createElement)(n,D(D({},c),{},{children:d}))}}function Yi(e){var t=xn(e)?e.get():e;return En(t)?t.toValue():t}var Ki=["transitionEnd","transition"];var $i=function(e){return function(n,r){var i=(0,t.useContext)(Ci),a=(0,t.useContext)(ki),o=function(){return function(e,t,n,r){var i=e.scrapeMotionValuesFromProps,a=e.createRenderState,o=e.onMount,s={latestValues:ea(t,n,r,i),renderState:a()};return o&&(s.mount=function(e){return o(t,e,s)}),s}(e,n,i,a)};return r?o():M(o)}};function ea(e,t,n,r){var i={},a=r(e,{});for(var o in a)i[o]=Yi(a[o]);var s=e.initial,l=e.animate,u=vr(e),c=mr(e);t&&c&&!u&&!1!==e.inherit&&(void 0===s&&(s=t.initial),void 0===l&&(l=t.animate));var h=!!n&&!1===n.initial,d=(h=h||!1===s)?l:s;d&&"boolean"!==typeof d&&!hr(d)&&(Array.isArray(d)?d:[d]).forEach((function(t){var n=Bn(e,t);if(n){var r=n.transitionEnd,a=(n.transition,We(n,Ki));for(var o in a){var s=a[o];if(Array.isArray(s))s=s[h?s.length-1:0];null!==s&&(i[o]=s)}for(var l in r)i[l]=r[l]}}));return i}var ta={useVisualState:$i({scrapeMotionValuesFromProps:Wn,createRenderState:qi,onMount:function(e,t,n){var r=n.renderState,i=n.latestValues;y.read((function(){try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(e){r.dimensions={x:0,y:0,width:0,height:0}}})),y.render((function(){Nr(r,i,{enableHardwareAcceleration:!1},Hr(t.tagName),e.transformTemplate),zr(t,r)}))}})},na={useVisualState:$i({scrapeMotionValuesFromProps:jn,createRenderState:Zi})};function ra(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n)}}var ia=function(e){return"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary};function aa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}var oa=function(e){return function(t){return ia(t)&&e(t,aa(t))}};function sa(e,t,n,r){return ra(e,t,oa(n),r)}function la(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var ua=la("dragHorizontal"),ca=la("dragVertical");function ha(e){var t=!1;if("y"===e)t=ca();else if("x"===e)t=ua();else{var n=ua(),r=ca();n&&r?t=function(){n(),r()}:(n&&n(),r&&r())}return t}function da(){var e=ha(!0);return!e||(e(),!1)}var fa=function(){function e(t){(0,u.Z)(this,e),this.isMounted=!1,this.node=t}return(0,c.Z)(e,[{key:"update",value:function(){}}]),e}();function pa(e,t){var n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End");return sa(e.current,n,(function(n,i){if("touch"!==n.type&&!da()){var a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&y.update((function(){return a[r](n,i)}))}}),{passive:!e.getProps()[r]})}var va=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"mount",value:function(){this.unmount=ve(pa(this.node,!0),pa(this.node,!1))}},{key:"unmount",value:function(){}}]),n}(fa),ma=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.apply(this,arguments)).isActive=!1,e}return(0,c.Z)(n,[{key:"onFocus",value:function(){var e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}},{key:"onBlur",value:function(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}},{key:"mount",value:function(){var e=this;this.unmount=ve(ra(this.node.current,"focus",(function(){return e.onFocus()})),ra(this.node.current,"blur",(function(){return e.onBlur()})))}},{key:"unmount",value:function(){}}]),n}(fa),ga=function e(t,n){return!!n&&(t===n||e(t,n.parentElement))};function ya(e,t){if(t){var n=new PointerEvent("pointer"+e);t(n,aa(n))}}var Aa=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.apply(this,arguments)).removeStartListeners=v,e.removeEndListeners=v,e.removeAccessibleListeners=v,e.startPointerPress=function(t,n){if(e.removeEndListeners(),!e.isPressing){var r=e.node.getProps(),i=sa(window,"pointerup",(function(t,n){if(e.checkPressEnd()){var r=e.node.getProps(),i=r.onTap,a=r.onTapCancel;y.update((function(){ga(e.node.current,t.target)?i&&i(t,n):a&&a(t,n)}))}}),{passive:!(r.onTap||r.onPointerUp)}),a=sa(window,"pointercancel",(function(t,n){return e.cancelPress(t,n)}),{passive:!(r.onTapCancel||r.onPointerCancel)});e.removeEndListeners=ve(i,a),e.startPress(t,n)}},e.startAccessiblePress=function(){var t=ra(e.node.current,"keydown",(function(t){if("Enter"===t.key&&!e.isPressing){e.removeEndListeners(),e.removeEndListeners=ra(e.node.current,"keyup",(function(t){"Enter"===t.key&&e.checkPressEnd()&&ya("up",(function(t,n){var r=e.node.getProps().onTap;r&&y.update((function(){return r(t,n)}))}))})),ya("down",(function(t,n){e.startPress(t,n)}))}})),n=ra(e.node.current,"blur",(function(){e.isPressing&&ya("cancel",(function(t,n){return e.cancelPress(t,n)}))}));e.removeAccessibleListeners=ve(t,n)},e}return(0,c.Z)(n,[{key:"startPress",value:function(e,t){this.isPressing=!0;var n=this.node.getProps(),r=n.onTapStart;n.whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&y.update((function(){return r(e,t)}))}},{key:"checkPressEnd",value:function(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!da()}},{key:"cancelPress",value:function(e,t){if(this.checkPressEnd()){var n=this.node.getProps().onTapCancel;n&&y.update((function(){return n(e,t)}))}}},{key:"mount",value:function(){var e=this.node.getProps(),t=sa(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=ra(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ve(t,n)}},{key:"unmount",value:function(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}]),n}(fa),xa=["root"],ba=new WeakMap,_a=new WeakMap,wa=function(e){var t=ba.get(e.target);t&&t(e)},Ea=function(e){e.forEach(wa)};function Sa(e,t,n){var r=function(e){var t=e.root,n=We(e,xa),r=t||document;_a.has(r)||_a.set(r,{});var i=_a.get(r),a=JSON.stringify(n);return i[a]||(i[a]=new IntersectionObserver(Ea,D({root:t},n))),i[a]}(t);return ba.set(e,n),r.observe(e),function(){ba.delete(e),r.unobserve(e)}}var Ma={some:0,all:1},Ca=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.apply(this,arguments)).hasEnteredView=!1,e.isInView=!1,e}return(0,c.Z)(n,[{key:"startObserver",value:function(){var e=this;this.unmount();var t=this.node.getProps().viewport,n=void 0===t?{}:t,r=n.root,i=n.margin,a=n.amount,o=void 0===a?"some":a,s=n.once,l={root:r?r.current:void 0,rootMargin:i,threshold:"number"===typeof o?o:Ma[o]};return Sa(this.node.current,l,(function(t){var n=t.isIntersecting;if(e.isInView!==n&&(e.isInView=n,!s||n||!e.hasEnteredView)){n&&(e.hasEnteredView=!0),e.node.animationState&&e.node.animationState.setActive("whileInView",n);var r=e.node.getProps(),i=r.onViewportEnter,a=r.onViewportLeave,o=n?i:a;o&&o(t)}}))}},{key:"mount",value:function(){this.startObserver()}},{key:"update",value:function(){if("undefined"!==typeof IntersectionObserver){var e=this.node,t=e.props,n=e.prevProps,r=["amount","margin","root"].some(function(e){var t=e.viewport,n=void 0===t?{}:t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.viewport,a=void 0===i?{}:i;return function(e){return n[e]!==a[e]}}(t,n));r&&this.startObserver()}}},{key:"unmount",value:function(){}}]),n}(fa);var ka={inView:{Feature:Ca},tap:{Feature:Aa},focus:{Feature:ma},hover:{Feature:va}};function Ta(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Ia(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Rn(e,t,n.custom),i=(r||{}).transition,a=void 0===i?e.getDefaultTransition()||{}:i;n.transitionOverride&&(a=n.transitionOverride);var o=r?function(){return Promise.all(Nn(e,r,n))}:function(){return Promise.resolve()},l=e.variantChildren&&e.variantChildren.size?function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=a,o=i.delayChildren,s=void 0===o?0:o,l=i.staggerChildren,u=i.staggerDirection;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5?arguments[5]:void 0,o=[],s=(e.variantChildren.size-1)*r,l=1===i?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return s-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(Ba).forEach((function(e,r){e.notify("AnimationStart",t),o.push(Ia(e,t,D(D({},a),{},{delay:n+l(r)})).then((function(){return e.notify("AnimationComplete",t)})))})),Promise.all(o)}(e,t,s+r,l,u,n)}:function(){return Promise.resolve()},u=a.when;if(u){var c="beforeChildren"===u?[o,l]:[l,o],h=(0,s.Z)(c,2),d=h[0],f=h[1];return d().then((function(){return f()}))}return Promise.all([o(),l(n.delay)])}function Ba(e,t){return e.sortNodePosition(t)}var Ra=["transition","transitionEnd"],La=(0,O.Z)(fr).reverse(),Pa=fr.length;function Da(e){return function(t){return Promise.all(t.map((function(t){var n=t.animation,r=t.options;return function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){var i=t.map((function(t){return Ia(e,t,r)}));n=Promise.all(i)}else if("string"===typeof t)n=Ia(e,t,r);else{var a="function"===typeof t?Rn(e,t,r.custom):t;n=Promise.all(Nn(e,a,r))}return n.then((function(){return e.notify("AnimationComplete",t)}))}(e,n,r)})))}}function Oa(e){var t=Da(e),n={animate:Fa(!0),whileInView:Fa(),whileHover:Fa(),whileTap:Fa(),whileDrag:Fa(),whileFocus:Fa(),exit:Fa()},r=!0,i=function(t,n){var r=Rn(e,n);if(r){r.transition;var i=r.transitionEnd,a=We(r,Ra);t=D(D(D({},t),a),i)}return t};function a(a,o){for(var s=e.getProps(),l=e.getVariantContext(!0)||{},u=[],c=new Set,h={},d=1/0,f=function(){var t=La[p],f=n[t],v=void 0!==s[t]?s[t]:l[t],m=dr(v),g=t===o?f.isActive:null;!1===g&&(d=p);var y=v===l[t]&&v!==s[t]&&m;if(y&&r&&e.manuallyAnimateOnMount&&(y=!1),f.protectedKeys=D({},h),!f.isActive&&null===g||!v&&!f.prevProp||hr(v)||"boolean"===typeof v)return"continue";var A=function(e,t){if("string"===typeof t)return t!==e;if(Array.isArray(t))return!Ta(t,e);return!1}(f.prevProp,v),x=A||t===o&&f.isActive&&!y&&m||p>d&&m,b=Array.isArray(v)?v:[v],_=b.reduce(i,{});!1===g&&(_={});var w=f.prevResolvedValues,E=void 0===w?{}:w,S=D(D({},E),_),M=function(e){x=!0,c.delete(e),f.needsAnimating[e]=!0};for(var C in S){var k=_[C],T=E[C];h.hasOwnProperty(C)||(k!==T?wn(k)&&wn(T)?!Ta(k,T)||A?M(C):f.protectedKeys[C]=!0:void 0!==k?M(C):c.add(C):void 0!==k&&c.has(C)?M(C):f.protectedKeys[C]=!0)}f.prevProp=v,f.prevResolvedValues=_,f.isActive&&(h=D(D({},h),_)),r&&e.blockInitialAnimation&&(x=!1),x&&!y&&u.push.apply(u,(0,O.Z)(b.map((function(e){return{animation:e,options:D({type:t},a)}}))))},p=0;p<Pa;p++)f();if(c.size){var v={};c.forEach((function(t){var n=e.getBaseTarget(t);void 0!==n&&(v[t]=n)})),u.push({animation:v})}var m=Boolean(u.length);return r&&!1===s.initial&&!e.manuallyAnimateOnMount&&(m=!1),r=!1,m?t(u):Promise.resolve()}return{animateChanges:a,setActive:function(t,r,i){var o;if(n[t].isActive===r)return Promise.resolve();null===(o=e.variantChildren)||void 0===o||o.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;var s=a(i,t);for(var l in n)n[l].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:function(){return n}}}function Fa(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var Na=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),r=t.call(this,e),e.animationState||(e.animationState=Oa(e)),r}return(0,c.Z)(n,[{key:"updateAnimationControlsSubscription",value:function(){var e=this.node.getProps().animate;this.unmount(),hr(e)&&(this.unmount=e.subscribe(this.node))}},{key:"mount",value:function(){this.updateAnimationControlsSubscription()}},{key:"update",value:function(){this.node.getProps().animate!==(this.node.prevProps||{}).animate&&this.updateAnimationControlsSubscription()}},{key:"unmount",value:function(){}}]),n}(fa),Ua=0,Za=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.apply(this,arguments)).id=Ua++,e}return(0,c.Z)(n,[{key:"update",value:function(){var e=this;if(this.node.presenceContext){var t=this.node.presenceContext,n=t.isPresent,r=t.onExitComplete,i=t.custom,a=(this.node.prevPresenceContext||{}).isPresent;if(this.node.animationState&&n!==a){var o=this.node.animationState.setActive("exit",!n,{custom:null!==i&&void 0!==i?i:this.node.getProps().custom});r&&!n&&o.then((function(){return r(e.id)}))}}}},{key:"mount",value:function(){var e=(this.node.presenceContext||{}).register;e&&(this.unmount=e(this.id))}},{key:"unmount",value:function(){}}]),n}(fa),za={animation:{Feature:Na},exit:{Feature:Za}},Ha=function(e,t){return Math.abs(e-t)};var Ga=function(){function e(t,n){var r=this,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).transformPagePoint;if((0,u.Z)(this,e),this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var e=ja(r.lastMoveEventInfo,r.history),t=null!==r.startEvent,n=function(e,t){var n=Ha(e.x,t.x),r=Ha(e.y,t.y);return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))}(e.offset,{x:0,y:0})>=3;if(t||n){var i=e.point,a=x.timestamp;r.history.push(D(D({},i),{},{timestamp:a}));var o=r.handlers,s=o.onStart,l=o.onMove;t||(s&&s(r.lastMoveEvent,e),r.startEvent=r.lastMoveEvent),l&&l(r.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){r.lastMoveEvent=e,r.lastMoveEventInfo=Qa(t,r.transformPagePoint),y.update(r.updatePoint,!0)},this.handlePointerUp=function(e,t){if(r.end(),r.lastMoveEvent&&r.lastMoveEventInfo){var n=r.handlers,i=n.onEnd,a=n.onSessionEnd,o=ja("pointercancel"===e.type?r.lastMoveEventInfo:Qa(t,r.transformPagePoint),r.history);r.startEvent&&i&&i(e,o),a&&a(e,o)}},ia(t)){this.handlers=n,this.transformPagePoint=i;var a=Qa(aa(t),this.transformPagePoint),o=a.point,s=x.timestamp;this.history=[D(D({},o),{},{timestamp:s})];var l=n.onSessionStart;l&&l(t,ja(a,this.history)),this.removeListeners=ve(sa(window,"pointermove",this.handlePointerMove),sa(window,"pointerup",this.handlePointerUp),sa(window,"pointercancel",this.handlePointerUp))}}return(0,c.Z)(e,[{key:"updateHandlers",value:function(e){this.handlers=e}},{key:"end",value:function(){this.removeListeners&&this.removeListeners(),A(this.updatePoint)}}]),e}();function Qa(e,t){return t?{point:t(e.point)}:e}function Va(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ja(e,t){var n=e.point;return{point:n,delta:Va(n,qa(t)),offset:Va(n,Wa(t)),velocity:Ja(t,.1)}}function Wa(e){return e[0]}function qa(e){return e[e.length-1]}function Ja(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,r=null,i=qa(e);n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Ke(t)));)n--;if(!r)return{x:0,y:0};var a=$e(i.timestamp-r.timestamp);if(0===a)return{x:0,y:0};var o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Xa(e){return e.max-e.min}function Ya(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function Ka(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=le(t.min,t.max,e.origin),e.scale=Xa(n)/Xa(t),(Ya(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=le(n.min,n.max,e.origin)-e.originPoint,(Ya(e.translate)||isNaN(e.translate))&&(e.translate=0)}function $a(e,t,n,r){Ka(e.x,t.x,n.x,r?r.originX:void 0),Ka(e.y,t.y,n.y,r?r.originY:void 0)}function eo(e,t,n){e.min=n.min+t.min,e.max=e.min+Xa(t)}function to(e,t,n){e.min=t.min-n.min,e.max=e.min+Xa(t)}function no(e,t,n){to(e.x,t.x,n.x),to(e.y,t.y,n.y)}function ro(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function io(e,t){var n=t.min-e.min,r=t.max-e.max;if(t.max-t.min<e.max-e.min){var i=[r,n];n=i[0],r=i[1]}return{min:n,max:r}}var ao=.35;function oo(e,t,n){return{min:so(e,t),max:so(e,n)}}function so(e,t){return"number"===typeof e?e:e[t]||0}function lo(e){return[e("x"),e("y")]}var uo=new WeakMap,co=function(){function e(t){(0,u.Z)(this,e),this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ur(),this.visualElement=t}return(0,c.Z)(e,[{key:"start",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).snapToCursor,r=void 0!==n&&n,i=this.visualElement.presenceContext;if(!i||!1!==i.isPresent){this.panSession=new Ga(e,{onSessionStart:function(e){t.stopAnimation(),r&&t.snapToCursor(aa(e,"page").point)},onStart:function(e,n){var r=t.getProps(),i=r.drag,a=r.dragPropagation,o=r.onDragStart;if(!i||a||(t.openGlobalLock&&t.openGlobalLock(),t.openGlobalLock=ha(i),t.openGlobalLock)){t.isDragging=!0,t.currentDirection=null,t.resolveConstraints(),t.visualElement.projection&&(t.visualElement.projection.isAnimationBlocked=!0,t.visualElement.projection.target=void 0),lo((function(e){var n=t.getAxisMotionValue(e).get()||0;if(te.test(n)){var r=t.visualElement.projection;if(r&&r.layout){var i=r.layout.layoutBox[e];if(i)n=Xa(i)*(parseFloat(n)/100)}}t.originPoint[e]=n})),o&&y.update((function(){return o(e,n)}),!1,!0);var s=t.visualElement.animationState;s&&s.setActive("whileDrag",!0)}},onMove:function(e,n){var r=t.getProps(),i=r.dragPropagation,a=r.dragDirectionLock,o=r.onDirectionLock,s=r.onDrag;if(i||t.openGlobalLock){var l=n.offset;if(a&&null===t.currentDirection)return t.currentDirection=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(l),void(null!==t.currentDirection&&o&&o(t.currentDirection));t.updateAxis("x",n.point,l),t.updateAxis("y",n.point,l),t.visualElement.render(),s&&s(e,n)}},onSessionEnd:function(e,n){return t.stop(e,n)}},{transformPagePoint:this.visualElement.getTransformPagePoint()})}}},{key:"stop",value:function(e,t){var n=this.isDragging;if(this.cancel(),n){var r=t.velocity;this.startAnimation(r);var i=this.getProps().onDragEnd;i&&y.update((function(){return i(e,t)}))}}},{key:"cancel",value:function(){this.isDragging=!1;var e=this.visualElement,t=e.projection,n=e.animationState;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}},{key:"updateAxis",value:function(e,t,n){var r=this.getProps().drag;if(n&&ho(e,r,this.currentDirection)){var i=this.getAxisMotionValue(e),a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,t,n){var r=t.min,i=t.max;return void 0!==r&&e<r?e=n?le(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?le(i,e,n.max):Math.min(e,i)),e}(a,this.constraints[e],this.elastic[e])),i.set(a)}}},{key:"resolveConstraints",value:function(){var e=this,t=this.getProps(),n=t.dragConstraints,r=t.dragElastic,i=(this.visualElement.projection||{}).layout,a=this.constraints;n&&cr(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!n||!i)&&function(e,t){var n=t.top,r=t.left,i=t.bottom,a=t.right;return{x:ro(e.x,r,a),y:ro(e.y,n,i)}}(i.layoutBox,n),this.elastic=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ao;return!1===e?e=0:!0===e&&(e=ao),{x:oo(e,"left","right"),y:oo(e,"top","bottom")}}(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&lo((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i.layoutBox[t],e.constraints[t]))}))}},{key:"resolveRefConstraints",value:function(){var e=this.getProps(),t=e.dragConstraints,n=e.onMeasureDragConstraints;if(!t||!cr(t))return!1;var r=t.current;N(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");var i=this.visualElement.projection;if(!i||!i.layout)return!1;var a=function(e,t,n){var r=oi(e,n),i=t.scroll;return i&&(ti(r.x,i.offset.x),ti(r.y,i.offset.y)),r}(r,i.root,this.visualElement.getTransformPagePoint()),o=function(e,t){return{x:io(e.x,t.x),y:io(e.y,t.y)}}(i.layout.layoutBox,a);if(n){var s=n(function(e){var t=e.x,n=e.y;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!s,s&&(o=Qr(s))}return o}},{key:"startAnimation",value:function(e){var t=this,n=this.getProps(),r=n.drag,i=n.dragMomentum,a=n.dragElastic,o=n.dragTransition,s=n.dragSnapToOrigin,l=n.onDragTransitionEnd,u=this.constraints||{},c=lo((function(n){if(ho(n,r,t.currentDirection)){var l=u&&u[n]||{};s&&(l={min:0,max:0});var c=a?200:1e6,h=a?40:1e7,d=D(D({type:"inertia",velocity:i?e[n]:0,bounceStiffness:c,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10},o),l);return t.startAxisValueAnimation(n,d)}}));return Promise.all(c).then(l)}},{key:"startAxisValueAnimation",value:function(e,t){var n=this.getAxisMotionValue(e);return n.start(An(e,n,0,t))}},{key:"stopAnimation",value:function(){var e=this;lo((function(t){return e.getAxisMotionValue(t).stop()}))}},{key:"getAxisMotionValue",value:function(e){var t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}},{key:"snapToCursor",value:function(e){var t=this;lo((function(n){if(ho(n,t.getProps().drag,t.currentDirection)){var r=t.visualElement.projection,i=t.getAxisMotionValue(n);if(r&&r.layout){var a=r.layout.layoutBox[n],o=a.min,s=a.max;i.set(e[n]-le(o,s,.5))}}}))}},{key:"scalePositionWithinConstraints",value:function(){var e=this;if(this.visualElement.current){var t=this.getProps(),n=t.drag,r=t.dragConstraints,i=this.visualElement.projection;if(cr(r)&&i&&this.constraints){this.stopAnimation();var a={x:0,y:0};lo((function(t){var n=e.getAxisMotionValue(t);if(n){var r=n.get();a[t]=function(e,t){var n=.5,r=Xa(e),i=Xa(t);return i>r?n=Le(t.min,t.max-r,e.min):r>i&&(n=Le(e.min,e.max-i,t.min)),Q(0,1,n)}({min:r,max:r},e.constraints[t])}}));var o=this.visualElement.getProps().transformTemplate;this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),lo((function(t){if(ho(t,n,null)){var r=e.getAxisMotionValue(t),i=e.constraints[t],o=i.min,s=i.max;r.set(le(o,s,a[t]))}}))}}}},{key:"addListeners",value:function(){var e=this;if(this.visualElement.current){uo.set(this.visualElement,this);var t=sa(this.visualElement.current,"pointerdown",(function(t){var n=e.getProps(),r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&e.start(t)})),n=function(){cr(e.getProps().dragConstraints)&&(e.constraints=e.resolveRefConstraints())},r=this.visualElement.projection,i=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),n();var a=ra(window,"resize",(function(){return e.scalePositionWithinConstraints()})),o=r.addEventListener("didUpdate",(function(t){var n=t.delta,r=t.hasLayoutChanged;e.isDragging&&r&&(lo((function(t){var r=e.getAxisMotionValue(t);r&&(e.originPoint[t]+=n[t].translate,r.set(r.get()+n[t].translate))})),e.visualElement.render())}));return function(){a(),t(),i(),o&&o()}}}},{key:"getProps",value:function(){var e=this.visualElement.getProps(),t=e.drag,n=void 0!==t&&t,r=e.dragDirectionLock,i=void 0!==r&&r,a=e.dragPropagation,o=void 0!==a&&a,s=e.dragConstraints,l=void 0!==s&&s,u=e.dragElastic,c=void 0===u?ao:u,h=e.dragMomentum,d=void 0===h||h;return D(D({},e),{},{drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:l,dragElastic:c,dragMomentum:d})}}]),e}();function ho(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}var fo=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).removeGroupControls=v,r.removeListeners=v,r.controls=new co(e),r}return(0,c.Z)(n,[{key:"mount",value:function(){var e=this.node.getProps().dragControls;e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||v}},{key:"unmount",value:function(){this.removeGroupControls(),this.removeListeners()}}]),n}(fa),po=function(e){return function(t,n){e&&y.update((function(){return e(t,n)}))}},vo=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.apply(this,arguments)).removePointerDownListener=v,e}return(0,c.Z)(n,[{key:"onPointerDown",value:function(e){this.session=new Ga(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}},{key:"createPanHandlers",value:function(){var e=this,t=this.node.getProps(),n=t.onPanSessionStart,r=t.onPanStart,i=t.onPan,a=t.onPanEnd;return{onSessionStart:po(n),onStart:po(r),onMove:i,onEnd:function(t,n){delete e.session,a&&y.update((function(){return a(t,n)}))}}}},{key:"mount",value:function(){var e=this;this.removePointerDownListener=sa(this.node.current,"pointerdown",(function(t){return e.onPointerDown(t)}))}},{key:"update",value:function(){this.session&&this.session.updateHandlers(this.createPanHandlers())}},{key:"unmount",value:function(){this.removePointerDownListener(),this.session&&this.session.end()}}]),n}(fa);var mo={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function go(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var yo={correct:function(e,t){if(!t.target)return e;if("string"===typeof e){if(!ne.test(e))return e;e=parseFloat(e)}var n=go(e,t.target.x),r=go(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},Ao={correct:function(e,t){var n=t.treeScale,r=t.projectionDelta,i=e,a=Ce.parse(e);if(a.length>5)return i;var o=Ce.createTransformer(e),s="number"!==typeof a[0]?1:0,l=r.x.scale*n.x,u=r.y.scale*n.y;a[0+s]/=l,a[1+s]/=u;var c=le(l,u,.5);return"number"===typeof a[2+s]&&(a[2+s]/=c),"number"===typeof a[3+s]&&(a[3+s]/=c),o(a)}},xo=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"componentDidMount",value:function(){var e,t=this,n=this.props,r=n.visualElement,i=n.layoutGroup,a=n.switchLayoutGroup,o=n.layoutId,s=r.projection;e=_o,Object.assign(Qn,e),s&&(i.group&&i.group.add(s),a&&a.register&&o&&a.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",(function(){t.safeToRemove()})),s.setOptions(D(D({},s.options),{},{onExitComplete:function(){return t.safeToRemove()}}))),mo.hasEverUpdated=!0}},{key:"getSnapshotBeforeUpdate",value:function(e){var t=this,n=this.props,r=n.layoutDependency,i=n.visualElement,a=n.drag,o=n.isPresent,s=i.projection;return s?(s.isPresent=o,a||e.layoutDependency!==r||void 0===r?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||y.postRender((function(){var e=s.getStack();e&&e.members.length||t.safeToRemove()}))),null):null}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.visualElement.projection;t&&(t.root.didUpdate(),queueMicrotask((function(){!t.currentAnimation&&t.isLead()&&e.safeToRemove()})))}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.visualElement,n=e.layoutGroup,r=e.switchLayoutGroup,i=t.projection;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}},{key:"safeToRemove",value:function(){var e=this.props.safeToRemove;e&&e()}},{key:"render",value:function(){return null}}]),n}(t.Component);function bo(e){var n=function(){var e=(0,t.useContext)(ki);if(null===e)return[!0,null];var n=e.isPresent,r=e.onExitComplete,i=e.register,a=(0,t.useId)();return(0,t.useEffect)((function(){return i(a)}),[]),!n&&r?[!1,function(){return r&&r(a)}]:[!0]}(),r=(0,s.Z)(n,2),i=r[0],a=r[1],o=(0,t.useContext)(Ri);return t.createElement(xo,D(D({},e),{},{layoutGroup:o,switchLayoutGroup:(0,t.useContext)(Li),isPresent:i,safeToRemove:a}))}var _o={borderRadius:D(D({},yo),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:yo,borderTopRightRadius:yo,borderBottomLeftRadius:yo,borderBottomRightRadius:yo,boxShadow:Ao},wo=["TopLeft","TopRight","BottomLeft","BottomRight"],Eo=wo.length,So=function(e){return"string"===typeof e?parseFloat(e):e},Mo=function(e){return"number"===typeof e||ne.test(e)};function Co(e,t){return void 0!==e[t]?e[t]:e.borderRadius}var ko=Io(0,.5,gt),To=Io(.5,.95,v);function Io(e,t,n){return function(r){return r<e?0:r>t?1:n(Le(e,t,r))}}function Bo(e,t){e.min=t.min,e.max=t.max}function Ro(e,t){Bo(e.x,t.x),Bo(e.y,t.y)}function Lo(e,t,n,r,i){return e=Xr(e-=t,1/n,r),void 0!==i&&(e=Xr(e,1/i,r)),e}function Po(e,t,n,r,i){var a=(0,s.Z)(n,3),o=a[0],l=a[1],u=a[2];!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;if(te.test(t)&&(t=parseFloat(t),t=le(o.min,o.max,t/100)-o.min),"number"===typeof t){var s=le(a.min,a.max,r);e===a&&(s-=t),e.min=Lo(e.min,t,n,s,i),e.max=Lo(e.max,t,n,s,i)}}(e,t[o],t[l],t[u],t.scale,r,i)}var Do=["x","scaleX","originX"],Oo=["y","scaleY","originY"];function Fo(e,t,n,r){Po(e.x,t,Do,n?n.x:void 0,r?r.x:void 0),Po(e.y,t,Oo,n?n.y:void 0,r?r.y:void 0)}function No(e){return 0===e.translate&&1===e.scale}function Uo(e){return No(e.x)&&No(e.y)}function Zo(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function zo(e){return Xa(e.x)/Xa(e.y)}var Ho=function(){function e(){(0,u.Z)(this,e),this.members=[]}return(0,c.Z)(e,[{key:"add",value:function(e){h(this.members,e),e.scheduleRender()}},{key:"remove",value:function(e){if(d(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}}},{key:"relegate",value:function(e){var t,n=this.members.findIndex((function(t){return e===t}));if(0===n)return!1;for(var r=n;r>=0;r--){var i=this.members[r];if(!1!==i.isPresent){t=i;break}}return!!t&&(this.promote(t),!0)}},{key:"promote",value:function(e,t){var n=this.lead;e!==n&&(this.prevLead=n,this.lead=e,e.show(),n&&(n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&n.hide()))}},{key:"exitAnimationComplete",value:function(){this.members.forEach((function(e){var t=e.options,n=e.resumingFrom;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}},{key:"scheduleRender",value:function(){this.members.forEach((function(e){e.instance&&e.scheduleRender(!1)}))}},{key:"removeLeadSnapshot",value:function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}]),e}();function Go(e,t,n){var r="",i=e.x.translate/t.x,a=e.y.translate/t.y;if((i||a)&&(r="translate3d(".concat(i,"px, ").concat(a,"px, 0) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){var o=n.rotate,s=n.rotateX,l=n.rotateY;o&&(r+="rotate(".concat(o,"deg) ")),s&&(r+="rotateX(".concat(s,"deg) ")),l&&(r+="rotateY(".concat(l,"deg) "))}var u=e.x.scale*t.x,c=e.y.scale*t.y;return 1===u&&1===c||(r+="scale(".concat(u,", ").concat(c,")")),r||"none"}var Qo=function(e,t){return e.depth-t.depth},Vo=function(){function e(){(0,u.Z)(this,e),this.children=[],this.isDirty=!1}return(0,c.Z)(e,[{key:"add",value:function(e){h(this.children,e),this.isDirty=!0}},{key:"remove",value:function(e){d(this.children,e),this.isDirty=!0}},{key:"forEach",value:function(e){this.isDirty&&this.children.sort(Qo),this.isDirty=!1,this.children.forEach(e)}}]),e}();var jo=["","X","Y","Z"],Wo=0,qo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Jo(e){var t=e.attachResizeListener,n=e.defaultParent,r=e.measureScroll,i=e.checkIsScrollRoot,a=e.resetTransform;return function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();(0,u.Z)(this,e),this.id=Wo++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=function(){t.isUpdating&&(t.isUpdating=!1,t.clearAllSnapshots())},this.updateProjection=function(){var e;qo.totalNodes=qo.resolvedTargetDeltas=qo.recalculatedProjection=0,t.nodes.forEach(Ko),t.nodes.forEach(as),t.nodes.forEach(os),t.nodes.forEach($o),e=qo,window.MotionDebug&&window.MotionDebug.record(e)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=r,this.root=i?i.root||i:this,this.path=i?[].concat((0,O.Z)(i.path),[i]):[],this.parent=i,this.depth=i?i.depth+1:0;for(var a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new Vo)}return(0,c.Z)(e,[{key:"addEventListener",value:function(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new f),this.eventHandlers.get(e).add(t)}},{key:"notifyListeners",value:function(e){for(var t=this.eventHandlers.get(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t&&t.notify.apply(t,r)}},{key:"hasListeners",value:function(e){return this.eventHandlers.has(e)}},{key:"mount",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(!this.instance){this.isSVG=Un(e),this.instance=e;var i=this.options,a=i.layoutId,o=i.layout,s=i.visualElement;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),r&&(o||a)&&(this.isLayoutDirty=!0),t){var l,u=function(){return n.root.updateBlockedByResize=!1};t(e,(function(){n.root.updateBlockedByResize=!0,l&&l(),l=function(e,t){var n=performance.now(),r=function r(i){var a=i.timestamp-n;a>=t&&(A(r),e(a-t))};return y.read(r,!0),function(){return A(r)}}(u,250),mo.hasAnimatedSinceResize&&(mo.hasAnimatedSinceResize=!1,n.nodes.forEach(is))}))}a&&this.root.registerSharedNode(a,this),!1!==this.options.animate&&s&&(a||o)&&this.addEventListener("didUpdate",(function(e){var t=e.delta,r=e.hasLayoutChanged,i=e.hasRelativeTargetChanged,a=e.layout;if(n.isTreeAnimationBlocked())return n.target=void 0,void(n.relativeTarget=void 0);var o=n.options.transition||s.getDefaultTransition()||ds,l=s.getProps(),u=l.onLayoutAnimationStart,c=l.onLayoutAnimationComplete,h=!n.targetLayout||!Zo(n.targetLayout,a)||i,d=!r&&i;if(n.options.layoutRoot||n.resumeFrom&&n.resumeFrom.instance||d||r&&(h||!n.currentAnimation)){n.resumeFrom&&(n.resumingFrom=n.resumeFrom,n.resumingFrom.resumingFrom=void 0),n.setAnimationOrigin(t,d);var f=D(D({},yn(o,"layout")),{},{onPlay:u,onComplete:c});(s.shouldReduceMotion||n.options.layoutRoot)&&(f.delay=0,f.type=!1),n.startAnimation(f)}else r||is(n),n.isLead()&&n.options.onExitComplete&&n.options.onExitComplete();n.targetLayout=a}))}}},{key:"unmount",value:function(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);var e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,A(this.updateProjection)}},{key:"blockUpdate",value:function(){this.updateManuallyBlocked=!0}},{key:"unblockUpdate",value:function(){this.updateManuallyBlocked=!1}},{key:"isUpdateBlocked",value:function(){return this.updateManuallyBlocked||this.updateBlockedByResize}},{key:"isTreeAnimationBlocked",value:function(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}},{key:"startUpdate",value:function(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ss),this.animationId++)}},{key:"getTransformTemplate",value:function(){var e=this.options.visualElement;return e&&e.getProps().transformTemplate}},{key:"willUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())this.options.onExitComplete&&this.options.onExitComplete();else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var t=0;t<this.path.length;t++){var n=this.path[t];n.shouldResetTransform=!0,n.updateScroll("snapshot"),n.options.layoutRoot&&n.willUpdate(!1)}var r=this.options,i=r.layoutId,a=r.layout;if(void 0!==i||a){var o=this.getTransformTemplate();this.prevTransformTemplateValue=o?o(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}}}},{key:"update",value:function(){if(this.updateScheduled=!1,this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(ts);this.isUpdating||this.nodes.forEach(ns),this.isUpdating=!1,this.nodes.forEach(rs),this.nodes.forEach(Xo),this.nodes.forEach(Yo),this.clearAllSnapshots();var e=performance.now();x.delta=Q(0,1e3/60,e-x.timestamp),x.timestamp=e,x.isProcessing=!0,b.update.process(x),b.preRender.process(x),b.render.process(x),x.isProcessing=!1}},{key:"didUpdate",value:function(){var e=this;this.updateScheduled||(this.updateScheduled=!0,queueMicrotask((function(){return e.update()})))}},{key:"clearAllSnapshots",value:function(){this.nodes.forEach(es),this.sharedNodes.forEach(ls)}},{key:"scheduleUpdateProjection",value:function(){y.preRender(this.updateProjection,!1,!0)}},{key:"scheduleCheckAfterUnmount",value:function(){var e=this;y.postRender((function(){e.isLayoutDirty?e.root.didUpdate():e.root.checkUpdateFailed()}))}},{key:"updateSnapshot",value:function(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}},{key:"updateLayout",value:function(){if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var e=0;e<this.path.length;e++){this.path[e].updateScroll()}var t=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ur(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);var n=this.options.visualElement;n&&n.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}}},{key:"updateScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:i(this.instance),offset:r(this.instance)})}},{key:"resetTransform",value:function(){if(a){var e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!Uo(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&(t||Wr(this.latestValues)||i)&&(a(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}}},{key:"measure",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.measurePageBox(),r=this.removeElementScroll(n);return t&&(r=this.removeTransform(r)),vs((e=r).x),vs(e.y),{animationId:this.root.animationId,measuredBox:n,layoutBox:r,latestValues:{},source:this.id}}},{key:"measurePageBox",value:function(){var e=this.options.visualElement;if(!e)return ur();var t=e.measureViewportBox(),n=this.root.scroll;return n&&(ti(t.x,n.offset.x),ti(t.y,n.offset.y)),t}},{key:"removeElementScroll",value:function(e){var t=ur();Ro(t,e);for(var n=0;n<this.path.length;n++){var r=this.path[n],i=r.scroll,a=r.options;if(r!==this.root&&i&&a.layoutScroll){if(i.isRoot){Ro(t,e);var o=this.root.scroll;o&&(ti(t.x,-o.offset.x),ti(t.y,-o.offset.y))}ti(t.x,i.offset.x),ti(t.y,i.offset.y)}}return t}},{key:"applyTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=ur();Ro(n,e);for(var r=0;r<this.path.length;r++){var i=this.path[r];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ai(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),Wr(i.latestValues)&&ai(n,i.latestValues)}return Wr(this.latestValues)&&ai(n,this.latestValues),n}},{key:"removeTransform",value:function(e){var t=ur();Ro(t,e);for(var n=0;n<this.path.length;n++){var r=this.path[n];if(r.instance&&Wr(r.latestValues)){jr(r.latestValues)&&r.updateSnapshot();var i=ur();Ro(i,r.measurePageBox()),Fo(t,r.latestValues,r.snapshot?r.snapshot.layoutBox:void 0,i)}}return Wr(this.latestValues)&&Fo(t,this.latestValues),t}},{key:"setTargetDelta",value:function(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}},{key:"setOptions",value:function(e){this.options=D(D(D({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}},{key:"clearMeasurements",value:function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}},{key:"forceRelativeParentToResolveTarget",value:function(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==x.timestamp&&this.relativeParent.resolveTargetDelta(!0)}},{key:"resolveTargetDelta",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);var r=Boolean(this.resumingFrom)||this!==n;if(!!(t||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty)||this.attemptToResolveRelativeTarget)){var i=this.options,a=i.layout,o=i.layoutId;if(this.layout&&(a||o)){if(this.resolvedRelativeTargetAt=x.timestamp,!this.targetDelta&&!this.relativeTarget){var s=this.getClosestProjectingParent();s&&s.layout&&1!==this.animationProgress?(this.relativeParent=s,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ur(),this.relativeTargetOrigin=ur(),no(this.relativeTargetOrigin,this.layout.layoutBox,s.layout.layoutBox),Ro(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if(this.target||(this.target=ur(),this.targetWithTransforms=ur()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),function(e,t,n){eo(e.x,t.x,n.x),eo(e.y,t.y,n.y)}(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Ro(this.target,this.layout.layoutBox),$r(this.target,this.targetDelta)):Ro(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;var l=this.getClosestProjectingParent();l&&Boolean(l.resumingFrom)===Boolean(this.resumingFrom)&&!l.options.layoutScroll&&l.target&&1!==this.animationProgress?(this.relativeParent=l,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ur(),this.relativeTargetOrigin=ur(),no(this.relativeTargetOrigin,this.target,l.target),Ro(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}qo.resolvedTargetDeltas++}}}}},{key:"getClosestProjectingParent",value:function(){if(this.parent&&!jr(this.parent.latestValues)&&!qr(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}},{key:"isProjecting",value:function(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}},{key:"calcProjection",value:function(){var e,t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t,r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===x.timestamp&&(r=!1),!r){var i=this.options,a=i.layout,o=i.layoutId;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(a||o)){Ro(this.layoutCorrected,this.layout.layoutBox);var s=this.treeScale.x,l=this.treeScale.y;!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=n.length;if(i){var a,o;t.x=t.y=1;for(var s=0;s<i;s++){o=(a=n[s]).projectionDelta;var l=a.instance;l&&l.style&&"contents"===l.style.display||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&ai(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,$r(e,o)),r&&Wr(a.latestValues)&&ai(e,a.latestValues))}t.x=ei(t.x),t.y=ei(t.y)}}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);var u=t.target;if(u){this.projectionDelta||(this.projectionDelta=lr(),this.projectionDeltaWithTransform=lr());var c=this.projectionTransform;$a(this.projectionDelta,this.layoutCorrected,u,this.latestValues),this.projectionTransform=Go(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===s&&this.treeScale.y===l||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",u)),qo.recalculatedProjection++}else this.projectionTransform&&(this.projectionDelta=lr(),this.projectionTransform="none",this.scheduleRender())}}}},{key:"hide",value:function(){this.isVisible=!1}},{key:"show",value:function(){this.isVisible=!0}},{key:"scheduleRender",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){var t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}},{key:"setAnimationOrigin",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.snapshot,i=r?r.latestValues:{},a=D({},this.latestValues),o=lr();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!n;var s,l=ur(),u=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),c=this.getStack(),h=!c||c.members.length<=1,d=Boolean(u&&!h&&!0===this.options.crossfade&&!this.path.some(hs));this.animationProgress=0,this.mixTargetDelta=function(n){var r=n/1e3;us(o.x,e.x,r),us(o.y,e.y,r),t.setTargetDelta(o),t.relativeTarget&&t.relativeTargetOrigin&&t.layout&&t.relativeParent&&t.relativeParent.layout&&(no(l,t.layout.layoutBox,t.relativeParent.layout.layoutBox),function(e,t,n,r){cs(e.x,t.x,n.x,r),cs(e.y,t.y,n.y,r)}(t.relativeTarget,t.relativeTargetOrigin,l,r),s&&function(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}(t.relativeTarget,s)&&(t.isProjectionDirty=!1),s||(s=ur()),Ro(s,t.relativeTarget)),u&&(t.animationValues=a,function(e,t,n,r,i,a){i?(e.opacity=le(0,void 0!==n.opacity?n.opacity:1,ko(r)),e.opacityExit=le(void 0!==t.opacity?t.opacity:1,0,To(r))):a&&(e.opacity=le(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(var o=0;o<Eo;o++){var s="border".concat(wo[o],"Radius"),l=Co(t,s),u=Co(n,s);void 0===l&&void 0===u||(l||(l=0),u||(u=0),0===l||0===u||Mo(l)===Mo(u)?(e[s]=Math.max(le(So(l),So(u),r),0),(te.test(u)||te.test(l))&&(e[s]+="%")):e[s]=u)}(t.rotate||n.rotate)&&(e.rotate=le(t.rotate||0,n.rotate||0,r))}(a,i,t.latestValues,r,d,h)),t.root.scheduleUpdateProjection(),t.scheduleRender(),t.animationProgress=r},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}},{key:"startAnimation",value:function(e){var t=this;this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(A(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=y.update((function(){mo.hasAnimatedSinceResize=!0,t.currentAnimation=ui(0,1e3,D(D({},e),{},{onUpdate:function(n){t.mixTargetDelta(n),e.onUpdate&&e.onUpdate(n)},onComplete:function(){e.onComplete&&e.onComplete(),t.completeAnimation()}})),t.resumingFrom&&(t.resumingFrom.currentAnimation=t.currentAnimation),t.pendingAnimation=void 0}))}},{key:"completeAnimation",value:function(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);var e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}},{key:"finishAnimation",value:function(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}},{key:"applyTransformsToTarget",value:function(){var e=this.getLead(),t=e.targetWithTransforms,n=e.target,r=e.layout,i=e.latestValues;if(t&&n&&r){if(this!==e&&this.layout&&r&&ms(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||ur();var a=Xa(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+a;var o=Xa(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+o}Ro(t,n),ai(t,i),$a(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}},{key:"registerSharedNode",value:function(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Ho),this.sharedNodes.get(e).add(t);var n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}},{key:"isLead",value:function(){var e=this.getStack();return!e||e.lead===this}},{key:"getLead",value:function(){var e;return this.options.layoutId&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}},{key:"getPrevLead",value:function(){var e;return this.options.layoutId?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}},{key:"getStack",value:function(){var e=this.options.layoutId;if(e)return this.root.sharedNodes.get(e)}},{key:"promote",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needsReset,n=e.transition,r=e.preserveFollowOpacity,i=this.getStack();i&&i.promote(this,r),t&&(this.projectionDelta=void 0,this.needsReset=!0),n&&this.setOptions({transition:n})}},{key:"relegate",value:function(){var e=this.getStack();return!!e&&e.relegate(this)}},{key:"resetRotation",value:function(){var e=this.options.visualElement;if(e){var t=!1,n=e.latestValues;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),t){for(var r={},i=0;i<jo.length;i++){var a="rotate"+jo[i];n[a]&&(r[a]=n[a],e.setStaticValue(a,0))}for(var o in e.render(),r)e.setStaticValue(o,r[o]);e.scheduleRender()}}}},{key:"getProjectionStyles",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={};if(!this.instance||this.isSVG)return r;if(!this.isVisible)return{visibility:"hidden"};r.visibility="";var i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=Yi(n.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;var a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){var o={};return this.options.layoutId&&(o.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,o.pointerEvents=Yi(n.pointerEvents)||""),this.hasProjected&&!Wr(this.latestValues)&&(o.transform=i?i({},""):"none",this.hasProjected=!1),o}var s=a.animationValues||a.latestValues;this.applyTransformsToTarget(),r.transform=Go(this.projectionDeltaWithTransform,this.treeScale,s),i&&(r.transform=i(s,r.transform));var l=this.projectionDelta,u=l.x,c=l.y;for(var h in r.transformOrigin="".concat(100*u.origin,"% ").concat(100*c.origin,"% 0"),a.animationValues?r.opacity=a===this?null!==(t=null!==(e=s.opacity)&&void 0!==e?e:this.latestValues.opacity)&&void 0!==t?t:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:r.opacity=a===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0,Qn)if(void 0!==s[h]){var d=Qn[h],f=d.correct,p=d.applyTo,v="none"===r.transform?s[h]:f(s[h],a);if(p)for(var m=p.length,g=0;g<m;g++)r[p[g]]=v;else r[h]=v}return this.options.layoutId&&(r.pointerEvents=a===this?Yi(n.pointerEvents)||"":"none"),r}},{key:"clearSnapshot",value:function(){this.resumeFrom=this.snapshot=void 0}},{key:"resetTree",value:function(){this.root.nodes.forEach((function(e){var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(ts),this.root.sharedNodes.clear()}}]),e}()}function Xo(e){e.updateLayout()}function Yo(e){var t,n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){var r=e.layout,i=r.layoutBox,a=r.measuredBox,o=e.options.animationType,s=n.source!==e.layout.source;"size"===o?lo((function(e){var t=s?n.measuredBox[e]:n.layoutBox[e],r=Xa(t);t.min=i[e].min,t.max=t.min+r})):ms(o,n.layoutBox,i)&&lo((function(t){var r=s?n.measuredBox[t]:n.layoutBox[t],a=Xa(i[t]);r.max=r.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[t].max=e.relativeTarget[t].min+a)}));var l=lr();$a(l,i,n.layoutBox);var u=lr();s?$a(u,e.applyTransform(a,!0),n.measuredBox):$a(u,i,n.layoutBox);var c=!Uo(l),h=!1;if(!e.resumeFrom){var d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){var f=d.snapshot,p=d.layout;if(f&&p){var v=ur();no(v,n.layoutBox,f.layoutBox);var m=ur();no(m,i,p.layoutBox),Zo(v,m)||(h=!0),d.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=v,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:u,layoutDelta:l,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(e.isLead()){var g=e.options.onExitComplete;g&&g()}e.options.transition=void 0}function Ko(e){qo.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function $o(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function es(e){e.clearSnapshot()}function ts(e){e.clearMeasurements()}function ns(e){e.isLayoutDirty=!1}function rs(e){var t=e.options.visualElement;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function is(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function as(e){e.resolveTargetDelta()}function os(e){e.calcProjection()}function ss(e){e.resetRotation()}function ls(e){e.removeLeadSnapshot()}function us(e,t,n){e.translate=le(t.translate,0,n),e.scale=le(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function cs(e,t,n,r){e.min=le(t.min,n.min,r),e.max=le(t.max,n.max,r)}function hs(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}var ds={duration:.45,ease:[.4,0,.1,1]},fs=function(e){return"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(e)},ps=fs("applewebkit/")&&!fs("chrome/")?Math.round:v;function vs(e){e.min=ps(e.min),e.max=ps(e.max)}function ms(e,t,n){return"position"===e||"preserve-aspect"===e&&!Ya(zo(t),zo(n),.2)}var gs=Jo({attachResizeListener:function(e,t){return ra(e,"resize",t)},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}},checkIsScrollRoot:function(){return!0}}),ys={current:void 0},As=Jo({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!ys.current){var e=new gs({});e.mount(window),e.setOptions({layoutScroll:!0}),ys.current=e}return ys.current},resetTransform:function(e,t){e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:function(e){return Boolean("fixed"===window.getComputedStyle(e).position)}}),xs={pan:{Feature:vo},drag:{Feature:fo,ProjectionNode:As,MeasureLayout:bo}},bs=function(e,t){return Ui(e)?new Gr(t,{enableHardwareAcceleration:!1}):new si(t,{enableHardwareAcceleration:!0})},_s={layout:{ProjectionNode:As,MeasureLayout:bo}},ws=D(D(D(D({},za),ka),xs),_s),Es=Fi((function(e,t){return function(e,t,n,r){var i=t.forwardMotionProps,a=void 0!==i&&i;return D(D({},Ui(e)?ta:na),{},{preloadedFeatures:n,useRender:Xi(a),createVisualElement:r,Component:e})}(e,t,ws,bs)}));function Ss(){var e=(0,t.useRef)(!1);return Ne((function(){return e.current=!0,function(){e.current=!1}}),[]),e}var Ms=n(7762),Cs=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"getSnapshotBeforeUpdate",value:function(e){var t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){var n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft}return null}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return this.props.children}}]),n}(t.Component);function ks(e){var n=e.children,r=e.isPresent,i=(0,t.useId)(),a=(0,t.useRef)(null),o=(0,t.useRef)({width:0,height:0,top:0,left:0});return(0,t.useInsertionEffect)((function(){var e=o.current,t=e.width,n=e.height,s=e.top,l=e.left;if(!r&&a.current&&t&&n){a.current.dataset.motionPopId=i;var u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(t,"px !important;\n            height: ").concat(n,"px !important;\n            top: ").concat(s,"px !important;\n            left: ").concat(l,"px !important;\n          }\n        ")),function(){document.head.removeChild(u)}}}),[r]),t.createElement(Cs,{isPresent:r,childRef:a,sizeRef:o},t.cloneElement(n,{ref:a}))}var Ts=function(e){var n=e.children,r=e.initial,i=e.isPresent,a=e.onExitComplete,o=e.custom,s=e.presenceAffectsLayout,l=e.mode,u=M(Is),c=(0,t.useId)(),h=(0,t.useMemo)((function(){return{id:c,initial:r,isPresent:i,custom:o,onExitComplete:function(e){u.set(e,!0);var t,n=(0,Ms.Z)(u.values());try{for(n.s();!(t=n.n()).done;){if(!t.value)return}}catch(r){n.e(r)}finally{n.f()}a&&a()},register:function(e){return u.set(e,!1),function(){return u.delete(e)}}}}),s?void 0:[i]);return(0,t.useMemo)((function(){u.forEach((function(e,t){return u.set(t,!1)}))}),[i]),t.useEffect((function(){!i&&!u.size&&a&&a()}),[i]),"popLayout"===l&&(n=t.createElement(ks,{isPresent:i},n)),t.createElement(ki.Provider,{value:h},n)};function Is(){return new Map}var Bs=function(e){return e.key||""};var Rs=function(e){var n=e.children,r=e.custom,i=e.initial,a=void 0===i||i,o=e.onExitComplete,l=e.exitBeforeEnter,u=e.presenceAffectsLayout,c=void 0===u||u,h=e.mode,d=void 0===h?"sync":h;N(!l,"Replace exitBeforeEnter with mode='wait'");var f,p=(0,t.useContext)(Ri).forceRender||function(){var e=Ss(),n=(0,t.useState)(0),r=(0,s.Z)(n,2),i=r[0],a=r[1],o=(0,t.useCallback)((function(){e.current&&a(i+1)}),[i]);return[(0,t.useCallback)((function(){return y.postRender(o)}),[o]),i]}()[0],v=Ss(),m=function(e){var n=[];return t.Children.forEach(e,(function(e){(0,t.isValidElement)(e)&&n.push(e)})),n}(n),g=m,A=(0,t.useRef)(new Map).current,x=(0,t.useRef)(g),b=(0,t.useRef)(new Map).current,_=(0,t.useRef)(!0);if(Ne((function(){_.current=!1,function(e,t){e.forEach((function(e){var n=Bs(e);t.set(n,e)}))}(m,b),x.current=g})),f=function(){_.current=!0,b.clear(),A.clear()},(0,t.useEffect)((function(){return function(){return f()}}),[]),_.current)return t.createElement(t.Fragment,null,g.map((function(e){return t.createElement(Ts,{key:Bs(e),isPresent:!0,initial:!!a&&void 0,presenceAffectsLayout:c,mode:d},e)})));g=(0,O.Z)(g);for(var w=x.current.map(Bs),E=m.map(Bs),S=w.length,M=0;M<S;M++){var C=w[M];-1!==E.indexOf(C)||A.has(C)||A.set(C,void 0)}return"wait"===d&&A.size&&(g=[]),A.forEach((function(e,n){if(-1===E.indexOf(n)){var i=b.get(n);if(i){var a=w.indexOf(n),s=e;if(!s){s=t.createElement(Ts,{key:Bs(i),isPresent:!1,onExitComplete:function(){b.delete(n),A.delete(n);var e=x.current.findIndex((function(e){return e.key===n}));if(x.current.splice(e,1),!A.size){if(x.current=m,!1===v.current)return;p(),o&&o()}},custom:r,presenceAffectsLayout:c,mode:d},i),A.set(n,s)}g.splice(a,0,s)}}})),g=g.map((function(e){var n=e.key;return A.has(n)?e:t.createElement(Ts,{key:Bs(e),isPresent:!0,presenceAffectsLayout:c,mode:d},e)})),t.createElement(t.Fragment,null,A.size?g:g.map((function(e){return(0,t.cloneElement)(e)})))},Ls="undefined"!==typeof window?t.useLayoutEffect:function(){};new Map;function Ps(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=0,n=t;e<n.length;e++){var r=n[e];"function"===typeof r&&r.apply(void 0,arguments)}}}new Set(["id"]),new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]);var Ds=new Map,Os=new Set;function Fs(){if("undefined"!==typeof window){var e=function e(t){var n=Ds.get(t.target);if(n&&(n.delete(t.propertyName),0===n.size&&(t.target.removeEventListener("transitioncancel",e),Ds.delete(t.target)),0===Ds.size)){var r,i=(0,Ms.Z)(Os);try{for(i.s();!(r=i.n()).done;){(0,r.value)()}}catch(a){i.e(a)}finally{i.f()}Os.clear()}};document.body.addEventListener("transitionrun",(function(t){var n=Ds.get(t.target);n||(n=new Set,Ds.set(t.target,n),t.target.addEventListener("transitioncancel",e)),n.add(t.propertyName)})),document.body.addEventListener("transitionend",e)}}"undefined"!==typeof document&&("loading"!==document.readyState?Fs():document.addEventListener("DOMContentLoaded",Fs));function Ns(e){for(Us(e)&&(e=e.parentElement);e&&!Us(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}function Us(e){var t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}"undefined"!==typeof window&&window.visualViewport;new Map;function Zs(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function zs(){return Zs(/^Mac/i)}function Hs(){return Zs(/^iPhone/i)||Zs(/^iPad/i)||zs()&&navigator.maxTouchPoints>1}function Gs(){return Gs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gs.apply(this,arguments)}function Qs(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Vs="calc(100% - env(safe-area-inset-top) - 34px)",js="undefined"===typeof window,Ws={ease:"easeOut",duration:.2},qs={ease:"linear",duration:.01};function Js(e,t){for(var n=e[0],r=Math.abs(e[0]-t),i=1;i<e.length;i++){var a=Math.abs(e[i]-t);a<r&&(n=e[i],r=a)}return n}function Xs(e){var t=document.querySelector("body"),n=document.getElementById(e);n&&(n.style.removeProperty("border-top-right-radius"),n.style.removeProperty("border-top-left-radius"),n.style.removeProperty("transform"),n.addEventListener("transitionend",(function e(){n.style.removeProperty("overflow"),n.style.removeProperty("will-change"),n.style.removeProperty("transition"),t.style.removeProperty("background-color"),n.removeEventListener("transitionend",e)})))}function Ys(e){var t=e.snapTo,n=e.sheetHeight;return t<0&&console.warn("Snap point is out of bounds. Sheet height is "+n+" but snap point is "+(n+Math.abs(t))+"."),Math.max(Math.round(t),0)}var Ks=js?t.useEffect:t.useLayoutEffect;function $s(e,n){var r=el(e);(0,t.useEffect)((function(){n&&!r&&e?function(e){var t=document.querySelector("body"),n=document.querySelector("#"+e);if(n){var r=window.innerHeight,i=(r-24)/r;t.style.backgroundColor="#000",n.style.overflow="hidden",n.style.willChange="transform",n.style.transition="transform 200ms ease-in-out, border-radius 200ms linear",n.style.transform="translateY(calc(env(safe-area-inset-top) + 12px)) scale("+i+")",n.style.borderTopRightRadius="10px",n.style.borderTopLeftRadius="10px"}}(n):n&&!e&&r&&Xs(n)}),[e,r]),(0,t.useEffect)((function(){return function(){n&&e&&Xs(n)}}),[e])}function el(e){var n=(0,t.useRef)();return(0,t.useEffect)((function(){n.current=e})),n.current}function tl(e){var n=(0,t.useRef)();return Ks((function(){n.current=e})),(0,t.useCallback)((function(){for(var e=n.current,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return null==e?void 0:e.apply(void 0,r)}),[])}var nl=(0,t.createContext)(void 0),rl=function(){var e=(0,t.useContext)(nl);if(!e)throw Error("Sheet context error");return e},il=(0,t.createContext)(void 0);function al(e){var n=e.children,r=rl(),i=(0,t.useState)(!!r.disableDrag),a=i[0],o=i[1];return(0,t.createElement)(il.Provider,{value:{disableDrag:a,setDragEnabled:function(){r.disableDrag||o(!1)},setDragDisabled:function(){a||o(!0)}}},n)}var ol,sl=function(){var e=(0,t.useContext)(il);if(!e)throw Error("Sheet scroller context error");return e},ll="undefined"!==typeof window&&window.visualViewport,ul=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]),cl=0;function hl(e){void 0===e&&(e={});var t=e.isDisabled;Ls((function(){if(!t)return 1===++cl&&(ol=Hs()?function(){var e,t=0,n=function(n){(e=Ns(n.target))===document.documentElement&&e===document.body||(t=n.changedTouches[0].pageY)},r=function(n){if(e!==document.documentElement&&e!==document.body){var r=n.changedTouches[0].pageY,i=e.scrollTop,a=e.scrollHeight-e.clientHeight;0!==a&&((i<=0&&r>t||i>=a&&r<t)&&n.preventDefault(),t=r)}else n.preventDefault()},i=function(e){var t=e.target;vl(t)&&t!==document.activeElement&&(e.preventDefault(),t.style.transform="translateY(-2000px)",t.focus(),requestAnimationFrame((function(){t.style.transform=""})))},a=function(e){var t=e.target;vl(t)&&(t.style.transform="translateY(-2000px)",requestAnimationFrame((function(){t.style.transform="",ll&&(ll.height<window.innerHeight?requestAnimationFrame((function(){pl(t)})):ll.addEventListener("resize",(function(){return pl(t)}),{once:!0}))})))},o=function(){window.scrollTo(0,0)},s=window.pageXOffset,l=window.pageYOffset,u=Ps(dl(document.documentElement,"paddingRight",window.innerWidth-document.documentElement.clientWidth+"px"),dl(document.documentElement,"overflow","hidden"),dl(document.body,"marginTop","-"+l+"px"));window.scrollTo(0,0);var c=Ps(fl(document,"touchstart",n,{passive:!1,capture:!0}),fl(document,"touchmove",r,{passive:!1,capture:!0}),fl(document,"touchend",i,{passive:!1,capture:!0}),fl(document,"focus",a,!0),fl(window,"scroll",o));return function(){u(),c(),window.scrollTo(s,l)}}():Ps(dl(document.documentElement,"paddingRight",window.innerWidth-document.documentElement.clientWidth+"px"),dl(document.documentElement,"overflow","hidden"))),function(){0===--cl&&ol()}}),[t])}function dl(e,t,n){var r=e.style[t];return e.style[t]=n,function(){e.style[t]=r}}function fl(e,t,n,r){return e.addEventListener(t,n,r),function(){e.removeEventListener(t,n,r)}}function pl(e){for(var t=document.scrollingElement||document.documentElement;e&&e!==t;){var n=Ns(e);if(n!==document.documentElement&&n!==document.body&&n!==e){var r=n.getBoundingClientRect().top,i=e.getBoundingClientRect().top;i>r+e.clientHeight&&(n.scrollTop+=i-r)}e=n.parentElement}}function vl(e){return e instanceof HTMLInputElement&&!ul.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}var ml={wrapper:{position:"fixed",top:0,bottom:0,left:0,right:0,overflow:"hidden",pointerEvents:"none"},backdrop:{zIndex:1,position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.2)",touchAction:"none",border:"none"},container:{zIndex:2,position:"absolute",left:0,bottom:0,width:"100%",backgroundColor:"#fff",borderTopRightRadius:"8px",borderTopLeftRadius:"8px",boxShadow:"0px -2px 16px rgba(0, 0, 0, 0.3)",display:"flex",flexDirection:"column",pointerEvents:"auto"},headerWrapper:{width:"100%"},header:{height:"40px",width:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},indicator:{width:"18px",height:"4px",borderRadius:"99px",backgroundColor:"#ddd"},content:{flexGrow:1,display:"flex",flexDirection:"column",minHeight:"0px",position:"relative"},scroller:{height:"100%",overflowY:"auto"}},gl=(0,t.forwardRef)((function(e,n){var r=e.onOpenStart,i=e.onOpenEnd,a=e.onClose,o=e.onCloseStart,s=e.onCloseEnd,u=e.onSnap,c=e.children,h=e.isOpen,d=e.snapPoints,f=e.rootId,p=e.mountPoint,v=e.style,m=e.detent,g=void 0===m?"full-height":m,y=e.initialSnap,A=void 0===y?0:y,x=e.disableDrag,b=void 0!==x&&x,_=e.prefersReducedMotion,w=void 0!==_&&_,E=e.tweenConfig,S=void 0===E?Ws:E,M=Qs(e,["onOpenStart","onOpenEnd","onClose","onCloseStart","onCloseEnd","onSnap","children","isOpen","snapPoints","rootId","mountPoint","style","detent","initialSnap","disableDrag","prefersReducedMotion","tweenConfig"]),k=(0,t.useRef)(null),T=C(0),I=function(){var e=(0,t.useState)(0),n=e[0],r=e[1];return Ks((function(){var e=function(){return r(window.innerHeight)};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}(),B=R(),L=Boolean(w||B),P=Gs({type:"tween"},L?qs:S),D=C(0),O=Ze(D,(function(e){return e>=I?-1:9999999})),F=Ze(D,(function(e){return e>=I?"hidden":"visible"})),N=(0,t.useRef)({onOpenStart:r,onOpenEnd:i,onCloseStart:o,onCloseEnd:s});Ks((function(){N.current={onOpenStart:r,onOpenEnd:i,onCloseStart:o,onCloseEnd:s}})),d&&(d=d.map((function(e){return e>0&&e<=1?Math.round(e*I):e<0?I+e:e})),console.assert(function(e){for(var t=0;t<e.length;t++)if(e[t+1]>e[t])return!1;return!0}(d)||0===I,"Snap points need to be in descending order got: ["+d+"]"));var U=tl((function(e,t){var n=t.delta,r=D.getVelocity();r>0&&T.set(10),r<0&&T.set(-10),D.set(Math.max(D.get()+n.y,0))})),Z=tl((function(e,t){if(t.velocity.y>500)a();else{var n=k.current.getBoundingClientRect().height,r=D.get(),i=0;if(d){var o=d.map((function(e){return n-Math.min(e,n)}));"content-height"!==g||o.includes(0)||o.unshift(0),i=Js(o,r)}else r/n>.6&&(i=n);if(i=Ys({snapTo:i,sheetHeight:n}),Mi(D,i,P),d&&u){var s=Math.abs(Math.round(d[0]-i)),l=d.indexOf(Js(d,s));u(l)}i>=Math.round(n)&&a()}T.set(0)}));(0,t.useEffect)((function(){if(d&&u){var e=h?A:d.length-1;u(e)}}),[h]),(0,t.useImperativeHandle)(n,(function(){return{y:D,snapTo:function(e){var t=k.current;if(d&&void 0!==d[e]&&null!==t){var n=t.getBoundingClientRect().height,r=Ys({snapTo:n-d[e],sheetHeight:n});Mi(D,r,P),u&&u(e),r>=n&&a()}}}})),$s(h,f),hl({isDisabled:!h});var z=(0,t.useMemo)((function(){return b?void 0:{drag:"y",dragElastic:0,dragConstraints:{top:0,bottom:0},dragMomentum:!1,dragPropagation:!1,onDrag:U,onDragEnd:Z}}),[b]),H={y:D,sheetRef:k,isOpen:h,initialSnap:A,snapPoints:d,detent:g,indicatorRotation:T,callbacks:N,dragProps:z,windowHeight:I,animationOptions:P,reduceMotion:L,disableDrag:b},G=(0,t.createElement)(nl.Provider,{value:H},(0,t.createElement)(Es.div,Object.assign({},M,{ref:n,style:Gs({},ml.wrapper,{zIndex:O,visibility:F},v)}),(0,t.createElement)(Rs,null,h?(0,t.createElement)(al,null,t.Children.map(c,(function(e,n){return(0,t.cloneElement)(e,{key:"sheet-child-"+n})}))):null)));return js?G:(0,l.createPortal)(G,null!=p?p:document.body)})),yl=(0,t.forwardRef)((function(e,n){var r,i=e.children,a=e.style,o=void 0===a?{}:a,s=e.className,l=void 0===s?"":s,u=Qs(e,["children","style","className"]),c=rl(),h=c.y,d=c.isOpen,f=c.callbacks,p=c.snapPoints,v=c.initialSnap,m=void 0===v?0:v,g=c.sheetRef,y=c.windowHeight,A=c.detent,x=c.animationOptions,b=c.reduceMotion,_=function(e,n){var r=el(e),i=(0,t.useRef)(!1),a=(0,t.useCallback)((function(){i.current?(null==n.current.onCloseEnd||n.current.onCloseEnd(),i.current=!1):(null==n.current.onOpenEnd||n.current.onOpenEnd(),i.current=!0)}),[e,r]);return(0,t.useEffect)((function(){!r&&e?null==n.current.onOpenStart||n.current.onOpenStart():!e&&r&&(null==n.current.onCloseStart||n.current.onCloseStart())}),[e,r]),{handleAnimationComplete:a}}(d,f),w=_.handleAnimationComplete,E=p?p[0]-p[m]:0,S=p?p[0]:null,M=null!==S?"min("+S+"px, "+Vs+")":Vs;return(0,t.createElement)(Es.div,Object.assign({},u,{ref:(r=[g,n],function(e){r.forEach((function(t){"function"===typeof t?t(e):t&&(t.current=e)}))}),className:"react-modal-sheet-container "+l,style:Gs({},ml.container,o,"full-height"===A&&{height:M},"content-height"===A&&{maxHeight:M},{y:h}),initial:!b&&{y:y},animate:{y:E,transition:x},exit:{y:y,transition:x},onAnimationComplete:w}),i)})),Al=(0,t.forwardRef)((function(e,n){var r=e.children,i=e.style,a=e.disableDrag,o=e.className,s=void 0===o?"":o,l=Qs(e,["children","style","disableDrag","className"]),u=rl(),c=sl(),h=a||c.disableDrag?void 0:u.dragProps;return(0,t.createElement)(Es.div,Object.assign({},l,{ref:n,className:"react-modal-sheet-content "+s,style:Gs({},ml.content,i)},h),r)})),xl=(0,t.forwardRef)((function(e,n){var r=e.children,i=e.style,a=e.disableDrag,o=Qs(e,["children","style","disableDrag"]),s=rl(),l=s.indicatorRotation,u=s.dragProps,c=a?void 0:u,h=Ze(l,(function(e){return"translateX(2px) rotate("+e+"deg)"})),d=Ze(l,(function(e){return"translateX(-2px) rotate("+-1*e+"deg)"}));return(0,t.createElement)(Es.div,Object.assign({},o,{ref:n,style:Gs({},ml.headerWrapper,i)},c),r||(0,t.createElement)("div",{className:"react-modal-sheet-header",style:ml.header},(0,t.createElement)(Es.span,{className:"react-modal-sheet-drag-indicator",style:Gs({},ml.indicator,{transform:h})}),(0,t.createElement)(Es.span,{className:"react-modal-sheet-drag-indicator",style:Gs({},ml.indicator,{transform:d})})))})),bl=function(e){return!!e.onClick||!!e.onTap},_l=(0,t.forwardRef)((function(e,n){var r=e.style,i=void 0===r?{}:r,a=e.className,o=void 0===a?"":a,s=Qs(e,["style","className"]),l=bl(s)?Es.button:Es.div,u=bl(s)?"auto":"none";return(0,t.createElement)(l,Object.assign({},s,{ref:n,className:"react-modal-sheet-backdrop "+o,style:Gs({},ml.backdrop,i,{pointerEvents:u}),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}))})),wl=(0,t.forwardRef)((function(e,n){var r=e.draggableAt,i=void 0===r?"top":r,a=e.children,o=e.style,s=e.className,l=void 0===s?"":s,u=Qs(e,["draggableAt","children","style","className"]),c=sl();function h(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;if(n>r){var a=t<=0,o=n-t===r;"top"===i&&a||"bottom"===i&&o||"both"===i&&(a||o)?c.setDragEnabled():c.setDragDisabled()}}var d="undefined"!==typeof window&&("ontouchstart"in window||navigator.maxTouchPoints>0)?{onScroll:function(e){h(e.currentTarget)},onTouchStart:function(e){h(e.currentTarget)}}:void 0;return(0,t.createElement)("div",Object.assign({},u,{ref:n,className:"react-modal-sheet-scroller "+l,style:Gs({},ml.scroller,o)},d),a)})),El=gl;El.Container=yl,El.Header=xl,El.Content=Al,El.Backdrop=_l,El.Scroller=wl;var Sl,Ml,Cl=El,kl=n.p+"static/media/regular.27c9a1508426e975455f.png",Tl=n(8664),Il=n(7326),Bl="151",Rl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ll={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Pl=0,Dl=1,Ol=2,Fl=3,Nl=0,Ul=1,Zl=2,zl=3,Hl=0,Gl=1,Ql=2,Vl=2,jl=0,Wl=1,ql=2,Jl=3,Xl=4,Yl=5,Kl=100,$l=101,eu=102,tu=103,nu=104,ru=200,iu=201,au=202,ou=203,su=204,lu=205,uu=206,cu=207,hu=208,du=209,fu=210,pu=0,vu=1,mu=2,gu=3,yu=4,Au=5,xu=6,bu=7,_u=0,wu=1,Eu=2,Su=0,Mu=1,Cu=2,ku=3,Tu=4,Iu=5,Bu=300,Ru=301,Lu=302,Pu=303,Du=304,Ou=306,Fu=1e3,Nu=1001,Uu=1002,Zu=1003,zu=1004,Hu=1004,Gu=1005,Qu=1005,Vu=1006,ju=1007,Wu=1007,qu=1008,Ju=1008,Xu=1009,Yu=1010,Ku=1011,$u=1012,ec=1013,tc=1014,nc=1015,rc=1016,ic=1017,ac=1018,oc=1020,sc=1021,lc=1023,uc=1024,cc=1025,hc=1026,dc=1027,fc=1028,pc=1029,vc=1030,mc=1031,gc=1033,yc=33776,Ac=33777,xc=33778,bc=33779,_c=35840,wc=35841,Ec=35842,Sc=35843,Mc=36196,Cc=37492,kc=37496,Tc=37808,Ic=37809,Bc=37810,Rc=37811,Lc=37812,Pc=37813,Dc=37814,Oc=37815,Fc=37816,Nc=37817,Uc=37818,Zc=37819,zc=37820,Hc=37821,Gc=36492,Qc=36283,Vc=36284,jc=36285,Wc=36286,qc=2200,Jc=2201,Xc=2202,Yc=2300,Kc=2301,$c=2302,eh=2400,th=2401,nh=2402,rh=2500,ih=2501,ah=0,oh=1,sh=2,lh=3e3,uh=3001,ch=3200,hh=3201,dh=0,fh=1,ph="",vh="srgb",mh="srgb-linear",gh="display-p3",yh=0,Ah=7680,xh=7681,bh=7682,_h=7683,wh=34055,Eh=34056,Sh=5386,Mh=512,Ch=513,kh=514,Th=515,Ih=516,Bh=517,Rh=518,Lh=519,Ph=35044,Dh=35048,Oh=35040,Fh=35045,Nh=35049,Uh=35041,Zh=35046,zh=35050,Hh=35042,Gh="100",Qh="300 es",Vh=1035,jh=function(){function e(){(0,u.Z)(this,e)}return(0,c.Z)(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}]),e}(),Wh=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],qh=1234567,Jh=Math.PI/180,Xh=180/Math.PI;function Yh(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Wh[255&e]+Wh[e>>8&255]+Wh[e>>16&255]+Wh[e>>24&255]+"-"+Wh[255&t]+Wh[t>>8&255]+"-"+Wh[t>>16&15|64]+Wh[t>>24&255]+"-"+Wh[63&n|128]+Wh[n>>8&255]+"-"+Wh[n>>16&255]+Wh[n>>24&255]+Wh[255&r]+Wh[r>>8&255]+Wh[r>>16&255]+Wh[r>>24&255]).toLowerCase()}function Kh(e,t,n){return Math.max(t,Math.min(n,e))}function $h(e,t){return(e%t+t)%t}function ed(e,t,n){return(1-n)*e+n*t}function td(e){return 0===(e&e-1)&&0!==e}function nd(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function rd(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function id(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function ad(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var od={DEG2RAD:Jh,RAD2DEG:Xh,generateUUID:Yh,clamp:Kh,euclideanModulo:$h,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:ed,damp:function(e,t,n,r){return ed(e,t,1-Math.exp(-n*r))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs($h(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(qh=e);var t=qh+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Jh},radToDeg:function(e){return e*Xh},isPowerOfTwo:td,ceilPowerOfTwo:nd,floorPowerOfTwo:rd,setQuaternionFromProperEuler:function(e,t,n,r,i){var a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),u=a((t+r)/2),c=o((t+r)/2),h=a((t-r)/2),d=o((t-r)/2),f=a((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*c,l*h,l*d,s*u);break;case"YZY":e.set(l*d,s*c,l*h,s*u);break;case"ZXZ":e.set(l*h,l*d,s*c,s*u);break;case"XZX":e.set(s*c,l*p,l*f,s*u);break;case"YXY":e.set(l*f,s*c,l*p,s*u);break;case"ZYZ":e.set(l*p,l*f,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:ad,denormalize:id},sd=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,u.Z)(this,t),t.prototype.isVector2=!0,this.x=e,this.y=n}return(0,c.Z)(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Kh(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:e,value:(0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator),ld=function(){function e(){(0,u.Z)(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}return(0,c.Z)(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,l){var u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],h=n[2],d=n[5],f=n[8],p=r[0],v=r[3],m=r[6],g=r[1],y=r[4],A=r[7],x=r[2],b=r[5],_=r[8];return i[0]=a*p+o*g+s*x,i[3]=a*v+o*y+s*b,i[6]=a*m+o*A+s*_,i[1]=l*p+u*g+c*x,i[4]=l*v+u*y+c*b,i[7]=l*m+u*A+c*_,i[2]=h*p+d*g+f*x,i[5]=h*v+d*y+f*b,i[8]=h*m+d*A+f*_,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-n*i*u+n*o*s+r*i*l-r*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=u*a-o*l,h=o*s-u*i,d=l*i-a*s,f=t*c+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);var p=1/f;return e[0]=c*p,e[1]=(r*l-u*n)*p,e[2]=(o*n-r*a)*p,e[3]=h*p,e[4]=(u*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=d*p,e[7]=(n*s-l*t)*p,e[8]=(a*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,a,o){var s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-r*l,r*s,-r*(-l*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){return this.premultiply(ud.makeScale(e,t)),this}},{key:"rotate",value:function(e){return this.premultiply(ud.makeRotation(-e)),this}},{key:"translate",value:function(e,t){return this.premultiply(ud.makeTranslation(e,t)),this}},{key:"makeTranslation",value:function(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}},{key:"makeRotation",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}},{key:"makeScale",value:function(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}(),ud=new ld;function cd(e){for(var t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var hd={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function dd(e,t){return new hd[e](t)}function fd(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function pd(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function vd(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var md=(new ld).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),gd=(new ld).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);var yd,Ad=(Sl={},(0,L.Z)(Sl,mh,(function(e){return e})),(0,L.Z)(Sl,vh,(function(e){return e.convertSRGBToLinear()})),(0,L.Z)(Sl,gh,(function(e){return e.convertSRGBToLinear().applyMatrix3(gd)})),Sl),xd=(Ml={},(0,L.Z)(Ml,mh,(function(e){return e})),(0,L.Z)(Ml,vh,(function(e){return e.convertLinearToSRGB()})),(0,L.Z)(Ml,gh,(function(e){return e.applyMatrix3(md).convertLinearToSRGB()})),Ml),bd={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return mh},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;var r=Ad[t],i=xd[n];if(void 0===r||void 0===i)throw new Error('Unsupported color space conversion, "'.concat(t,'" to "').concat(n,'".'));return i(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},_d=function(){function e(){(0,u.Z)(this,e)}return(0,c.Z)(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===yd&&(yd=fd("canvas")),yd.width=e.width,yd.height=e.height;var n=yd.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=yd}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var t=fd("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var r=n.getImageData(0,0,e.width,e.height),i=r.data,a=0;a<i.length;a++)i[a]=255*pd(i[a]/255);return n.putImageData(r,0,0),t}if(e.data){for(var o=e.data.slice(0),s=0;s<o.length;s++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[s]=Math.floor(255*pd(o[s]/255)):o[s]=pd(o[s]);return{data:o,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}(),wd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,u.Z)(this,e),this.isSource=!0,this.uuid=Yh(),this.data=t,this.version=0}return(0,c.Z)(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},r=this.data;if(null!==r){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)r[a].isDataTexture?i.push(Ed(r[a].image)):i.push(Ed(r[a]))}else i=Ed(r);n.url=i}return t||(e.images[this.uuid]=n),n}}]),e}();function Ed(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?_d.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Sd=0,Md=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nu,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Nu,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Vu,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:qu,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:lc,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Xu,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:n.DEFAULT_ANISOTROPY,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:lh;return(0,u.Z)(this,n),(e=t.call(this)).isTexture=!0,Object.defineProperty((0,Il.Z)(e),"id",{value:Sd++}),e.uuid=Yh(),e.name="",e.source=new wd(r),e.mipmaps=[],e.mapping=i,e.channel=0,e.wrapS=a,e.wrapT=o,e.magFilter=s,e.minFilter=l,e.anisotropy=d,e.format=c,e.internalFormat=null,e.type=h,e.offset=new sd(0,0),e.repeat=new sd(1,1),e.center=new sd(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new ld,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=f,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return(0,c.Z)(n,[{key:"image",get:function(){return this.source.data},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==Bu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Fu:e.x=e.x-Math.floor(e.x);break;case Nu:e.x=e.x<0?0:1;break;case Uu:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Fu:e.y=e.y-Math.floor(e.y);break;case Nu:e.y=e.y<0?0:1;break;case Uu:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}]),n}(jh);Md.DEFAULT_IMAGE=null,Md.DEFAULT_MAPPING=Bu,Md.DEFAULT_ANISOTROPY=1;var Cd=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,u.Z)(this,t),t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}return(0,c.Z)(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,a=.01,o=.1,s=e.elements,l=s[0],u=s[4],c=s[8],h=s[1],d=s[5],f=s[9],p=s[2],v=s[6],m=s[10];if(Math.abs(u-h)<a&&Math.abs(c-p)<a&&Math.abs(f-v)<a){if(Math.abs(u+h)<o&&Math.abs(c+p)<o&&Math.abs(f+v)<o&&Math.abs(l+d+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(l+1)/2,y=(d+1)/2,A=(m+1)/2,x=(u+h)/4,b=(c+p)/4,_=(f+v)/4;return g>y&&g>A?g<a?(n=0,r=.707106781,i=.707106781):(r=x/(n=Math.sqrt(g)),i=b/n):y>A?y<a?(n=.707106781,r=0,i=.707106781):(n=x/(r=Math.sqrt(y)),i=_/r):A<a?(n=.707106781,r=.707106781,i=0):(n=b/(i=Math.sqrt(A)),r=_/i),this.set(n,r,i,t),this}var w=Math.sqrt((v-f)*(v-f)+(c-p)*(c-p)+(h-u)*(h-u));return Math.abs(w)<.001&&(w=1),this.x=(v-f)/w,this.y=(c-p)/w,this.z=(h-u)/w,this.w=Math.acos((l+d+m-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:e,value:(0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator),kd=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,u.Z)(this,n),(e=t.call(this)).isWebGLRenderTarget=!0,e.width=r,e.height=i,e.depth=1,e.scissor=new Cd(0,0,r,i),e.scissorTest=!1,e.viewport=new Cd(0,0,r,i);var o={width:r,height:i,depth:1};return e.texture=new Md(o,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),e.texture.isRenderTargetTexture=!0,e.texture.flipY=!1,e.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,e.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,e.texture.minFilter=void 0!==a.minFilter?a.minFilter:Vu,e.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,e.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,e.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,e.samples=void 0!==a.samples?a.samples:0,e}return(0,c.Z)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;var t=Object.assign({},e.texture.image);return this.texture.source=new wd(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(jh),Td=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,u.Z)(this,n),(e=t.call(this,null)).isDataArrayTexture=!0,e.image={data:r,width:i,height:a,depth:o},e.magFilter=Zu,e.minFilter=Zu,e.wrapR=Nu,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return(0,c.Z)(n)}(Md),Id=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,u.Z)(this,n),(e=t.call(this,r,i)).isWebGLArrayRenderTarget=!0,e.depth=a,e.texture=new Td(null,r,i,a),e.texture.isRenderTargetTexture=!0,e}return(0,c.Z)(n)}(kd),Bd=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,u.Z)(this,n),(e=t.call(this,null)).isData3DTexture=!0,e.image={data:r,width:i,height:a,depth:o},e.magFilter=Zu,e.minFilter=Zu,e.wrapR=Nu,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return(0,c.Z)(n)}(Md),Rd=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,u.Z)(this,n),(e=t.call(this,r,i)).isWebGL3DRenderTarget=!0,e.depth=a,e.texture=new Bd(null,r,i,a),e.texture.isRenderTargetTexture=!0,e}return(0,c.Z)(n)}(kd),Ld=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,u.Z)(this,n),(e=t.call(this,r,i,o)).isWebGLMultipleRenderTargets=!0;var s=e.texture;e.texture=[];for(var l=0;l<a;l++)e.texture[l]=s.clone(),e.texture[l].isRenderTargetTexture=!0;return e}return(0,c.Z)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}]),n}(kd),Pd=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,u.Z)(this,t),this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}return(0,c.Z)(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(r/2),c=o(i/2),h=s(n/2),d=s(r/2),f=s(i/2);switch(a){case"XYZ":this._x=h*u*c+l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c-h*d*f;break;case"YXZ":this._x=h*u*c+l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c+h*d*f;break;case"ZXY":this._x=h*u*c-l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c-h*d*f;break;case"ZYX":this._x=h*u*c-l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c+h*d*f;break;case"YZX":this._x=h*u*c+l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c-h*d*f;break;case"XZY":this._x=h*u*c-l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],c=t[10],h=n+o+c;if(h>0){var d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(u-s)*d,this._y=(i-l)*d,this._z=(a-r)*d}else if(n>o&&n>c){var f=2*Math.sqrt(1+n-o-c);this._w=(u-s)/f,this._x=.25*f,this._y=(r+a)/f,this._z=(i+l)/f}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(i-l)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+u)/p}else{var v=2*Math.sqrt(1+c-n-o);this._w=(a-r)/v,this._x=(i+l)/v,this._y=(s+u)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(Kh(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+a*o+r*l-i*s,this._y=r*u+a*s+i*o-n*l,this._z=i*u+a*l+n*s-r*o,this._w=a*u-n*o-r*s-i*l,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var l=1-t;return this._w=l*a+t*this._w,this._x=l*n+t*this._x,this._y=l*r+t*this._y,this._z=l*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),c=Math.atan2(u,o),h=Math.sin((1-t)*c)/u,d=Math.sin(t*c)/u;return this._w=a*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=i*h+this._z*d,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"toJSON",value:function(){return this.toArray()}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:e,value:(0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))}],[{key:"slerpFlat",value:function(e,t,n,r,i,a,o){var s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],h=i[a+0],d=i[a+1],f=i[a+2],p=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=l,e[t+2]=u,void(e[t+3]=c);if(1===o)return e[t+0]=h,e[t+1]=d,e[t+2]=f,void(e[t+3]=p);if(c!==p||s!==h||l!==d||u!==f){var v=1-o,m=s*h+l*d+u*f+c*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var A=Math.sqrt(y),x=Math.atan2(A,m*g);v=Math.sin(v*x)/A,o=Math.sin(o*x)/A}var b=o*g;if(s=s*v+h*b,l=l*v+d*b,u=u*v+f*b,c=c*v+p*b,v===1-o){var _=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=_,l*=_,u*=_,c*=_}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],l=n[r+2],u=n[r+3],c=i[a],h=i[a+1],d=i[a+2],f=i[a+3];return e[t]=o*f+u*c+s*d-l*h,e[t+1]=s*f+u*h+l*c-o*d,e[t+2]=l*f+u*d+o*h-s*c,e[t+3]=u*f-o*c-s*h-l*d,e}}]),t}(Symbol.iterator),Dd=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,u.Z)(this,t),t.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}return(0,c.Z)(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(Fd.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(Fd.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*r-o*n,u=s*n+o*t-i*r,c=s*r+i*n-a*t,h=-i*t-a*n-o*r;return this.x=l*s+h*-i+u*-o-c*-a,this.y=u*s+h*-a+c*-i-l*-o,this.z=c*s+h*-o+l*-a-u*-i,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return Od.copy(this).projectOnVector(e),this.sub(Od)}},{key:"reflect",value:function(e){return this.sub(Od.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Kh(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"setFromColor",value:function(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:e,value:(0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator),Od=new Dd,Fd=new Pd,Nd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dd(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dd(-1/0,-1/0,-1/0);(0,u.Z)(this,e),this.isBox3=!0,this.min=t,this.max=n}return(0,c.Z)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t+=3)this.expandByPoint(Zd.fromArray(e,t));return this}},{key:"setFromBufferAttribute",value:function(e){this.makeEmpty();for(var t=0,n=e.count;t<n;t++)this.expandByPoint(Zd.fromBufferAttribute(e,t));return this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Zd.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),zd.copy(e.boundingBox),zd.applyMatrix4(e.matrixWorld),this.union(zd);else{var n=e.geometry;if(void 0!==n)if(t&&void 0!==n.attributes&&void 0!==n.attributes.position)for(var r=n.attributes.position,i=0,a=r.count;i<a;i++)Zd.fromBufferAttribute(r,i).applyMatrix4(e.matrixWorld),this.expandByPoint(Zd);else null===n.boundingBox&&n.computeBoundingBox(),zd.copy(n.boundingBox),zd.applyMatrix4(e.matrixWorld),this.union(zd)}for(var o=e.children,s=0,l=o.length;s<l;s++)this.expandByObject(o[s],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Zd),Zd.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(qd),Jd.subVectors(this.max,qd),Hd.subVectors(e.a,qd),Gd.subVectors(e.b,qd),Qd.subVectors(e.c,qd),Vd.subVectors(Gd,Hd),jd.subVectors(Qd,Gd),Wd.subVectors(Hd,Qd);var t=[0,-Vd.z,Vd.y,0,-jd.z,jd.y,0,-Wd.z,Wd.y,Vd.z,0,-Vd.x,jd.z,0,-jd.x,Wd.z,0,-Wd.x,-Vd.y,Vd.x,0,-jd.y,jd.x,0,-Wd.y,Wd.x,0];return!!Kd(t,Hd,Gd,Qd,Jd)&&(!!Kd(t=[1,0,0,0,1,0,0,0,1],Hd,Gd,Qd,Jd)&&(Xd.crossVectors(Vd,jd),Kd(t=[Xd.x,Xd.y,Xd.z],Hd,Gd,Qd,Jd)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return this.clampPoint(e,Zd).distanceTo(e)}},{key:"getBoundingSphere",value:function(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Zd).length()),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Ud[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ud[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ud[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ud[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ud[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ud[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ud[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ud[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ud)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),Ud=[new Dd,new Dd,new Dd,new Dd,new Dd,new Dd,new Dd,new Dd],Zd=new Dd,zd=new Nd,Hd=new Dd,Gd=new Dd,Qd=new Dd,Vd=new Dd,jd=new Dd,Wd=new Dd,qd=new Dd,Jd=new Dd,Xd=new Dd,Yd=new Dd;function Kd(e,t,n,r,i){for(var a=0,o=e.length-3;a<=o;a+=3){Yd.fromArray(e,a);var s=i.x*Math.abs(Yd.x)+i.y*Math.abs(Yd.y)+i.z*Math.abs(Yd.z),l=t.dot(Yd),u=n.dot(Yd),c=r.dot(Yd);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}var $d=new Nd,ef=new Dd,tf=new Dd,nf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dd,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,u.Z)(this,e),this.center=t,this.radius=n}return(0,c.Z)(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):$d.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ef.subVectors(e,this.center);var t=ef.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.addScaledVector(ef,r/n),this.radius+=r}return this}},{key:"union",value:function(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(tf.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ef.copy(e.center).add(tf)),this.expandByPoint(ef.copy(e.center).sub(tf))),this)}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),rf=new Dd,af=new Dd,of=new Dd,sf=new Dd,lf=new Dd,uf=new Dd,cf=new Dd,hf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dd,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dd(0,0,-1);(0,u.Z)(this,e),this.origin=t,this.direction=n}return(0,c.Z)(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,rf)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=rf.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(rf.copy(this.origin).addScaledVector(this.direction,t),rf.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){af.copy(e).add(t).multiplyScalar(.5),of.copy(t).sub(e).normalize(),sf.copy(this.origin).sub(af);var i,a,o,s,l=.5*e.distanceTo(t),u=-this.direction.dot(of),c=sf.dot(this.direction),h=-sf.dot(of),d=sf.lengthSq(),f=Math.abs(1-u*u);if(f>0)if(a=u*c-h,s=l*f,(i=u*h-c)>=0)if(a>=-s)if(a<=s){var p=1/f;o=(i*=p)*(i+u*(a*=p)+2*c)+a*(u*i+a+2*h)+d}else a=l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*h)+d;else a=-l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*h)+d;else a<=-s?o=-(i=Math.max(0,-(-u*l+c)))*i+(a=i>0?-l:Math.min(Math.max(-l,-h),l))*(a+2*h)+d:a<=s?(i=0,o=(a=Math.min(Math.max(-l,-h),l))*(a+2*h)+d):o=-(i=Math.max(0,-(u*l+c)))*i+(a=i>0?l:Math.min(Math.max(-l,-h),l))*(a+2*h)+d;else a=u>0?-l:l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*h)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,i),r&&r.copy(af).addScaledVector(of,a),o}},{key:"intersectSphere",value:function(e,t){rf.subVectors(e.center,this.origin);var n=rf.dot(this.direction),r=rf.dot(rf)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(i=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),n>a||i>r?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),c>=0?(o=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(o=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,rf)}},{key:"intersectTriangle",value:function(e,t,n,r,i){lf.subVectors(t,e),uf.subVectors(n,e),cf.crossVectors(lf,uf);var a,o=this.direction.dot(cf);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}sf.subVectors(this.origin,e);var s=a*this.direction.dot(uf.crossVectors(sf,uf));if(s<0)return null;var l=a*this.direction.dot(lf.cross(sf));if(l<0)return null;if(s+l>o)return null;var u=-a*sf.dot(cf);return u<0?null:this.at(u/o,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),df=function(){function e(){(0,u.Z)(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return(0,c.Z)(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,l,u,c,h,d,f,p,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=a,m[9]=o,m[13]=s,m[2]=l,m[6]=u,m[10]=c,m[14]=h,m[3]=d,m[7]=f,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/ff.setFromMatrixColumn(e,0).length(),i=1/ff.setFromMatrixColumn(e,1).length(),a=1/ff.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=a*u,d=a*c,f=o*u,p=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=d+f*l,t[5]=h-p*l,t[9]=-o*s,t[2]=p-h*l,t[6]=f+d*l,t[10]=a*s}else if("YXZ"===e.order){var v=s*u,m=s*c,g=l*u,y=l*c;t[0]=v+y*o,t[4]=g*o-m,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=m*o-g,t[6]=y+v*o,t[10]=a*s}else if("ZXY"===e.order){var A=s*u,x=s*c,b=l*u,_=l*c;t[0]=A-_*o,t[4]=-a*c,t[8]=b+x*o,t[1]=x+b*o,t[5]=a*u,t[9]=_-A*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var w=a*u,E=a*c,S=o*u,M=o*c;t[0]=s*u,t[4]=S*l-E,t[8]=w*l+M,t[1]=s*c,t[5]=M*l+w,t[9]=E*l-S,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var C=a*s,k=a*l,T=o*s,I=o*l;t[0]=s*u,t[4]=I-C*c,t[8]=T*c+k,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=k*c+T,t[10]=C-I*c}else if("XZY"===e.order){var B=a*s,R=a*l,L=o*s,P=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=B*c+P,t[5]=a*u,t[9]=R*c-L,t[2]=L*c-R,t[6]=o*u,t[10]=P*c+B}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(vf,e,mf)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return Af.subVectors(e,t),0===Af.lengthSq()&&(Af.z=1),Af.normalize(),gf.crossVectors(n,Af),0===gf.lengthSq()&&(1===Math.abs(n.z)?Af.x+=1e-4:Af.z+=1e-4,Af.normalize(),gf.crossVectors(n,Af)),gf.normalize(),yf.crossVectors(Af,gf),r[0]=gf.x,r[4]=yf.x,r[8]=Af.x,r[1]=gf.y,r[5]=yf.y,r[9]=Af.y,r[2]=gf.z,r[6]=yf.z,r[10]=Af.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],f=n[2],p=n[6],v=n[10],m=n[14],g=n[3],y=n[7],A=n[11],x=n[15],b=r[0],_=r[4],w=r[8],E=r[12],S=r[1],M=r[5],C=r[9],k=r[13],T=r[2],I=r[6],B=r[10],R=r[14],L=r[3],P=r[7],D=r[11],O=r[15];return i[0]=a*b+o*S+s*T+l*L,i[4]=a*_+o*M+s*I+l*P,i[8]=a*w+o*C+s*B+l*D,i[12]=a*E+o*k+s*R+l*O,i[1]=u*b+c*S+h*T+d*L,i[5]=u*_+c*M+h*I+d*P,i[9]=u*w+c*C+h*B+d*D,i[13]=u*E+c*k+h*R+d*O,i[2]=f*b+p*S+v*T+m*L,i[6]=f*_+p*M+v*I+m*P,i[10]=f*w+p*C+v*B+m*D,i[14]=f*E+p*k+v*R+m*O,i[3]=g*b+y*S+A*T+x*L,i[7]=g*_+y*M+A*I+x*P,i[11]=g*w+y*C+A*B+x*D,i[15]=g*E+y*k+A*R+x*O,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+i*s*c-r*l*c-i*o*h+n*l*h+r*o*d-n*s*d)+e[7]*(+t*s*d-t*l*h+i*a*h-r*a*d+r*l*u-i*s*u)+e[11]*(+t*l*c-t*o*d-i*a*c+n*a*d+i*o*u-n*l*u)+e[15]*(-r*o*u-t*s*c+t*o*h+r*a*c-n*a*h+n*s*u)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11],f=e[12],p=e[13],v=e[14],m=e[15],g=c*v*l-p*h*l+p*s*d-o*v*d-c*s*m+o*h*m,y=f*h*l-u*v*l-f*s*d+a*v*d+u*s*m-a*h*m,A=u*p*l-f*c*l+f*o*d-a*p*d-u*o*m+a*c*m,x=f*c*s-u*p*s-f*o*h+a*p*h+u*o*v-a*c*v,b=t*g+n*y+r*A+i*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var _=1/b;return e[0]=g*_,e[1]=(p*h*i-c*v*i-p*r*d+n*v*d+c*r*m-n*h*m)*_,e[2]=(o*v*i-p*s*i+p*r*l-n*v*l-o*r*m+n*s*m)*_,e[3]=(c*s*i-o*h*i-c*r*l+n*h*l+o*r*d-n*s*d)*_,e[4]=y*_,e[5]=(u*v*i-f*h*i+f*r*d-t*v*d-u*r*m+t*h*m)*_,e[6]=(f*s*i-a*v*i-f*r*l+t*v*l+a*r*m-t*s*m)*_,e[7]=(a*h*i-u*s*i+u*r*l-t*h*l-a*r*d+t*s*d)*_,e[8]=A*_,e[9]=(f*c*i-u*p*i-f*n*d+t*p*d+u*n*m-t*c*m)*_,e[10]=(a*p*i-f*o*i+f*n*l-t*p*l-a*n*m+t*o*m)*_,e[11]=(u*o*i-a*c*i-u*n*l+t*c*l+a*n*d-t*o*d)*_,e[12]=x*_,e[13]=(u*p*r-f*c*r+f*n*h-t*p*h-u*n*v+t*c*v)*_,e[14]=(f*o*r-a*p*r-f*n*s+t*p*s+a*n*v-t*o*v)*_,e[15]=(a*c*r-u*o*r+u*n*s-t*c*s-a*n*h+t*o*h)*_,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,l=i*a,u=i*o;return this.set(l*a+n,l*o-r*s,l*s+r*o,0,l*o+r*s,u*o+n,u*s-r*a,0,l*s-r*o,u*s+r*a,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,l=i+i,u=a+a,c=o+o,h=i*l,d=i*u,f=i*c,p=a*u,v=a*c,m=o*c,g=s*l,y=s*u,A=s*c,x=n.x,b=n.y,_=n.z;return r[0]=(1-(p+m))*x,r[1]=(d+A)*x,r[2]=(f-y)*x,r[3]=0,r[4]=(d-A)*b,r[5]=(1-(h+m))*b,r[6]=(v+g)*b,r[7]=0,r[8]=(f+y)*_,r[9]=(v-g)*_,r[10]=(1-(h+p))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=ff.set(r[0],r[1],r[2]).length(),a=ff.set(r[4],r[5],r[6]).length(),o=ff.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],pf.copy(this);var s=1/i,l=1/a,u=1/o;return pf.elements[0]*=s,pf.elements[1]*=s,pf.elements[2]*=s,pf.elements[4]*=l,pf.elements[5]*=l,pf.elements[6]*=l,pf.elements[8]*=u,pf.elements[9]*=u,pf.elements[10]*=u,t.setFromRotationMatrix(pf),n.x=i,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,i,a){var o=this.elements,s=2*i/(t-e),l=2*i/(n-r),u=(t+e)/(t-e),c=(n+r)/(n-r),h=-(a+i)/(a-i),d=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),l=1/(n-r),u=1/(a-i),c=(t+e)*s,h=(n+r)*l,d=(a+i)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}(),ff=new Dd,pf=new df,vf=new Dd(0,0,0),mf=new Dd(1,1,1),gf=new Dd,yf=new Dd,Af=new Dd,xf=new df,bf=new Pd,_f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DEFAULT_ORDER;(0,u.Z)(this,t),this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}return(0,c.Z)(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],l=r[5],u=r[9],c=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(Kh(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Kh(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(Kh(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-Kh(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Kh(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-Kh(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return xf.makeRotationFromQuaternion(e),this.setFromRotationMatrix(xf,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return bf.setFromEuler(this),this.setFromQuaternion(bf,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:e,value:(0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);_f.DEFAULT_ORDER="XYZ";var wf=function(){function e(){(0,u.Z)(this,e),this.mask=1}return(0,c.Z)(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}(),Ef=0,Sf=new Dd,Mf=new Pd,Cf=new df,kf=new Dd,Tf=new Dd,If=new Dd,Bf=new Pd,Rf=new Dd(1,0,0),Lf=new Dd(0,1,0),Pf=new Dd(0,0,1),Df={type:"added"},Of={type:"removed"},Ff=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;(0,u.Z)(this,n),(e=t.call(this)).isObject3D=!0,Object.defineProperty((0,Il.Z)(e),"id",{value:Ef++}),e.uuid=Yh(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DEFAULT_UP.clone();var r=new Dd,i=new _f,a=new Pd,o=new Dd(1,1,1);return i._onChange((function(){a.setFromEuler(i,!1)})),a._onChange((function(){i.setFromQuaternion(a,void 0,!1)})),Object.defineProperties((0,Il.Z)(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new df},normalMatrix:{value:new ld}}),e.matrix=new df,e.matrixWorld=new df,e.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,e.matrixWorldNeedsUpdate=!1,e.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,e.layers=new wf,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return(0,c.Z)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return Mf.setFromAxisAngle(e,t),this.quaternion.multiply(Mf),this}},{key:"rotateOnWorldAxis",value:function(e,t){return Mf.setFromAxisAngle(e,t),this.quaternion.premultiply(Mf),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Rf,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Lf,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(Pf,e)}},{key:"translateOnAxis",value:function(e,t){return Sf.copy(e).applyQuaternion(this.quaternion),this.position.add(Sf.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Rf,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Lf,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(Pf,e)}},{key:"localToWorld",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Cf.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?kf.copy(e):kf.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),Tf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Cf.lookAt(Tf,kf,this.up):Cf.lookAt(kf,Tf,this.up),this.quaternion.setFromRotationMatrix(Cf),r&&(Cf.extractRotation(r.matrixWorld),Mf.setFromRotationMatrix(Cf),this.quaternion.premultiply(Mf.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Df)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Of)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(Of)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),Cf.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Cf.multiply(e.parent.matrixWorld)),e.applyMatrix4(Cf),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getObjectsByProperty",value:function(e,t){var n=[];this[e]===t&&n.push(this);for(var r=0,i=this.children.length;r<i;r++){var a=this.children[r].getObjectsByProperty(e,t);a.length>0&&(n=n.concat(a))}return n}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tf,e,If),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tf,Bf,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++){var i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++){var o=r[i];!0===o.matrixWorldAutoUpdate&&o.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var u=o[s];i(e.shapes,u)}else i(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],h=0,d=this.material.length;h<d;h++)c.push(i(e.materials,this.material[h]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var f=0;f<this.children.length;f++)r.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var v=this.animations[p];r.animations.push(i(e.animations,v))}}if(t){var m=E(e.geometries),g=E(e.materials),y=E(e.textures),A=E(e.images),x=E(e.shapes),b=E(e.skeletons),_=E(e.animations),w=E(e.nodes);m.length>0&&(n.geometries=m),g.length>0&&(n.materials=g),y.length>0&&(n.textures=y),A.length>0&&(n.images=A),x.length>0&&(n.shapes=x),b.length>0&&(n.skeletons=b),_.length>0&&(n.animations=_),w.length>0&&(n.nodes=w)}return n.object=r,n;function E(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(jh);Ff.DEFAULT_UP=new Dd(0,1,0),Ff.DEFAULT_MATRIX_AUTO_UPDATE=!0,Ff.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Nf=new Dd,Uf=new Dd,Zf=new Dd,zf=new Dd,Hf=new Dd,Gf=new Dd,Qf=new Dd,Vf=new Dd,jf=new Dd,Wf=new Dd,qf=!1,Jf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dd,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dd,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Dd;(0,u.Z)(this,e),this.a=t,this.b=n,this.c=r}return(0,c.Z)(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Nf.subVectors(this.c,this.b),Uf.subVectors(this.a,this.b),.5*Nf.cross(Uf).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,i,a){return!1===qf&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),qf=!0),e.getInterpolation(t,this.a,this.b,this.c,n,r,i,a)}},{key:"getInterpolation",value:function(t,n,r,i,a){return e.getInterpolation(t,this.a,this.b,this.c,n,r,i,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,i=this.a,a=this.b,o=this.c;Hf.subVectors(a,i),Gf.subVectors(o,i),Vf.subVectors(e,i);var s=Hf.dot(Vf),l=Gf.dot(Vf);if(s<=0&&l<=0)return t.copy(i);jf.subVectors(e,a);var u=Hf.dot(jf),c=Gf.dot(jf);if(u>=0&&c<=u)return t.copy(a);var h=s*c-u*l;if(h<=0&&s>=0&&u<=0)return n=s/(s-u),t.copy(i).addScaledVector(Hf,n);Wf.subVectors(e,o);var d=Hf.dot(Wf),f=Gf.dot(Wf);if(f>=0&&d<=f)return t.copy(o);var p=d*l-s*f;if(p<=0&&l>=0&&f<=0)return r=l/(l-f),t.copy(i).addScaledVector(Gf,r);var v=u*f-d*c;if(v<=0&&c-u>=0&&d-f>=0)return Qf.subVectors(o,a),r=(c-u)/(c-u+(d-f)),t.copy(a).addScaledVector(Qf,r);var m=1/(v+p+h);return n=p*m,r=h*m,t.copy(i).addScaledVector(Hf,n).addScaledVector(Gf,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),Nf.subVectors(e,t),r.cross(Nf);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){Nf.subVectors(r,t),Uf.subVectors(n,t),Zf.subVectors(e,t);var a=Nf.dot(Nf),o=Nf.dot(Uf),s=Nf.dot(Zf),l=Uf.dot(Uf),u=Uf.dot(Zf),c=a*l-o*o;if(0===c)return i.set(-2,-1,-1);var h=1/c,d=(l*s-o*u)*h,f=(a*u-o*s)*h;return i.set(1-d-f,f,d)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,zf),zf.x>=0&&zf.y>=0&&zf.x+zf.y<=1}},{key:"getUV",value:function(e,t,n,r,i,a,o,s){return!1===qf&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),qf=!0),this.getInterpolation(e,t,n,r,i,a,o,s)}},{key:"getInterpolation",value:function(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,zf),s.setScalar(0),s.addScaledVector(i,zf.x),s.addScaledVector(a,zf.y),s.addScaledVector(o,zf.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return Nf.subVectors(n,t),Uf.subVectors(e,t),Nf.cross(Uf).dot(r)<0}}]),e}(),Xf=0,Yf=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).isMaterial=!0,Object.defineProperty((0,Il.Z)(e),"id",{value:Xf++}),e.uuid=Yh(),e.name="",e.type="Material",e.blending=Wl,e.side=Hl,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=su,e.blendDst=lu,e.blendEquation=Kl,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=gu,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=Lh,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=Ah,e.stencilZFail=Ah,e.stencilZPass=Ah,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.forceSinglePass=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return(0,c.Z)(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}else console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."))}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Wl&&(n.blending=this.blending),this.side!==Hl&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(jh),Kf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},$f={h:0,s:0,l:0},ep={h:0,s:0,l:0};function tp(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}var np=function(e){function t(e,n,r){return(0,u.Z)(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===r?this.set(e):this.setRGB(e,n,r)}return(0,c.Z)(t,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vh;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,bd.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bd.workingColorSpace;return this.r=e,this.g=t,this.b=n,bd.toWorkingColorSpace(this,r),this}},{key:"setHSL",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bd.workingColorSpace;if(e=$h(e,1),t=Kh(t,0,1),n=Kh(n,0,1),0===t)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+t):n+t-n*t,a=2*n-i;this.r=tp(a,i,e+1/3),this.g=tp(a,i,e),this.b=tp(a,i,e-1/3)}return bd.toWorkingColorSpace(this,r),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vh;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){var i,a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,bd.toWorkingColorSpace(this,n),r(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,bd.toWorkingColorSpace(this,n),r(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){var s=parseFloat(i[1])/360,l=parseFloat(i[2])/100,u=parseFloat(i[3])/100;return r(i[4]),this.setHSL(s,l,u,n)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var c=t[1],h=c.length;if(3===h)return this.setRGB(parseInt(c.charAt(0),16)/15,parseInt(c.charAt(1),16)/15,parseInt(c.charAt(2),16)/15,n);if(6===h)return this.setHex(parseInt(c,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vh,n=Kf[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=pd(e.r),this.g=pd(e.g),this.b=pd(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=vd(e.r),this.g=vd(e.g),this.b=vd(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vh;return bd.fromWorkingColorSpace(rp.copy(this),e),Kh(255*rp.r,0,255)<<16^Kh(255*rp.g,0,255)<<8^Kh(255*rp.b,0,255)<<0}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vh;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bd.workingColorSpace;bd.fromWorkingColorSpace(rp.copy(this),t);var n,r,i=rp.r,a=rp.g,o=rp.b,s=Math.max(i,a,o),l=Math.min(i,a,o),u=(l+s)/2;if(l===s)n=0,r=0;else{var c=s-l;switch(r=u<=.5?c/(s+l):c/(2-s-l),s){case i:n=(a-o)/c+(a<o?6:0);break;case a:n=(o-i)/c+2;break;case o:n=(i-a)/c+4}n/=6}return e.h=n,e.s=r,e.l=u,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bd.workingColorSpace;return bd.fromWorkingColorSpace(rp.copy(this),t),e.r=rp.r,e.g=rp.g,e.b=rp.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vh;bd.fromWorkingColorSpace(rp.copy(this),e);var t=rp.r,n=rp.g,r=rp.b;return e!==vh?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(r.toFixed(3),")"):"rgb(".concat(255*t|0,",").concat(255*n|0,",").concat(255*r|0,")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL($f),$f.h+=e,$f.s+=t,$f.l+=n,this.setHSL($f.h,$f.s,$f.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL($f),e.getHSL(ep);var n=ed($f.h,ep.h,t),r=ed($f.s,ep.s,t),i=ed($f.l,ep.l,t);return this.setHSL(n,r,i),this}},{key:"setFromVector3",value:function(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}},{key:"applyMatrix3",value:function(e){var t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:e,value:(0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator),rp=new np;np.NAMES=Kf;var ip=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).isMeshBasicMaterial=!0,r.type="MeshBasicMaterial",r.color=new np(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=_u,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(Yf),ap=op();function op(){for(var e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512),a=0;a<256;++a){var o=a-127;o<-27?(r[a]=0,r[256|a]=32768,i[a]=24,i[256|a]=24):o<-14?(r[a]=1024>>-o-14,r[256|a]=1024>>-o-14|32768,i[a]=-o-1,i[256|a]=-o-1):o<=15?(r[a]=o+15<<10,r[256|a]=o+15<<10|32768,i[a]=13,i[256|a]=13):o<128?(r[a]=31744,r[256|a]=64512,i[a]=24,i[256|a]=24):(r[a]=31744,r[256|a]=64512,i[a]=13,i[256|a]=13)}for(var s=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64),c=1;c<1024;++c){for(var h=c<<13,d=0;0===(8388608&h);)h<<=1,d-=8388608;h&=-8388609,d+=947912704,s[c]=h|d}for(var f=1024;f<2048;++f)s[f]=939524096+(f-1024<<13);for(var p=1;p<31;++p)l[p]=p<<23;l[31]=1199570944,l[32]=2147483648;for(var v=33;v<63;++v)l[v]=2147483648+(v-32<<23);l[63]=3347054592;for(var m=1;m<64;++m)32!==m&&(u[m]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:l,offsetTable:u}}function sp(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Kh(e,-65504,65504),ap.floatView[0]=e;var t=ap.uint32View[0],n=t>>23&511;return ap.baseTable[n]+((8388607&t)>>ap.shiftTable[n])}function lp(e){var t=e>>10;return ap.uint32View[0]=ap.mantissaTable[ap.offsetTable[t]+(1023&e)]+ap.exponentTable[t],ap.floatView[0]}var up={toHalfFloat:sp,fromHalfFloat:lp},cp=new Dd,hp=new sd,dp=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,u.Z)(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=r,this.usage=Ph,this.updateRange={offset:0,count:-1},this.version=0}return(0,c.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)hp.fromBufferAttribute(this,t),hp.applyMatrix3(e),this.setXY(t,hp.x,hp.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)cp.fromBufferAttribute(this,r),cp.applyMatrix3(e),this.setXYZ(r,cp.x,cp.y,cp.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)cp.fromBufferAttribute(this,t),cp.applyMatrix4(e),this.setXYZ(t,cp.x,cp.y,cp.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)cp.fromBufferAttribute(this,t),cp.applyNormalMatrix(e),this.setXYZ(t,cp.x,cp.y,cp.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)cp.fromBufferAttribute(this,t),cp.transformDirection(e),this.setXYZ(t,cp.x,cp.y,cp.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){var t=this.array[e*this.itemSize];return this.normalized&&(t=id(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=ad(t,this.array)),this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){var t=this.array[e*this.itemSize+1];return this.normalized&&(t=id(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=ad(t,this.array)),this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){var t=this.array[e*this.itemSize+2];return this.normalized&&(t=id(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=ad(t,this.array)),this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){var t=this.array[e*this.itemSize+3];return this.normalized&&(t=id(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=ad(t,this.array)),this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=ad(t,this.array),n=ad(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=ad(t,this.array),n=ad(n,this.array),r=ad(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=ad(t,this.array),n=ad(n,this.array),r=ad(r,this.array),i=ad(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Ph&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}},{key:"copyColorsArray",value:function(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}},{key:"copyVector2sArray",value:function(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}},{key:"copyVector3sArray",value:function(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}},{key:"copyVector4sArray",value:function(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}]),e}(),fp=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Int8Array(e),r,i)}return(0,c.Z)(n)}(dp),pp=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Uint8Array(e),r,i)}return(0,c.Z)(n)}(dp),vp=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Uint8ClampedArray(e),r,i)}return(0,c.Z)(n)}(dp),mp=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Int16Array(e),r,i)}return(0,c.Z)(n)}(dp),gp=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Uint16Array(e),r,i)}return(0,c.Z)(n)}(dp),yp=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Int32Array(e),r,i)}return(0,c.Z)(n)}(dp),Ap=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Uint32Array(e),r,i)}return(0,c.Z)(n)}(dp),xp=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){var a;return(0,u.Z)(this,n),(a=t.call(this,new Uint16Array(e),r,i)).isFloat16BufferAttribute=!0,a}return(0,c.Z)(n,[{key:"getX",value:function(e){var t=lp(this.array[e*this.itemSize]);return this.normalized&&(t=id(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=ad(t,this.array)),this.array[e*this.itemSize]=sp(t),this}},{key:"getY",value:function(e){var t=lp(this.array[e*this.itemSize+1]);return this.normalized&&(t=id(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=ad(t,this.array)),this.array[e*this.itemSize+1]=sp(t),this}},{key:"getZ",value:function(e){var t=lp(this.array[e*this.itemSize+2]);return this.normalized&&(t=id(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=ad(t,this.array)),this.array[e*this.itemSize+2]=sp(t),this}},{key:"getW",value:function(e){var t=lp(this.array[e*this.itemSize+3]);return this.normalized&&(t=id(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=ad(t,this.array)),this.array[e*this.itemSize+3]=sp(t),this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=ad(t,this.array),n=ad(n,this.array)),this.array[e+0]=sp(t),this.array[e+1]=sp(n),this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=ad(t,this.array),n=ad(n,this.array),r=ad(r,this.array)),this.array[e+0]=sp(t),this.array[e+1]=sp(n),this.array[e+2]=sp(r),this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=ad(t,this.array),n=ad(n,this.array),r=ad(r,this.array),i=ad(i,this.array)),this.array[e+0]=sp(t),this.array[e+1]=sp(n),this.array[e+2]=sp(r),this.array[e+3]=sp(i),this}}]),n}(dp),bp=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Float32Array(e),r,i)}return(0,c.Z)(n)}(dp),_p=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Float64Array(e),r,i)}return(0,c.Z)(n)}(dp),wp=0,Ep=new df,Sp=new Ff,Mp=new Dd,Cp=new Nd,kp=new Nd,Tp=new Dd,Ip=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).isBufferGeometry=!0,Object.defineProperty((0,Il.Z)(e),"id",{value:wp++}),e.uuid=Yh(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return(0,c.Z)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(cd(e)?Ap:gp)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new ld).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return Ep.makeRotationFromQuaternion(e),this.applyMatrix4(Ep),this}},{key:"rotateX",value:function(e){return Ep.makeRotationX(e),this.applyMatrix4(Ep),this}},{key:"rotateY",value:function(e){return Ep.makeRotationY(e),this.applyMatrix4(Ep),this}},{key:"rotateZ",value:function(e){return Ep.makeRotationZ(e),this.applyMatrix4(Ep),this}},{key:"translate",value:function(e,t,n){return Ep.makeTranslation(e,t,n),this.applyMatrix4(Ep),this}},{key:"scale",value:function(e,t,n){return Ep.makeScale(e,t,n),this.applyMatrix4(Ep),this}},{key:"lookAt",value:function(e){return Sp.lookAt(e),Sp.updateMatrix(),this.applyMatrix4(Sp.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Mp).negate(),this.translate(Mp.x,Mp.y,Mp.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new bp(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Nd);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Dd(-1/0,-1/0,-1/0),new Dd(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];Cp.setFromBufferAttribute(i),this.morphTargetsRelative?(Tp.addVectors(this.boundingBox.min,Cp.min),this.boundingBox.expandByPoint(Tp),Tp.addVectors(this.boundingBox.max,Cp.max),this.boundingBox.expandByPoint(Tp)):(this.boundingBox.expandByPoint(Cp.min),this.boundingBox.expandByPoint(Cp.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new nf);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Dd,1/0);if(e){var n=this.boundingSphere.center;if(Cp.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];kp.setFromBufferAttribute(a),this.morphTargetsRelative?(Tp.addVectors(Cp.min,kp.min),Cp.expandByPoint(Tp),Tp.addVectors(Cp.max,kp.max),Cp.expandByPoint(Tp)):(Cp.expandByPoint(kp.min),Cp.expandByPoint(kp.max))}Cp.getCenter(n);for(var o=0,s=0,l=e.count;s<l;s++)Tp.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(Tp));if(t)for(var u=0,c=t.length;u<c;u++)for(var h=t[u],d=this.morphTargetsRelative,f=0,p=h.count;f<p;f++)Tp.fromBufferAttribute(h,f),d&&(Mp.fromBufferAttribute(e,f),Tp.add(Mp)),o=Math.max(o,n.distanceToSquared(Tp));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new dp(new Float32Array(4*o),4));for(var s=this.getAttribute("tangent").array,l=[],u=[],c=0;c<o;c++)l[c]=new Dd,u[c]=new Dd;var h=new Dd,d=new Dd,f=new Dd,p=new sd,v=new sd,m=new sd,g=new Dd,y=new Dd,A=this.groups;0===A.length&&(A=[{start:0,count:n.length}]);for(var x=0,b=A.length;x<b;++x)for(var _=A[x],w=_.start,E=w,S=w+_.count;E<S;E+=3)O(n[E+0],n[E+1],n[E+2]);for(var M=new Dd,C=new Dd,k=new Dd,T=new Dd,I=0,B=A.length;I<B;++I)for(var R=A[I],L=R.start,P=L,D=L+R.count;P<D;P+=3)F(n[P+0]),F(n[P+1]),F(n[P+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function O(e,t,n){h.fromArray(r,3*e),d.fromArray(r,3*t),f.fromArray(r,3*n),p.fromArray(a,2*e),v.fromArray(a,2*t),m.fromArray(a,2*n),d.sub(h),f.sub(h),v.sub(p),m.sub(p);var i=1/(v.x*m.y-m.x*v.y);isFinite(i)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(f,-v.y).multiplyScalar(i),y.copy(f).multiplyScalar(v.x).addScaledVector(d,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),u[e].add(y),u[t].add(y),u[n].add(y))}function F(e){k.fromArray(i,3*e),T.copy(k);var t=l[e];M.copy(t),M.sub(k.multiplyScalar(k.dot(t))).normalize(),C.crossVectors(T,t);var n=C.dot(u[e])<0?-1:1;s[4*e]=M.x,s[4*e+1]=M.y,s[4*e+2]=M.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new dp(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new Dd,o=new Dd,s=new Dd,l=new Dd,u=new Dd,c=new Dd,h=new Dd,d=new Dd;if(e)for(var f=0,p=e.count;f<p;f+=3){var v=e.getX(f+0),m=e.getX(f+1),g=e.getX(f+2);a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),h.subVectors(s,o),d.subVectors(a,o),h.cross(d),l.fromBufferAttribute(n,v),u.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),l.add(h),u.add(h),c.add(h),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(m,u.x,u.y,u.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var y=0,A=t.count;y<A;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),h.subVectors(s,o),d.subVectors(a,o),h.cross(d),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)Tp.fromBufferAttribute(e,t),Tp.normalize(),e.setXYZ(t,Tp.x,Tp.y,Tp.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0,l=0,u=t.length;l<u;l++){o=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(var c=0;c<r;c++)a[s++]=n[o++]}return new dp(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,i=this.attributes;for(var a in i){var o=e(i[a],r);t.setAttribute(a,o)}var s=this.morphAttributes;for(var l in s){for(var u=[],c=s[l],h=0,d=c.length;h<d;h++){var f=e(c[h],r);u.push(f)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,v=0,m=p.length;v<m;v++){var g=p[v];t.addGroup(g.start,g.count,g.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i){var o=i[a];e.data.attributes[a]=o.toJSON(e.data)}var s={},l=!1;for(var u in this.morphAttributes){for(var c=this.morphAttributes[u],h=[],d=0,f=c.length;d<f;d++){var p=c[d];h.push(p.toJSON(e.data))}h.length>0&&(s[u]=h,l=!0)}l&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(e.data.groups=JSON.parse(JSON.stringify(v)));var m=this.boundingSphere;return null!==m&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var a=r[i];this.setAttribute(i,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var l=[],u=o[s],c=0,h=u.length;c<h;c++)l.push(u[c].clone(t));this.morphAttributes[s]=l}this.morphTargetsRelative=e.morphTargetsRelative;for(var d=e.groups,f=0,p=d.length;f<p;f++){var v=d[f];this.addGroup(v.start,v.count,v.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(jh),Bp=new df,Rp=new hf,Lp=new nf,Pp=new Dd,Dp=new Dd,Op=new Dd,Fp=new Dd,Np=new Dd,Up=new Dd,Zp=new sd,zp=new sd,Hp=new sd,Gp=new Dd,Qp=new Dd,Vp=new Dd,jp=new Dd,Wp=new Dd,qp=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ip,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ip;return(0,u.Z)(this,n),(e=t.call(this)).isMesh=!0,e.type="Mesh",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,c.Z)(n,[{key:"copy",value:function(e,t){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}},{key:"getVertexPosition",value:function(e,t){var n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);var o=this.morphTargetInfluences;if(i&&o){Up.set(0,0,0);for(var s=0,l=i.length;s<l;s++){var u=o[s],c=i[s];0!==u&&(Np.fromBufferAttribute(c,e),a?Up.addScaledVector(Np,u):Up.addScaledVector(Np.sub(t),u))}t.add(Up)}return this.isSkinnedMesh&&this.applyBoneTransform(e,t),t}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),Lp.copy(n.boundingSphere),Lp.applyMatrix4(i),Rp.copy(e.ray).recast(e.near),!1===Lp.containsPoint(Rp.origin)){if(null===Rp.intersectSphere(Lp,Pp))return;if(Rp.origin.distanceToSquared(Pp)>Math.pow(e.far-e.near,2))return}if(Bp.copy(i).invert(),Rp.copy(e.ray).applyMatrix4(Bp),null===n.boundingBox||!1!==Rp.intersectsBox(n.boundingBox)){var a,o=n.index,s=n.attributes.position,l=n.attributes.uv,u=n.attributes.uv2,c=n.attributes.normal,h=n.groups,d=n.drawRange;if(null!==o)if(Array.isArray(r))for(var f=0,p=h.length;f<p;f++)for(var v=h[f],m=r[v.materialIndex],g=Math.max(v.start,d.start),y=Math.min(o.count,Math.min(v.start+v.count,d.start+d.count));g<y;g+=3){var A=o.getX(g),x=o.getX(g+1),b=o.getX(g+2);(a=Jp(this,m,e,Rp,l,u,c,A,x,b))&&(a.faceIndex=Math.floor(g/3),a.face.materialIndex=v.materialIndex,t.push(a))}else for(var _=Math.max(0,d.start),w=Math.min(o.count,d.start+d.count);_<w;_+=3){var E=o.getX(_),S=o.getX(_+1),M=o.getX(_+2);(a=Jp(this,r,e,Rp,l,u,c,E,S,M))&&(a.faceIndex=Math.floor(_/3),t.push(a))}else if(void 0!==s)if(Array.isArray(r))for(var C=0,k=h.length;C<k;C++)for(var T=h[C],I=r[T.materialIndex],B=Math.max(T.start,d.start),R=Math.min(s.count,Math.min(T.start+T.count,d.start+d.count));B<R;B+=3){(a=Jp(this,I,e,Rp,l,u,c,B,B+1,B+2))&&(a.faceIndex=Math.floor(B/3),a.face.materialIndex=T.materialIndex,t.push(a))}else for(var L=Math.max(0,d.start),P=Math.min(s.count,d.start+d.count);L<P;L+=3){(a=Jp(this,r,e,Rp,l,u,c,L,L+1,L+2))&&(a.faceIndex=Math.floor(L/3),t.push(a))}}}}}]),n}(Ff);function Jp(e,t,n,r,i,a,o,s,l,u){e.getVertexPosition(s,Dp),e.getVertexPosition(l,Op),e.getVertexPosition(u,Fp);var c=function(e,t,n,r,i,a,o,s){if(null===(t.side===Gl?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side===Hl,s)))return null;Wp.copy(s),Wp.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(Wp);return l<n.near||l>n.far?null:{distance:l,point:Wp.clone(),object:e}}(e,t,n,r,Dp,Op,Fp,jp);if(c){i&&(Zp.fromBufferAttribute(i,s),zp.fromBufferAttribute(i,l),Hp.fromBufferAttribute(i,u),c.uv=Jf.getInterpolation(jp,Dp,Op,Fp,Zp,zp,Hp,new sd)),a&&(Zp.fromBufferAttribute(a,s),zp.fromBufferAttribute(a,l),Hp.fromBufferAttribute(a,u),c.uv2=Jf.getInterpolation(jp,Dp,Op,Fp,Zp,zp,Hp,new sd)),o&&(Gp.fromBufferAttribute(o,s),Qp.fromBufferAttribute(o,l),Vp.fromBufferAttribute(o,u),c.normal=Jf.getInterpolation(jp,Dp,Op,Fp,Gp,Qp,Vp,new Dd),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));var h={a:s,b:l,c:u,normal:new Dd,materialIndex:0};Jf.getNormal(Dp,Op,Fp,h.normal),c.face=h}return c}var Xp=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;(0,u.Z)(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:i,depth:a,widthSegments:o,heightSegments:s,depthSegments:l};var c=(0,Il.Z)(e);o=Math.floor(o),s=Math.floor(s),l=Math.floor(l);var h=[],d=[],f=[],p=[],v=0,m=0;function g(e,t,n,r,i,a,o,s,l,u,g){for(var y=a/l,A=o/u,x=a/2,b=o/2,_=s/2,w=l+1,E=u+1,S=0,M=0,C=new Dd,k=0;k<E;k++)for(var T=k*A-b,I=0;I<w;I++){var B=I*y-x;C[e]=B*r,C[t]=T*i,C[n]=_,d.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=s>0?1:-1,f.push(C.x,C.y,C.z),p.push(I/l),p.push(1-k/u),S+=1}for(var R=0;R<u;R++)for(var L=0;L<l;L++){var P=v+L+w*R,D=v+L+w*(R+1),O=v+(L+1)+w*(R+1),F=v+(L+1)+w*R;h.push(P,D,F),h.push(D,O,F),M+=6}c.addGroup(m,M,g),m+=M,v+=S}return g("z","y","x",-1,-1,a,i,r,l,s,0),g("z","y","x",1,-1,a,i,-r,l,s,1),g("x","z","y",1,1,r,a,i,o,l,2),g("x","z","y",1,-1,r,a,-i,o,l,3),g("x","y","z",1,-1,r,i,a,o,s,4),g("x","y","z",-1,-1,r,i,-a,o,s,5),e.setIndex(h),e.setAttribute("position",new bp(d,3)),e.setAttribute("normal",new bp(f,3)),e.setAttribute("uv",new bp(p,2)),e}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(Ip);function Yp(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function Kp(e){for(var t={},n=0;n<e.length;n++){var r=Yp(e[n]);for(var i in r)t[i]=r[i]}return t}function $p(e){return null===e.getRenderTarget()&&e.outputEncoding===uh?vh:mh}var ev={clone:Yp,merge:Kp},tv=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).isShaderMaterial=!0,r.type="ShaderMaterial",r.defines={},r.uniforms={},r.uniformsGroups=[],r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.forceSinglePass=!0,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&r.setValues(e),r}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Yp(e.uniforms),this.uniformsGroups=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}]),n}(Yf),nv=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new df,e.projectionMatrix=new df,e.projectionMatrixInverse=new df,e}return(0,c.Z)(n,[{key:"copy",value:function(e,t){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){(0,Zn.Z)((0,zn.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){(0,Zn.Z)((0,zn.Z)(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Ff),rv=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return(0,u.Z)(this,n),(e=t.call(this)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=i,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return(0,c.Z)(n,[{key:"copy",value:function(e,t){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Xh*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Jh*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*Xh*Math.atan(Math.tan(.5*Jh*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*Jh*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var l=this.filmOffset;0!==l&&(i+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(nv),iv=-90,av=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){var a;(0,u.Z)(this,n),(a=t.call(this)).type="CubeCamera",a.renderTarget=i;var o=new rv(iv,1,e,r);o.layers=a.layers,o.up.set(0,1,0),o.lookAt(1,0,0),a.add(o);var s=new rv(iv,1,e,r);s.layers=a.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),a.add(s);var l=new rv(iv,1,e,r);l.layers=a.layers,l.up.set(0,0,-1),l.lookAt(0,1,0),a.add(l);var c=new rv(iv,1,e,r);c.layers=a.layers,c.up.set(0,0,1),c.lookAt(0,-1,0),a.add(c);var h=new rv(iv,1,e,r);h.layers=a.layers,h.up.set(0,1,0),h.lookAt(0,0,1),a.add(h);var d=new rv(iv,1,e,r);return d.layers=a.layers,d.up.set(0,1,0),d.lookAt(0,0,-1),a.add(d),a}return(0,c.Z)(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=(0,s.Z)(this.children,6),i=r[0],a=r[1],o=r[2],l=r[3],u=r[4],c=r[5],h=e.getRenderTarget(),d=e.toneMapping,f=e.xr.enabled;e.toneMapping=Su,e.xr.enabled=!1;var p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,l),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=p,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(h),e.toneMapping=d,e.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}]),n}(Ff),ov=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a,o,s,l,c,h,d){var f;return(0,u.Z)(this,n),e=void 0!==e?e:[],r=void 0!==r?r:Ru,(f=t.call(this,e,r,i,a,o,s,l,c,h,d)).isCubeTexture=!0,f.flipY=!1,f}return(0,c.Z)(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(Md),sv=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,u.Z)(this,n),(e=t.call(this,r,r,i)).isWebGLCubeRenderTarget=!0;var a={width:r,height:r,depth:1},o=[a,a,a,a,a,a];return e.texture=new ov(o,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),e.texture.isRenderTargetTexture=!0,e.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,e.texture.minFilter=void 0!==i.minFilter?i.minFilter:Vu,e}return(0,c.Z)(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Xp(5,5,5),o=new tv({name:"CubemapFromEquirect",uniforms:Yp(n),vertexShader:r,fragmentShader:i,side:Gl,blending:jl});o.uniforms.tEquirect.value=t;var s=new qp(a,o),l=t.minFilter;return t.minFilter===qu&&(t.minFilter=Vu),new av(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}]),n}(kd),lv=new Dd,uv=new Dd,cv=new ld,hv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dd(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,u.Z)(this,e),this.isPlane=!0,this.normal=t,this.constant=n}return(0,c.Z)(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=lv.subVectors(n,t).cross(uv.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}},{key:"intersectLine",value:function(e,t){var n=e.delta(lv),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||cv.getNormalMatrix(e),r=this.coplanarPoint(lv).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),dv=new nf,fv=new Dd,pv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hv,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hv,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new hv,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new hv,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new hv,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new hv;(0,u.Z)(this,e),this.planes=[t,n,r,i,a,o]}return(0,c.Z)(e,[{key:"set",value:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],d=n[9],f=n[10],p=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return t[0].setComponents(o-r,c-s,p-h,y-v).normalize(),t[1].setComponents(o+r,c+s,p+h,y+v).normalize(),t[2].setComponents(o+i,c+l,p+d,y+m).normalize(),t[3].setComponents(o-i,c-l,p-d,y-m).normalize(),t[4].setComponents(o-a,c-u,p-f,y-g).normalize(),t[5].setComponents(o+a,c+u,p+f,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),dv.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{var t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),dv.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(dv)}},{key:"intersectsSprite",value:function(e){return dv.center.set(0,0,0),dv.radius=.7071067811865476,dv.applyMatrix4(e.matrixWorld),this.intersectsSphere(dv)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(fv.x=r.normal.x>0?e.max.x:e.min.x,fv.y=r.normal.y>0?e.max.y:e.min.y,fv.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(fv)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function vv(){var e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function mv(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){var a=r.get(t);(!a||a.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);void 0===o?r.set(t,function(t,r){var i,a=t.array,o=t.usage,s=e.createBuffer();if(e.bindBuffer(r,s),e.bufferData(r,a,o),t.onUploadCallback(),a instanceof Float32Array)i=5126;else if(a instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");i=5131}else i=5123;else if(a instanceof Int16Array)i=5122;else if(a instanceof Uint32Array)i=5125;else if(a instanceof Int32Array)i=5124;else if(a instanceof Int8Array)i=5120;else if(a instanceof Uint8Array)i=5121;else{if(!(a instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);i=5121}return{buffer:s,type:i,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(!function(t,r,i){var a=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1),r.onUploadCallback()}(o.buffer,t,i),o.version=t.version)}}}}var gv=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,u.Z)(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:i,widthSegments:a,heightSegments:o};for(var s=r/2,l=i/2,c=Math.floor(a),h=Math.floor(o),d=c+1,f=h+1,p=r/c,v=i/h,m=[],g=[],y=[],A=[],x=0;x<f;x++)for(var b=x*v-l,_=0;_<d;_++){var w=_*p-s;g.push(w,-b,0),y.push(0,0,1),A.push(_/c),A.push(1-x/h)}for(var E=0;E<h;E++)for(var S=0;S<c;S++){var M=S+d*E,C=S+d*(E+1),k=S+1+d*(E+1),T=S+1+d*E;m.push(M,C,T),m.push(C,k,T)}return e.setIndex(m),e.setAttribute("position",new bp(g,3)),e.setAttribute("normal",new bp(y,3)),e.setAttribute("uv",new bp(A,2)),e}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(Ip),yv={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge = pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec2 fullSize = vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_UV2\n\tattribute vec2 uv2;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Av={common:{diffuse:{value:new np(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ld},alphaMap:{value:null},alphaMapTransform:{value:new ld},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ld}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ld}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ld}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ld},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ld},normalScale:{value:new sd(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ld},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ld}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ld}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ld}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new np(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new np(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ld}},sprite:{diffuse:{value:new np(16777215)},opacity:{value:1},center:{value:new sd(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ld},alphaMap:{value:null},alphaTest:{value:0}}},xv={basic:{uniforms:Kp([Av.common,Av.specularmap,Av.envmap,Av.aomap,Av.lightmap,Av.fog]),vertexShader:yv.meshbasic_vert,fragmentShader:yv.meshbasic_frag},lambert:{uniforms:Kp([Av.common,Av.specularmap,Av.envmap,Av.aomap,Av.lightmap,Av.emissivemap,Av.bumpmap,Av.normalmap,Av.displacementmap,Av.fog,Av.lights,{emissive:{value:new np(0)}}]),vertexShader:yv.meshlambert_vert,fragmentShader:yv.meshlambert_frag},phong:{uniforms:Kp([Av.common,Av.specularmap,Av.envmap,Av.aomap,Av.lightmap,Av.emissivemap,Av.bumpmap,Av.normalmap,Av.displacementmap,Av.fog,Av.lights,{emissive:{value:new np(0)},specular:{value:new np(1118481)},shininess:{value:30}}]),vertexShader:yv.meshphong_vert,fragmentShader:yv.meshphong_frag},standard:{uniforms:Kp([Av.common,Av.envmap,Av.aomap,Av.lightmap,Av.emissivemap,Av.bumpmap,Av.normalmap,Av.displacementmap,Av.roughnessmap,Av.metalnessmap,Av.fog,Av.lights,{emissive:{value:new np(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:yv.meshphysical_vert,fragmentShader:yv.meshphysical_frag},toon:{uniforms:Kp([Av.common,Av.aomap,Av.lightmap,Av.emissivemap,Av.bumpmap,Av.normalmap,Av.displacementmap,Av.gradientmap,Av.fog,Av.lights,{emissive:{value:new np(0)}}]),vertexShader:yv.meshtoon_vert,fragmentShader:yv.meshtoon_frag},matcap:{uniforms:Kp([Av.common,Av.bumpmap,Av.normalmap,Av.displacementmap,Av.fog,{matcap:{value:null}}]),vertexShader:yv.meshmatcap_vert,fragmentShader:yv.meshmatcap_frag},points:{uniforms:Kp([Av.points,Av.fog]),vertexShader:yv.points_vert,fragmentShader:yv.points_frag},dashed:{uniforms:Kp([Av.common,Av.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:yv.linedashed_vert,fragmentShader:yv.linedashed_frag},depth:{uniforms:Kp([Av.common,Av.displacementmap]),vertexShader:yv.depth_vert,fragmentShader:yv.depth_frag},normal:{uniforms:Kp([Av.common,Av.bumpmap,Av.normalmap,Av.displacementmap,{opacity:{value:1}}]),vertexShader:yv.meshnormal_vert,fragmentShader:yv.meshnormal_frag},sprite:{uniforms:Kp([Av.sprite,Av.fog]),vertexShader:yv.sprite_vert,fragmentShader:yv.sprite_frag},background:{uniforms:{uvTransform:{value:new ld},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:yv.background_vert,fragmentShader:yv.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:yv.backgroundCube_vert,fragmentShader:yv.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:yv.cube_vert,fragmentShader:yv.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:yv.equirect_vert,fragmentShader:yv.equirect_frag},distanceRGBA:{uniforms:Kp([Av.common,Av.displacementmap,{referencePosition:{value:new Dd},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:yv.distanceRGBA_vert,fragmentShader:yv.distanceRGBA_frag},shadow:{uniforms:Kp([Av.lights,Av.fog,{color:{value:new np(0)},opacity:{value:1}}]),vertexShader:yv.shadow_vert,fragmentShader:yv.shadow_frag}};xv.physical={uniforms:Kp([xv.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ld},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ld},clearcoatNormalScale:{value:new sd(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ld},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ld},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ld},sheen:{value:0},sheenColor:{value:new np(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ld},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ld},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ld},transmissionSamplerSize:{value:new sd},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ld},attenuationDistance:{value:0},attenuationColor:{value:new np(0)},specularColor:{value:new np(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ld},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ld}}]),vertexShader:yv.meshphysical_vert,fragmentShader:yv.meshphysical_frag};var bv={r:0,b:0,g:0};function _v(e,t,n,r,i,a,o){var s,l,u=new np(0),c=!0===a?0:1,h=null,d=0,f=null;function p(t,n){t.getRGB(bv,$p(e)),r.buffers.color.setClear(bv.r,bv.g,bv.b,n,o)}return{getClearColor:function(){return u},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;u.set(e),p(u,c=t)},getClearAlpha:function(){return c},setClearAlpha:function(e){p(u,c=e)},render:function(r,a){var o=!1,v=!0===a.isScene?a.background:null;v&&v.isTexture&&(v=(a.backgroundBlurriness>0?n:t).get(v));var m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(v=null),null===v?p(u,c):v&&v.isColor&&(p(v,1),o=!0),(e.autoClear||o)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===Ou)?(void 0===l&&((l=new qp(new Xp(1,1,1),new tv({name:"BackgroundCubeMaterial",uniforms:Yp(xv.backgroundCube.uniforms),vertexShader:xv.backgroundCube.vertexShader,fragmentShader:xv.backgroundCube.fragmentShader,side:Gl,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=v,l.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=a.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,l.material.toneMapped=v.encoding!==uh,h===v&&d===v.version&&f===e.toneMapping||(l.material.needsUpdate=!0,h=v,d=v.version,f=e.toneMapping),l.layers.enableAll(),r.unshift(l,l.geometry,l.material,0,0,null)):v&&v.isTexture&&(void 0===s&&((s=new qp(new gv(2,2),new tv({name:"BackgroundMaterial",uniforms:Yp(xv.background.uniforms),vertexShader:xv.background.vertexShader,fragmentShader:xv.background.fragmentShader,side:Hl,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(s)),s.material.uniforms.t2D.value=v,s.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,s.material.toneMapped=v.encoding!==uh,!0===v.matrixAutoUpdate&&v.updateMatrix(),s.material.uniforms.uvTransform.value.copy(v.matrix),h===v&&d===v.version&&f===e.toneMapping||(s.material.needsUpdate=!0,h=v,d=v.version,f=e.toneMapping),s.layers.enableAll(),r.unshift(s,s.geometry,s.material,0,0,null))}}}function wv(e,t,n,r){var i=e.getParameter(34921),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},l=f(null),u=l,c=!1;function h(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function f(e){for(var t=[],n=[],r=[],a=0;a<i;a++)t[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){for(var e=u.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function v(e){m(e,0)}function m(n,i){var a=u.newAttributes,o=u.enabledAttributes,s=u.attributeDivisors;(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==i)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function g(){for(var t=u.newAttributes,n=u.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,i,a,o,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,a,o,s):e.vertexAttribIPointer(t,n,i,o,s)}function A(){x(),c=!0,u!==l&&h((u=l).object)}function x(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,d,A,x){var b=!1;if(o){var _=function(t,n,i){var o=!0===i.wireframe,l=s[t.id];void 0===l&&(l={},s[t.id]=l);var u=l[n.id];void 0===u&&(u={},l[n.id]=u);var c=u[o];void 0===c&&(c=f(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),u[o]=c);return c}(A,d,l);u!==_&&h((u=_).object),b=function(e,t,n,r){var i=u.attributes,a=t.attributes,o=0,s=n.getAttributes();for(var l in s){if(s[l].location>=0){var c=i[l],h=a[l];if(void 0===h&&("instanceMatrix"===l&&e.instanceMatrix&&(h=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(h=e.instanceColor)),void 0===c)return!0;if(c.attribute!==h)return!0;if(h&&c.data!==h.data)return!0;o++}}return u.attributesNum!==o||u.index!==r}(i,A,d,x),b&&function(e,t,n,r){var i={},a=t.attributes,o=0,s=n.getAttributes();for(var l in s){if(s[l].location>=0){var c=a[l];void 0===c&&("instanceMatrix"===l&&e.instanceMatrix&&(c=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(c=e.instanceColor));var h={};h.attribute=c,c&&c.data&&(h.data=c.data),i[l]=h,o++}}u.attributes=i,u.attributesNum=o,u.index=r}(i,A,d,x)}else{var w=!0===l.wireframe;u.geometry===A.id&&u.program===d.id&&u.wireframe===w||(u.geometry=A.id,u.program=d.id,u.wireframe=w,b=!0)}null!==x&&n.update(x,34963),(b||c)&&(c=!1,function(i,a,o,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();var l=s.attributes,u=o.getAttributes(),c=a.defaultAttributeValues;for(var h in u){var d=u[h];if(d.location>=0){var f=l[h];if(void 0===f&&("instanceMatrix"===h&&i.instanceMatrix&&(f=i.instanceMatrix),"instanceColor"===h&&i.instanceColor&&(f=i.instanceColor)),void 0!==f){var A=f.normalized,x=f.itemSize,b=n.get(f);if(void 0===b)continue;var _=b.buffer,w=b.type,E=b.bytesPerElement;if(f.isInterleavedBufferAttribute){var S=f.data,M=S.stride,C=f.offset;if(S.isInstancedInterleavedBuffer){for(var k=0;k<d.locationSize;k++)m(d.location+k,S.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=S.meshPerAttribute*S.count)}else for(var T=0;T<d.locationSize;T++)v(d.location+T);e.bindBuffer(34962,_);for(var I=0;I<d.locationSize;I++)y(d.location+I,x/d.locationSize,w,A,M*E,(C+x/d.locationSize*I)*E)}else{if(f.isInstancedBufferAttribute){for(var B=0;B<d.locationSize;B++)m(d.location+B,f.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=f.meshPerAttribute*f.count)}else for(var R=0;R<d.locationSize;R++)v(d.location+R);e.bindBuffer(34962,_);for(var L=0;L<d.locationSize;L++)y(d.location+L,x/d.locationSize,w,A,x*E,x/d.locationSize*L*E)}}else if(void 0!==c){var P=c[h];if(void 0!==P)switch(P.length){case 2:e.vertexAttrib2fv(d.location,P);break;case 3:e.vertexAttrib3fv(d.location,P);break;case 4:e.vertexAttrib4fv(d.location,P);break;default:e.vertexAttrib1fv(d.location,P)}}}}g()}(i,l,d,A),null!==x&&e.bindBuffer(34963,n.get(x).buffer))},reset:A,resetDefaultState:x,dispose:function(){for(var e in A(),s){var t=s[e];for(var n in t){var r=t[n];for(var i in r)d(r[i].object),delete r[i];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var i in r)d(r[i].object),delete r[i];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)d(r[i].object),delete r[i];delete n[e.id]}}},initAttributes:p,enableAttribute:v,disableUnusedAttributes:g}}function Ev(e,t,n,r){var i,a=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,o,s){if(0!==s){var l,u;if(a)l=e,u="drawArraysInstanced";else if(u="drawArraysInstancedANGLE",null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](i,r,o,s),n.update(o,i,s)}}}function Sv(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var l=a||t.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),h=e.getParameter(35660),d=e.getParameter(3379),f=e.getParameter(34076),p=e.getParameter(34921),v=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),y=h>0,A=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:A,floatVertexTextures:y&&A,maxSamples:a?e.getParameter(36183):0}}function Mv(e){var t=this,n=null,r=0,i=!1,a=!1,o=new hv,s=new ld,l={value:null,needsUpdate:!1};function u(e,n,r,i){var a=null!==e?e.length:0,u=null;if(0!==a){if(u=l.value,!0!==i||null===u){var c=r+4*a,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===u||u.length<c)&&(u=new Float32Array(c));for(var d=0,f=r;d!==a;++d,f+=4)o.copy(e[d]).applyMatrix4(h,s),o.normal.toArray(u,f),u[f+3]=o.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){var n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=u(e,t,0)},this.setState=function(o,s,c){var h=o.clippingPlanes,d=o.clipIntersection,f=o.clipShadows,p=e.get(o);if(!i||null===h||0===h.length||a&&!f)a?u(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=r>0);t.numPlanes=r,t.numIntersection=0}();else{var v=a?0:r,m=4*v,g=p.clippingState||null;l.value=g,g=u(h,s,m,c);for(var y=0;y!==m;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=v}}}function Cv(e){var t=new WeakMap;function n(e,t){return t===Pu?e.mapping=Ru:t===Du&&(e.mapping=Lu),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var a=i.mapping;if(a===Pu||a===Du){if(t.has(i))return n(t.get(i).texture,i.mapping);var o=i.image;if(o&&o.height>0){var s=new sv(o.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}return i},dispose:function(){t=new WeakMap}}}var kv=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return(0,u.Z)(this,n),(e=t.call(this)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=i,e.top=a,e.bottom=o,e.near=s,e.far=l,e.updateProjectionMatrix(),e}return(0,c.Z)(n,[{key:"copy",value:function(e,t){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=l*this.view.offsetX)+l*this.view.width,s=(o-=u*this.view.offsetY)-u*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(nv),Tv=[.125,.215,.35,.446,.526,.582],Iv=20,Bv=new kv,Rv=new np,Lv=null,Pv=(1+Math.sqrt(5))/2,Dv=1/Pv,Ov=[new Dd(1,1,1),new Dd(-1,1,1),new Dd(1,1,-1),new Dd(-1,1,-1),new Dd(0,Pv,Dv),new Dd(0,Pv,-Dv),new Dd(Dv,0,Pv),new Dd(-Dv,0,Pv),new Dd(Pv,Dv,0),new Dd(-Pv,Dv,0)],Fv=function(){function e(t){(0,u.Z)(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return(0,c.Z)(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Lv=this._renderer.getRenderTarget(),this._setSize(256);var i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=zv(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=Zv(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(Lv),e.scissorTest=!1,Uv(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===Ru||e.mapping===Lu?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Lv=this._renderer.getRenderTarget();var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Vu,minFilter:Vu,generateMipmaps:!1,type:rc,format:lc,encoding:lh,depthBuffer:!1},r=Nv(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Nv(e,t,n);var i=this._lodMax,a=function(e){for(var t=[],n=[],r=[],i=e,a=e-4+1+Tv.length,o=0;o<a;o++){var s=Math.pow(2,i);n.push(s);var l=1/s;o>e-4?l=Tv[o-e+4-1]:0===o&&(l=0),r.push(l);for(var u=1/(s-2),c=-u,h=1+u,d=[c,c,h,c,h,h,c,c,h,h,c,h],f=6,p=6,v=3,m=2,g=1,y=new Float32Array(v*p*f),A=new Float32Array(m*p*f),x=new Float32Array(g*p*f),b=0;b<f;b++){var _=b%3*2/3-1,w=b>2?0:-1,E=[_,w,0,_+2/3,w,0,_+2/3,w+1,0,_,w,0,_+2/3,w+1,0,_,w+1,0];y.set(E,v*p*b),A.set(d,m*p*b);var S=[b,b,b,b,b,b];x.set(S,g*p*b)}var M=new Ip;M.setAttribute("position",new dp(y,v)),M.setAttribute("uv",new dp(A,m)),M.setAttribute("faceIndex",new dp(x,g)),t.push(M),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(i);this._sizeLods=a.sizeLods,this._lodPlanes=a.lodPlanes,this._sigmas=a.sigmas,this._blurMaterial=function(e,t,n){var r=new Float32Array(Iv),i=new Dd(0,1,0),a=new tv({name:"SphericalGaussianBlur",defines:{n:Iv,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:jl,depthTest:!1,depthWrite:!1});return a}(i,e,t)}return r}},{key:"_compileMaterial",value:function(e){var t=new qp(this._lodPlanes[0],e);this._renderer.compile(t,Bv)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=new rv(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,u=s.toneMapping;s.getClearColor(Rv),s.toneMapping=Su,s.autoClear=!1;var c=new ip({name:"PMREM.Background",side:Gl,depthWrite:!1,depthTest:!1}),h=new qp(new Xp,c),d=!1,f=e.background;f?f.isColor&&(c.color.copy(f),e.background=null,d=!0):(c.color.copy(Rv),d=!0);for(var p=0;p<6;p++){var v=p%3;0===v?(i.up.set(0,a[p],0),i.lookAt(o[p],0,0)):1===v?(i.up.set(0,0,a[p]),i.lookAt(0,o[p],0)):(i.up.set(0,a[p],0),i.lookAt(0,0,o[p]));var m=this._cubeSize;Uv(r,v*m,p>2?m:0,m,m),s.setRenderTarget(r),d&&s.render(h,i),s.render(e,i)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=u,s.autoClear=l,e.background=f}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,r=e.mapping===Ru||e.mapping===Lu;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=zv()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Zv());var i=r?this._cubemapMaterial:this._equirectMaterial,a=new qp(this._lodPlanes[0],i);i.uniforms.envMap.value=e;var o=this._cubeSize;Uv(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,Bv)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<this._lodPlanes.length;r++){var i=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=Ov[(r-1)%Ov.length];this._blur(e,r-1,r,i,a)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,a,o){var s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var u=new qp(this._lodPlanes[r],l),c=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,f=i/d,p=isFinite(i)?1+Math.floor(3*f):Iv;p>Iv&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(Iv));for(var v=[],m=0,g=0;g<Iv;++g){var y=g/f,A=Math.exp(-y*y/2);v.push(A),0===g?m+=A:g<p&&(m+=2*A)}for(var x=0;x<v.length;x++)v[x]=v[x]/m;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=v,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o);var b=this._lodMax;c.dTheta.value=d,c.mipInt.value=b-n;var _=this._sizeLods[r];Uv(t,3*_*(r>b-4?r-b+4:0),4*(this._cubeSize-_),3*_,2*_),s.setRenderTarget(t),s.render(u,Bv)}}]),e}();function Nv(e,t,n){var r=new kd(e,t,n);return r.texture.mapping=Ou,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Uv(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Zv(){return new tv({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:jl,depthTest:!1,depthWrite:!1})}function zv(){return new tv({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:jl,depthTest:!1,depthWrite:!1})}function Hv(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){var a=i.mapping,o=a===Pu||a===Du,s=a===Ru||a===Lu;if(o||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;var l=t.get(i);return null===n&&(n=new Fv(e)),l=o?n.fromEquirectangular(i,l):n.fromCubemap(i,l),t.set(i,l),l.texture}if(t.has(i))return t.get(i).texture;var u=i.image;if(o&&u&&u.height>0||s&&u&&function(e){for(var t=0,n=6,r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(u)){null===n&&(n=new Fv(e));var c=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,c),i.addEventListener("dispose",r),c.texture}return null}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Gv(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Qv(e,t,n,r){var i={},a=new WeakMap;function o(e){var s=e.target;for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);s.removeEventListener("dispose",o),delete i[s.id];var u=a.get(s);u&&(t.remove(u),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,i=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var l=0,u=s.length;l<u;l+=3){var c=s[l+0],h=s[l+1],d=s[l+2];n.push(c,h,h,d,d,c)}}else{var f=i.array;o=i.version;for(var p=0,v=f.length/3-1;p<v;p+=3){var m=p+0,g=p+1,y=p+2;n.push(m,g,g,y,y,m)}}var A=new(cd(n)?Ap:gp)(n,1);A.version=o;var x=a.get(e);x&&t.remove(x),a.set(e,A)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var i=e.morphAttributes;for(var a in i)for(var o=i[a],s=0,l=o.length;s<l;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function Vv(e,t,n,r){var i,a,o,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,a,t*o),n.update(r,i,1)},this.renderInstances=function(r,l,u){if(0!==u){var c,h;if(s)c=e,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](i,l,a,r*o,u),n.update(l,i,u)}}}function jv(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Wv(e,t){return e[0]-t[0]}function qv(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Jv(e,t,n){for(var r={},i=new Float32Array(8),a=new WeakMap,o=new Cd,s=[],l=0;l<8;l++)s[l]=[l,0];return{update:function(l,u,c){var h=l.morphTargetInfluences;if(!0===t.isWebGL2){var d=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,f=void 0!==d?d.length:0,p=a.get(u);if(void 0===p||p.count!==f){void 0!==p&&p.texture.dispose();var v=void 0!==u.morphAttributes.position,m=void 0!==u.morphAttributes.normal,g=void 0!==u.morphAttributes.color,y=u.morphAttributes.position||[],A=u.morphAttributes.normal||[],x=u.morphAttributes.color||[],b=0;!0===v&&(b=1),!0===m&&(b=2),!0===g&&(b=3);var _=u.attributes.position.count*b,w=1;_>t.maxTextureSize&&(w=Math.ceil(_/t.maxTextureSize),_=t.maxTextureSize);var E=new Float32Array(_*w*4*f),S=new Td(E,_,w,f);S.type=nc,S.needsUpdate=!0;for(var M=4*b,C=0;C<f;C++)for(var k=y[C],T=A[C],I=x[C],B=_*w*4*C,R=0;R<k.count;R++){var L=R*M;!0===v&&(o.fromBufferAttribute(k,R),E[B+L+0]=o.x,E[B+L+1]=o.y,E[B+L+2]=o.z,E[B+L+3]=0),!0===m&&(o.fromBufferAttribute(T,R),E[B+L+4]=o.x,E[B+L+5]=o.y,E[B+L+6]=o.z,E[B+L+7]=0),!0===g&&(o.fromBufferAttribute(I,R),E[B+L+8]=o.x,E[B+L+9]=o.y,E[B+L+10]=o.z,E[B+L+11]=4===I.itemSize?o.w:1)}p={count:f,texture:S,size:new sd(_,w)},a.set(u,p),u.addEventListener("dispose",(function e(){S.dispose(),a.delete(u),u.removeEventListener("dispose",e)}))}for(var P=0,D=0;D<h.length;D++)P+=h[D];var O=u.morphTargetsRelative?1:1-P;c.getUniforms().setValue(e,"morphTargetBaseInfluence",O),c.getUniforms().setValue(e,"morphTargetInfluences",h),c.getUniforms().setValue(e,"morphTargetsTexture",p.texture,n),c.getUniforms().setValue(e,"morphTargetsTextureSize",p.size)}else{var F=void 0===h?0:h.length,N=r[u.id];if(void 0===N||N.length!==F){N=[];for(var U=0;U<F;U++)N[U]=[U,0];r[u.id]=N}for(var Z=0;Z<F;Z++){var z=N[Z];z[0]=Z,z[1]=h[Z]}N.sort(qv);for(var H=0;H<8;H++)H<F&&N[H][1]?(s[H][0]=N[H][0],s[H][1]=N[H][1]):(s[H][0]=Number.MAX_SAFE_INTEGER,s[H][1]=0);s.sort(Wv);for(var G=u.morphAttributes.position,Q=u.morphAttributes.normal,V=0,j=0;j<8;j++){var W=s[j],q=W[0],J=W[1];q!==Number.MAX_SAFE_INTEGER&&J?(G&&u.getAttribute("morphTarget"+j)!==G[q]&&u.setAttribute("morphTarget"+j,G[q]),Q&&u.getAttribute("morphNormal"+j)!==Q[q]&&u.setAttribute("morphNormal"+j,Q[q]),i[j]=J,V+=J):(G&&!0===u.hasAttribute("morphTarget"+j)&&u.deleteAttribute("morphTarget"+j),Q&&!0===u.hasAttribute("morphNormal"+j)&&u.deleteAttribute("morphNormal"+j),i[j]=0)}var X=u.morphTargetsRelative?1:1-V;c.getUniforms().setValue(e,"morphTargetBaseInfluence",X),c.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function Xv(e,t,n,r){var i=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var o=r.render.frame,s=e.geometry,l=t.get(e,s);return i.get(l)!==o&&(t.update(l),i.set(l,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}var Yv=new Md,Kv=new Td,$v=new Bd,em=new ov,tm=[],nm=[],rm=new Float32Array(16),im=new Float32Array(9),am=new Float32Array(4);function om(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=tm[i];if(void 0===a&&(a=new Float32Array(i),tm[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function sm(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function lm(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function um(e,t){var n=nm[t];void 0===n&&(n=new Int32Array(t),nm[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function cm(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function hm(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(sm(n,t))return;e.uniform2fv(this.addr,t),lm(n,t)}}function dm(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(sm(n,t))return;e.uniform3fv(this.addr,t),lm(n,t)}}function fm(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(sm(n,t))return;e.uniform4fv(this.addr,t),lm(n,t)}}function pm(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(sm(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),lm(n,t)}else{if(sm(n,r))return;am.set(r),e.uniformMatrix2fv(this.addr,!1,am),lm(n,r)}}function vm(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(sm(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),lm(n,t)}else{if(sm(n,r))return;im.set(r),e.uniformMatrix3fv(this.addr,!1,im),lm(n,r)}}function mm(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(sm(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),lm(n,t)}else{if(sm(n,r))return;rm.set(r),e.uniformMatrix4fv(this.addr,!1,rm),lm(n,r)}}function gm(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function ym(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(sm(n,t))return;e.uniform2iv(this.addr,t),lm(n,t)}}function Am(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(sm(n,t))return;e.uniform3iv(this.addr,t),lm(n,t)}}function xm(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(sm(n,t))return;e.uniform4iv(this.addr,t),lm(n,t)}}function bm(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function _m(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(sm(n,t))return;e.uniform2uiv(this.addr,t),lm(n,t)}}function wm(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(sm(n,t))return;e.uniform3uiv(this.addr,t),lm(n,t)}}function Em(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(sm(n,t))return;e.uniform4uiv(this.addr,t),lm(n,t)}}function Sm(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||Yv,i)}function Mm(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||$v,i)}function Cm(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||em,i)}function km(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Kv,i)}function Tm(e,t){e.uniform1fv(this.addr,t)}function Im(e,t){var n=om(t,this.size,2);e.uniform2fv(this.addr,n)}function Bm(e,t){var n=om(t,this.size,3);e.uniform3fv(this.addr,n)}function Rm(e,t){var n=om(t,this.size,4);e.uniform4fv(this.addr,n)}function Lm(e,t){var n=om(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Pm(e,t){var n=om(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Dm(e,t){var n=om(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Om(e,t){e.uniform1iv(this.addr,t)}function Fm(e,t){e.uniform2iv(this.addr,t)}function Nm(e,t){e.uniform3iv(this.addr,t)}function Um(e,t){e.uniform4iv(this.addr,t)}function Zm(e,t){e.uniform1uiv(this.addr,t)}function zm(e,t){e.uniform2uiv(this.addr,t)}function Hm(e,t){e.uniform3uiv(this.addr,t)}function Gm(e,t){e.uniform4uiv(this.addr,t)}function Qm(e,t,n){var r=this.cache,i=t.length,a=um(n,i);sm(r,a)||(e.uniform1iv(this.addr,a),lm(r,a));for(var o=0;o!==i;++o)n.setTexture2D(t[o]||Yv,a[o])}function Vm(e,t,n){var r=this.cache,i=t.length,a=um(n,i);sm(r,a)||(e.uniform1iv(this.addr,a),lm(r,a));for(var o=0;o!==i;++o)n.setTexture3D(t[o]||$v,a[o])}function jm(e,t,n){var r=this.cache,i=t.length,a=um(n,i);sm(r,a)||(e.uniform1iv(this.addr,a),lm(r,a));for(var o=0;o!==i;++o)n.setTextureCube(t[o]||em,a[o])}function Wm(e,t,n){var r=this.cache,i=t.length,a=um(n,i);sm(r,a)||(e.uniform1iv(this.addr,a),lm(r,a));for(var o=0;o!==i;++o)n.setTexture2DArray(t[o]||Kv,a[o])}var qm=(0,c.Z)((function e(t,n,r){(0,u.Z)(this,e),this.id=t,this.addr=r,this.cache=[],this.setValue=function(e){switch(e){case 5126:return cm;case 35664:return hm;case 35665:return dm;case 35666:return fm;case 35674:return pm;case 35675:return vm;case 35676:return mm;case 5124:case 35670:return gm;case 35667:case 35671:return ym;case 35668:case 35672:return Am;case 35669:case 35673:return xm;case 5125:return bm;case 36294:return _m;case 36295:return wm;case 36296:return Em;case 35678:case 36198:case 36298:case 36306:case 35682:return Sm;case 35679:case 36299:case 36307:return Mm;case 35680:case 36300:case 36308:case 36293:return Cm;case 36289:case 36303:case 36311:case 36292:return km}}(n.type)})),Jm=(0,c.Z)((function e(t,n,r){(0,u.Z)(this,e),this.id=t,this.addr=r,this.cache=[],this.size=n.size,this.setValue=function(e){switch(e){case 5126:return Tm;case 35664:return Im;case 35665:return Bm;case 35666:return Rm;case 35674:return Lm;case 35675:return Pm;case 35676:return Dm;case 5124:case 35670:return Om;case 35667:case 35671:return Fm;case 35668:case 35672:return Nm;case 35669:case 35673:return Um;case 5125:return Zm;case 36294:return zm;case 36295:return Hm;case 36296:return Gm;case 35678:case 36198:case 36298:case 36306:case 35682:return Qm;case 35679:case 36299:case 36307:return Vm;case 35680:case 36300:case 36308:case 36293:return jm;case 36289:case 36303:case 36311:case 36292:return Wm}}(n.type)})),Xm=function(){function e(t){(0,u.Z)(this,e),this.id=t,this.seq=[],this.map={}}return(0,c.Z)(e,[{key:"setValue",value:function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}}}]),e}(),Ym=/(\w+)(\])?(\[|\.)?/g;function Km(e,t){e.seq.push(t),e.map[t.id]=t}function $m(e,t,n){var r=e.name,i=r.length;for(Ym.lastIndex=0;;){var a=Ym.exec(r),o=Ym.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===i){Km(n,void 0===u?new qm(s,e,t):new Jm(s,e,t));break}var c=n.map[s];void 0===c&&Km(n,c=new Xm(s)),n=c}}var eg=function(){function e(t,n){(0,u.Z)(this,e),this.seq=[],this.map={};for(var r=t.getProgramParameter(n,35718),i=0;i<r;++i){var a=t.getActiveUniform(n,i);$m(a,t.getUniformLocation(n,a.name),this)}}return(0,c.Z)(e,[{key:"setValue",value:function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)}},{key:"setOptional",value:function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)}}],[{key:"upload",value:function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}}},{key:"seqWithValue",value:function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n}}]),e}();function tg(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}var ng=0;function rg(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";var a=/ERROR: 0:(\d+)/.exec(i);if(a){var o=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){for(var n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length),o=i;o<a;o++){var s=o+1;r.push("".concat(s===t?">":" "," ").concat(s,": ").concat(n[o]))}return r.join("\n")}(e.getShaderSource(t),o)}return i}function ig(e,t){var n=function(e){switch(e){case lh:return["Linear","( value )"];case uh:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function ag(e,t){var n;switch(t){case Mu:n="Linear";break;case Cu:n="Reinhard";break;case ku:n="OptimizedCineon";break;case Tu:n="ACESFilmic";break;case Iu:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function og(e){return""!==e}function sg(e,t){var n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function lg(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var ug=/^[ \t]*#include +<([\w\d./]+)>/gm;function cg(e){return e.replace(ug,hg)}function hg(e,t){var n=yv[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return cg(n)}var dg=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function fg(e){return e.replace(dg,pg)}function pg(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function vg(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function mg(e,t,n,r){var i,a,o=e.getContext(),s=n.defines,l=n.vertexShader,u=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Ul?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===Zl?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===zl&&(t="SHADOWMAP_TYPE_VSM"),t}(n),h=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Ru:case Lu:t="ENVMAP_TYPE_CUBE";break;case Ou:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),d=function(e){var t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===Lu&&(t="ENVMAP_MODE_REFRACTION");return t}(n),f=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case _u:t="ENVMAP_BLENDING_MULTIPLY";break;case wu:t="ENVMAP_BLENDING_MIX";break;case Eu:t="ENVMAP_BLENDING_ADD"}return t}(n),p=function(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),v=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(og).join("\n")}(n),m=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),g=o.createProgram(),y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=[m].filter(og).join("\n")).length>0&&(i+="\n"),(a=[v,m].filter(og).join("\n")).length>0&&(a+="\n")):(i=[vg(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs2?"#define USE_UV2":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(og).join("\n"),a=[v,vg(n),"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",n.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs2?"#define USE_UV2":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Su?"#define TONE_MAPPING":"",n.toneMapping!==Su?yv.tonemapping_pars_fragment:"",n.toneMapping!==Su?ag("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",yv.encodings_pars_fragment,ig("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(og).join("\n")),l=lg(l=sg(l=cg(l),n),n),u=lg(u=sg(u=cg(u),n),n),l=fg(l),u=fg(u),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",i=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#define varying in",n.glslVersion===Qh?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Qh?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var A,x,b=y+a+u,_=tg(o,35633,y+i+l),w=tg(o,35632,b);if(o.attachShader(g,_),o.attachShader(g,w),void 0!==n.index0AttributeName?o.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),e.debug.checkShaderErrors){var E=o.getProgramInfoLog(g).trim(),S=o.getShaderInfoLog(_).trim(),M=o.getShaderInfoLog(w).trim(),C=!0,k=!0;if(!1===o.getProgramParameter(g,35714))if(C=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(o,g,_,w);else{var T=rg(o,_,"vertex"),I=rg(o,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(g,35715)+"\n\nProgram Info Log: "+E+"\n"+T+"\n"+I)}else""!==E?console.warn("THREE.WebGLProgram: Program Info Log:",E):""!==S&&""!==M||(k=!1);k&&(this.diagnostics={runnable:C,programLog:E,vertexShader:{log:S,prefix:i},fragmentShader:{log:M,prefix:a}})}return o.deleteShader(_),o.deleteShader(w),this.getUniforms=function(){return void 0===A&&(A=new eg(o,g)),A},this.getAttributes=function(){return void 0===x&&(x=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var a=e.getActiveAttrib(t,i),o=a.name,s=1;35674===a.type&&(s=2),35675===a.type&&(s=3),35676===a.type&&(s=4),n[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(o,g)),x},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=ng++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=_,this.fragmentShader=w,this}var gg=0,yg=function(){function e(){(0,u.Z)(this,e),this.shaderCache=new Map,this.materialCache=new Map}return(0,c.Z)(e,[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}},{key:"remove",value:function(e){var t,n=this.materialCache.get(e),r=(0,Ms.Z)(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code)}}catch(a){r.e(a)}finally{r.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new Ag(e),t.set(e,n)),n}}]),e}(),Ag=(0,c.Z)((function e(t){(0,u.Z)(this,e),this.id=gg++,this.code=t,this.usedTimes=0}));function xg(e,t,n,r,i,a,o){var s=new wf,l=new yg,u=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,d=i.vertexTextures,f=i.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(e){return 1===e?"uv2":"uv"}return{getParameters:function(a,s,u,m,g){var y=m.fog,A=g.geometry,x=a.isMeshStandardMaterial?m.environment:null,b=(a.isMeshStandardMaterial?n:t).get(a.envMap||x),_=b&&b.mapping===Ou?b.image.height:null,w=p[a.type];null!==a.precision&&(f=i.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",f,"instead.");var E,S,M,C,k=A.morphAttributes.position||A.morphAttributes.normal||A.morphAttributes.color,T=void 0!==k?k.length:0,I=0;if(void 0!==A.morphAttributes.position&&(I=1),void 0!==A.morphAttributes.normal&&(I=2),void 0!==A.morphAttributes.color&&(I=3),w){var B=xv[w];E=B.vertexShader,S=B.fragmentShader}else E=a.vertexShader,S=a.fragmentShader,l.update(a),M=l.getVertexShaderID(a),C=l.getFragmentShaderID(a);var R=e.getRenderTarget(),L=!0===g.isInstancedMesh,P=!!a.map,D=!!a.matcap,O=!!b,F=!!a.aoMap,N=!!a.lightMap,U=!!a.bumpMap,Z=!!a.normalMap,z=!!a.displacementMap,H=!!a.emissiveMap,G=!!a.metalnessMap,Q=!!a.roughnessMap,V=a.clearcoat>0,j=a.iridescence>0,W=a.sheen>0,q=a.transmission>0,J=V&&!!a.clearcoatMap,X=V&&!!a.clearcoatNormalMap,Y=V&&!!a.clearcoatRoughnessMap,K=j&&!!a.iridescenceMap,$=j&&!!a.iridescenceThicknessMap,ee=W&&!!a.sheenColorMap,te=W&&!!a.sheenRoughnessMap,ne=!!a.specularMap,re=!!a.specularColorMap,ie=!!a.specularIntensityMap,ae=q&&!!a.transmissionMap,oe=q&&!!a.thicknessMap,se=!!a.gradientMap,le=!!a.alphaMap,ue=a.alphaTest>0,ce=!!a.extensions,he=!!A.attributes.uv2;return{isWebGL2:c,shaderID:w,shaderName:a.type,vertexShader:E,fragmentShader:S,defines:a.defines,customVertexShaderID:M,customFragmentShaderID:C,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:f,instancing:L,instancingColor:L&&null!==g.instanceColor,supportsVertexTextures:d,outputEncoding:null===R?e.outputEncoding:!0===R.isXRRenderTarget?R.texture.encoding:lh,map:P,matcap:D,envMap:O,envMapMode:O&&b.mapping,envMapCubeUVHeight:_,aoMap:F,lightMap:N,bumpMap:U,normalMap:Z,displacementMap:d&&z,emissiveMap:H,normalMapObjectSpace:Z&&a.normalMapType===fh,normalMapTangentSpace:Z&&a.normalMapType===dh,decodeVideoTexture:P&&!0===a.map.isVideoTexture&&a.map.encoding===uh,metalnessMap:G,roughnessMap:Q,clearcoat:V,clearcoatMap:J,clearcoatNormalMap:X,clearcoatRoughnessMap:Y,iridescence:j,iridescenceMap:K,iridescenceThicknessMap:$,sheen:W,sheenColorMap:ee,sheenRoughnessMap:te,specularMap:ne,specularColorMap:re,specularIntensityMap:ie,transmission:q,transmissionMap:ae,thicknessMap:oe,gradientMap:se,opaque:!1===a.transparent&&a.blending===Wl,alphaMap:le,alphaTest:ue,combine:a.combine,mapUv:P&&v(a.map.channel),aoMapUv:F&&v(a.aoMap.channel),lightMapUv:N&&v(a.lightMap.channel),bumpMapUv:U&&v(a.bumpMap.channel),normalMapUv:Z&&v(a.normalMap.channel),displacementMapUv:z&&v(a.displacementMap.channel),emissiveMapUv:H&&v(a.emissiveMap.channel),metalnessMapUv:G&&v(a.metalnessMap.channel),roughnessMapUv:Q&&v(a.roughnessMap.channel),clearcoatMapUv:J&&v(a.clearcoatMap.channel),clearcoatNormalMapUv:X&&v(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Y&&v(a.clearcoatRoughnessMap.channel),iridescenceMapUv:K&&v(a.iridescenceMap.channel),iridescenceThicknessMapUv:$&&v(a.iridescenceThicknessMap.channel),sheenColorMapUv:ee&&v(a.sheenColorMap.channel),sheenRoughnessMapUv:te&&v(a.sheenRoughnessMap.channel),specularMapUv:ne&&v(a.specularMap.channel),specularColorMapUv:re&&v(a.specularColorMap.channel),specularIntensityMapUv:ie&&v(a.specularIntensityMap.channel),transmissionMapUv:ae&&v(a.transmissionMap.channel),thicknessMapUv:oe&&v(a.thicknessMap.channel),alphaMapUv:le&&v(a.alphaMap.channel),vertexTangents:Z&&!!A.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!A.attributes.color&&4===A.attributes.color.itemSize,vertexUvs2:he,pointsUvs:!0===g.isPoints&&!!A.attributes.uv&&(P||le),fog:!!y,useFog:!0===a.fog,fogExp2:y&&y.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===g.isSkinnedMesh,morphTargets:void 0!==A.morphAttributes.position,morphNormals:void 0!==A.morphAttributes.normal,morphColors:void 0!==A.morphAttributes.color,morphTargetsCount:T,morphTextureStride:I,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:Su,useLegacyLights:e.useLegacyLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===Ql,flipSided:a.side===Gl,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:ce&&!0===a.extensions.derivatives,extensionFragDepth:ce&&!0===a.extensions.fragDepth,extensionDrawBuffers:ce&&!0===a.extensions.drawBuffers,extensionShaderTextureLOD:ce&&!0===a.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0);t.supportsVertexTextures&&s.enable(1);t.instancing&&s.enable(2);t.instancingColor&&s.enable(3);t.matcap&&s.enable(4);t.envMap&&s.enable(5);t.normalMapObjectSpace&&s.enable(6);t.normalMapTangentSpace&&s.enable(7);t.clearcoat&&s.enable(8);t.iridescence&&s.enable(9);t.alphaTest&&s.enable(10);t.vertexColors&&s.enable(11);t.vertexAlphas&&s.enable(12);t.vertexUvs2&&s.enable(13);t.vertexTangents&&s.enable(14);e.push(s.mask),s.disableAll(),t.fog&&s.enable(0);t.useFog&&s.enable(1);t.flatShading&&s.enable(2);t.logarithmicDepthBuffer&&s.enable(3);t.skinning&&s.enable(4);t.morphTargets&&s.enable(5);t.morphNormals&&s.enable(6);t.morphColors&&s.enable(7);t.premultipliedAlpha&&s.enable(8);t.shadowMapEnabled&&s.enable(9);t.useLegacyLights&&s.enable(10);t.doubleSided&&s.enable(11);t.flipSided&&s.enable(12);t.useDepthPacking&&s.enable(13);t.dithering&&s.enable(14);t.transmission&&s.enable(15);t.sheen&&s.enable(16);t.decodeVideoTexture&&s.enable(17);t.opaque&&s.enable(18);t.pointsUvs&&s.enable(19);e.push(s.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=p[e.type];if(n){var r=xv[n];t=ev.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,i=0,o=u.length;i<o;i++){var s=u[i];if(s.cacheKey===n){++(r=s).usedTimes;break}}return void 0===r&&(r=new mg(e,n,t,a),u.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){var t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function bg(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function _g(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function wg(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Eg(){var e=[],t=0,n=[],r=[],i=[];function a(n,r,i,a,o,s){var l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,s,l,u){var c=a(e,t,o,s,l,u);o.transmission>0?r.push(c):!0===o.transparent?i.push(c):n.push(c)},unshift:function(e,t,o,s,l,u){var c=a(e,t,o,s,l,u);o.transmission>0?r.unshift(c):!0===o.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(var n=t,r=e.length;n<r;n++){var i=e[n];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.group=null}},sort:function(e,t){n.length>1&&n.sort(e||_g),r.length>1&&r.sort(t||wg),i.length>1&&i.sort(t||wg)}}}function Sg(){var e=new WeakMap;return{get:function(t,n){var r,i=e.get(t);return void 0===i?(r=new Eg,e.set(t,[r])):n>=i.length?(r=new Eg,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function Mg(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Dd,color:new np};break;case"SpotLight":n={position:new Dd,direction:new Dd,color:new np,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Dd,color:new np,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Dd,skyColor:new np,groundColor:new np};break;case"RectAreaLight":n={color:new np,position:new Dd,halfWidth:new Dd,halfHeight:new Dd}}return e[t.id]=n,n}}}var Cg=0;function kg(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Tg(e,t){for(var n=new Mg,r=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sd};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sd,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0},a=0;a<9;a++)i.probe.push(new Dd);var o=new Dd,s=new df,l=new df;return{setup:function(a,o){for(var s=0,l=0,u=0,c=0;c<9;c++)i.probe[c].set(0,0,0);var h=0,d=0,f=0,p=0,v=0,m=0,g=0,y=0,A=0,x=0;a.sort(kg);for(var b=!0===o?Math.PI:1,_=0,w=a.length;_<w;_++){var E=a[_],S=E.color,M=E.intensity,C=E.distance,k=E.shadow&&E.shadow.map?E.shadow.map.texture:null;if(E.isAmbientLight)s+=S.r*M*b,l+=S.g*M*b,u+=S.b*M*b;else if(E.isLightProbe)for(var T=0;T<9;T++)i.probe[T].addScaledVector(E.sh.coefficients[T],M);else if(E.isDirectionalLight){var I=n.get(E);if(I.color.copy(E.color).multiplyScalar(E.intensity*b),E.castShadow){var B=E.shadow,R=r.get(E);R.shadowBias=B.bias,R.shadowNormalBias=B.normalBias,R.shadowRadius=B.radius,R.shadowMapSize=B.mapSize,i.directionalShadow[h]=R,i.directionalShadowMap[h]=k,i.directionalShadowMatrix[h]=E.shadow.matrix,m++}i.directional[h]=I,h++}else if(E.isSpotLight){var L=n.get(E);L.position.setFromMatrixPosition(E.matrixWorld),L.color.copy(S).multiplyScalar(M*b),L.distance=C,L.coneCos=Math.cos(E.angle),L.penumbraCos=Math.cos(E.angle*(1-E.penumbra)),L.decay=E.decay,i.spot[f]=L;var P=E.shadow;if(E.map&&(i.spotLightMap[A]=E.map,A++,P.updateMatrices(E),E.castShadow&&x++),i.spotLightMatrix[f]=P.matrix,E.castShadow){var D=r.get(E);D.shadowBias=P.bias,D.shadowNormalBias=P.normalBias,D.shadowRadius=P.radius,D.shadowMapSize=P.mapSize,i.spotShadow[f]=D,i.spotShadowMap[f]=k,y++}f++}else if(E.isRectAreaLight){var O=n.get(E);O.color.copy(S).multiplyScalar(M),O.halfWidth.set(.5*E.width,0,0),O.halfHeight.set(0,.5*E.height,0),i.rectArea[p]=O,p++}else if(E.isPointLight){var F=n.get(E);if(F.color.copy(E.color).multiplyScalar(E.intensity*b),F.distance=E.distance,F.decay=E.decay,E.castShadow){var N=E.shadow,U=r.get(E);U.shadowBias=N.bias,U.shadowNormalBias=N.normalBias,U.shadowRadius=N.radius,U.shadowMapSize=N.mapSize,U.shadowCameraNear=N.camera.near,U.shadowCameraFar=N.camera.far,i.pointShadow[d]=U,i.pointShadowMap[d]=k,i.pointShadowMatrix[d]=E.shadow.matrix,g++}i.point[d]=F,d++}else if(E.isHemisphereLight){var Z=n.get(E);Z.skyColor.copy(E.color).multiplyScalar(M*b),Z.groundColor.copy(E.groundColor).multiplyScalar(M*b),i.hemi[v]=Z,v++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Av.LTC_FLOAT_1,i.rectAreaLTC2=Av.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Av.LTC_HALF_1,i.rectAreaLTC2=Av.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=u;var z=i.hash;z.directionalLength===h&&z.pointLength===d&&z.spotLength===f&&z.rectAreaLength===p&&z.hemiLength===v&&z.numDirectionalShadows===m&&z.numPointShadows===g&&z.numSpotShadows===y&&z.numSpotMaps===A||(i.directional.length=h,i.spot.length=f,i.rectArea.length=p,i.point.length=d,i.hemi.length=v,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=y+A-x,i.spotLightMap.length=A,i.numSpotLightShadowsWithMaps=x,z.directionalLength=h,z.pointLength=d,z.spotLength=f,z.rectAreaLength=p,z.hemiLength=v,z.numDirectionalShadows=m,z.numPointShadows=g,z.numSpotShadows=y,z.numSpotMaps=A,i.version=Cg++)},setupView:function(e,t){for(var n=0,r=0,a=0,u=0,c=0,h=t.matrixWorldInverse,d=0,f=e.length;d<f;d++){var p=e[d];if(p.isDirectionalLight){var v=i.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(o),v.direction.transformDirection(h),n++}else if(p.isSpotLight){var m=i.spot[a];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(h),m.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(o),m.direction.transformDirection(h),a++}else if(p.isRectAreaLight){var g=i.rectArea[u];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(h),l.identity(),s.copy(p.matrixWorld),s.premultiply(h),l.extractRotation(s),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(l),g.halfHeight.applyMatrix4(l),u++}else if(p.isPointLight){var y=i.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(h),r++}else if(p.isHemisphereLight){var A=i.hemi[c];A.direction.setFromMatrixPosition(p.matrixWorld),A.direction.transformDirection(h),c++}}},state:i}}function Ig(e,t){var n=new Tg(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function Bg(e,t){var n=new WeakMap;return{get:function(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=n.get(r);return void 0===o?(i=new Ig(e,t),n.set(r,[i])):a>=o.length?(i=new Ig(e,t),o.push(i)):i=o[a],i},dispose:function(){n=new WeakMap}}}var Rg=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).isMeshDepthMaterial=!0,r.type="MeshDepthMaterial",r.depthPacking=ch,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.setValues(e),r}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(Yf),Lg=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).isMeshDistanceMaterial=!0,r.type="MeshDistanceMaterial",r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.setValues(e),r}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(Yf);function Pg(e,t,n){var r,i=new pv,a=new sd,o=new sd,s=new Cd,l=new Rg({depthPacking:hh}),u=new Lg,c={},h=n.maxTextureSize,d=(r={},(0,L.Z)(r,Hl,Gl),(0,L.Z)(r,Gl,Hl),(0,L.Z)(r,Ql,Ql),r),f=new tv({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new sd},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=f.clone();p.defines.HORIZONTAL_PASS=1;var v=new Ip;v.setAttribute("position",new dp(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var m=new qp(v,f),g=this;function y(n,r){var i=t.update(m);f.defines.VSM_SAMPLES!==n.blurSamples&&(f.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,f.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new kd(a.x,a.y)),f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,f,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,p,m,null)}function A(t,n,r,i){var a=null,o=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==o)a=o;else if(a=!0===r.isPointLight?u:l,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){var s=a.uuid,h=n.uuid,f=c[s];void 0===f&&(f={},c[s]=f);var p=f[h];void 0===p&&(p=a.clone(),f[h]=p),a=p}(a.visible=n.visible,a.wireframe=n.wireframe,a.side=i===zl?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===r.isPointLight&&!0===a.isMeshDistanceMaterial)&&(e.properties.get(a).light=r);return a}function x(n,r,a,o,s){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===zl)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var l=t.update(n),u=n.material;if(Array.isArray(u))for(var c=l.groups,h=0,d=c.length;h<d;h++){var f=c[h],p=u[f.materialIndex];if(p&&p.visible){var v=A(n,p,o,s);e.renderBufferDirect(a,null,l,v,n,f)}}else if(u.visible){var m=A(n,u,o,s);e.renderBufferDirect(a,null,l,m,n,null)}}for(var g=n.children,y=0,b=g.length;y<b;y++)x(g[y],r,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ul,this.render=function(t,n,r){if(!1!==g.enabled&&(!1!==g.autoUpdate||!1!==g.needsUpdate)&&0!==t.length){var l=e.getRenderTarget(),u=e.getActiveCubeFace(),c=e.getActiveMipmapLevel(),d=e.state;d.setBlending(jl),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var f=0,p=t.length;f<p;f++){var v=t[f],m=v.shadow;if(void 0!==m){if(!1!==m.autoUpdate||!1!==m.needsUpdate){a.copy(m.mapSize);var A=m.getFrameExtents();if(a.multiply(A),o.copy(m.mapSize),(a.x>h||a.y>h)&&(a.x>h&&(o.x=Math.floor(h/A.x),a.x=o.x*A.x,m.mapSize.x=o.x),a.y>h&&(o.y=Math.floor(h/A.y),a.y=o.y*A.y,m.mapSize.y=o.y)),null===m.map){var b=this.type!==zl?{minFilter:Zu,magFilter:Zu}:{};m.map=new kd(a.x,a.y,b),m.map.texture.name=v.name+".shadowMap",m.camera.updateProjectionMatrix()}e.setRenderTarget(m.map),e.clear();for(var _=m.getViewportCount(),w=0;w<_;w++){var E=m.getViewport(w);s.set(o.x*E.x,o.y*E.y,o.x*E.z,o.y*E.w),d.viewport(s),m.updateMatrices(v,w),i=m.getFrustum(),x(n,r,m.camera,v,this.type)}!0!==m.isPointLightShadow&&this.type===zl&&y(m,r),m.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}g.needsUpdate=!1,e.setRenderTarget(l,u,c)}}}function Dg(e,t,n){var r,i,a=n.isWebGL2;var o=new function(){var t=!1,n=new Cd,r=null,i=new Cd(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?G(2929):Q(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case pu:e.depthFunc(512);break;case vu:e.depthFunc(519);break;case mu:e.depthFunc(513);break;case gu:e.depthFunc(515);break;case yu:e.depthFunc(514);break;case Au:e.depthFunc(518);break;case xu:e.depthFunc(516);break;case bu:e.depthFunc(517);break;default:e.depthFunc(515)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},l=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(e){t||(e?G(2960):Q(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&l===r||(e.stencilOp(t,n,r),o=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null}}},u=new WeakMap,c=new WeakMap,h={},d={},f=new WeakMap,p=[],v=null,m=!1,g=null,y=null,A=null,x=null,b=null,_=null,w=null,E=!1,S=null,M=null,C=null,k=null,T=null,I=e.getParameter(35661),B=!1,R=0,P=e.getParameter(7938);-1!==P.indexOf("WebGL")?(R=parseFloat(/^WebGL (\d)/.exec(P)[1]),B=R>=1):-1!==P.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL ES (\d)/.exec(P)[1]),B=R>=2);var D=null,O={},F=e.getParameter(3088),N=e.getParameter(2978),U=(new Cd).fromArray(F),Z=(new Cd).fromArray(N);function z(t,n,r){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return a}var H={};function G(t){!0!==h[t]&&(e.enable(t),h[t]=!0)}function Q(t){!1!==h[t]&&(e.disable(t),h[t]=!1)}H[3553]=z(3553,3553,1),H[34067]=z(34067,34069,6),o.setClear(0,0,0,1),s.setClear(1),l.setClear(0),G(2929),s.setFunc(gu),J(!1),X(Dl),G(2884),q(jl);var V=(r={},(0,L.Z)(r,Kl,32774),(0,L.Z)(r,$l,32778),(0,L.Z)(r,eu,32779),r);if(a)V[tu]=32775,V[nu]=32776;else{var j=t.get("EXT_blend_minmax");null!==j&&(V[tu]=j.MIN_EXT,V[nu]=j.MAX_EXT)}var W=(i={},(0,L.Z)(i,ru,0),(0,L.Z)(i,iu,1),(0,L.Z)(i,au,768),(0,L.Z)(i,su,770),(0,L.Z)(i,fu,776),(0,L.Z)(i,hu,774),(0,L.Z)(i,uu,772),(0,L.Z)(i,ou,769),(0,L.Z)(i,lu,771),(0,L.Z)(i,du,775),(0,L.Z)(i,cu,773),i);function q(t,n,r,i,a,o,s,l){if(t!==jl){if(!1===m&&(G(3042),m=!0),t===Yl)a=a||n,o=o||r,s=s||i,n===y&&a===b||(e.blendEquationSeparate(V[n],V[a]),y=n,b=a),r===A&&i===x&&o===_&&s===w||(e.blendFuncSeparate(W[r],W[i],W[o],W[s]),A=r,x=i,_=o,w=s),g=t,E=!1;else if(t!==g||l!==E){if(y===Kl&&b===Kl||(e.blendEquation(32774),y=Kl,b=Kl),l)switch(t){case Wl:e.blendFuncSeparate(1,771,1,771);break;case ql:e.blendFunc(1,1);break;case Jl:e.blendFuncSeparate(0,769,0,1);break;case Xl:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case Wl:e.blendFuncSeparate(770,771,1,771);break;case ql:e.blendFunc(770,1);break;case Jl:e.blendFuncSeparate(0,769,0,1);break;case Xl:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}A=null,x=null,_=null,w=null,g=t,E=l}}else!0===m&&(Q(3042),m=!1)}function J(t){S!==t&&(t?e.frontFace(2304):e.frontFace(2305),S=t)}function X(t){t!==Pl?(G(2884),t!==M&&(t===Dl?e.cullFace(1029):t===Ol?e.cullFace(1028):e.cullFace(1032))):Q(2884),M=t}function Y(t,n,r){t?(G(32823),k===n&&T===r||(e.polygonOffset(n,r),k=n,T=r)):Q(32823)}return{buffers:{color:o,depth:s,stencil:l},enable:G,disable:Q,bindFramebuffer:function(t,n){return d[t]!==n&&(e.bindFramebuffer(t,n),d[t]=n,a&&(36009===t&&(d[36160]=n),36160===t&&(d[36009]=n)),!0)},drawBuffers:function(r,i){var a=p,o=!1;if(r)if(void 0===(a=f.get(i))&&(a=[],f.set(i,a)),r.isWebGLMultipleRenderTargets){var s=r.texture;if(a.length!==s.length||36064!==a[0]){for(var l=0,u=s.length;l<u;l++)a[l]=36064+l;a.length=s.length,o=!0}}else 36064!==a[0]&&(a[0]=36064,o=!0);else 1029!==a[0]&&(a[0]=1029,o=!0);o&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return v!==t&&(e.useProgram(t),v=t,!0)},setBlending:q,setMaterial:function(e,t){e.side===Ql?Q(2884):G(2884);var n=e.side===Gl;t&&(n=!n),J(n),e.blending===Wl&&!1===e.transparent?q(jl):q(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),o.setMask(e.colorWrite);var r=e.stencilWrite;l.setTest(r),r&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Y(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?G(32926):Q(32926)},setFlipSided:J,setCullFace:X,setLineWidth:function(t){t!==C&&(B&&e.lineWidth(t),C=t)},setPolygonOffset:Y,setScissorTest:function(e){e?G(3089):Q(3089)},activeTexture:function(t){void 0===t&&(t=33984+I-1),D!==t&&(e.activeTexture(t),D=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===D?33984+I-1:D);var i=O[r];void 0===i&&(i={type:void 0,texture:void 0},O[r]=i),i.type===t&&i.texture===n||(D!==r&&(e.activeTexture(r),D=r),e.bindTexture(t,n||H[t]),i.type=t,i.texture=n)},unbindTexture:function(){var t=O[D];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){var r=c.get(n);void 0===r&&(r=new WeakMap,c.set(n,r));var i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){var r=c.get(n).get(t);u.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),u.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===U.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),U.copy(t))},viewport:function(t){!1===Z.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),Z.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===a&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),h={},D=null,O={},d={},f=new WeakMap,p=[],v=null,m=!1,g=null,y=null,A=null,x=null,b=null,_=null,w=null,E=!1,S=null,M=null,C=null,k=null,T=null,U.set(0,0,e.canvas.width,e.canvas.height),Z.set(0,0,e.canvas.width,e.canvas.height),o.reset(),s.reset(),l.reset()}}}function Og(e,t,n,r,i,a,o){var s,l,u,c=i.isWebGL2,h=i.maxTextures,d=i.maxCubemapSize,f=i.maxTextureSize,p=i.maxSamples,v=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,m="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap,y=new WeakMap,A=!1;try{A="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(V){}function x(e,t){return A?new OffscreenCanvas(e,t):fd("canvas")}function b(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?rd:Math.floor,o=a(i*e.width),s=a(i*e.height);void 0===u&&(u=x(o,s));var l=n?x(o,s):u;return l.width=o,l.height=s,l.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function _(e){return td(e.width)&&td(e.height)}function w(e,t){return e.generateMipmaps&&t&&e.minFilter!==Zu&&e.minFilter!==Vu}function E(t){e.generateMipmap(t)}function S(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===c)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=r;return 6403===r&&(5126===i&&(s=33326),5131===i&&(s=33325),5121===i&&(s=33321)),33319===r&&(5126===i&&(s=33328),5131===i&&(s=33327),5121===i&&(s=33323)),6408===r&&(5126===i&&(s=34836),5131===i&&(s=34842),5121===i&&(s=a===uh&&!1===o?35907:32856),32819===i&&(s=32854),32820===i&&(s=32855)),33325!==s&&33326!==s&&33327!==s&&33328!==s&&34842!==s&&34836!==s||t.get("EXT_color_buffer_float"),s}function M(e,t,n){return!0===w(e,n)||e.isFramebufferTexture&&e.minFilter!==Zu&&e.minFilter!==Vu?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function C(e){return e===Zu||e===zu||e===Gu?9728:9729}function k(e){var t=e.target;t.removeEventListener("dispose",k),function(e){var t=r.get(e);if(void 0===t.__webglInit)return;var n=e.source,i=y.get(n);if(i){var a=i[t.__cacheKey];a.usedTimes--,0===a.usedTimes&&I(e),0===Object.keys(i).length&&y.delete(n)}r.remove(e)}(t),t.isVideoTexture&&g.delete(t)}function T(t){var n=t.target;n.removeEventListener("dispose",T),function(t){var n=t.texture,i=r.get(t),a=r.get(n);void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(i.__webglFramebuffer[s]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[s]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(var l=0;l<i.__webglColorRenderbuffer.length;l++)i.__webglColorRenderbuffer[l]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[l]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(var u=0,c=n.length;u<c;u++){var h=r.get(n[u]);h.__webglTexture&&(e.deleteTexture(h.__webglTexture),o.memory.textures--),r.remove(n[u])}r.remove(n),r.remove(t)}(n)}function I(t){var n=r.get(t);e.deleteTexture(n.__webglTexture);var i=t.source;delete y.get(i)[n.__cacheKey],o.memory.textures--}var B=0;function R(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;g.get(e)!==t&&(g.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&i.__version!==e.version){var a=e.image;if(null===a)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==a.complete)return void N(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,i.__webglTexture,33984+t)}var P=(s={},(0,L.Z)(s,Fu,10497),(0,L.Z)(s,Nu,33071),(0,L.Z)(s,Uu,33648),s),D=(l={},(0,L.Z)(l,Zu,9728),(0,L.Z)(l,zu,9984),(0,L.Z)(l,Gu,9986),(0,L.Z)(l,Vu,9729),(0,L.Z)(l,ju,9985),(0,L.Z)(l,qu,9987),l);function O(n,a,o){if(o?(e.texParameteri(n,10242,P[a.wrapS]),e.texParameteri(n,10243,P[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,P[a.wrapR]),e.texParameteri(n,10240,D[a.magFilter]),e.texParameteri(n,10241,D[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===Nu&&a.wrapT===Nu||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,C(a.magFilter)),e.texParameteri(n,10241,C(a.minFilter)),a.minFilter!==Zu&&a.minFilter!==Vu&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(a.magFilter===Zu)return;if(a.minFilter!==Gu&&a.minFilter!==qu)return;if(a.type===nc&&!1===t.has("OES_texture_float_linear"))return;if(!1===c&&a.type===rc&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function F(t,n){var r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",k));var i=n.source,a=y.get(i);void 0===a&&(a={},y.set(i,a));var s=function(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),a[s].usedTimes++;var l=a[t.__cacheKey];void 0!==l&&(a[t.__cacheKey].usedTimes--,0===l.usedTimes&&I(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return r}function N(t,i,o){var s=3553;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(s=35866),i.isData3DTexture&&(s=32879);var l=F(t,i),u=i.source;n.bindTexture(s,t.__webglTexture,33984+o);var h=r.get(u);if(u.version!==h.__version||!0===l){n.activeTexture(33984+o),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);var d,p=function(e){return!c&&(e.wrapS!==Nu||e.wrapT!==Nu||e.minFilter!==Zu&&e.minFilter!==Vu)}(i)&&!1===_(i.image),v=b(i.image,p,!1,f),m=_(v=Q(i,v))||c,g=a.convert(i.format,i.encoding),y=a.convert(i.type),A=S(i.internalFormat,g,y,i.encoding,i.isVideoTexture);O(s,i,m);var x=i.mipmaps,C=c&&!0!==i.isVideoTexture,k=void 0===h.__version||!0===l,T=M(i,v,m);if(i.isDepthTexture)A=6402,c?A=i.type===nc?36012:i.type===tc?33190:i.type===oc?35056:33189:i.type===nc&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===hc&&6402===A&&i.type!==$u&&i.type!==tc&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=tc,y=a.convert(i.type)),i.format===dc&&6402===A&&(A=34041,i.type!==oc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=oc,y=a.convert(i.type))),k&&(C?n.texStorage2D(3553,1,A,v.width,v.height):n.texImage2D(3553,0,A,v.width,v.height,0,g,y,null));else if(i.isDataTexture)if(x.length>0&&m){C&&k&&n.texStorage2D(3553,T,A,x[0].width,x[0].height);for(var I=0,B=x.length;I<B;I++)d=x[I],C?n.texSubImage2D(3553,I,0,0,d.width,d.height,g,y,d.data):n.texImage2D(3553,I,A,d.width,d.height,0,g,y,d.data);i.generateMipmaps=!1}else C?(k&&n.texStorage2D(3553,T,A,v.width,v.height),n.texSubImage2D(3553,0,0,0,v.width,v.height,g,y,v.data)):n.texImage2D(3553,0,A,v.width,v.height,0,g,y,v.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){C&&k&&n.texStorage3D(35866,T,A,x[0].width,x[0].height,v.depth);for(var R=0,L=x.length;R<L;R++)d=x[R],i.format!==lc?null!==g?C?n.compressedTexSubImage3D(35866,R,0,0,0,d.width,d.height,v.depth,g,d.data,0,0):n.compressedTexImage3D(35866,R,A,d.width,d.height,v.depth,0,d.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage3D(35866,R,0,0,0,d.width,d.height,v.depth,g,y,d.data):n.texImage3D(35866,R,A,d.width,d.height,v.depth,0,g,y,d.data)}else{C&&k&&n.texStorage2D(3553,T,A,x[0].width,x[0].height);for(var P=0,D=x.length;P<D;P++)d=x[P],i.format!==lc?null!==g?C?n.compressedTexSubImage2D(3553,P,0,0,d.width,d.height,g,d.data):n.compressedTexImage2D(3553,P,A,d.width,d.height,0,d.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage2D(3553,P,0,0,d.width,d.height,g,y,d.data):n.texImage2D(3553,P,A,d.width,d.height,0,g,y,d.data)}else if(i.isDataArrayTexture)C?(k&&n.texStorage3D(35866,T,A,v.width,v.height,v.depth),n.texSubImage3D(35866,0,0,0,0,v.width,v.height,v.depth,g,y,v.data)):n.texImage3D(35866,0,A,v.width,v.height,v.depth,0,g,y,v.data);else if(i.isData3DTexture)C?(k&&n.texStorage3D(32879,T,A,v.width,v.height,v.depth),n.texSubImage3D(32879,0,0,0,0,v.width,v.height,v.depth,g,y,v.data)):n.texImage3D(32879,0,A,v.width,v.height,v.depth,0,g,y,v.data);else if(i.isFramebufferTexture){if(k)if(C)n.texStorage2D(3553,T,A,v.width,v.height);else for(var N=v.width,U=v.height,Z=0;Z<T;Z++)n.texImage2D(3553,Z,A,N,U,0,g,y,null),N>>=1,U>>=1}else if(x.length>0&&m){C&&k&&n.texStorage2D(3553,T,A,x[0].width,x[0].height);for(var z=0,H=x.length;z<H;z++)d=x[z],C?n.texSubImage2D(3553,z,0,0,g,y,d):n.texImage2D(3553,z,A,g,y,d);i.generateMipmaps=!1}else C?(k&&n.texStorage2D(3553,T,A,v.width,v.height),n.texSubImage2D(3553,0,0,0,g,y,v)):n.texImage2D(3553,0,A,g,y,v);w(i,m)&&E(s),h.__version=u.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function U(t,i,o,s,l){var u=a.convert(o.format,o.encoding),c=a.convert(o.type),h=S(o.internalFormat,u,c,o.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,u,c,null):n.texImage2D(l,0,h,i.width,i.height,0,u,c,null)),n.bindFramebuffer(36160,t),G(i)?v.framebufferTexture2DMultisampleEXT(36160,s,l,r.get(o).__webglTexture,0,H(i)):(3553===l||l>=34069&&l<=34074)&&e.framebufferTexture2D(36160,s,l,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function Z(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r||G(n)){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===nc?i=36012:o.type===tc&&(i=33190));var s=H(n);G(n)?v.renderbufferStorageMultisampleEXT(36161,s,i,n.width,n.height):e.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){var l=H(n);r&&!1===G(n)?e.renderbufferStorageMultisample(36161,l,35056,n.width,n.height):G(n)?v.renderbufferStorageMultisampleEXT(36161,l,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else for(var u=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture],c=0;c<u.length;c++){var h=u[c],d=a.convert(h.format,h.encoding),f=a.convert(h.type),p=S(h.internalFormat,d,f,h.encoding),m=H(n);r&&!1===G(n)?e.renderbufferStorageMultisample(36161,m,p,n.width,n.height):G(n)?v.renderbufferStorageMultisampleEXT(36161,m,p,n.width,n.height):e.renderbufferStorage(36161,p,n.width,n.height)}e.bindRenderbuffer(36161,null)}function z(t){var i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),R(i.depthTexture,0);var a=r.get(i.depthTexture).__webglTexture,o=H(i);if(i.depthTexture.format===hc)G(i)?v.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,o):e.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==dc)throw new Error("Unknown depthTexture format");G(i)?v.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,o):e.framebufferTexture2D(36160,33306,3553,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=e.createRenderbuffer(),Z(i.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),Z(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function H(e){return Math.min(p,e.samples)}function G(e){var n=r.get(e);return c&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function Q(e,n){var r=e.encoding,i=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===Vh||r!==lh&&(r===uh?!1===c?!0===t.has("EXT_sRGB")&&i===lc?(e.format=Vh,e.minFilter=Vu,e.generateMipmaps=!1):n=_d.sRGBToLinear(n):i===lc&&a===Xu||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){var e=B;return e>=h&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+h),B+=1,e},this.resetTextureUnits=function(){B=0},this.setTexture2D=R,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?N(i,e,t):n.bindTexture(35866,i.__webglTexture,33984+t)},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?N(i,e,t):n.bindTexture(32879,i.__webglTexture,33984+t)},this.setTextureCube=function(t,i){var o=r.get(t);t.version>0&&o.__version!==t.version?function(t,i,o){if(6!==i.image.length)return;var s=F(t,i),l=i.source;n.bindTexture(34067,t.__webglTexture,33984+o);var u=r.get(l);if(l.version!==u.__version||!0===s){n.activeTexture(33984+o),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);for(var h=i.isCompressedTexture||i.image[0].isCompressedTexture,f=i.image[0]&&i.image[0].isDataTexture,p=[],v=0;v<6;v++)p[v]=h||f?f?i.image[v].image:i.image[v]:b(i.image[v],!1,!0,d),p[v]=Q(i,p[v]);var m,g=p[0],y=_(g)||c,A=a.convert(i.format,i.encoding),x=a.convert(i.type),C=S(i.internalFormat,A,x,i.encoding),k=c&&!0!==i.isVideoTexture,T=void 0===u.__version||!0===s,I=M(i,g,y);if(O(34067,i,y),h){k&&T&&n.texStorage2D(34067,I,C,g.width,g.height);for(var B=0;B<6;B++){m=p[B].mipmaps;for(var R=0;R<m.length;R++){var L=m[R];i.format!==lc?null!==A?k?n.compressedTexSubImage2D(34069+B,R,0,0,L.width,L.height,A,L.data):n.compressedTexImage2D(34069+B,R,C,L.width,L.height,0,L.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):k?n.texSubImage2D(34069+B,R,0,0,L.width,L.height,A,x,L.data):n.texImage2D(34069+B,R,C,L.width,L.height,0,A,x,L.data)}}}else{m=i.mipmaps,k&&T&&(m.length>0&&I++,n.texStorage2D(34067,I,C,p[0].width,p[0].height));for(var P=0;P<6;P++)if(f){k?n.texSubImage2D(34069+P,0,0,0,p[P].width,p[P].height,A,x,p[P].data):n.texImage2D(34069+P,0,C,p[P].width,p[P].height,0,A,x,p[P].data);for(var D=0;D<m.length;D++){var N=m[D].image[P].image;k?n.texSubImage2D(34069+P,D+1,0,0,N.width,N.height,A,x,N.data):n.texImage2D(34069+P,D+1,C,N.width,N.height,0,A,x,N.data)}}else{k?n.texSubImage2D(34069+P,0,0,0,A,x,p[P]):n.texImage2D(34069+P,0,C,A,x,p[P]);for(var U=0;U<m.length;U++){var Z=m[U];k?n.texSubImage2D(34069+P,U+1,0,0,A,x,Z.image[P]):n.texImage2D(34069+P,U+1,C,A,x,Z.image[P])}}}w(i,y)&&E(34067),u.__version=l.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}(o,t,i):n.bindTexture(34067,o.__webglTexture,33984+i)},this.rebindTextures=function(e,t,n){var i=r.get(e);void 0!==t&&U(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&z(e)},this.setupRenderTarget=function(t){var s=t.texture,l=r.get(t),u=r.get(s);t.addEventListener("dispose",T),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=s.version,o.memory.textures++);var h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,f=_(t)||c;if(h){l.__webglFramebuffer=[];for(var p=0;p<6;p++)l.__webglFramebuffer[p]=e.createFramebuffer()}else{if(l.__webglFramebuffer=e.createFramebuffer(),d)if(i.drawBuffers)for(var v=t.texture,m=0,g=v.length;m<g;m++){var y=r.get(v[m]);void 0===y.__webglTexture&&(y.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(c&&t.samples>0&&!1===G(t)){var A=d?s:[s];l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer);for(var x=0;x<A.length;x++){var b=A[x];l.__webglColorRenderbuffer[x]=e.createRenderbuffer(),e.bindRenderbuffer(36161,l.__webglColorRenderbuffer[x]);var M=a.convert(b.format,b.encoding),C=a.convert(b.type),k=S(b.internalFormat,M,C,b.encoding,!0===t.isXRRenderTarget),I=H(t);e.renderbufferStorageMultisample(36161,I,k,t.width,t.height),e.framebufferRenderbuffer(36160,36064+x,36161,l.__webglColorRenderbuffer[x])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),Z(l.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,u.__webglTexture),O(34067,s,f);for(var B=0;B<6;B++)U(l.__webglFramebuffer[B],t,s,36064,34069+B);w(s,f)&&E(34067),n.unbindTexture()}else if(d){for(var R=t.texture,L=0,P=R.length;L<P;L++){var D=R[L],F=r.get(D);n.bindTexture(3553,F.__webglTexture),O(3553,D,f),U(l.__webglFramebuffer,t,D,36064+L,3553),w(D,f)&&E(3553)}n.unbindTexture()}else{var N=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(c?N=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(N,u.__webglTexture),O(N,s,f),U(l.__webglFramebuffer,t,s,36064,N),w(s,f)&&E(N),n.unbindTexture()}t.depthBuffer&&z(t)},this.updateRenderTargetMipmap=function(e){for(var t=_(e)||c,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=0,o=i.length;a<o;a++){var s=i[a];if(w(s,t)){var l=e.isWebGLCubeRenderTarget?34067:3553,u=r.get(s).__webglTexture;n.bindTexture(l,u),E(l),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(c&&t.samples>0&&!1===G(t)){var i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,o=t.height,s=16384,l=[],u=t.stencilBuffer?33306:36096,h=r.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(var f=0;f<i.length;f++)n.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+f,36161,null),n.bindFramebuffer(36160,h.__webglFramebuffer),e.framebufferTexture2D(36009,36064+f,3553,null,0);n.bindFramebuffer(36008,h.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,h.__webglFramebuffer);for(var p=0;p<i.length;p++){l.push(36064+p),t.depthBuffer&&l.push(u);var v=void 0!==h.__ignoreDepthValues&&h.__ignoreDepthValues;if(!1===v&&(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024)),d&&e.framebufferRenderbuffer(36008,36064,36161,h.__webglColorRenderbuffer[p]),!0===v&&(e.invalidateFramebuffer(36008,[u]),e.invalidateFramebuffer(36009,[u])),d){var g=r.get(i[p]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,g,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,9728),m&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),d)for(var y=0;y<i.length;y++){n.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+y,36161,h.__webglColorRenderbuffer[y]);var A=r.get(i[y]).__webglTexture;n.bindFramebuffer(36160,h.__webglFramebuffer),e.framebufferTexture2D(36009,36064+y,3553,A,0)}n.bindFramebuffer(36009,h.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=z,this.setupFrameBufferTexture=U,this.useMultisampledRTT=G}function Fg(e,t,n){var r=n.isWebGL2;return{convert:function(n){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n===Xu)return 5121;if(n===ic)return 32819;if(n===ac)return 32820;if(n===Yu)return 5120;if(n===Ku)return 5122;if(n===$u)return 5123;if(n===ec)return 5124;if(n===tc)return 5125;if(n===nc)return 5126;if(n===rc)return r?5131:null!==(i=t.get("OES_texture_half_float"))?i.HALF_FLOAT_OES:null;if(n===sc)return 6406;if(n===lc)return 6408;if(n===uc)return 6409;if(n===cc)return 6410;if(n===hc)return 6402;if(n===dc)return 34041;if(n===Vh)return null!==(i=t.get("EXT_sRGB"))?i.SRGB_ALPHA_EXT:null;if(n===fc)return 6403;if(n===pc)return 36244;if(n===vc)return 33319;if(n===mc)return 33320;if(n===gc)return 36249;if(n===yc||n===Ac||n===xc||n===bc)if(a===uh){if(null===(i=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===yc)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Ac)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===xc)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===bc)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(i=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===yc)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ac)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===xc)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===bc)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===_c||n===wc||n===Ec||n===Sc){if(null===(i=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===_c)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===wc)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Ec)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Sc)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Mc)return null!==(i=t.get("WEBGL_compressed_texture_etc1"))?i.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===Cc||n===kc){if(null===(i=t.get("WEBGL_compressed_texture_etc")))return null;if(n===Cc)return a===uh?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(n===kc)return a===uh?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(n===Tc||n===Ic||n===Bc||n===Rc||n===Lc||n===Pc||n===Dc||n===Oc||n===Fc||n===Nc||n===Uc||n===Zc||n===zc||n===Hc){if(null===(i=t.get("WEBGL_compressed_texture_astc")))return null;if(n===Tc)return a===uh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Ic)return a===uh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Bc)return a===uh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Rc)return a===uh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Lc)return a===uh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Pc)return a===uh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Dc)return a===uh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Oc)return a===uh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Fc)return a===uh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Nc)return a===uh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Uc)return a===uh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Zc)return a===uh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===zc)return a===uh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Hc)return a===uh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Gc){if(null===(i=t.get("EXT_texture_compression_bptc")))return null;if(n===Gc)return a===uh?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===Qc||n===Vc||n===jc||n===Wc){if(null===(i=t.get("EXT_texture_compression_rgtc")))return null;if(n===Gc)return i.COMPRESSED_RED_RGTC1_EXT;if(n===Vc)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===jc)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Wc)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===oc?r?34042:null!==(i=t.get("WEBGL_depth_texture"))?i.UNSIGNED_INT_24_8_WEBGL:null:void 0!==e[n]?e[n]:null}}}var Ng=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,u.Z)(this,n),(e=t.call(this)).isArrayCamera=!0,e.cameras=r,e}return(0,c.Z)(n)}(rv),Ug=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).isGroup=!0,e.type="Group",e}return(0,c.Z)(n)}(Ff),Zg={type:"move"},zg=function(){function e(){(0,u.Z)(this,e),this._targetRay=null,this._grip=null,this._hand=null}return(0,c.Z)(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new Ug,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new Ug,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Dd,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Dd),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new Ug,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Dd,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Dd),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"connect",value:function(e){if(e&&e.hand){var t=this._hand;if(t){var n,r=(0,Ms.Z)(e.hand.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this._getHandJoint(t,i)}}catch(a){r.e(a)}finally{r.f()}}}return this.dispatchEvent({type:"connected",data:e}),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,i=null,a=null,o=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;var u,c=(0,Ms.Z)(e.hand.values());try{for(c.s();!(u=c.n()).done;){var h=u.value,d=t.getJointPose(h,n),f=this._getHandJoint(l,h);null!==d&&(f.matrix.fromArray(d.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.jointRadius=d.radius),f.visible=null!==d}}catch(g){c.e(g)}finally{c.f()}var p=l.joints["index-finger-tip"],v=l.joints["thumb-tip"],m=p.position.distanceTo(v.position);l.inputState.pinching&&m>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&m<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1);null!==o&&(null===(r=t.getPose(e.targetRaySpace,n))&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Zg)))}return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==a),this}},{key:"_getHandJoint",value:function(e,t){if(void 0===e.joints[t.jointName]){var n=new Ug;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}]),e}(),Hg=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a,o,s,l,c,h,d){var f;if((0,u.Z)(this,n),(d=void 0!==d?d:hc)!==hc&&d!==dc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&d===hc&&(i=tc),void 0===i&&d===dc&&(i=oc),(f=t.call(this,null,a,o,s,l,c,d,i,h)).isDepthTexture=!0,f.image={width:e,height:r},f.magFilter=void 0!==l?l:Zu,f.minFilter=void 0!==c?c:Zu,f.flipY=!1,f.generateMipmaps=!1,f}return(0,c.Z)(n)}(Md),Gg=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){var i;(0,u.Z)(this,n),i=t.call(this);var s=(0,Il.Z)(i),l=null,c=1,h=null,d="local-floor",f=1,p=null,v=null,m=null,g=null,y=null,A=null,x=r.getContextAttributes(),b=null,_=null,w=[],E=[],S=new Set,M=new Map,C=new rv;C.layers.enable(1),C.viewport=new Cd;var k=new rv;k.layers.enable(2),k.viewport=new Cd;var T=[C,k],I=new Ng;I.layers.enable(1),I.layers.enable(2);var B=null,R=null;function L(e){var t=E.indexOf(e.inputSource);if(-1!==t){var n=w[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}}function P(){l.removeEventListener("select",L),l.removeEventListener("selectstart",L),l.removeEventListener("selectend",L),l.removeEventListener("squeeze",L),l.removeEventListener("squeezestart",L),l.removeEventListener("squeezeend",L),l.removeEventListener("end",P),l.removeEventListener("inputsourceschange",D);for(var t=0;t<w.length;t++){var n=E[t];null!==n&&(E[t]=null,w[t].disconnect(n))}B=null,R=null,e.setRenderTarget(b),y=null,g=null,m=null,l=null,_=null,Z.stop(),s.isPresenting=!1,s.dispatchEvent({type:"sessionend"})}function D(e){for(var t=0;t<e.removed.length;t++){var n=e.removed[t],r=E.indexOf(n);r>=0&&(E[r]=null,w[r].disconnect(n))}for(var i=0;i<e.added.length;i++){var a=e.added[i],o=E.indexOf(a);if(-1===o){for(var s=0;s<w.length;s++){if(s>=E.length){E.push(a),o=s;break}if(null===E[s]){E[s]=a,o=s;break}}if(-1===o)break}var l=w[o];l&&l.connect(a)}}i.cameraAutoUpdate=!0,i.enabled=!1,i.isPresenting=!1,i.getController=function(e){var t=w[e];return void 0===t&&(t=new zg,w[e]=t),t.getTargetRaySpace()},i.getControllerGrip=function(e){var t=w[e];return void 0===t&&(t=new zg,w[e]=t),t.getGripSpace()},i.getHand=function(e){var t=w[e];return void 0===t&&(t=new zg,w[e]=t),t.getHandSpace()},i.setFramebufferScaleFactor=function(e){c=e,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},i.setReferenceSpaceType=function(e){d=e,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},i.getReferenceSpace=function(){return p||h},i.setReferenceSpace=function(e){p=e},i.getBaseLayer=function(){return null!==g?g:y},i.getBinding=function(){return m},i.getFrame=function(){return A},i.getSession=function(){return l},i.setSession=function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n){var i,o,u,v,A;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(l=n)){t.next=25;break}if(b=e.getRenderTarget(),l.addEventListener("select",L),l.addEventListener("selectstart",L),l.addEventListener("selectend",L),l.addEventListener("squeeze",L),l.addEventListener("squeezestart",L),l.addEventListener("squeezeend",L),l.addEventListener("end",P),l.addEventListener("inputsourceschange",D),!0===x.xrCompatible){t.next=14;break}return t.next=14,r.makeXRCompatible();case 14:return void 0===l.renderState.layers||!1===e.capabilities.isWebGL2?(i={antialias:void 0!==l.renderState.layers||x.antialias,alpha:x.alpha,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:c},y=new XRWebGLLayer(l,r,i),l.updateRenderState({baseLayer:y}),_=new kd(y.framebufferWidth,y.framebufferHeight,{format:lc,type:Xu,encoding:e.outputEncoding,stencilBuffer:x.stencil})):(o=null,u=null,v=null,x.depth&&(v=x.stencil?35056:33190,o=x.stencil?dc:hc,u=x.stencil?oc:tc),A={colorFormat:32856,depthFormat:v,scaleFactor:c},m=new XRWebGLBinding(l,r),g=m.createProjectionLayer(A),l.updateRenderState({layers:[g]}),_=new kd(g.textureWidth,g.textureHeight,{format:lc,type:Xu,depthTexture:new Hg(g.textureWidth,g.textureHeight,u,void 0,void 0,void 0,void 0,void 0,void 0,o),stencilBuffer:x.stencil,encoding:e.outputEncoding,samples:x.antialias?4:0}),e.properties.get(_).__ignoreDepthValues=g.ignoreDepthValues),_.isXRRenderTarget=!0,this.setFoveation(f),p=null,t.next=20,l.requestReferenceSpace(d);case 20:h=t.sent,Z.setContext(l),Z.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"});case 25:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();var O=new Dd,F=new Dd;function N(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}i.updateCamera=function(e){if(null!==l){I.near=k.near=C.near=e.near,I.far=k.far=C.far=e.far,B===I.near&&R===I.far||(l.updateRenderState({depthNear:I.near,depthFar:I.far}),B=I.near,R=I.far);var t=e.parent,n=I.cameras;N(I,t);for(var r=0;r<n.length;r++)N(n[r],t);2===n.length?function(e,t,n){O.setFromMatrixPosition(t.matrixWorld),F.setFromMatrixPosition(n.matrixWorld);var r=O.distanceTo(F),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(a[8]+1)/a[0],d=o*c,f=o*h,p=r/(-c+h),v=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var m=o+p,g=s+p,y=d-v,A=f+(r-v),x=l*s/g*m,b=u*s/g*m;e.projectionMatrix.makePerspective(y,A,x,b,m,g),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(I,C,k):I.projectionMatrix.copy(C.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0);for(var r=e.children,i=0,a=r.length;i<a;i++)r[i].updateMatrixWorld(!0);e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Xh*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,I,t)}},i.getCamera=function(){return I},i.getFoveation=function(){if(null!==g||null!==y)return f},i.setFoveation=function(e){f=e,null!==g&&(g.fixedFoveation=e),null!==y&&void 0!==y.fixedFoveation&&(y.fixedFoveation=e)},i.getPlanes=function(){return S};var U=null;var Z=new vv;return Z.setAnimationLoop((function(t,n){if(v=n.getViewerPose(p||h),A=n,null!==v){var r=v.views;null!==y&&(e.setRenderTargetFramebuffer(_,y.framebuffer),e.setRenderTarget(_));var i=!1;r.length!==I.cameras.length&&(I.cameras.length=0,i=!0);for(var a=0;a<r.length;a++){var o=r[a],l=null;if(null!==y)l=y.getViewport(o);else{var u=m.getViewSubImage(g,o);l=u.viewport,0===a&&(e.setRenderTargetTextures(_,u.colorTexture,g.ignoreDepthValues?void 0:u.depthStencilTexture),e.setRenderTarget(_))}var c=T[a];void 0===c&&((c=new rv).layers.enable(a),c.viewport=new Cd,T[a]=c),c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.quaternion,c.scale),c.projectionMatrix.fromArray(o.projectionMatrix),c.projectionMatrixInverse.copy(c.projectionMatrix).invert(),c.viewport.set(l.x,l.y,l.width,l.height),0===a&&(I.matrix.copy(c.matrix),I.matrix.decompose(I.position,I.quaternion,I.scale)),!0===i&&I.cameras.push(c)}}for(var d=0;d<w.length;d++){var f=E[d],x=w[d];null!==f&&void 0!==x&&x.update(f,n,p||h)}if(U&&U(t,n),n.detectedPlanes){s.dispatchEvent({type:"planesdetected",data:n.detectedPlanes});var b,C=null,k=(0,Ms.Z)(S);try{for(k.s();!(b=k.n()).done;){var B=b.value;n.detectedPlanes.has(B)||(null===C&&(C=[]),C.push(B))}}catch(Z){k.e(Z)}finally{k.f()}if(null!==C){var R,L=(0,Ms.Z)(C);try{for(L.s();!(R=L.n()).done;){var P=R.value;S.delete(P),M.delete(P),s.dispatchEvent({type:"planeremoved",data:P})}}catch(Z){L.e(Z)}finally{L.f()}}var D,O=(0,Ms.Z)(n.detectedPlanes);try{for(O.s();!(D=O.n()).done;){var F=D.value;if(S.has(F)){var N=M.get(F);F.lastChangedTime>N&&(M.set(F,F.lastChangedTime),s.dispatchEvent({type:"planechanged",data:F}))}else S.add(F),M.set(F,n.lastChangedTime),s.dispatchEvent({type:"planeadded",data:F})}}catch(Z){O.e(Z)}finally{O.f()}}A=null})),i.setAnimationLoop=function(e){U=e},i.dispose=function(){},i}return(0,c.Z)(n)}(jh);function Qg(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,i.side===Gl&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),i.side===Gl&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);var a=t.get(i).envMap;if(a&&(r.envMap.value=a,r.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;var o=!0===e.useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*o,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,$p(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,a,o,s){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,r){e.metalness.value=r.metalness,r.metalnessMap&&(e.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,e.metalnessMapTransform));e.roughness.value=r.roughness,r.roughnessMap&&(e.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,e.roughnessMapTransform));var i=t.get(r).envMap;i&&(e.envMapIntensity.value=r.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===Gl&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,s)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){var r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,a,o):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function Vg(e,t,n,r){var i={},a={},o=[],s=n.isWebGL2?e.getParameter(35375):0;function l(e,t,n){var r=e.value;if(void 0===n[t]){if("number"===typeof r)n[t]=r;else{for(var i=Array.isArray(r)?r:[r],a=[],o=0;o<i.length;o++)a.push(i[o].clone());n[t]=a}return!0}if("number"===typeof r){if(n[t]!==r)return n[t]=r,!0}else for(var s=Array.isArray(n[t])?n[t]:[n[t]],l=Array.isArray(r)?r:[r],u=0;u<s.length;u++){var c=s[u];if(!1===c.equals(l[u]))return c.copy(l[u]),!0}return!1}function u(e){var t={boundary:0,storage:0};return"number"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function c(t){var n=t.target;n.removeEventListener("dispose",c);var r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){var n=t.program;r.uniformBlockBinding(e,n)},update:function(n,h){var d=i[n.id];void 0===d&&(!function(e){for(var t=e.uniforms,n=0,r=16,i=0,a=0,o=t.length;a<o;a++){for(var s=t[a],l={boundary:0,storage:0},c=Array.isArray(s.value)?s.value:[s.value],h=0,d=c.length;h<d;h++){var f=u(c[h]);l.boundary+=f.boundary,l.storage+=f.storage}if(s.__data=new Float32Array(l.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=n,a>0)0!==(i=n%r)&&r-i-l.boundary<0&&(n+=r-i,s.__offset=n);n+=l.storage}(i=n%r)>0&&(n+=r-i);e.__size=n,e.__cache={}}(n),d=function(t){var n=function(){for(var e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;var r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(35345,r),e.bufferData(35345,i,a),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",c));var f=h.program;r.updateUBOMapping(n,f);var p=t.render.frame;a[n.id]!==p&&(!function(t){var n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(35345,n);for(var o=0,s=r.length;o<s;o++){var c=r[o];if(!0===l(c,o,a)){for(var h=c.__offset,d=Array.isArray(c.value)?c.value:[c.value],f=0,p=0;p<d.length;p++){var v=d[p],m=u(v);"number"===typeof v?(c.__data[0]=v,e.bufferSubData(35345,h+f,c.__data)):v.isMatrix3?(c.__data[0]=v.elements[0],c.__data[1]=v.elements[1],c.__data[2]=v.elements[2],c.__data[3]=v.elements[0],c.__data[4]=v.elements[3],c.__data[5]=v.elements[4],c.__data[6]=v.elements[5],c.__data[7]=v.elements[0],c.__data[8]=v.elements[6],c.__data[9]=v.elements[7],c.__data[10]=v.elements[8],c.__data[11]=v.elements[0]):(v.toArray(c.__data,f),f+=m.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,h,c.__data)}}e.bindBuffer(35345,null)}(n),a[n.id]=p)},dispose:function(){for(var t in i)e.deleteBuffer(i[t]);o=[],i={},a={}}}}var jg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.Z)(this,e);var n,r=t.canvas,i=void 0===r?function(){var e=fd("canvas");return e.style.display="block",e}():r,a=t.context,o=void 0===a?null:a,s=t.depth,l=void 0===s||s,c=t.stencil,h=void 0===c||c,d=t.alpha,f=void 0!==d&&d,p=t.antialias,v=void 0!==p&&p,m=t.premultipliedAlpha,g=void 0===m||m,y=t.preserveDrawingBuffer,A=void 0!==y&&y,x=t.powerPreference,b=void 0===x?"default":x,_=t.failIfMajorPerformanceCaveat,w=void 0!==_&&_;this.isWebGLRenderer=!0,n=null!==o?o.getContextAttributes().alpha:f;var E=null,S=null,M=[],C=[];this.domElement=i,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=lh,this.useLegacyLights=!0,this.toneMapping=Su,this.toneMappingExposure=1;var k=this,T=!1,I=0,B=0,R=null,L=-1,P=null,D=new Cd,O=new Cd,F=null,N=i.width,U=i.height,Z=1,z=null,H=null,G=new Cd(0,0,N,U),Q=new Cd(0,0,N,U),V=!1,j=new pv,W=!1,q=!1,J=null,X=new df,Y=new Dd,K={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function $(){return null===R?Z:1}var ee,te,ne,re,ie,ae,oe,se,le,ue,ce,he,de,fe,pe,ve,me,ge,ye,Ae,xe,be,_e,we,Ee=o;function Se(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=i.getContext(r,t);if(null!==a)return a}return null}try{var Me={alpha:!0,depth:l,stencil:h,antialias:v,premultipliedAlpha:g,preserveDrawingBuffer:A,powerPreference:b,failIfMajorPerformanceCaveat:w};if("setAttribute"in i&&i.setAttribute("data-engine","three.js r".concat(Bl)),i.addEventListener("webglcontextlost",Ie,!1),i.addEventListener("webglcontextrestored",Be,!1),i.addEventListener("webglcontextcreationerror",Re,!1),null===Ee){var Ce=["webgl2","webgl","experimental-webgl"];if(!0===k.isWebGL1Renderer&&Ce.shift(),null===(Ee=Se(Ce,Me)))throw Se(Ce)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Ee.getShaderPrecisionFormat&&(Ee.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Qe){throw console.error("THREE.WebGLRenderer: "+Qe.message),Qe}function ke(){ee=new Gv(Ee),te=new Sv(Ee,ee,t),ee.init(te),be=new Fg(Ee,ee,te),ne=new Dg(Ee,ee,te),re=new jv,ie=new bg,ae=new Og(Ee,ee,ne,ie,te,be,re),oe=new Cv(k),se=new Hv(k),le=new mv(Ee,te),_e=new wv(Ee,ee,le,te),ue=new Qv(Ee,le,re,_e),ce=new Xv(Ee,ue,le,re),ye=new Jv(Ee,te,ae),ve=new Mv(ie),he=new xg(k,oe,se,ee,te,_e,ve),de=new Qg(k,ie),fe=new Sg,pe=new Bg(ee,te),ge=new _v(k,oe,se,ne,ce,n,g),me=new Pg(k,ce,te),we=new Vg(Ee,re,te,ne),Ae=new Ev(Ee,ee,re,te),xe=new Vv(Ee,ee,re,te),re.programs=he.programs,k.capabilities=te,k.extensions=ee,k.properties=ie,k.renderLists=fe,k.shadowMap=me,k.state=ne,k.info=re}ke();var Te=new Gg(k,Ee);function Ie(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function Be(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;var e=re.autoReset,t=me.enabled,n=me.autoUpdate,r=me.needsUpdate,i=me.type;ke(),re.autoReset=e,me.enabled=t,me.autoUpdate=n,me.needsUpdate=r,me.type=i}function Re(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Le(e){var t=e.target;t.removeEventListener("dispose",Le),function(e){(function(e){var t=ie.get(e).programs;void 0!==t&&(t.forEach((function(e){he.releaseProgram(e)})),e.isShaderMaterial&&he.releaseShaderCache(e))})(e),ie.remove(e)}(t)}this.xr=Te,this.getContext=function(){return Ee},this.getContextAttributes=function(){return Ee.getContextAttributes()},this.forceContextLoss=function(){var e=ee.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=ee.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Z},this.setPixelRatio=function(e){void 0!==e&&(Z=e,this.setSize(N,U,!1))},this.getSize=function(e){return e.set(N,U)},this.setSize=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Te.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(N=e,U=t,i.width=Math.floor(e*Z),i.height=Math.floor(t*Z),!0===n&&(i.style.width=e+"px",i.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(N*Z,U*Z).floor()},this.setDrawingBufferSize=function(e,t,n){N=e,U=t,Z=n,i.width=Math.floor(e*n),i.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(D)},this.getViewport=function(e){return e.copy(G)},this.setViewport=function(e,t,n,r){e.isVector4?G.set(e.x,e.y,e.z,e.w):G.set(e,t,n,r),ne.viewport(D.copy(G).multiplyScalar(Z).floor())},this.getScissor=function(e){return e.copy(Q)},this.setScissor=function(e,t,n,r){e.isVector4?Q.set(e.x,e.y,e.z,e.w):Q.set(e,t,n,r),ne.scissor(O.copy(Q).multiplyScalar(Z).floor())},this.getScissorTest=function(){return V},this.setScissorTest=function(e){ne.setScissorTest(V=e)},this.setOpaqueSort=function(e){z=e},this.setTransparentSort=function(e){H=e},this.getClearColor=function(e){return e.copy(ge.getClearColor())},this.setClearColor=function(){ge.setClearColor.apply(ge,arguments)},this.getClearAlpha=function(){return ge.getClearAlpha()},this.setClearAlpha=function(){ge.setClearAlpha.apply(ge,arguments)},this.clear=function(){var e=0;(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(e|=16384),(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e|=256),(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(e|=1024),Ee.clear(e)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",Ie,!1),i.removeEventListener("webglcontextrestored",Be,!1),i.removeEventListener("webglcontextcreationerror",Re,!1),fe.dispose(),pe.dispose(),ie.dispose(),oe.dispose(),se.dispose(),ce.dispose(),_e.dispose(),we.dispose(),he.dispose(),Te.dispose(),Te.removeEventListener("sessionstart",De),Te.removeEventListener("sessionend",Oe),J&&(J.dispose(),J=null),Fe.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=K);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=K);ae.resetTextureUnits();var a=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===R?k.outputEncoding:!0===R.isXRRenderTarget?R.texture.encoding:lh,l=(r.isMeshStandardMaterial?se:oe).get(r.envMap||o),u=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,p=r.toneMapped?k.toneMapping:Su,v=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,m=void 0!==v?v.length:0,g=ie.get(r),y=S.state.lights;if(!0===W&&(!0===q||e!==P)){var A=e===P&&r.id===L;ve.setState(r,e,A)}var x=!1;r.version===g.__version?g.needsLights&&g.lightsStateVersion!==y.state.version||g.outputEncoding!==s||i.isInstancedMesh&&!1===g.instancing?x=!0:i.isInstancedMesh||!0!==g.instancing?i.isSkinnedMesh&&!1===g.skinning?x=!0:i.isSkinnedMesh||!0!==g.skinning?g.envMap!==l||!0===r.fog&&g.fog!==a?x=!0:void 0===g.numClippingPlanes||g.numClippingPlanes===ve.numPlanes&&g.numIntersection===ve.numIntersection?(g.vertexAlphas!==u||g.vertexTangents!==c||g.morphTargets!==h||g.morphNormals!==d||g.morphColors!==f||g.toneMapping!==p||!0===te.isWebGL2&&g.morphTargetsCount!==m)&&(x=!0):x=!0:x=!0:x=!0:(x=!0,g.__version=r.version);var b=g.currentProgram;!0===x&&(b=He(r,t,i));var _=!1,w=!1,E=!1,M=b.getUniforms(),C=g.uniforms;ne.useProgram(b.program)&&(_=!0,w=!0,E=!0);r.id!==L&&(L=r.id,w=!0);if(_||P!==e){if(M.setValue(Ee,"projectionMatrix",e.projectionMatrix),te.logarithmicDepthBuffer&&M.setValue(Ee,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),P!==e&&(P=e,w=!0,E=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var T=M.map.cameraPosition;void 0!==T&&T.setValue(Ee,Y.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&M.setValue(Ee,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&M.setValue(Ee,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){M.setOptional(Ee,i,"bindMatrix"),M.setOptional(Ee,i,"bindMatrixInverse");var I=i.skeleton;I&&(te.floatVertexTextures?(null===I.boneTexture&&I.computeBoneTexture(),M.setValue(Ee,"boneTexture",I.boneTexture,ae),M.setValue(Ee,"boneTextureSize",I.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var B=n.morphAttributes;(void 0!==B.position||void 0!==B.normal||void 0!==B.color&&!0===te.isWebGL2)&&ye.update(i,n,b);(w||g.receiveShadow!==i.receiveShadow)&&(g.receiveShadow=i.receiveShadow,M.setValue(Ee,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(C.envMap.value=l,C.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);w&&(M.setValue(Ee,"toneMappingExposure",k.toneMappingExposure),g.needsLights&&(O=E,(D=C).ambientLightColor.needsUpdate=O,D.lightProbe.needsUpdate=O,D.directionalLights.needsUpdate=O,D.directionalLightShadows.needsUpdate=O,D.pointLights.needsUpdate=O,D.pointLightShadows.needsUpdate=O,D.spotLights.needsUpdate=O,D.spotLightShadows.needsUpdate=O,D.rectAreaLights.needsUpdate=O,D.hemisphereLights.needsUpdate=O),a&&!0===r.fog&&de.refreshFogUniforms(C,a),de.refreshMaterialUniforms(C,r,Z,U,J),eg.upload(Ee,g.uniformsList,C,ae));var D,O;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(eg.upload(Ee,g.uniformsList,C,ae),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&M.setValue(Ee,"center",i.center);if(M.setValue(Ee,"modelViewMatrix",i.modelViewMatrix),M.setValue(Ee,"normalMatrix",i.normalMatrix),M.setValue(Ee,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial)for(var F=r.uniformsGroups,N=0,z=F.length;N<z;N++)if(te.isWebGL2){var H=F[N];we.update(H,b),we.bind(H,b)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return b}(e,t,n,r,i);ne.setMaterial(r,o);var l=n.index,u=1;!0===r.wireframe&&(l=ue.getWireframeAttribute(n),u=2);var c=n.drawRange,h=n.attributes.position,d=c.start*u,f=(c.start+c.count)*u;null!==a&&(d=Math.max(d,a.start*u),f=Math.min(f,(a.start+a.count)*u)),null!==l?(d=Math.max(d,0),f=Math.min(f,l.count)):void 0!==h&&null!==h&&(d=Math.max(d,0),f=Math.min(f,h.count));var p=f-d;if(!(p<0||p===1/0)){var v;_e.setup(i,r,s,n,l);var m=Ae;if(null!==l&&(v=le.get(l),(m=xe).setIndex(v)),i.isMesh)!0===r.wireframe?(ne.setLineWidth(r.wireframeLinewidth*$()),m.setMode(1)):m.setMode(4);else if(i.isLine){var g=r.linewidth;void 0===g&&(g=1),ne.setLineWidth(g*$()),i.isLineSegments?m.setMode(1):i.isLineLoop?m.setMode(2):m.setMode(3)}else i.isPoints?m.setMode(0):i.isSprite&&m.setMode(4);if(i.isInstancedMesh)m.renderInstances(d,p,i.count);else if(n.isInstancedBufferGeometry){var y=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,A=Math.min(n.instanceCount,y);m.renderInstances(d,p,A)}else m.render(d,p)}},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===Ql&&!1===e.forceSinglePass?(e.side=Gl,e.needsUpdate=!0,He(e,t,n),e.side=Hl,e.needsUpdate=!0,He(e,t,n),e.side=Ql):He(e,t,n)}(S=pe.get(e)).init(),C.push(S),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(S.pushLight(e),e.castShadow&&S.pushShadow(e))})),S.setupLights(k.useLegacyLights),e.traverse((function(t){var r=t.material;if(r)if(Array.isArray(r))for(var i=0;i<r.length;i++){n(r[i],e,t)}else n(r,e,t)})),C.pop(),S=null};var Pe=null;function De(){Fe.stop()}function Oe(){Fe.start()}var Fe=new vv;function Ne(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)S.pushLight(e),e.castShadow&&S.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||j.intersectsSprite(e)){r&&Y.setFromMatrixPosition(e.matrixWorld).applyMatrix4(X);var i=ce.update(e),a=e.material;a.visible&&E.push(e,i,a,n,Y.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==re.render.frame&&(e.skeleton.update(),e.skeleton.frame=re.render.frame),!e.frustumCulled||j.intersectsObject(e))){r&&Y.setFromMatrixPosition(e.matrixWorld).applyMatrix4(X);var o=ce.update(e),s=e.material;if(Array.isArray(s))for(var l=o.groups,u=0,c=l.length;u<c;u++){var h=l[u],d=s[h.materialIndex];d&&d.visible&&E.push(e,o,d,n,Y.z,h)}else s.visible&&E.push(e,o,s,n,Y.z,null)}for(var f=e.children,p=0,v=f.length;p<v;p++)Ne(f[p],t,n,r)}}function Ue(e,t,n,r){var i=e.opaque,a=e.transmissive,o=e.transparent;S.setupLightsView(n),!0===W&&ve.setGlobalState(k.clippingPlanes,n),a.length>0&&function(e,t,n,r){if(null===J){var i=te.isWebGL2;J=new kd(1024,1024,{generateMipmaps:!0,type:ee.has("EXT_color_buffer_half_float")?rc:Xu,minFilter:qu,samples:i&&!0===v?4:0})}var a=k.getRenderTarget();k.setRenderTarget(J),k.clear();var o=k.toneMapping;k.toneMapping=Su,Ze(e,n,r),ae.updateMultisampleRenderTarget(J),ae.updateRenderTargetMipmap(J);for(var s=!1,l=0,u=t.length;l<u;l++){var c=t[l],h=c.object,d=c.geometry,f=c.material,p=c.group;if(f.side===Ql&&h.layers.test(r.layers)){var m=f.side;f.side=Gl,f.needsUpdate=!0,ze(h,n,r,d,f,p),f.side=m,f.needsUpdate=!0,s=!0}}!0===s&&(ae.updateMultisampleRenderTarget(J),ae.updateRenderTargetMipmap(J));k.setRenderTarget(a),k.toneMapping=o}(i,a,t,n),r&&ne.viewport(D.copy(r)),i.length>0&&Ze(i,t,n),a.length>0&&Ze(a,t,n),o.length>0&&Ze(o,t,n),ne.buffers.depth.setTest(!0),ne.buffers.depth.setMask(!0),ne.buffers.color.setMask(!0),ne.setPolygonOffset(!1)}function Ze(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,l=o.geometry,u=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&ze(s,t,n,l,u,c)}}function ze(e,t,n,r,i,a){e.onBeforeRender(k,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(k,t,n,r,e,a),!0===i.transparent&&i.side===Ql&&!1===i.forceSinglePass?(i.side=Gl,i.needsUpdate=!0,k.renderBufferDirect(n,t,r,i,e,a),i.side=Hl,i.needsUpdate=!0,k.renderBufferDirect(n,t,r,i,e,a),i.side=Ql):k.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(k,t,n,r,i,a)}function He(e,t,n){!0!==t.isScene&&(t=K);var r=ie.get(e),i=S.state.lights,a=S.state.shadowsArray,o=i.state.version,s=he.getParameters(e,i.state,a,t,n),l=he.getProgramCacheKey(s),u=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?se:oe).get(e.envMap||r.environment),void 0===u&&(e.addEventListener("dispose",Le),u=new Map,r.programs=u);var c=u.get(l);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===o)return Ge(e,s),c}else s.uniforms=he.getUniforms(e),e.onBuild(n,s,k),e.onBeforeCompile(s,k),c=he.acquireProgram(s,l),u.set(l,c),r.uniforms=s.uniforms;var h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ve.uniform),Ge(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);var d=c.getUniforms(),f=eg.seqWithValue(d.seq,h);return r.currentProgram=c,r.uniformsList=f,c}function Ge(e,t){var n=ie.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Fe.setAnimationLoop((function(e){Pe&&Pe(e)})),"undefined"!==typeof self&&Fe.setContext(self),this.setAnimationLoop=function(e){Pe=e,Te.setAnimationLoop(e),null===e?Fe.stop():Fe.start()},Te.addEventListener("sessionstart",De),Te.addEventListener("sessionend",Oe),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==T){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Te.enabled&&!0===Te.isPresenting&&(!0===Te.cameraAutoUpdate&&Te.updateCamera(t),t=Te.getCamera()),!0===e.isScene&&e.onBeforeRender(k,e,t,R),(S=pe.get(e,C.length)).init(),C.push(S),X.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),j.setFromProjectionMatrix(X),q=this.localClippingEnabled,W=ve.init(this.clippingPlanes,q),(E=fe.get(e,M.length)).init(),M.push(E),Ne(e,t,0,k.sortObjects),E.finish(),!0===k.sortObjects&&E.sort(z,H),!0===W&&ve.beginShadows();var n=S.state.shadowsArray;if(me.render(n,e,t),!0===W&&ve.endShadows(),!0===this.info.autoReset&&this.info.reset(),ge.render(E,e),S.setupLights(k.useLegacyLights),t.isArrayCamera)for(var r=t.cameras,i=0,a=r.length;i<a;i++){var o=r[i];Ue(E,e,o,o.viewport)}else Ue(E,e,t);null!==R&&(ae.updateMultisampleRenderTarget(R),ae.updateRenderTargetMipmap(R)),!0===e.isScene&&e.onAfterRender(k,e,t),_e.resetDefaultState(),L=-1,P=null,C.pop(),S=C.length>0?C[C.length-1]:null,M.pop(),E=M.length>0?M[M.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return B},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(e,t,n){ie.get(e.texture).__webglTexture=t,ie.get(e.depthTexture).__webglTexture=n;var r=ie.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===ee.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){var n=ie.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;R=e,I=t,B=n;var r=!0,i=null,a=!1,o=!1;if(e){var s=ie.get(e);void 0!==s.__useDefaultFramebuffer?(ne.bindFramebuffer(36160,null),r=!1):void 0===s.__webglFramebuffer?ae.setupRenderTarget(e):s.__hasExternalTextures&&ae.rebindTextures(e,ie.get(e.texture).__webglTexture,ie.get(e.depthTexture).__webglTexture);var l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(o=!0);var u=ie.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=u[t],a=!0):i=te.isWebGL2&&e.samples>0&&!1===ae.useMultisampledRTT(e)?ie.get(e).__webglMultisampledFramebuffer:u,D.copy(e.viewport),O.copy(e.scissor),F=e.scissorTest}else D.copy(G).multiplyScalar(Z).floor(),O.copy(Q).multiplyScalar(Z).floor(),F=V;if(ne.bindFramebuffer(36160,i)&&te.drawBuffers&&r&&ne.drawBuffers(e,i),ne.viewport(D),ne.scissor(O),ne.setScissorTest(F),a){var c=ie.get(e.texture);Ee.framebufferTexture2D(36160,36064,34069+t,c.__webglTexture,n)}else if(o){var h=ie.get(e.texture),d=t||0;Ee.framebufferTextureLayer(36160,36064,h.__webglTexture,n||0,d)}L=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(e&&e.isWebGLRenderTarget){var s=ie.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){ne.bindFramebuffer(36160,s);try{var l=e.texture,u=l.format,c=l.type;if(u!==lc&&be.convert(u)!==Ee.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=c===rc&&(ee.has("EXT_color_buffer_half_float")||te.isWebGL2&&ee.has("EXT_color_buffer_float"));if(c!==Xu&&be.convert(c)!==Ee.getParameter(35738)&&(c!==nc||!(te.isWebGL2||ee.has("OES_texture_float")||ee.has("WEBGL_color_buffer_float")))&&!h)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&Ee.readPixels(t,n,r,i,be.convert(u),be.convert(c),a)}finally{var d=null!==R?ie.get(R).__webglFramebuffer:null;ne.bindFramebuffer(36160,d)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r);ae.setTexture2D(t,0),Ee.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,a),ne.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,a=t.image.height,o=be.convert(n.format),s=be.convert(n.type);ae.setTexture2D(n,0),Ee.pixelStorei(37440,n.flipY),Ee.pixelStorei(37441,n.premultiplyAlpha),Ee.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?Ee.texSubImage2D(3553,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?Ee.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):Ee.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&Ee.generateMipmap(3553),ne.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(k.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,l=e.max.z-e.min.z+1,u=be.convert(r.format),c=be.convert(r.type);if(r.isData3DTexture)ae.setTexture3D(r,0),a=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ae.setTexture2DArray(r,0),a=35866}Ee.pixelStorei(37440,r.flipY),Ee.pixelStorei(37441,r.premultiplyAlpha),Ee.pixelStorei(3317,r.unpackAlignment);var h=Ee.getParameter(3314),d=Ee.getParameter(32878),f=Ee.getParameter(3316),p=Ee.getParameter(3315),v=Ee.getParameter(32877),m=n.isCompressedTexture?n.mipmaps[0]:n.image;Ee.pixelStorei(3314,m.width),Ee.pixelStorei(32878,m.height),Ee.pixelStorei(3316,e.min.x),Ee.pixelStorei(3315,e.min.y),Ee.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?Ee.texSubImage3D(a,i,t.x,t.y,t.z,o,s,l,u,c,m.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ee.compressedTexSubImage3D(a,i,t.x,t.y,t.z,o,s,l,u,m.data)):Ee.texSubImage3D(a,i,t.x,t.y,t.z,o,s,l,u,c,m),Ee.pixelStorei(3314,h),Ee.pixelStorei(32878,d),Ee.pixelStorei(3316,f),Ee.pixelStorei(3315,p),Ee.pixelStorei(32877,v),0===i&&r.generateMipmaps&&Ee.generateMipmap(a),ne.unbindTexture()}},this.initTexture=function(e){e.isCubeTexture?ae.setTextureCube(e,0):e.isData3DTexture?ae.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?ae.setTexture2DArray(e,0):ae.setTexture2D(e,0),ne.unbindTexture()},this.resetState=function(){I=0,B=0,R=null,ne.reset(),_e.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}return(0,c.Z)(e,[{key:"physicallyCorrectLights",get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}}]),e}(),Wg=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n)}(jg);Wg.prototype.isWebGL1Renderer=!0;var qg,Jg=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;(0,u.Z)(this,e),this.isFogExp2=!0,this.name="",this.color=new np(t),this.density=n}return(0,c.Z)(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}(),Xg=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;(0,u.Z)(this,e),this.isFog=!0,this.name="",this.color=new np(t),this.near=n,this.far=r}return(0,c.Z)(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}(),Yg=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.backgroundBlurriness=0,e.backgroundIntensity=1,e.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:(0,Il.Z)(e)})),e}return(0,c.Z)(n,[{key:"copy",value:function(e,t){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}},{key:"autoUpdate",get:function(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate},set:function(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}]),n}(Ff),Kg=function(){function e(t,n){(0,u.Z)(this,e),this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=Ph,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Yh()}return(0,c.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Yh()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Yh()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}(),$g=new Dd,ey=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,u.Z)(this,e),this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=i}return(0,c.Z)(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)$g.fromBufferAttribute(this,t),$g.applyMatrix4(e),this.setXYZ(t,$g.x,$g.y,$g.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)$g.fromBufferAttribute(this,t),$g.applyNormalMatrix(e),this.setXYZ(t,$g.x,$g.y,$g.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)$g.fromBufferAttribute(this,t),$g.transformDirection(e),this.setXYZ(t,$g.x,$g.y,$g.z);return this}},{key:"setX",value:function(e,t){return this.normalized&&(t=ad(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.normalized&&(t=ad(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.normalized&&(t=ad(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.normalized&&(t=ad(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){var t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=id(t,this.array)),t}},{key:"getY",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=id(t,this.array)),t}},{key:"getZ",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=id(t,this.array)),t}},{key:"getW",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=id(t,this.array)),t}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=ad(t,this.array),n=ad(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ad(t,this.array),n=ad(n,this.array),r=ad(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ad(t,this.array),n=ad(n,this.array),r=ad(r,this.array),i=ad(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[i+a]);return new dp(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}(),ty=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).isSpriteMaterial=!0,r.type="SpriteMaterial",r.color=new np(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.fog=!0,r.setValues(e),r}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(Yf),ny=new Dd,ry=new Dd,iy=new Dd,ay=new sd,oy=new sd,sy=new df,ly=new Dd,uy=new Dd,cy=new Dd,hy=new sd,dy=new sd,fy=new sd,py=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;if((0,u.Z)(this,n),(r=t.call(this)).isSprite=!0,r.type="Sprite",void 0===qg){qg=new Ip;var i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new Kg(i,5);qg.setIndex([0,1,2,0,2,3]),qg.setAttribute("position",new ey(a,3,0,!1)),qg.setAttribute("uv",new ey(a,2,3,!1))}return r.geometry=qg,r.material=void 0!==e?e:new ty,r.center=new sd(.5,.5),r}return(0,c.Z)(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ry.setFromMatrixScale(this.matrixWorld),sy.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),iy.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&ry.multiplyScalar(-iy.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var a=this.center;vy(ly.set(-.5,-.5,0),iy,a,ry,n,r),vy(uy.set(.5,-.5,0),iy,a,ry,n,r),vy(cy.set(.5,.5,0),iy,a,ry,n,r),hy.set(0,0),dy.set(1,0),fy.set(1,1);var o=e.ray.intersectTriangle(ly,uy,cy,!1,ny);if(null!==o||(vy(uy.set(-.5,.5,0),iy,a,ry,n,r),dy.set(0,1),null!==(o=e.ray.intersectTriangle(ly,cy,uy,!1,ny)))){var s=e.ray.origin.distanceTo(ny);s<e.near||s>e.far||t.push({distance:s,point:ny.clone(),uv:Jf.getInterpolation(ny,ly,uy,cy,hy,dy,fy,new sd),face:null,object:this})}}},{key:"copy",value:function(e,t){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(Ff);function vy(e,t,n,r,i,a){ay.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(oy.x=a*ay.x-i*ay.y,oy.y=i*ay.x+a*ay.y):oy.copy(ay),e.copy(t),e.x+=oy.x,e.y+=oy.y,e.applyMatrix4(sy)}var my=new Dd,gy=new Dd,yy=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this))._currentLevel=0,e.type="LOD",Object.defineProperties((0,Il.Z)(e),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),e.autoUpdate=!0,e}return(0,c.Z)(n,[{key:"copy",value:function(e){(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e,!1);for(var t=e.levels,r=0,i=t.length;r<i;r++){var a=t[r];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}},{key:"addLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);var r,i=this.levels;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(e){var t=this.levels;if(t.length>0){var n,r;for(n=1,r=t.length;n<r;n++){var i=t[n].distance;if(t[n].object.visible&&(i-=i*t[n].hysteresis),e<i)break}return t[n-1].object}return null}},{key:"raycast",value:function(e,t){if(this.levels.length>0){my.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(my);this.getObjectForDistance(n).raycast(e,t)}}},{key:"update",value:function(e){var t=this.levels;if(t.length>1){my.setFromMatrixPosition(e.matrixWorld),gy.setFromMatrixPosition(this.matrixWorld);var n,r,i=my.distanceTo(gy)/e.zoom;for(t[0].object.visible=!0,n=1,r=t.length;n<r;n++){var a=t[n].distance;if(t[n].object.visible&&(a-=a*t[n].hysteresis),!(i>=a))break;t[n-1].object.visible=!1,t[n].object.visible=!0}for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}}},{key:"toJSON",value:function(e){var t=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var r=this.levels,i=0,a=r.length;i<a;i++){var o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}]),n}(Ff),Ay=new Dd,xy=new Cd,by=new Cd,_y=new Dd,wy=new df,Ey=new Dd,Sy=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){var i;return(0,u.Z)(this,n),(i=t.call(this,e,r)).isSkinnedMesh=!0,i.type="SkinnedMesh",i.bindMode="attached",i.bindMatrix=new df,i.bindMatrixInverse=new df,i.boundingBox=null,i.boundingSphere=null,i}return(0,c.Z)(n,[{key:"computeBoundingBox",value:function(){var e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Nd),this.boundingBox.makeEmpty();for(var t=e.getAttribute("position"),n=0;n<t.count;n++)Ey.fromBufferAttribute(t,n),this.applyBoneTransform(n,Ey),this.boundingBox.expandByPoint(Ey)}},{key:"computeBoundingSphere",value:function(){var e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new nf),this.boundingSphere.makeEmpty();for(var t=e.getAttribute("position"),n=0;n<t.count;n++)Ey.fromBufferAttribute(t,n),this.applyBoneTransform(n,Ey),this.boundingSphere.expandByPoint(Ey)}},{key:"copy",value:function(e,t){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new Cd,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){(0,Zn.Z)((0,zn.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"applyBoneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;xy.fromBufferAttribute(r.attributes.skinIndex,e),by.fromBufferAttribute(r.attributes.skinWeight,e),Ay.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var i=0;i<4;i++){var a=by.getComponent(i);if(0!==a){var o=xy.getComponent(i);wy.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(_y.copy(Ay).applyMatrix4(wy),a)}}return t.applyMatrix4(this.bindMatrixInverse)}},{key:"boneTransform",value:function(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}]),n}(qp),My=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).isBone=!0,e.type="Bone",e}return(0,c.Z)(n)}(Ff),Cy=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Zu,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Zu,p=arguments.length>10?arguments[10]:void 0,v=arguments.length>11?arguments[11]:void 0;return(0,u.Z)(this,n),(e=t.call(this,null,l,c,h,d,f,o,s,p,v)).isDataTexture=!0,e.image={data:r,width:i,height:a},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return(0,c.Z)(n)}(Md),ky=new df,Ty=new df,Iy=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,u.Z)(this,e),this.uuid=Yh(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return(0,c.Z)(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new df)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new df;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,i=this.bones.length;r<i;r++){var a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=e.length;i<a;i++){var o=e[i]?e[i].matrixWorld:Ty;ky.multiplyMatrices(o,t[i]),ky.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=nd(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new Cy(t,e,e,lc,nc);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var i=e.bones[n],a=t[i];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),a=new My),this.bones.push(a),this.boneInverses.push((new df).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,i=t.length;r<i;r++){var a=t[r];e.bones.push(a.uuid);var o=n[r];e.boneInverses.push(o.toArray())}return e}}]),e}(),By=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,u.Z)(this,n),(a=t.call(this,e,r,i)).isInstancedBufferAttribute=!0,a.meshPerAttribute=o,a}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(dp),Ry=new df,Ly=new df,Py=[],Dy=new Nd,Oy=new df,Fy=new qp,Ny=new nf,Uy=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){var a;(0,u.Z)(this,n),(a=t.call(this,e,r)).isInstancedMesh=!0,a.instanceMatrix=new By(new Float32Array(16*i),16),a.instanceColor=null,a.count=i,a.boundingBox=null,a.boundingSphere=null;for(var o=0;o<i;o++)a.setMatrixAt(o,Oy);return a}return(0,c.Z)(n,[{key:"computeBoundingBox",value:function(){var e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Nd),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(var n=0;n<t;n++)this.getMatrixAt(n,Ry),Dy.copy(e.boundingBox).applyMatrix4(Ry),this.boundingBox.union(Dy)}},{key:"computeBoundingSphere",value:function(){var e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new nf),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(var n=0;n<t;n++)this.getMatrixAt(n,Ry),Ny.copy(e.boundingSphere).applyMatrix4(Ry),this.boundingSphere.union(Ny)}},{key:"copy",value:function(e,t){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(Fy.geometry=this.geometry,Fy.material=this.material,void 0!==Fy.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Ny.copy(this.boundingSphere),Ny.applyMatrix4(n),!1!==e.ray.intersectsSphere(Ny)))for(var i=0;i<r;i++){this.getMatrixAt(i,Ry),Ly.multiplyMatrices(n,Ry),Fy.matrixWorld=Ly,Fy.raycast(e,Py);for(var a=0,o=Py.length;a<o;a++){var s=Py[a];s.instanceId=i,s.object=this,t.push(s)}Py.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new By(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(qp),Zy=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).isLineBasicMaterial=!0,r.type="LineBasicMaterial",r.color=new np(16777215),r.map=null,r.linewidth=1,r.linecap="round",r.linejoin="round",r.fog=!0,r.setValues(e),r}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}]),n}(Yf),zy=new Dd,Hy=new Dd,Gy=new df,Qy=new hf,Vy=new nf,jy=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ip,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zy;return(0,u.Z)(this,n),(e=t.call(this)).isLine=!0,e.type="Line",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,c.Z)(n,[{key:"copy",value:function(e,t){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)zy.fromBufferAttribute(t,r-1),Hy.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=zy.distanceTo(Hy);e.setAttribute("lineDistance",new bp(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Vy.copy(n.boundingSphere),Vy.applyMatrix4(r),Vy.radius+=i,!1!==e.ray.intersectsSphere(Vy)){Gy.copy(r).invert(),Qy.copy(e.ray).applyMatrix4(Gy);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new Dd,u=new Dd,c=new Dd,h=new Dd,d=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(null!==f)for(var v=Math.max(0,a.start),m=Math.min(f.count,a.start+a.count)-1;v<m;v+=d){var g=f.getX(v),y=f.getX(v+1);if(l.fromBufferAttribute(p,g),u.fromBufferAttribute(p,y),!(Qy.distanceSqToSegment(l,u,h,c)>s)){h.applyMatrix4(this.matrixWorld);var A=e.ray.origin.distanceTo(h);A<e.near||A>e.far||t.push({distance:A,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(var x=Math.max(0,a.start),b=Math.min(p.count,a.start+a.count)-1;x<b;x+=d){if(l.fromBufferAttribute(p,x),u.fromBufferAttribute(p,x+1),!(Qy.distanceSqToSegment(l,u,h,c)>s)){h.applyMatrix4(this.matrixWorld);var _=e.ray.origin.distanceTo(h);_<e.near||_>e.far||t.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}]),n}(Ff),Wy=new Dd,qy=new Dd,Jy=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){var i;return(0,u.Z)(this,n),(i=t.call(this,e,r)).isLineSegments=!0,i.type="LineSegments",i}return(0,c.Z)(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)Wy.fromBufferAttribute(t,r),qy.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Wy.distanceTo(qy);e.setAttribute("lineDistance",new bp(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),n}(jy),Xy=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){var i;return(0,u.Z)(this,n),(i=t.call(this,e,r)).isLineLoop=!0,i.type="LineLoop",i}return(0,c.Z)(n)}(jy),Yy=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).isPointsMaterial=!0,r.type="PointsMaterial",r.color=new np(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.fog=!0,r.setValues(e),r}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(Yf),Ky=new df,$y=new hf,eA=new nf,tA=new Dd,nA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ip,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yy;return(0,u.Z)(this,n),(e=t.call(this)).isPoints=!0,e.type="Points",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,c.Z)(n,[{key:"copy",value:function(e,t){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),eA.copy(n.boundingSphere),eA.applyMatrix4(r),eA.radius+=i,!1!==e.ray.intersectsSphere(eA)){Ky.copy(r).invert(),$y.copy(e.ray).applyMatrix4(Ky);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=n.index,u=n.attributes.position;if(null!==l)for(var c=Math.max(0,a.start),h=Math.min(l.count,a.start+a.count);c<h;c++){var d=l.getX(c);tA.fromBufferAttribute(u,d),rA(tA,d,s,r,e,t,this)}else for(var f=Math.max(0,a.start),p=Math.min(u.count,a.start+a.count);f<p;f++)tA.fromBufferAttribute(u,f),rA(tA,f,s,r,e,t,this)}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}]),n}(Ff);function rA(e,t,n,r,i,a,o){var s=$y.distanceSqToPoint(e);if(s<n){var l=new Dd;$y.closestPointToPoint(e,l),l.applyMatrix4(r);var u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;a.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:t,face:null,object:o})}}var iA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a,o,s,l,c,h){var d;(0,u.Z)(this,n),(d=t.call(this,e,r,i,a,o,s,l,c,h)).isVideoTexture=!0,d.minFilter=void 0!==s?s:Vu,d.magFilter=void 0!==o?o:Vu,d.generateMipmaps=!1;var f=(0,Il.Z)(d);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){f.needsUpdate=!0,e.requestVideoFrameCallback(t)})),d}return(0,c.Z)(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(Md),aA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){var a;return(0,u.Z)(this,n),(a=t.call(this,{width:e,height:r})).isFramebufferTexture=!0,a.format=i,a.magFilter=Zu,a.minFilter=Zu,a.generateMipmaps=!1,a.needsUpdate=!0,a}return(0,c.Z)(n)}(Md),oA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a,o,s,l,c,h,d,f,p){var v;return(0,u.Z)(this,n),(v=t.call(this,null,s,l,c,h,d,a,o,f,p)).isCompressedTexture=!0,v.image={width:r,height:i},v.mipmaps=e,v.flipY=!1,v.generateMipmaps=!1,v}return(0,c.Z)(n)}(Md),sA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a,o,s){var l;return(0,u.Z)(this,n),(l=t.call(this,e,r,i,o,s)).isCompressedArrayTexture=!0,l.image.depth=a,l.wrapR=Nu,l}return(0,c.Z)(n)}(oA),lA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a,o,s,l,c,h){var d;return(0,u.Z)(this,n),(d=t.call(this,e,r,i,a,o,s,l,c,h)).isCanvasTexture=!0,d.needsUpdate=!0,d}return(0,c.Z)(n)}(Md),uA=function(){function e(){(0,u.Z)(this,e),this.type="Curve",this.arcLengthDivisions=200}return(0,c.Z)(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;n.push(0);for(var a=1;a<=e;a++)i+=(t=this.getPoint(a/e)).distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];for(var o,s=0,l=a-1;s<=l;)if((o=r[i=Math.floor(s+(l-s)/2)]-n)<0)s=i+1;else{if(!(o>0)){l=i;break}l=i-1}if(r[i=l]===n)return i/(a-1);var u=r[i];return(i+(n-u)/(r[i+1]-u))/(a-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);var a=this.getPoint(r),o=this.getPoint(i),s=t||(a.isVector2?new sd:new Dd);return s.copy(o).sub(a).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new Dd,r=[],i=[],a=[],o=new Dd,s=new df,l=0;l<=e;l++){var u=l/e;r[l]=this.getTangentAt(u,new Dd)}i[0]=new Dd,a[0]=new Dd;var c=Number.MAX_VALUE,h=Math.abs(r[0].x),d=Math.abs(r[0].y),f=Math.abs(r[0].z);h<=c&&(c=h,n.set(1,0,0)),d<=c&&(c=d,n.set(0,1,0)),f<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(var p=1;p<=e;p++){if(i[p]=i[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(r[p-1],r[p]),o.length()>Number.EPSILON){o.normalize();var v=Math.acos(Kh(r[p-1].dot(r[p]),-1,1));i[p].applyMatrix4(s.makeRotationAxis(o,v))}a[p].crossVectors(r[p],i[p])}if(!0===t){var m=Math.acos(Kh(i[0].dot(i[e]),-1,1));m/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(m=-m);for(var g=1;g<=e;g++)i[g].applyMatrix4(s.makeRotationAxis(r[g],m*g)),a[g].crossVectors(r[g],i[g])}return{tangents:r,normals:i,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),cA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return(0,u.Z)(this,n),(e=t.call(this)).isEllipseCurve=!0,e.type="EllipseCurve",e.aX=r,e.aY=i,e.xRadius=a,e.yRadius=o,e.aStartAngle=s,e.aEndAngle=l,e.aClockwise=c,e.aRotation=h,e}return(0,c.Z)(n,[{key:"getPoint",value:function(e,t){for(var n=t||new sd,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,d=l-this.aY;s=h*u-d*c+this.aX,l=h*c+d*u+this.aY}return n.set(s,l)}},{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(uA),hA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a,o,s){var l;return(0,u.Z)(this,n),(l=t.call(this,e,r,i,i,a,o,s)).isArcCurve=!0,l.type="ArcCurve",l}return(0,c.Z)(n)}(cA);function dA(){var e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){var l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,u=(n-t)/o-(r-t)/(o+s)+(r-n)/s;i(t,n,l*=o,u*=o)},calc:function(i){var a=i*i;return e+t*i+n*a+r*(a*i)}}}var fA=new Dd,pA=new dA,vA=new dA,mA=new dA,gA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return(0,u.Z)(this,n),(e=t.call(this)).isCatmullRomCurve3=!0,e.type="CatmullRomCurve3",e.points=r,e.closed=i,e.curveType=a,e.tension=o,e}return(0,c.Z)(n,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dd,i=this.points,a=i.length,o=(a-(this.closed?0:1))*e,s=Math.floor(o),l=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/a)+1)*a:0===l&&s===a-1&&(s=a-2,l=1),this.closed||s>0?t=i[(s-1)%a]:(fA.subVectors(i[0],i[1]).add(i[0]),t=fA);var u=i[s%a],c=i[(s+1)%a];if(this.closed||s+2<a?n=i[(s+2)%a]:(fA.subVectors(i[a-1],i[a-2]).add(i[a-1]),n=fA),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,d=Math.pow(t.distanceToSquared(u),h),f=Math.pow(u.distanceToSquared(c),h),p=Math.pow(c.distanceToSquared(n),h);f<1e-4&&(f=1),d<1e-4&&(d=f),p<1e-4&&(p=f),pA.initNonuniformCatmullRom(t.x,u.x,c.x,n.x,d,f,p),vA.initNonuniformCatmullRom(t.y,u.y,c.y,n.y,d,f,p),mA.initNonuniformCatmullRom(t.z,u.z,c.z,n.z,d,f,p)}else"catmullrom"===this.curveType&&(pA.initCatmullRom(t.x,u.x,c.x,n.x,this.tension),vA.initCatmullRom(t.y,u.y,c.y,n.y,this.tension),mA.initCatmullRom(t.z,u.z,c.z,n.z,this.tension));return r.set(pA.calc(l),vA.calc(l),mA.calc(l)),r}},{key:"copy",value:function(e){(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){(0,Zn.Z)((0,zn.Z)(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new Dd).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(uA);function yA(e,t,n,r,i){var a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function AA(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function xA(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}var bA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sd,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sd,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new sd,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new sd;return(0,u.Z)(this,n),(e=t.call(this)).isCubicBezierCurve=!0,e.type="CubicBezierCurve",e.v0=r,e.v1=i,e.v2=a,e.v3=o,e}return(0,c.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sd,n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(xA(e,n.x,r.x,i.x,a.x),xA(e,n.y,r.y,i.y,a.y)),t}},{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(uA),_A=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dd,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dd,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Dd,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Dd;return(0,u.Z)(this,n),(e=t.call(this)).isCubicBezierCurve3=!0,e.type="CubicBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e.v3=o,e}return(0,c.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dd,n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(xA(e,n.x,r.x,i.x,a.x),xA(e,n.y,r.y,i.y,a.y),xA(e,n.z,r.z,i.z,a.z)),t}},{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(uA),wA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sd,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sd;return(0,u.Z)(this,n),(e=t.call(this)).isLineCurve=!0,e.type="LineCurve",e.v1=r,e.v2=i,e}return(0,c.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sd;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sd).subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(e,t){return this.getTangent(e,t)}},{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(uA),EA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dd,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dd;return(0,u.Z)(this,n),(e=t.call(this)).isLineCurve3=!0,e.type="LineCurve3",e.v1=r,e.v2=i,e}return(0,c.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dd;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dd).subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(e,t){return this.getTangent(e,t)}},{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(uA),SA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sd,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sd,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new sd;return(0,u.Z)(this,n),(e=t.call(this)).isQuadraticBezierCurve=!0,e.type="QuadraticBezierCurve",e.v0=r,e.v1=i,e.v2=a,e}return(0,c.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sd,n=this.v0,r=this.v1,i=this.v2;return t.set(AA(e,n.x,r.x,i.x),AA(e,n.y,r.y,i.y)),t}},{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(uA),MA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dd,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dd,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Dd;return(0,u.Z)(this,n),(e=t.call(this)).isQuadraticBezierCurve3=!0,e.type="QuadraticBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e}return(0,c.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dd,n=this.v0,r=this.v1,i=this.v2;return t.set(AA(e,n.x,r.x,i.x),AA(e,n.y,r.y,i.y),AA(e,n.z,r.z,i.z)),t}},{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(uA),CA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,u.Z)(this,n),(e=t.call(this)).isSplineCurve=!0,e.type="SplineCurve",e.points=r,e}return(0,c.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sd,n=this.points,r=(n.length-1)*e,i=Math.floor(r),a=r-i,o=n[0===i?i:i-1],s=n[i],l=n[i>n.length-2?n.length-1:i+1],u=n[i>n.length-3?n.length-1:i+2];return t.set(yA(a,o.x,s.x,l.x,u.x),yA(a,o.y,s.y,l.y,u.y)),t}},{key:"copy",value:function(e){(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e}},{key:"fromJSON",value:function(e){(0,Zn.Z)((0,zn.Z)(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new sd).fromArray(i))}return this}}]),n}(uA),kA=Object.freeze({__proto__:null,ArcCurve:hA,CatmullRomCurve3:gA,CubicBezierCurve:bA,CubicBezierCurve3:_A,EllipseCurve:cA,LineCurve:wA,LineCurve3:EA,QuadraticBezierCurve:SA,QuadraticBezierCurve3:MA,SplineCurve:CA}),TA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return(0,c.Z)(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new wA(t,e))}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=n){var a=r[i]-n,o=this.curves[i],s=o.getLength(),l=0===s?0:1-a/s;return o.getPointAt(l,t)}i++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a.isEllipseCurve?2*t:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];e&&e.equals(u)||(n.push(u),e=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){(0,Zn.Z)((0,zn.Z)(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push((new kA[i.type]).fromJSON(i))}return this}}]),n}(uA),IA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).type="Path",r.currentPoint=new sd,e&&r.setFromPoints(e),r}return(0,c.Z)(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new wA(this.currentPoint.clone(),new sd(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var i=new SA(this.currentPoint.clone(),new sd(e,t),new sd(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){var o=new bA(this.currentPoint.clone(),new sd(e,t),new sd(n,r),new sd(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new CA(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this}},{key:"absarc",value:function(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}},{key:"ellipse",value:function(e,t,n,r,i,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,r,i,a,o,s),this}},{key:"absellipse",value:function(e,t,n,r,i,a,o,s){var l=new cA(e,t,n,r,i,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(TA),BA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new sd(0,-.5),new sd(.5,0),new sd(0,.5)],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;(0,u.Z)(this,n),(e=t.call(this)).type="LatheGeometry",e.parameters={points:r,segments:i,phiStart:a,phiLength:o},i=Math.floor(i),o=Kh(o,0,2*Math.PI);for(var s=[],l=[],c=[],h=[],d=[],f=1/i,p=new Dd,v=new sd,m=new Dd,g=new Dd,y=new Dd,A=0,x=0,b=0;b<=r.length-1;b++)switch(b){case 0:A=r[b+1].x-r[b].x,x=r[b+1].y-r[b].y,m.x=1*x,m.y=-A,m.z=0*x,y.copy(m),m.normalize(),h.push(m.x,m.y,m.z);break;case r.length-1:h.push(y.x,y.y,y.z);break;default:A=r[b+1].x-r[b].x,x=r[b+1].y-r[b].y,m.x=1*x,m.y=-A,m.z=0*x,g.copy(m),m.x+=y.x,m.y+=y.y,m.z+=y.z,m.normalize(),h.push(m.x,m.y,m.z),y.copy(g)}for(var _=0;_<=i;_++)for(var w=a+_*f*o,E=Math.sin(w),S=Math.cos(w),M=0;M<=r.length-1;M++){p.x=r[M].x*E,p.y=r[M].y,p.z=r[M].x*S,l.push(p.x,p.y,p.z),v.x=_/i,v.y=M/(r.length-1),c.push(v.x,v.y);var C=h[3*M+0]*E,k=h[3*M+1],T=h[3*M+0]*S;d.push(C,k,T)}for(var I=0;I<i;I++)for(var B=0;B<r.length-1;B++){var R=B+I*r.length,L=R,P=R+r.length,D=R+r.length+1,O=R+1;s.push(L,P,O),s.push(D,O,P)}return e.setIndex(s),e.setAttribute("position",new bp(l,3)),e.setAttribute("uv",new bp(c,2)),e.setAttribute("normal",new bp(d,3)),e}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}}]),n}(Ip),RA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;(0,u.Z)(this,n);var s=new IA;return s.absarc(0,-i/2,r,1.5*Math.PI,0),s.absarc(0,i/2,r,0,.5*Math.PI),(e=t.call(this,s.getPoints(a),o)).type="CapsuleGeometry",e.parameters={radius:r,height:i,capSegments:a,radialSegments:o},e}return(0,c.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.length,e.capSegments,e.radialSegments)}}]),n}(BA),LA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;(0,u.Z)(this,n),(e=t.call(this)).type="CircleGeometry",e.parameters={radius:r,segments:i,thetaStart:a,thetaLength:o},i=Math.max(3,i);var s=[],l=[],c=[],h=[],d=new Dd,f=new sd;l.push(0,0,0),c.push(0,0,1),h.push(.5,.5);for(var p=0,v=3;p<=i;p++,v+=3){var m=a+p/i*o;d.x=r*Math.cos(m),d.y=r*Math.sin(m),l.push(d.x,d.y,d.z),c.push(0,0,1),f.x=(l[v]/r+1)/2,f.y=(l[v+1]/r+1)/2,h.push(f.x,f.y)}for(var g=1;g<=i;g++)s.push(g,g+1,0);return e.setIndex(s),e.setAttribute("position",new bp(l,3)),e.setAttribute("normal",new bp(c,3)),e.setAttribute("uv",new bp(h,2)),e}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.segments,e.thetaStart,e.thetaLength)}}]),n}(Ip),PA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;(0,u.Z)(this,n),(e=t.call(this)).type="CylinderGeometry",e.parameters={radiusTop:r,radiusBottom:i,height:a,radialSegments:o,heightSegments:s,openEnded:l,thetaStart:c,thetaLength:h};var d=(0,Il.Z)(e);o=Math.floor(o),s=Math.floor(s);var f=[],p=[],v=[],m=[],g=0,y=[],A=a/2,x=0;function b(e){for(var t=g,n=new sd,a=new Dd,s=0,l=!0===e?r:i,u=!0===e?1:-1,y=1;y<=o;y++)p.push(0,A*u,0),v.push(0,u,0),m.push(.5,.5),g++;for(var b=g,_=0;_<=o;_++){var w=_/o*h+c,E=Math.cos(w),S=Math.sin(w);a.x=l*S,a.y=A*u,a.z=l*E,p.push(a.x,a.y,a.z),v.push(0,u,0),n.x=.5*E+.5,n.y=.5*S*u+.5,m.push(n.x,n.y),g++}for(var M=0;M<o;M++){var C=t+M,k=b+M;!0===e?f.push(k,k+1,C):f.push(k+1,k,C),s+=3}d.addGroup(x,s,!0===e?1:2),x+=s}return function(){for(var e=new Dd,t=new Dd,n=0,l=(i-r)/a,u=0;u<=s;u++){for(var b=[],_=u/s,w=_*(i-r)+r,E=0;E<=o;E++){var S=E/o,M=S*h+c,C=Math.sin(M),k=Math.cos(M);t.x=w*C,t.y=-_*a+A,t.z=w*k,p.push(t.x,t.y,t.z),e.set(C,l,k).normalize(),v.push(e.x,e.y,e.z),m.push(S,1-_),b.push(g++)}y.push(b)}for(var T=0;T<o;T++)for(var I=0;I<s;I++){var B=y[I][T],R=y[I+1][T],L=y[I+1][T+1],P=y[I][T+1];f.push(B,R,P),f.push(R,L,P),n+=6}d.addGroup(x,n,0),x+=n}(),!1===l&&(r>0&&b(!0),i>0&&b(!1)),e.setIndex(f),e.setAttribute("position",new bp(p,3)),e.setAttribute("normal",new bp(v,3)),e.setAttribute("uv",new bp(m,2)),e}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(Ip),DA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return(0,u.Z)(this,n),(e=t.call(this,0,r,i,a,o,s,l,c)).type="ConeGeometry",e.parameters={radius:r,height:i,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:c},e}return(0,c.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(PA),OA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,u.Z)(this,n),(e=t.call(this)).type="PolyhedronGeometry",e.parameters={vertices:r,indices:i,radius:a,detail:o};var s=[],l=[];function c(e,t,n,r){for(var i=r+1,a=[],o=0;o<=i;o++){a[o]=[];for(var s=e.clone().lerp(n,o/i),l=t.clone().lerp(n,o/i),u=i-o,c=0;c<=u;c++)a[o][c]=0===c&&o===i?s:s.clone().lerp(l,c/u)}for(var d=0;d<i;d++)for(var f=0;f<2*(i-d)-1;f++){var p=Math.floor(f/2);f%2===0?(h(a[d][p+1]),h(a[d+1][p]),h(a[d][p])):(h(a[d][p+1]),h(a[d+1][p+1]),h(a[d+1][p]))}}function h(e){s.push(e.x,e.y,e.z)}function d(e,t){var n=3*e;t.x=r[n+0],t.y=r[n+1],t.z=r[n+2]}function f(e,t,n,r){r<0&&1===e.x&&(l[t]=e.x-1),0===n.x&&0===n.z&&(l[t]=r/2/Math.PI+.5)}function p(e){return Math.atan2(e.z,-e.x)}return function(e){for(var t=new Dd,n=new Dd,r=new Dd,a=0;a<i.length;a+=3)d(i[a+0],t),d(i[a+1],n),d(i[a+2],r),c(t,n,r,e)}(o),function(e){for(var t=new Dd,n=0;n<s.length;n+=3)t.x=s[n+0],t.y=s[n+1],t.z=s[n+2],t.normalize().multiplyScalar(e),s[n+0]=t.x,s[n+1]=t.y,s[n+2]=t.z}(a),function(){for(var e=new Dd,t=0;t<s.length;t+=3){e.x=s[t+0],e.y=s[t+1],e.z=s[t+2];var n=p(e)/2/Math.PI+.5,r=(i=e,Math.atan2(-i.y,Math.sqrt(i.x*i.x+i.z*i.z))/Math.PI+.5);l.push(n,1-r)}var i;(function(){for(var e=new Dd,t=new Dd,n=new Dd,r=new Dd,i=new sd,a=new sd,o=new sd,u=0,c=0;u<s.length;u+=9,c+=6){e.set(s[u+0],s[u+1],s[u+2]),t.set(s[u+3],s[u+4],s[u+5]),n.set(s[u+6],s[u+7],s[u+8]),i.set(l[c+0],l[c+1]),a.set(l[c+2],l[c+3]),o.set(l[c+4],l[c+5]),r.copy(e).add(t).add(n).divideScalar(3);var h=p(r);f(i,c+0,e,h),f(a,c+2,t,h),f(o,c+4,n,h)}})(),function(){for(var e=0;e<l.length;e+=6){var t=l[e+0],n=l[e+2],r=l[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(l[e+0]+=1),n<.2&&(l[e+2]+=1),r<.2&&(l[e+4]+=1))}}()}(),e.setAttribute("position",new bp(s,3)),e.setAttribute("normal",new bp(s.slice(),3)),e.setAttribute("uv",new bp(l,2)),0===o?e.computeVertexNormals():e.normalizeNormals(),e}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.vertices,e.indices,e.radius,e.details)}}]),n}(Ip),FA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,u.Z)(this,n);var a=(1+Math.sqrt(5))/2,o=1/a,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-a,0,-o,a,0,o,-a,0,o,a,-o,-a,0,-o,a,0,o,-a,0,o,a,0,-a,0,-o,a,0,-o,-a,0,o,a,0,o];return(e=t.call(this,s,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],r,i)).type="DodecahedronGeometry",e.parameters={radius:r,detail:i},e}return(0,c.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(OA),NA=new Dd,UA=new Dd,ZA=new Dd,zA=new Jf,HA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if((0,u.Z)(this,n),(e=t.call(this)).type="EdgesGeometry",e.parameters={geometry:r,thresholdAngle:i},null!==r){for(var a=Math.pow(10,4),o=Math.cos(Jh*i),s=r.getIndex(),l=r.getAttribute("position"),c=s?s.count:l.count,h=[0,0,0],d=["a","b","c"],f=new Array(3),p={},v=[],m=0;m<c;m+=3){s?(h[0]=s.getX(m),h[1]=s.getX(m+1),h[2]=s.getX(m+2)):(h[0]=m,h[1]=m+1,h[2]=m+2);var g=zA.a,y=zA.b,A=zA.c;if(g.fromBufferAttribute(l,h[0]),y.fromBufferAttribute(l,h[1]),A.fromBufferAttribute(l,h[2]),zA.getNormal(ZA),f[0]="".concat(Math.round(g.x*a),",").concat(Math.round(g.y*a),",").concat(Math.round(g.z*a)),f[1]="".concat(Math.round(y.x*a),",").concat(Math.round(y.y*a),",").concat(Math.round(y.z*a)),f[2]="".concat(Math.round(A.x*a),",").concat(Math.round(A.y*a),",").concat(Math.round(A.z*a)),f[0]!==f[1]&&f[1]!==f[2]&&f[2]!==f[0])for(var x=0;x<3;x++){var b=(x+1)%3,_=f[x],w=f[b],E=zA[d[x]],S=zA[d[b]],M="".concat(_,"_").concat(w),C="".concat(w,"_").concat(_);C in p&&p[C]?(ZA.dot(p[C].normal)<=o&&(v.push(E.x,E.y,E.z),v.push(S.x,S.y,S.z)),p[C]=null):M in p||(p[M]={index0:h[x],index1:h[b],normal:ZA.clone()})}}for(var k in p)if(p[k]){var T=p[k],I=T.index0,B=T.index1;NA.fromBufferAttribute(l,I),UA.fromBufferAttribute(l,B),v.push(NA.x,NA.y,NA.z),v.push(UA.x,UA.y,UA.z)}e.setAttribute("position",new bp(v,3))}return e}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}]),n}(Ip),GA=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).uuid=Yh(),r.type="Shape",r.holes=[],r}return(0,c.Z)(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){(0,Zn.Z)((0,zn.Z)(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push((new IA).fromJSON(i))}return this}}]),n}(IA),QA=function(e,t){var n,r,i,a,o,s,l,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=t&&t.length,h=c?t[0]*u:e.length,d=VA(e,0,h,u,!0),f=[];if(!d||d.next===d.prev)return f;if(c&&(d=function(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=VA(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(nx(o));for(s.sort(KA),i=0;i<s.length;i++)n=$A(s[i],n);return n}(e,t,d,u)),e.length>80*u){n=i=e[0],r=a=e[1];for(var p=u;p<h;p+=u)(o=e[p])<n&&(n=o),(s=e[p+1])<r&&(r=s),o>i&&(i=o),s>a&&(a=s);l=0!==(l=Math.max(i-n,a-r))?32767/l:0}return WA(d,f,u,n,r,l,0),f};function VA(e,t,n,r,i){var a,o;if(i===function(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=dx(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=dx(a,e[a],e[a+1],o);return o&&ox(o,o.next)&&(fx(o),o=o.next),o}function jA(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!ox(r,r.next)&&0!==ax(r.prev,r,r.next))r=r.next;else{if(fx(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function WA(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=tx(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,l,u=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(o>1)}(i)}(e,r,i,a);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?JA(e,r,i,a):qA(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),fx(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?WA(e=XA(jA(e),t,n),t,n,r,i,a,2):2===o&&YA(e,t,n,r,i,a):WA(jA(e),t,n,r,i,a,1);break}}}function qA(e){var t=e.prev,n=e,r=e.next;if(ax(t,n,r)>=0)return!1;for(var i=t.x,a=n.x,o=r.x,s=t.y,l=n.y,u=r.y,c=i<a?i<o?i:o:a<o?a:o,h=s<l?s<u?s:u:l<u?l:u,d=i>a?i>o?i:o:a>o?a:o,f=s>l?s>u?s:u:l>u?l:u,p=r.next;p!==t;){if(p.x>=c&&p.x<=d&&p.y>=h&&p.y<=f&&rx(i,s,a,l,o,u,p.x,p.y)&&ax(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function JA(e,t,n,r){var i=e.prev,a=e,o=e.next;if(ax(i,a,o)>=0)return!1;for(var s=i.x,l=a.x,u=o.x,c=i.y,h=a.y,d=o.y,f=s<l?s<u?s:u:l<u?l:u,p=c<h?c<d?c:d:h<d?h:d,v=s>l?s>u?s:u:l>u?l:u,m=c>h?c>d?c:d:h>d?h:d,g=tx(f,p,t,n,r),y=tx(v,m,t,n,r),A=e.prevZ,x=e.nextZ;A&&A.z>=g&&x&&x.z<=y;){if(A.x>=f&&A.x<=v&&A.y>=p&&A.y<=m&&A!==i&&A!==o&&rx(s,c,l,h,u,d,A.x,A.y)&&ax(A.prev,A,A.next)>=0)return!1;if(A=A.prevZ,x.x>=f&&x.x<=v&&x.y>=p&&x.y<=m&&x!==i&&x!==o&&rx(s,c,l,h,u,d,x.x,x.y)&&ax(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;A&&A.z>=g;){if(A.x>=f&&A.x<=v&&A.y>=p&&A.y<=m&&A!==i&&A!==o&&rx(s,c,l,h,u,d,A.x,A.y)&&ax(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;x&&x.z<=y;){if(x.x>=f&&x.x<=v&&x.y>=p&&x.y<=m&&x!==i&&x!==o&&rx(s,c,l,h,u,d,x.x,x.y)&&ax(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function XA(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!ox(i,a)&&sx(i,r,r.next,a)&&cx(i,a)&&cx(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),fx(r),fx(r.next),r=e=a),r=r.next}while(r!==e);return jA(r)}function YA(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&ix(o,s)){var l=hx(o,s);return o=jA(o,o.next),l=jA(l,l.next),WA(o,t,n,r,i,a,0),void WA(l,t,n,r,i,a,0)}s=s.next}o=o.next}while(o!==e)}function KA(e,t){return e.x-t.x}function $A(e,t){var n=function(e,t){var n,r=t,i=-1/0,a=e.x,o=e.y;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=a&&s>i&&(i=s,n=r.x<r.next.x?r:r.next,s===a))return n}r=r.next}while(r!==t);if(!n)return null;var l,u=n,c=n.x,h=n.y,d=1/0;r=n;do{a>=r.x&&r.x>=c&&a!==r.x&&rx(o<h?a:i,o,c,h,o<h?i:a,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(a-r.x),cx(r,e)&&(l<d||l===d&&(r.x>n.x||r.x===n.x&&ex(n,r)))&&(n=r,d=l)),r=r.next}while(r!==u);return n}(e,t);if(!n)return t;var r=hx(n,e);return jA(r,r.next),jA(n,n.next)}function ex(e,t){return ax(e.prev,e,t.prev)<0&&ax(t.next,e,e.next)<0}function tx(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function nx(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function rx(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function ix(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&sx(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(cx(e,t)&&cx(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(ax(e.prev,e,t.prev)||ax(e,t.prev,t))||ox(e,t)&&ax(e.prev,e,e.next)>0&&ax(t.prev,t,t.next)>0)}function ax(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function ox(e,t){return e.x===t.x&&e.y===t.y}function sx(e,t,n,r){var i=ux(ax(e,t,n)),a=ux(ax(e,t,r)),o=ux(ax(n,r,e)),s=ux(ax(n,r,t));return i!==a&&o!==s||(!(0!==i||!lx(e,n,t))||(!(0!==a||!lx(e,r,t))||(!(0!==o||!lx(n,e,r))||!(0!==s||!lx(n,t,r)))))}function lx(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function ux(e){return e>0?1:e<0?-1:0}function cx(e,t){return ax(e.prev,e,e.next)<0?ax(e,t,e.next)>=0&&ax(e,e.prev,t)>=0:ax(e,t,e.prev)<0||ax(e,e.next,t)<0}function hx(e,t){var n=new px(e.i,e.x,e.y),r=new px(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function dx(e,t,n,r){var i=new px(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function fx(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function px(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}var vx=function(){function e(){(0,u.Z)(this,e)}return(0,c.Z)(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],i=[];mx(e),gx(n,e);var a=e.length;t.forEach(mx);for(var o=0;o<t.length;o++)r.push(a),a+=t[o].length,gx(n,t[o]);for(var s=QA(n,r),l=0;l<s.length;l+=3)i.push(s.slice(l,l+3));return i}}]),e}();function mx(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function gx(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var yx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new GA([new sd(.5,.5),new sd(-.5,.5),new sd(-.5,-.5),new sd(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,u.Z)(this,n),(e=t.call(this)).type="ExtrudeGeometry",e.parameters={shapes:r,options:i},r=Array.isArray(r)?r:[r];for(var a=(0,Il.Z)(e),o=[],s=[],l=0,c=r.length;l<c;l++){h(r[l])}function h(e){var t,n,r,l,u,c=[],h=void 0!==i.curveSegments?i.curveSegments:12,d=void 0!==i.steps?i.steps:1,f=void 0!==i.depth?i.depth:1,p=void 0===i.bevelEnabled||i.bevelEnabled,v=void 0!==i.bevelThickness?i.bevelThickness:.2,m=void 0!==i.bevelSize?i.bevelSize:v-.1,g=void 0!==i.bevelOffset?i.bevelOffset:0,y=void 0!==i.bevelSegments?i.bevelSegments:3,A=i.extrudePath,x=void 0!==i.UVGenerator?i.UVGenerator:Ax,b=!1;A&&(t=A.getSpacedPoints(d),b=!0,p=!1,n=A.computeFrenetFrames(d,!1),r=new Dd,l=new Dd,u=new Dd),p||(y=0,v=0,m=0,g=0);var _=e.extractPoints(h),w=_.shape,E=_.holes;if(!vx.isClockWise(w)){w=w.reverse();for(var S=0,M=E.length;S<M;S++){var C=E[S];vx.isClockWise(C)&&(E[S]=C.reverse())}}for(var k=vx.triangulateShape(w,E),T=w,I=0,B=E.length;I<B;I++){var R=E[I];w=w.concat(R)}function L(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}var P=w.length,D=k.length;function O(e,t,n){var r,i,a,o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=o*o+s*s,h=o*u-s*l;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(c),f=Math.sqrt(l*l+u*u),p=t.x-s/d,v=t.y+o/d,m=((n.x-u/f-p)*u-(n.y+l/f-v)*l)/(o*u-s*l),g=(r=p+o*m-e.x)*r+(i=v+s*m-e.y)*i;if(g<=2)return new sd(r,i);a=Math.sqrt(g/2)}else{var y=!1;o>Number.EPSILON?l>Number.EPSILON&&(y=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),y?(r=-s,i=o,a=Math.sqrt(c)):(r=o,i=s,a=Math.sqrt(c/2))}return new sd(r/a,i/a)}for(var F=[],N=0,U=T.length,Z=U-1,z=N+1;N<U;N++,Z++,z++)Z===U&&(Z=0),z===U&&(z=0),F[N]=O(T[N],T[Z],T[z]);for(var H,G=[],Q=F.concat(),V=0,j=E.length;V<j;V++){var W=E[V];H=[];for(var q=0,J=W.length,X=J-1,Y=q+1;q<J;q++,X++,Y++)X===J&&(X=0),Y===J&&(Y=0),H[q]=O(W[q],W[X],W[Y]);G.push(H),Q=Q.concat(H)}for(var K=0;K<y;K++){for(var $=K/y,ee=v*Math.cos($*Math.PI/2),te=m*Math.sin($*Math.PI/2)+g,ne=0,re=T.length;ne<re;ne++){var ie=L(T[ne],F[ne],te);Be(ie.x,ie.y,-ee)}for(var ae=0,oe=E.length;ae<oe;ae++){var se=E[ae];H=G[ae];for(var le=0,ue=se.length;le<ue;le++){var ce=L(se[le],H[le],te);Be(ce.x,ce.y,-ee)}}}for(var he=m+g,de=0;de<P;de++){var fe=p?L(w[de],Q[de],he):w[de];b?(l.copy(n.normals[0]).multiplyScalar(fe.x),r.copy(n.binormals[0]).multiplyScalar(fe.y),u.copy(t[0]).add(l).add(r),Be(u.x,u.y,u.z)):Be(fe.x,fe.y,0)}for(var pe=1;pe<=d;pe++)for(var ve=0;ve<P;ve++){var me=p?L(w[ve],Q[ve],he):w[ve];b?(l.copy(n.normals[pe]).multiplyScalar(me.x),r.copy(n.binormals[pe]).multiplyScalar(me.y),u.copy(t[pe]).add(l).add(r),Be(u.x,u.y,u.z)):Be(me.x,me.y,f/d*pe)}for(var ge=y-1;ge>=0;ge--){for(var ye=ge/y,Ae=v*Math.cos(ye*Math.PI/2),xe=m*Math.sin(ye*Math.PI/2)+g,be=0,_e=T.length;be<_e;be++){var we=L(T[be],F[be],xe);Be(we.x,we.y,f+Ae)}for(var Ee=0,Se=E.length;Ee<Se;Ee++){var Me=E[Ee];H=G[Ee];for(var Ce=0,ke=Me.length;Ce<ke;Ce++){var Te=L(Me[Ce],H[Ce],xe);b?Be(Te.x,Te.y+t[d-1].y,t[d-1].x+Ae):Be(Te.x,Te.y,f+Ae)}}}function Ie(e,t){for(var n=e.length;--n>=0;){var r=n,i=n-1;i<0&&(i=e.length-1);for(var a=0,o=d+2*y;a<o;a++){var s=P*a,l=P*(a+1);Le(t+r+s,t+i+s,t+i+l,t+r+l)}}}function Be(e,t,n){c.push(e),c.push(t),c.push(n)}function Re(e,t,n){Pe(e),Pe(t),Pe(n);var r=o.length/3,i=x.generateTopUV(a,o,r-3,r-2,r-1);De(i[0]),De(i[1]),De(i[2])}function Le(e,t,n,r){Pe(e),Pe(t),Pe(r),Pe(t),Pe(n),Pe(r);var i=o.length/3,s=x.generateSideWallUV(a,o,i-6,i-3,i-2,i-1);De(s[0]),De(s[1]),De(s[3]),De(s[1]),De(s[2]),De(s[3])}function Pe(e){o.push(c[3*e+0]),o.push(c[3*e+1]),o.push(c[3*e+2])}function De(e){s.push(e.x),s.push(e.y)}!function(){var e=o.length/3;if(p){for(var t=0,n=P*t,r=0;r<D;r++){var i=k[r];Re(i[2]+n,i[1]+n,i[0]+n)}n=P*(t=d+2*y);for(var s=0;s<D;s++){var l=k[s];Re(l[0]+n,l[1]+n,l[2]+n)}}else{for(var u=0;u<D;u++){var c=k[u];Re(c[2],c[1],c[0])}for(var h=0;h<D;h++){var f=k[h];Re(f[0]+P*d,f[1]+P*d,f[2]+P*d)}}a.addGroup(e,o.length/3-e,0)}(),function(){var e=o.length/3,t=0;Ie(T,t),t+=T.length;for(var n=0,r=E.length;n<r;n++){var i=E[n];Ie(i,t),t+=i.length}a.addGroup(e,o.length/3-e,1)}()}return e.setAttribute("position",new bp(o,3)),e.setAttribute("uv",new bp(s,2)),e.computeVertexNormals(),e}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}},{key:"toJSON",value:function(){var e=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++){var o=t[e.shapes[i]];r.push(o)}var s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new kA[s.type]).fromJSON(s)),new n(r,e.options)}}]),n}(Ip),Ax={generateTopUV:function(e,t,n,r,i){var a=t[3*n],o=t[3*n+1],s=t[3*r],l=t[3*r+1],u=t[3*i],c=t[3*i+1];return[new sd(a,o),new sd(s,l),new sd(u,c)]},generateSideWallUV:function(e,t,n,r,i,a){var o=t[3*n],s=t[3*n+1],l=t[3*n+2],u=t[3*r],c=t[3*r+1],h=t[3*r+2],d=t[3*i],f=t[3*i+1],p=t[3*i+2],v=t[3*a],m=t[3*a+1],g=t[3*a+2];return Math.abs(s-c)<Math.abs(o-u)?[new sd(o,1-l),new sd(u,1-h),new sd(d,1-p),new sd(v,1-g)]:[new sd(s,1-l),new sd(c,1-h),new sd(f,1-p),new sd(m,1-g)]}};var xx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,u.Z)(this,n);var a=(1+Math.sqrt(5))/2,o=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1];return(e=t.call(this,o,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],r,i)).type="IcosahedronGeometry",e.parameters={radius:r,detail:i},e}return(0,c.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(OA),bx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,u.Z)(this,n);return(e=t.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],r,i)).type="OctahedronGeometry",e.parameters={radius:r,detail:i},e}return(0,c.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(OA),_x=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;(0,u.Z)(this,n),(e=t.call(this)).type="RingGeometry",e.parameters={innerRadius:r,outerRadius:i,thetaSegments:a,phiSegments:o,thetaStart:s,thetaLength:l},a=Math.max(3,a);for(var c=[],h=[],d=[],f=[],p=r,v=(i-r)/(o=Math.max(1,o)),m=new Dd,g=new sd,y=0;y<=o;y++){for(var A=0;A<=a;A++){var x=s+A/a*l;m.x=p*Math.cos(x),m.y=p*Math.sin(x),h.push(m.x,m.y,m.z),d.push(0,0,1),g.x=(m.x/i+1)/2,g.y=(m.y/i+1)/2,f.push(g.x,g.y)}p+=v}for(var b=0;b<o;b++)for(var _=b*(a+1),w=0;w<a;w++){var E=w+_,S=E,M=E+a+1,C=E+a+2,k=E+1;c.push(S,M,k),c.push(M,C,k)}return e.setIndex(c),e.setAttribute("position",new bp(h,3)),e.setAttribute("normal",new bp(d,3)),e.setAttribute("uv",new bp(f,2)),e}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}]),n}(Ip),wx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new GA([new sd(0,.5),new sd(-.5,-.5),new sd(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;(0,u.Z)(this,n),(e=t.call(this)).type="ShapeGeometry",e.parameters={shapes:r,curveSegments:i};var a=[],o=[],s=[],l=[],c=0,h=0;if(!1===Array.isArray(r))f(r);else for(var d=0;d<r.length;d++)f(r[d]),e.addGroup(c,h,d),c+=h,h=0;function f(e){var t=o.length/3,n=e.extractPoints(i),r=n.shape,u=n.holes;!1===vx.isClockWise(r)&&(r=r.reverse());for(var c=0,d=u.length;c<d;c++){var f=u[c];!0===vx.isClockWise(f)&&(u[c]=f.reverse())}for(var p=vx.triangulateShape(r,u),v=0,m=u.length;v<m;v++){var g=u[v];r=r.concat(g)}for(var y=0,A=r.length;y<A;y++){var x=r[y];o.push(x.x,x.y,0),s.push(0,0,1),l.push(x.x,x.y)}for(var b=0,_=p.length;b<_;b++){var w=p[b],E=w[0]+t,S=w[1]+t,M=w[2]+t;a.push(E,S,M),h+=3}}return e.setIndex(a),e.setAttribute("position",new bp(o,3)),e.setAttribute("normal",new bp(s,3)),e.setAttribute("uv",new bp(l,2)),e}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}},{key:"toJSON",value:function(){var e=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++){var o=t[e.shapes[i]];r.push(o)}return new n(r,e.curveSegments)}}]),n}(Ip);var Ex=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;(0,u.Z)(this,n),(e=t.call(this)).type="SphereGeometry",e.parameters={radius:r,widthSegments:i,heightSegments:a,phiStart:o,phiLength:s,thetaStart:l,thetaLength:c},i=Math.max(3,Math.floor(i)),a=Math.max(2,Math.floor(a));for(var h=Math.min(l+c,Math.PI),d=0,f=[],p=new Dd,v=new Dd,m=[],g=[],y=[],A=[],x=0;x<=a;x++){var b=[],_=x/a,w=0;0===x&&0===l?w=.5/i:x===a&&h===Math.PI&&(w=-.5/i);for(var E=0;E<=i;E++){var S=E/i;p.x=-r*Math.cos(o+S*s)*Math.sin(l+_*c),p.y=r*Math.cos(l+_*c),p.z=r*Math.sin(o+S*s)*Math.sin(l+_*c),g.push(p.x,p.y,p.z),v.copy(p).normalize(),y.push(v.x,v.y,v.z),A.push(S+w,1-_),b.push(d++)}f.push(b)}for(var M=0;M<a;M++)for(var C=0;C<i;C++){var k=f[M][C+1],T=f[M][C],I=f[M+1][C],B=f[M+1][C+1];(0!==M||l>0)&&m.push(k,T,B),(M!==a-1||h<Math.PI)&&m.push(T,I,B)}return e.setIndex(m),e.setAttribute("position",new bp(g,3)),e.setAttribute("normal",new bp(y,3)),e.setAttribute("uv",new bp(A,2)),e}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(Ip),Sx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,u.Z)(this,n);return(e=t.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],r,i)).type="TetrahedronGeometry",e.parameters={radius:r,detail:i},e}return(0,c.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(OA),Mx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;(0,u.Z)(this,n),(e=t.call(this)).type="TorusGeometry",e.parameters={radius:r,tube:i,radialSegments:a,tubularSegments:o,arc:s},a=Math.floor(a),o=Math.floor(o);for(var l=[],c=[],h=[],d=[],f=new Dd,p=new Dd,v=new Dd,m=0;m<=a;m++)for(var g=0;g<=o;g++){var y=g/o*s,A=m/a*Math.PI*2;p.x=(r+i*Math.cos(A))*Math.cos(y),p.y=(r+i*Math.cos(A))*Math.sin(y),p.z=i*Math.sin(A),c.push(p.x,p.y,p.z),f.x=r*Math.cos(y),f.y=r*Math.sin(y),v.subVectors(p,f).normalize(),h.push(v.x,v.y,v.z),d.push(g/o),d.push(m/a)}for(var x=1;x<=a;x++)for(var b=1;b<=o;b++){var _=(o+1)*x+b-1,w=(o+1)*(x-1)+b-1,E=(o+1)*(x-1)+b,S=(o+1)*x+b;l.push(_,w,S),l.push(w,E,S)}return e.setIndex(l),e.setAttribute("position",new bp(c,3)),e.setAttribute("normal",new bp(h,3)),e.setAttribute("uv",new bp(d,2)),e}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),n}(Ip),Cx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;(0,u.Z)(this,n),(e=t.call(this)).type="TorusKnotGeometry",e.parameters={radius:r,tube:i,tubularSegments:a,radialSegments:o,p:s,q:l},a=Math.floor(a),o=Math.floor(o);for(var c=[],h=[],d=[],f=[],p=new Dd,v=new Dd,m=new Dd,g=new Dd,y=new Dd,A=new Dd,x=new Dd,b=0;b<=a;++b){var _=b/a*s*Math.PI*2;L(_,s,l,r,m),L(_+.01,s,l,r,g),A.subVectors(g,m),x.addVectors(g,m),y.crossVectors(A,x),x.crossVectors(y,A),y.normalize(),x.normalize();for(var w=0;w<=o;++w){var E=w/o*Math.PI*2,S=-i*Math.cos(E),M=i*Math.sin(E);p.x=m.x+(S*x.x+M*y.x),p.y=m.y+(S*x.y+M*y.y),p.z=m.z+(S*x.z+M*y.z),h.push(p.x,p.y,p.z),v.subVectors(p,m).normalize(),d.push(v.x,v.y,v.z),f.push(b/a),f.push(w/o)}}for(var C=1;C<=a;C++)for(var k=1;k<=o;k++){var T=(o+1)*(C-1)+(k-1),I=(o+1)*C+(k-1),B=(o+1)*C+k,R=(o+1)*(C-1)+k;c.push(T,I,R),c.push(I,B,R)}function L(e,t,n,r,i){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*a,i.y=r*(2+l)*o*.5,i.z=r*Math.sin(s)*.5}return e.setIndex(c),e.setAttribute("position",new bp(h,3)),e.setAttribute("normal",new bp(d,3)),e.setAttribute("uv",new bp(f,2)),e}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}]),n}(Ip),kx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new MA(new Dd(-1,-1,0),new Dd(-1,1,0),new Dd(1,1,0)),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,u.Z)(this,n),(e=t.call(this)).type="TubeGeometry",e.parameters={path:r,tubularSegments:i,radius:a,radialSegments:o,closed:s};var l=r.computeFrenetFrames(i,s);e.tangents=l.tangents,e.normals=l.normals,e.binormals=l.binormals;var c=new Dd,h=new Dd,d=new sd,f=new Dd,p=[],v=[],m=[],g=[];function y(e){f=r.getPointAt(e/i,f);for(var t=l.normals[e],n=l.binormals[e],s=0;s<=o;s++){var u=s/o*Math.PI*2,d=Math.sin(u),m=-Math.cos(u);h.x=m*t.x+d*n.x,h.y=m*t.y+d*n.y,h.z=m*t.z+d*n.z,h.normalize(),v.push(h.x,h.y,h.z),c.x=f.x+a*h.x,c.y=f.y+a*h.y,c.z=f.z+a*h.z,p.push(c.x,c.y,c.z)}}return function(){for(var e=0;e<i;e++)y(e);y(!1===s?i:0),function(){for(var e=0;e<=i;e++)for(var t=0;t<=o;t++)d.x=e/i,d.y=t/o,m.push(d.x,d.y)}(),function(){for(var e=1;e<=i;e++)for(var t=1;t<=o;t++){var n=(o+1)*(e-1)+(t-1),r=(o+1)*e+(t-1),a=(o+1)*e+t,s=(o+1)*(e-1)+t;g.push(n,r,s),g.push(r,a,s)}}()}(),e.setIndex(g),e.setAttribute("position",new bp(p,3)),e.setAttribute("normal",new bp(v,3)),e.setAttribute("uv",new bp(m,2)),e}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}},{key:"toJSON",value:function(){var e=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function(e){return new n((new kA[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}]),n}(Ip),Tx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((0,u.Z)(this,n),(e=t.call(this)).type="WireframeGeometry",e.parameters={geometry:r},null!==r){var i=[],a=new Set,o=new Dd,s=new Dd;if(null!==r.index){var l=r.attributes.position,c=r.index,h=r.groups;0===h.length&&(h=[{start:0,count:c.count,materialIndex:0}]);for(var d=0,f=h.length;d<f;++d)for(var p=h[d],v=p.start,m=v,g=v+p.count;m<g;m+=3)for(var y=0;y<3;y++){var A=c.getX(m+y),x=c.getX(m+(y+1)%3);o.fromBufferAttribute(l,A),s.fromBufferAttribute(l,x),!0===Ix(o,s,a)&&(i.push(o.x,o.y,o.z),i.push(s.x,s.y,s.z))}}else for(var b=r.attributes.position,_=0,w=b.count/3;_<w;_++)for(var E=0;E<3;E++){var S=3*_+E,M=3*_+(E+1)%3;o.fromBufferAttribute(b,S),s.fromBufferAttribute(b,M),!0===Ix(o,s,a)&&(i.push(o.x,o.y,o.z),i.push(s.x,s.y,s.z))}e.setAttribute("position",new bp(i,3))}return e}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}]),n}(Ip);function Ix(e,t,n){var r="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),i="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var Bx=Object.freeze({__proto__:null,BoxGeometry:Xp,CapsuleGeometry:RA,CircleGeometry:LA,ConeGeometry:DA,CylinderGeometry:PA,DodecahedronGeometry:FA,EdgesGeometry:HA,ExtrudeGeometry:yx,IcosahedronGeometry:xx,LatheGeometry:BA,OctahedronGeometry:bx,PlaneGeometry:gv,PolyhedronGeometry:OA,RingGeometry:_x,ShapeGeometry:wx,SphereGeometry:Ex,TetrahedronGeometry:Sx,TorusGeometry:Mx,TorusKnotGeometry:Cx,TubeGeometry:kx,WireframeGeometry:Tx}),Rx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).isShadowMaterial=!0,r.type="ShadowMaterial",r.color=new np(0),r.transparent=!0,r.fog=!0,r.setValues(e),r}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.fog=e.fog,this}}]),n}(Yf),Lx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).isRawShaderMaterial=!0,r.type="RawShaderMaterial",r}return(0,c.Z)(n)}(tv),Px=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).isMeshStandardMaterial=!0,r.defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new np(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new np(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=dh,r.normalScale=new sd(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Yf),Dx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).isMeshPhysicalMaterial=!0,r.defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new sd(1,1),r.clearcoatNormalMap=null,r.ior=1.5,Object.defineProperty((0,Il.Z)(r),"reflectivity",{get:function(){return Kh(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),r.iridescenceMap=null,r.iridescenceIOR=1.3,r.iridescenceThicknessRange=[100,400],r.iridescenceThicknessMap=null,r.sheenColor=new np(0),r.sheenColorMap=null,r.sheenRoughness=1,r.sheenRoughnessMap=null,r.transmissionMap=null,r.thickness=0,r.thicknessMap=null,r.attenuationDistance=1/0,r.attenuationColor=new np(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularColor=new np(1,1,1),r.specularColorMap=null,r._sheen=0,r._clearcoat=0,r._iridescence=0,r._transmission=0,r.setValues(e),r}return(0,c.Z)(n,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}},{key:"iridescence",get:function(){return this._iridescence},set:function(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=(0,O.Z)(e.iridescenceThicknessRange),this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}]),n}(Px),Ox=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).isMeshPhongMaterial=!0,r.type="MeshPhongMaterial",r.color=new np(16777215),r.specular=new np(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new np(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=dh,r.normalScale=new sd(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=_u,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Yf),Fx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).isMeshToonMaterial=!0,r.defines={TOON:""},r.type="MeshToonMaterial",r.color=new np(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new np(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=dh,r.normalScale=new sd(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(Yf),Nx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).isMeshNormalMaterial=!0,r.type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=dh,r.normalScale=new sd(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.flatShading=!1,r.setValues(e),r}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(Yf),Ux=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).isMeshLambertMaterial=!0,r.type="MeshLambertMaterial",r.color=new np(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new np(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=dh,r.normalScale=new sd(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=_u,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Yf),Zx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).isMeshMatcapMaterial=!0,r.defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new np(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=dh,r.normalScale=new sd(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.flatShading=!1,r.fog=!0,r.setValues(e),r}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Yf),zx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).isLineDashedMaterial=!0,r.type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(e),r}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(Zy);function Hx(e,t,n){return Qx(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function Gx(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Qx(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Vx(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n}function jx(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,l=0;l!==t;++l)i[o++]=e[s+l];return i}function Wx(e,t,n,r){for(var i=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[r])&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[r])&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(o=a[r])&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}}var qx={arraySlice:Hx,convertArray:Gx,isTypedArray:Qx,getKeyframeOrder:Vx,sortedArray:jx,flattenJSON:Wx,subclip:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var l=a.tracks[s],u=l.getValueSize(),c=[],h=[],d=0;d<l.times.length;++d){var f=l.times[d]*i;if(!(f<n||f>=r)){c.push(l.times[d]);for(var p=0;p<u;++p)h.push(l.values[d*u+p])}}0!==c.length&&(l.times=Gx(c,l.times.constructor),l.values=Gx(h,l.values.constructor),o.push(l))}a.tracks=o;for(var v=1/0,m=0;m<a.tracks.length;++m)v>a.tracks[m].times[0]&&(v=a.tracks[m].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*v);return a.resetDuration(),a},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var i=n.tracks.length,a=t/r,o=function(){var t=n.tracks[s],r=t.ValueTypeName;if("bool"===r||"string"===r)return"continue";var i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)return"continue";var o=0,l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);var u=0,c=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=c/3);var h,d=t.times.length-1;if(a<=t.times[0]){var f=o,p=l-o;h=Hx(t.values,f,p)}else if(a>=t.times[d]){var v=d*l+o,m=v+l-o;h=Hx(t.values,v,m)}else{var g=t.createInterpolant(),y=o,A=l-o;g.evaluate(a),h=Hx(g.resultBuffer,y,A)}"quaternion"===r&&(new Pd).fromArray(h).normalize().conjugate().toArray(h);for(var x=i.times.length,b=0;b<x;++b){var _=b*c+u;if("quaternion"===r)Pd.multiplyQuaternionsFlat(i.values,_,h,0,i.values,_);else for(var w=c-2*u,E=0;E<w;++E)i.values[_+E]-=h[E]}},s=0;s<i;++s)o();return e.blendMode=ih,e}},Jx=function(){function e(t,n,r,i){(0,u.Z)(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return(0,c.Z)(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var l=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var u=n+a>>>1;e<t[u]?a=u:n=u+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}(),Xx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a){var o;return(0,u.Z)(this,n),(o=t.call(this,e,r,i,a))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:eh,endingEnd:eh},o}return(0,c.Z)(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case th:i=e,o=2*t-n;break;case nh:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case th:a=e,s=2*n-t;break;case nh:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=a*u}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(r-t),p=f*f,v=p*f,m=-h*v+2*h*p-h*f,g=(1+h)*v+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*v+(1.5+d)*p+.5*f,A=d*v-d*p,x=0;x!==o;++x)i[x]=m*a[u+x]+g*a[l+x]+y*a[s+x]+A*a[c+x];return i}}]),n}(Jx),Yx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a){return(0,u.Z)(this,n),t.call(this,e,r,i,a)}return(0,c.Z)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(n-t)/(r-t),c=1-u,h=0;h!==o;++h)i[h]=a[l+h]*c+a[s+h]*u;return i}}]),n}(Jx),Kx=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a){return(0,u.Z)(this,n),t.call(this,e,r,i,a)}return(0,c.Z)(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(Jx),$x=function(){function e(t,n,r,i){if((0,u.Z)(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Gx(n,this.TimeBufferType),this.values=Gx(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return(0,c.Z)(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new Kx(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new Yx(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new Xx(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case Yc:t=this.InterpolantFactoryMethodDiscrete;break;case Kc:t=this.InterpolantFactoryMethodLinear;break;case $c:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Yc;case this.InterpolantFactoryMethodLinear:return Kc;case this.InterpolantFactoryMethodSmooth:return $c}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=Hx(n,i,a),this.values=Hx(this.values,i*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&Qx(r))for(var l=0,u=r.length;l!==u;++l){var c=r[l];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=Hx(this.times),t=Hx(this.values),n=this.getValueSize(),r=this.getInterpolation()===$c,i=e.length-1,a=1,o=1;o<i;++o){var s=!1,l=e[o];if(l!==e[o+1]&&(1!==o||l!==e[0]))if(r)s=!0;else for(var u=o*n,c=u-n,h=u+n,d=0;d!==n;++d){var f=t[u+d];if(f!==t[c+d]||f!==t[h+d]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var p=o*n,v=a*n,m=0;m!==n;++m)t[v+m]=t[p+m]}++a}}if(i>0){e[a]=e[i];for(var g=i*n,y=a*n,A=0;A!==n;++A)t[y+A]=t[g+A];++a}return a!==e.length?(this.times=Hx(e,0,a),this.values=Hx(t,0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=Hx(this.times,0),t=Hx(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Gx(e.times,Array),values:Gx(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();$x.prototype.TimeBufferType=Float32Array,$x.prototype.ValueBufferType=Float32Array,$x.prototype.DefaultInterpolation=Kc;var eb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n)}($x);eb.prototype.ValueTypeName="bool",eb.prototype.ValueBufferType=Array,eb.prototype.DefaultInterpolation=Yc,eb.prototype.InterpolantFactoryMethodLinear=void 0,eb.prototype.InterpolantFactoryMethodSmooth=void 0;var tb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n)}($x);tb.prototype.ValueTypeName="color";var nb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n)}($x);nb.prototype.ValueTypeName="number";var rb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a){return(0,u.Z)(this,n),t.call(this,e,r,i,a)}return(0,c.Z)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),l=e*o,u=l+o;l!==u;l+=4)Pd.slerpFlat(i,0,a,l-o,a,l,s);return i}}]),n}(Jx),ib=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new rb(this.times,this.values,this.getValueSize(),e)}}]),n}($x);ib.prototype.ValueTypeName="quaternion",ib.prototype.DefaultInterpolation=Kc,ib.prototype.InterpolantFactoryMethodSmooth=void 0;var ab=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n)}($x);ab.prototype.ValueTypeName="string",ab.prototype.ValueBufferType=Array,ab.prototype.DefaultInterpolation=Yc,ab.prototype.InterpolantFactoryMethodLinear=void 0,ab.prototype.InterpolantFactoryMethodSmooth=void 0;var ob=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n)}($x);ob.prototype.ValueTypeName="vector";var sb=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rh;(0,u.Z)(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Yh(),this.duration<0&&this.resetDuration()}return(0,c.Z)(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(lb(n[i]).scale(r));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,a=n.length;i!==a;++i)t.push($x.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],l=[];s.push((o+i-1)%i,o,(o+1)%i),l.push(0,1,0);var u=Vx(s);s=jx(s,1,u),l=jx(l,1,u),r||0!==s[0]||(s.push(i),l.push(l[0])),a.push(new nb(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/n))}return new this(e,-1,a)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],l=s.name.match(i);if(l&&l.length>1){var u=l[1],c=r[u];c||(r[u]=c=[]),c.push(s)}}var h=[];for(var d in r)h.push(this.CreateFromMorphTargetSequence(d,r[d],t,n));return h}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var a=[],o=[];Wx(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,l=e.hierarchy||[],u=0;u<l.length;u++){var c=l[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){var h={},d=void 0;for(d=0;d<c.length;d++)if(c[d].morphTargets)for(var f=0;f<c[d].morphTargets.length;f++)h[c[d].morphTargets[f]]=-1;for(var p in h){for(var v=[],m=[],g=0;g!==c[d].morphTargets.length;++g){var y=c[d];v.push(y.time),m.push(y.morphTarget===p?1:0)}r.push(new nb(".morphTargetInfluence["+p+"]",v,m))}s=h.length*a}else{var A=".bones["+t[u].name+"]";n(ob,A+".position",c,"pos",r),n(ib,A+".quaternion",c,"rot",r),n(ob,A+".scale",c,"scl",r)}}return 0===r.length?null:new this(i,s,r,o)}}]),e}();function lb(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return nb;case"vector":case"vector2":case"vector3":case"vector4":return ob;case"color":return tb;case"quaternion":return ib;case"bool":case"boolean":return eb;case"string":return ab}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];Wx(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var ub,cb={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},hb=(0,c.Z)((function e(t,n,r){(0,u.Z)(this,e);var i=this,a=!1,o=0,s=0,l=void 0,c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return l?l(e):e},this.setURLModifier=function(e){return l=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){var t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=c.length;t<n;t+=2){var r=c[t],i=c[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}})),db=new hb,fb=function(){function e(t){(0,u.Z)(this,e),this.manager=void 0!==t?t:db,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return(0,c.Z)(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),pb={},vb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){var i;return(0,u.Z)(this,n),(i=t.call(this,e)).response=r,i}return(0,c.Z)(n)}((0,Tl.Z)(Error)),mb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,c.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=cb.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;if(void 0===pb[e]){pb[e]=[],pb[e].push({onLoad:t,onProgress:n,onError:r});var o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(o).then((function(t){if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;var n=pb[e],r=t.body.getReader(),i=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),a=i?parseInt(i):0,o=0!==a,s=0,l=new ReadableStream({start:function(e){!function t(){r.read().then((function(r){var i=r.done,l=r.value;if(i)e.close();else{s+=l.byteLength;for(var u=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a}),c=0,h=n.length;c<h;c++){var d=n[c];d.onProgress&&d.onProgress(u)}e.enqueue(l),t()}}))}()}});return new Response(l)}throw new vb('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((function(e){switch(l){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((function(e){return(new DOMParser).parseFromString(e,s)}));case"json":return e.json();default:if(void 0===s)return e.text();var t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((function(e){return r.decode(e)}))}})).then((function(t){cb.add(e,t);var n=pb[e];delete pb[e];for(var r=0,i=n.length;r<i;r++){var a=n[r];a.onLoad&&a.onLoad(t)}})).catch((function(t){var n=pb[e];if(void 0===n)throw i.manager.itemError(e),t;delete pb[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e)})).finally((function(){i.manager.itemEnd(e)})),this.manager.itemStart(e)}else pb[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(fb),gb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,c.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new mb(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=sb.parse(e[n]);t.push(r)}return t}}]),n}(fb),yb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,c.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=[],o=new oA,s=new mb(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);var l=0;function u(u){s.load(e[u],(function(e){var n=i.parse(e,!0);a[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(o.minFilter=Vu),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,r)}if(Array.isArray(e))for(var c=0,h=e.length;c<h;++c)u(c);else s.load(e,(function(e){var n=i.parse(e,!0);if(n.isCubemap){for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){a[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Vu),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,r);return o}}]),n}(fb),Ab=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,c.Z)(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=cb.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o=fd("img");function s(){u(),cb.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){u(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function u(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}]),n}(fb),xb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,c.Z)(n,[{key:"load",value:function(e,t,n,r){var i=new ov,a=new Ab(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],(function(e){i.images[n]=e,6===++o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var l=0;l<e.length;++l)s(l);return i}}]),n}(fb),bb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,c.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new Cy,o=new mb(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,(function(e){var n=i.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:Nu,a.wrapT=void 0!==n.wrapT?n.wrapT:Nu,a.magFilter=void 0!==n.magFilter?n.magFilter:Vu,a.minFilter=void 0!==n.minFilter?n.minFilter:Vu,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=qu),1===n.mipmapCount&&(a.minFilter=Vu),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n))}),n,r),a}}]),n}(fb),_b=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,c.Z)(n,[{key:"load",value:function(e,t,n,r){var i=new Md,a=new Ab(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}]),n}(fb),wb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,u.Z)(this,n),(r=t.call(this)).isLight=!0,r.type="Light",r.color=new np(e),r.intensity=i,r}return(0,c.Z)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,t){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(Ff),Eb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){var a;return(0,u.Z)(this,n),(a=t.call(this,e,i)).isHemisphereLight=!0,a.type="HemisphereLight",a.position.copy(Ff.DEFAULT_UP),a.updateMatrix(),a.groundColor=new np(r),a}return(0,c.Z)(n,[{key:"copy",value:function(e,t){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e,t),this.groundColor.copy(e.groundColor),this}}]),n}(wb),Sb=new df,Mb=new Dd,Cb=new Dd,kb=function(){function e(t){(0,u.Z)(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new sd(512,512),this.map=null,this.mapPass=null,this.matrix=new df,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new pv,this._frameExtents=new sd(1,1),this._viewportCount=1,this._viewports=[new Cd(0,0,1,1)]}return(0,c.Z)(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;Mb.setFromMatrixPosition(e.matrixWorld),t.position.copy(Mb),Cb.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Cb),t.updateMatrixWorld(),Sb.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Sb),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Sb)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),Tb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this,new rv(50,1,.5,500))).isSpotLightShadow=!0,e.focus=1,e}return(0,c.Z)(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*Xh*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;r===t.fov&&i===t.aspect&&a===t.far||(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),(0,Zn.Z)((0,zn.Z)(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(kb),Ib=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return(0,u.Z)(this,n),(i=t.call(this,e,r)).isSpotLight=!0,i.type="SpotLight",i.position.copy(Ff.DEFAULT_UP),i.updateMatrix(),i.target=new Ff,i.distance=a,i.angle=o,i.penumbra=s,i.decay=l,i.map=null,i.shadow=new Tb,i}return(0,c.Z)(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(wb),Bb=new df,Rb=new Dd,Lb=new Dd,Pb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this,new rv(90,1,.5,500))).isPointLightShadow=!0,e._frameExtents=new sd(4,2),e._viewportCount=6,e._viewports=[new Cd(2,1,1,1),new Cd(0,1,1,1),new Cd(3,1,1,1),new Cd(1,1,1,1),new Cd(3,0,1,1),new Cd(1,0,1,1)],e._cubeDirections=[new Dd(1,0,0),new Dd(-1,0,0),new Dd(0,0,1),new Dd(0,0,-1),new Dd(0,1,0),new Dd(0,-1,0)],e._cubeUps=[new Dd(0,1,0),new Dd(0,1,0),new Dd(0,1,0),new Dd(0,1,0),new Dd(0,0,1),new Dd(0,0,-1)],e}return(0,c.Z)(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Rb.setFromMatrixPosition(e.matrixWorld),n.position.copy(Rb),Lb.copy(n.position),Lb.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Lb),n.updateMatrixWorld(),r.makeTranslation(-Rb.x,-Rb.y,-Rb.z),Bb.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Bb)}}]),n}(kb),Db=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return(0,u.Z)(this,n),(i=t.call(this,e,r)).isPointLight=!0,i.type="PointLight",i.distance=a,i.decay=o,i.shadow=new Pb,i}return(0,c.Z)(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(wb),Ob=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this,new kv(-5,5,5,-5,.5,500))).isDirectionalLightShadow=!0,e}return(0,c.Z)(n)}(kb),Fb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){var i;return(0,u.Z)(this,n),(i=t.call(this,e,r)).isDirectionalLight=!0,i.type="DirectionalLight",i.position.copy(Ff.DEFAULT_UP),i.updateMatrix(),i.target=new Ff,i.shadow=new Ob,i}return(0,c.Z)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(wb),Nb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){var i;return(0,u.Z)(this,n),(i=t.call(this,e,r)).isAmbientLight=!0,i.type="AmbientLight",i}return(0,c.Z)(n)}(wb),Ub=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return(0,u.Z)(this,n),(i=t.call(this,e,r)).isRectAreaLight=!0,i.type="RectAreaLight",i.width=a,i.height=o,i}return(0,c.Z)(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(wb),Zb=function(){function e(){(0,u.Z)(this,e),this.isSphericalHarmonics3=!0,this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Dd)}return(0,c.Z)(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}]),e}(),zb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zb,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,u.Z)(this,n),(e=t.call(this,void 0,i)).isLightProbe=!0,e.sh=r,e}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(wb),Hb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).textures={},r}return(0,c.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new mb(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t=this.textures;function r(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i=n.createMaterialFromType(e.type);if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=e.sheen),void 0!==e.sheenColor&&(i.sheenColor=(new np).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(i.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.specularIntensity&&(i.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(i.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(i.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.thickness&&(i.thickness=e.thickness),void 0!==e.attenuationDistance&&(i.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.shadowSide&&(i.shadowSide=e.shadowSide),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.alphaToCoverage&&(i.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(i.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(i.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var a in e.uniforms){var o=e.uniforms[a];switch(i.uniforms[a]={},o.type){case"t":i.uniforms[a].value=r(o.value);break;case"c":i.uniforms[a].value=(new np).setHex(o.value);break;case"v2":i.uniforms[a].value=(new sd).fromArray(o.value);break;case"v3":i.uniforms[a].value=(new Dd).fromArray(o.value);break;case"v4":i.uniforms[a].value=(new Cd).fromArray(o.value);break;case"m3":i.uniforms[a].value=(new ld).fromArray(o.value);break;case"m4":i.uniforms[a].value=(new df).fromArray(o.value);break;default:i.uniforms[a].value=o.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(i.glslVersion=e.glslVersion),void 0!==e.extensions)for(var s in e.extensions)i.extensions[s]=e.extensions[s];if(void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=r(e.map)),void 0!==e.matcap&&(i.matcap=r(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=r(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=r(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=r(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){var l=e.normalScale;!1===Array.isArray(l)&&(l=[l,l]),i.normalScale=(new sd).fromArray(l)}return void 0!==e.displacementMap&&(i.displacementMap=r(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=r(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=r(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=r(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=r(e.specularMap)),void 0!==e.specularIntensityMap&&(i.specularIntensityMap=r(e.specularIntensityMap)),void 0!==e.specularColorMap&&(i.specularColorMap=r(e.specularColorMap)),void 0!==e.envMap&&(i.envMap=r(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=r(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=r(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=r(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=r(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new sd).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(i.iridescenceMap=r(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(i.transmissionMap=r(e.transmissionMap)),void 0!==e.thicknessMap&&(i.thicknessMap=r(e.thicknessMap)),void 0!==e.sheenColorMap&&(i.sheenColorMap=r(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}},{key:"setTextures",value:function(e){return this.textures=e,this}}],[{key:"createMaterialFromType",value:function(e){return new{ShadowMaterial:Rx,SpriteMaterial:ty,RawShaderMaterial:Lx,ShaderMaterial:tv,PointsMaterial:Yy,MeshPhysicalMaterial:Dx,MeshStandardMaterial:Px,MeshPhongMaterial:Ox,MeshToonMaterial:Fx,MeshNormalMaterial:Nx,MeshLambertMaterial:Ux,MeshDepthMaterial:Rg,MeshDistanceMaterial:Lg,MeshBasicMaterial:ip,MeshMatcapMaterial:Zx,LineDashedMaterial:zx,LineBasicMaterial:Zy,Material:Yf}[e]}}]),n}(fb),Gb=function(){function e(){(0,u.Z)(this,e)}return(0,c.Z)(e,null,[{key:"decodeText",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(i){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),e}(),Qb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).isInstancedBufferGeometry=!0,e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"toJSON",value:function(){var e=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(Ip),Vb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,c.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new mb(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t={},n={};function r(e,r){if(void 0!==t[r])return t[r];var i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];var r=e.arrayBuffers,i=r[t],a=new Uint32Array(i).buffer;return n[t]=a,a}(e,i.buffer),o=dd(i.type,a),s=new Kg(o,i.stride);return s.uuid=i.uuid,t[r]=s,s}var i=e.isInstancedBufferGeometry?new Qb:new Ip,a=e.data.index;if(void 0!==a){var o=dd(a.type,a.array);i.setIndex(new dp(o,1))}var s=e.data.attributes;for(var l in s){var u=s[l],c=void 0;if(u.isInterleavedBufferAttribute){var h=r(e.data,u.data);c=new ey(h,u.itemSize,u.offset,u.normalized)}else{var d=dd(u.type,u.array);c=new(u.isInstancedBufferAttribute?By:dp)(d,u.itemSize,u.normalized)}void 0!==u.name&&(c.name=u.name),void 0!==u.usage&&c.setUsage(u.usage),void 0!==u.updateRange&&(c.updateRange.offset=u.updateRange.offset,c.updateRange.count=u.updateRange.count),i.setAttribute(l,c)}var f=e.data.morphAttributes;if(f)for(var p in f){for(var v=f[p],m=[],g=0,y=v.length;g<y;g++){var A=v[g],x=void 0;if(A.isInterleavedBufferAttribute){var b=r(e.data,A.data);x=new ey(b,A.itemSize,A.offset,A.normalized)}else{var _=dd(A.type,A.array);x=new dp(_,A.itemSize,A.normalized)}void 0!==A.name&&(x.name=A.name),m.push(x)}i.morphAttributes[p]=m}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);var w=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==w)for(var E=0,S=w.length;E!==S;++E){var M=w[E];i.addGroup(M.start,M.count,M.materialIndex)}var C=e.data.boundingSphere;if(void 0!==C){var k=new Dd;void 0!==C.center&&k.fromArray(C.center),i.boundingSphere=new nf(k,C.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}]),n}(fb),jb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,c.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=""===this.path?Gb.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var o=new mb(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){var a=null;try{a=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);i.parse(a,t)}),n,r)}},{key:"loadAsync",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,s,l,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,i=""===this.path?Gb.extractUrlBase(t):this.path,this.resourcePath=this.resourcePath||i,(o=new mb(this.manager)).setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),e.next=9,o.loadAsync(t,n);case 9:if(s=e.sent,l=JSON.parse(s),void 0!==(u=l.metadata)&&void 0!==u.type&&"geometry"!==u.type.toLowerCase()){e.next=14;break}throw new Error("THREE.ObjectLoader: Can't load "+t);case 14:return e.next=16,r.parseAsync(l);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"parse",value:function(e,t){var n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,s,o,n),u=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,u),void 0!==t){var c=!1;for(var h in a)if(a[h].data instanceof HTMLImageElement){c=!0;break}!1===c&&t(l)}return l}},{key:"parseAsync",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,u,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,r),e.next=5,this.parseImagesAsync(t.images);case 5:return o=e.sent,s=this.parseTextures(t.textures,o),l=this.parseMaterials(t.materials,s),u=this.parseObject(t.object,i,l,s,n),c=this.parseSkeletons(t.skeletons,u),this.bindSkeletons(u,c),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseShapes",value:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new GA).fromJSON(e[n]);t[i.uuid]=i}return t}},{key:"parseSkeletons",value:function(e,t){var n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=(new Iy).fromJSON(e[i],r);n[o.uuid]=o}return n}},{key:"parseGeometries",value:function(e,t){var n={};if(void 0!==e)for(var r=new Vb,i=0,a=e.length;i<a;i++){var o=void 0,s=e[i];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(s);break;default:s.type in Bx?o=Bx[s.type].fromJSON(s,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type,'"'))}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n}},{key:"parseMaterials",value:function(e,t){var n={},r={};if(void 0!==e){var i=new Hb;i.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r}},{key:"parseAnimations",value:function(e){var t={};if(void 0!==e)for(var n=0;n<e.length;n++){var r=e[n],i=sb.parse(r);t[i.uuid]=i}return t}},{key:"parseImages",value:function(e,t){var n,r=this,i={};function a(e){if("string"===typeof e){var t=e;return function(e){return r.manager.itemStart(e),n.load(e,(function(){r.manager.itemEnd(e)}),void 0,(function(){r.manager.itemError(e),r.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:r.resourcePath+t)}return e.data?{data:dd(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){var o=new hb(t);(n=new Ab(o)).setCrossOrigin(this.crossOrigin);for(var s=0,l=e.length;s<l;s++){var u=e[s],c=u.url;if(Array.isArray(c)){for(var h=[],d=0,f=c.length;d<f;d++){var p=a(c[d]);null!==p&&(p instanceof HTMLImageElement?h.push(p):h.push(new Cy(p.data,p.width,p.height)))}i[u.uuid]=new wd(h)}else{var v=a(u.url);i[u.uuid]=new wd(v)}}}return i}},{key:"parseImagesAsync",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,s,l,u,c,h,d,f,p,v,m,g,y;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=function(){return l=(0,o.Z)((0,a.Z)().mark((function e(t){var r,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=8;break}return o=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(r=t)?r:n.resourcePath+r,e.next=5,i.loadAsync(o);case 5:return e.abrupt("return",e.sent);case 8:if(!t.data){e.next=12;break}return e.abrupt("return",{data:dd(t.type,t.data),width:t.width,height:t.height});case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)},s=function(e){return l.apply(this,arguments)},n=this,r={},!(void 0!==t&&t.length>0)){e.next=33;break}(i=new Ab(this.manager)).setCrossOrigin(this.crossOrigin),u=0,c=t.length;case 8:if(!(u<c)){e.next=33;break}if(h=t[u],d=h.url,!Array.isArray(d)){e.next=26;break}f=[],p=0,v=d.length;case 14:if(!(p<v)){e.next=23;break}return m=d[p],e.next=18,s(m);case 18:null!==(g=e.sent)&&(g instanceof HTMLImageElement?f.push(g):f.push(new Cy(g.data,g.width,g.height)));case 20:p++,e.next=14;break;case 23:r[h.uuid]=new wd(f),e.next=30;break;case 26:return e.next=28,s(h.url);case 28:y=e.sent,r[h.uuid]=new wd(y);case 30:u++,e.next=8;break;case 33:return e.abrupt("return",r);case 34:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=e[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=t[o.image],l=s.data,u=void 0;Array.isArray(l)?(u=new ov,6===l.length&&(u.needsUpdate=!0)):(u=l&&l.data?new Cy:new Md,l&&(u.needsUpdate=!0)),u.source=s,u.uuid=o.uuid,void 0!==o.name&&(u.name=o.name),void 0!==o.mapping&&(u.mapping=n(o.mapping,Wb)),void 0!==o.channel&&(u.channel=o.channel),void 0!==o.offset&&u.offset.fromArray(o.offset),void 0!==o.repeat&&u.repeat.fromArray(o.repeat),void 0!==o.center&&u.center.fromArray(o.center),void 0!==o.rotation&&(u.rotation=o.rotation),void 0!==o.wrap&&(u.wrapS=n(o.wrap[0],qb),u.wrapT=n(o.wrap[1],qb)),void 0!==o.format&&(u.format=o.format),void 0!==o.internalFormat&&(u.internalFormat=o.internalFormat),void 0!==o.type&&(u.type=o.type),void 0!==o.encoding&&(u.encoding=o.encoding),void 0!==o.minFilter&&(u.minFilter=n(o.minFilter,Jb)),void 0!==o.magFilter&&(u.magFilter=n(o.magFilter,Jb)),void 0!==o.anisotropy&&(u.anisotropy=o.anisotropy),void 0!==o.flipY&&(u.flipY=o.flipY),void 0!==o.generateMipmaps&&(u.generateMipmaps=o.generateMipmaps),void 0!==o.premultiplyAlpha&&(u.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(u.unpackAlignment=o.unpackAlignment),void 0!==o.userData&&(u.userData=o.userData),r[o.uuid]=u}return r}},{key:"parseObject",value:function(e,t,n,r,i){var a,o,s;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function u(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function c(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":a=new Yg,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new np(e.background):a.background=c(e.background)),void 0!==e.environment&&(a.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new Xg(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new Jg(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new rv(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new kv(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new Nb(e.color,e.intensity);break;case"DirectionalLight":a=new Fb(e.color,e.intensity);break;case"PointLight":a=new Db(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Ub(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new Ib(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new Eb(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new zb).fromJSON(e);break;case"SkinnedMesh":o=l(e.geometry),s=u(e.material),a=new Sy(o,s),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":o=l(e.geometry),s=u(e.material),a=new qp(o,s);break;case"InstancedMesh":o=l(e.geometry),s=u(e.material);var h=e.count,d=e.instanceMatrix,f=e.instanceColor;(a=new Uy(o,s,h)).instanceMatrix=new By(new Float32Array(d.array),16),void 0!==f&&(a.instanceColor=new By(new Float32Array(f.array),f.itemSize));break;case"LOD":a=new yy;break;case"Line":a=new jy(l(e.geometry),u(e.material));break;case"LineLoop":a=new Xy(l(e.geometry),u(e.material));break;case"LineSegments":a=new Jy(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":a=new nA(l(e.geometry),u(e.material));break;case"Sprite":a=new py(u(e.material));break;case"Group":a=new Ug;break;case"Bone":a=new My;break;default:a=new Ff}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children)for(var p=e.children,v=0;v<p.length;v++)a.add(this.parseObject(p[v],t,n,r,i));if(void 0!==e.animations)for(var m=e.animations,g=0;g<m.length;g++){var y=m[g];a.animations.push(i[y])}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);for(var A=e.levels,x=0;x<A.length;x++){var b=A[x],_=a.getObjectByProperty("uuid",b.object);void 0!==_&&a.addLevel(_,b.distance,b.hysteresis)}}return a}},{key:"bindSkeletons",value:function(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}]),n}(fb),Wb={UVMapping:Bu,CubeReflectionMapping:Ru,CubeRefractionMapping:Lu,EquirectangularReflectionMapping:Pu,EquirectangularRefractionMapping:Du,CubeUVReflectionMapping:Ou},qb={RepeatWrapping:Fu,ClampToEdgeWrapping:Nu,MirroredRepeatWrapping:Uu},Jb={NearestFilter:Zu,NearestMipmapNearestFilter:zu,NearestMipmapLinearFilter:Gu,LinearFilter:Vu,LinearMipmapNearestFilter:ju,LinearMipmapLinearFilter:qu},Xb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return(0,c.Z)(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=cb.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){cb.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}]),n}(fb),Yb=function(){function e(){(0,u.Z)(this,e)}return(0,c.Z)(e,null,[{key:"getContext",value:function(){return void 0===ub&&(ub=new(window.AudioContext||window.webkitAudioContext)),ub}},{key:"setContext",value:function(e){ub=e}}]),e}(),Kb=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,c.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new mb(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{var a=n.slice(0);Yb.getContext().decodeAudioData(a,(function(e){t(e)}))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}}]),n}(fb),$b=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(0,u.Z)(this,n),(i=t.call(this,void 0,a)).isHemisphereLightProbe=!0;var o=(new np).set(e),s=(new np).set(r),l=new Dd(o.r,o.g,o.b),c=new Dd(s.r,s.g,s.b),h=Math.sqrt(Math.PI),d=h*Math.sqrt(.75);return i.sh.coefficients[0].copy(l).add(c).multiplyScalar(h),i.sh.coefficients[1].copy(l).sub(c).multiplyScalar(d),i}return(0,c.Z)(n)}(zb),e_=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,u.Z)(this,n),(r=t.call(this,void 0,i)).isAmbientLightProbe=!0;var a=(new np).set(e);return r.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return(0,c.Z)(n)}(zb),t_=new df,n_=new df,r_=new df,i_=function(){function e(){(0,u.Z)(this,e),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new rv,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new rv,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return(0,c.Z)(e,[{key:"update",value:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,r_.copy(e.projectionMatrix);var n,r,i=t.eyeSep/2,a=i*t.near/t.focus,o=t.near*Math.tan(Jh*t.fov*.5)/t.zoom;n_.elements[12]=-i,t_.elements[12]=i,n=-o*t.aspect+a,r=o*t.aspect+a,r_.elements[0]=2*t.near/(r-n),r_.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(r_),n=-o*t.aspect-a,r=o*t.aspect-a,r_.elements[0]=2*t.near/(r-n),r_.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(r_)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(n_),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(t_)}}]),e}(),a_=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,u.Z)(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return(0,c.Z)(e,[{key:"start",value:function(){this.startTime=o_(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=o_();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function o_(){return("undefined"===typeof performance?Date:performance).now()}var s_=new Dd,l_=new Pd,u_=new Dd,c_=new Dd,h_=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).type="AudioListener",e.context=Yb.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new a_,e}return(0,c.Z)(n,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(e){(0,Zn.Z)((0,zn.Z)(n.prototype),"updateMatrixWorld",this).call(this,e);var t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(s_,l_,u_),c_.set(0,0,-1).applyQuaternion(l_),t.positionX){var i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(s_.x,i),t.positionY.linearRampToValueAtTime(s_.y,i),t.positionZ.linearRampToValueAtTime(s_.z,i),t.forwardX.linearRampToValueAtTime(c_.x,i),t.forwardY.linearRampToValueAtTime(c_.y,i),t.forwardZ.linearRampToValueAtTime(c_.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(s_.x,s_.y,s_.z),t.setOrientation(c_.x,c_.y,c_.z,r.x,r.y,r.z)}}]),n}(Ff),d_=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).type="Audio",r.listener=e,r.context=e.context,r.gain=r.context.createGain(),r.gain.connect(e.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return(0,c.Z)(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(Ff),f_=new Dd,p_=new Pd,v_=new Dd,m_=new Dd,g_=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).panner=r.context.createPanner(),r.panner.panningModel="HRTF",r.panner.connect(r.gain),r}return(0,c.Z)(n,[{key:"disconnect",value:function(){(0,Zn.Z)((0,zn.Z)(n.prototype),"disconnect",this).call(this),this.panner.disconnect(this.gain)}},{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(e){return this.panner.refDistance=e,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(e){return this.panner.rolloffFactor=e,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(e){return this.panner.distanceModel=e,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(e){return this.panner.maxDistance=e,this}},{key:"setDirectionalCone",value:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(e){if((0,Zn.Z)((0,zn.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(f_,p_,v_),m_.set(0,0,1).applyQuaternion(p_);var t=this.panner;if(t.positionX){var r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(f_.x,r),t.positionY.linearRampToValueAtTime(f_.y,r),t.positionZ.linearRampToValueAtTime(f_.z,r),t.orientationX.linearRampToValueAtTime(m_.x,r),t.orientationY.linearRampToValueAtTime(m_.y,r),t.orientationZ.linearRampToValueAtTime(m_.z,r)}else t.setPosition(f_.x,f_.y,f_.z),t.setOrientation(m_.x,m_.y,m_.z)}}}]),n}(d_),y_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;(0,u.Z)(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return(0,c.Z)(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),A_=function(){function e(t,n,r){var i,a,o;switch((0,u.Z)(this,e),this.binding=t,this.valueSize=r,n){case"quaternion":i=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:i=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return(0,c.Z)(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)n[i+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var l=t,u=t+t;l!==u;++l)if(n[l]!==n[l+t]){o.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]}},{key:"_slerp",value:function(e,t,n,r){Pd.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,i){var a=this._workIndex*i;Pd.multiplyQuaternionsFlat(e,a,e,t,e,n),Pd.slerpFlat(e,t,e,t,e,a,r)}},{key:"_lerp",value:function(e,t,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,i){for(var a=0;a!==i;++a){var o=t+a;e[o]=e[o]+e[n+a]*r}}}]),e}(),x_="\\[\\]\\.:\\/",b_=new RegExp("["+x_+"]","g"),__="[^"+x_+"]",w_="[^"+x_.replace("\\.","")+"]",E_=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",__)+/(WCOD+)?/.source.replace("WCOD",w_)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",__)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",__)+"$"),S_=["material","materials","bones","map"],M_=function(){function e(t,n,r){(0,u.Z)(this,e);var i=r||C_.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,i)}return(0,c.Z)(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),C_=function(){function e(t,n,r){(0,u.Z)(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return(0,c.Z)(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var l=t[i];if(void 0!==l){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else void 0!==l.fromArray&&void 0!==l.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(c=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else{var h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(b_,"")}},{key:"parseTrackName",value:function(e){var t=E_.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==S_.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(r)return r}return null}}]),e}();C_.Composite=M_,C_.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},C_.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},C_.prototype.GetterByBindingType=[C_.prototype._getValue_direct,C_.prototype._getValue_array,C_.prototype._getValue_arrayElement,C_.prototype._getValue_toArray],C_.prototype.SetterByBindingTypeAndVersioning=[[C_.prototype._setValue_direct,C_.prototype._setValue_direct_setNeedsUpdate,C_.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[C_.prototype._setValue_array,C_.prototype._setValue_array_setNeedsUpdate,C_.prototype._setValue_array_setMatrixWorldNeedsUpdate],[C_.prototype._setValue_arrayElement,C_.prototype._setValue_arrayElement_setNeedsUpdate,C_.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[C_.prototype._setValue_fromArray,C_.prototype._setValue_fromArray_setNeedsUpdate,C_.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var k_=function(){function e(){(0,u.Z)(this,e),this.isAnimationObjectGroup=!0,this.uuid=Yh(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}return(0,c.Z)(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,o=void 0,s=e.length,l=this.nCachedObjects_,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],d=h.uuid,f=t[d];if(void 0===f){f=s++,t[d]=f,e.push(h);for(var p=0,v=a;p!==v;++p)i[p].push(new C_(h,n[p],r[p]))}else if(f<l){o=e[f];var m=--l,g=e[m];t[g.uuid]=f,e[f]=g,t[d]=m,e[m]=h;for(var y=0,A=a;y!==A;++y){var x=i[y],b=x[m],_=x[f];x[f]=b,void 0===_&&(_=new C_(h,n[y],r[y])),x[m]=_}}else e[f]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,u=t[l];if(void 0!==u&&u>=i){var c=i++,h=e[c];t[h.uuid]=u,e[u]=h,t[l]=c,e[c]=s;for(var d=0,f=r;d!==f;++d){var p=n[d],v=p[c],m=p[u];p[u]=v,p[c]=m}}}this.nCachedObjects_=i}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=e.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o].uuid,u=t[l];if(void 0!==u)if(delete t[l],u<i){var c=--i,h=e[c],d=--a,f=e[d];t[h.uuid]=u,e[u]=h,t[f.uuid]=c,e[c]=f,e.pop();for(var p=0,v=r;p!==v;++p){var m=n[p],g=m[c],y=m[d];m[u]=g,m[c]=y,m.pop()}}else{var A=--a,x=e[A];A>0&&(t[x.uuid]=u),e[u]=x,e.pop();for(var b=0,_=r;b!==_;++b){var w=n[b];w[u]=w[A],w.pop()}}}this.nCachedObjects_=i}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(c);for(var h=u,d=s.length;h!==d;++h){var f=s[h];c[h]=new C_(f,e,t)}return c}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}]),e}(),T_=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;(0,u.Z)(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=i;for(var a=n.tracks,o=a.length,s=new Array(o),l={endingStart:eh,endingEnd:eh},c=0;c!==o;++c){var h=a[c].createInterpolant(null);s[c]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Jc,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return(0,c.Z)(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=i/r,o=r/i;e.warp(1,a,t),this.warp(o,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,i=r.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/a,l[1]=t/a,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var a=(e-i)*n;a<0||0===n?t=0:(this._startTime=null,t=n*a)}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var l=this._interpolants,u=this._propertyBindings;if(this.blendMode===ih)for(var c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulateAdditive(s);else for(var d=0,f=l.length;d!==f;++d)l[d].evaluate(o),u[d].accumulate(r,s)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,a=n===Xc;if(0===e)return-1===i?r:a&&1===(1&i)?t-r:r;if(n===qc){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){var o=Math.floor(r/t);r-=t*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&1===(1&i))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=th,r.endingEnd=th):(r.endingStart=e?this.zeroSlopeAtStart?th:eh:nh,r.endingEnd=t?this.zeroSlopeAtEnd?th:eh:nh)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}]),e}(),I_=new Float32Array(1),B_=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this))._root=e,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return(0,c.Z)(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==i;++c){var h=r[c],d=h.name,f=u[d];if(void 0!==f)++f.referenceCount,a[c]=f;else{if(void 0!==(f=a[c])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,d));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;++(f=new A_(C_.create(n,d,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(f,s,d),a[c]=f}o[c].resultBuffer=f.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings,a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Yx(new Float32Array(2),new Float32Array(2),1,I_)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,i=r.uuid,a="string"===typeof e?sb.findByName(r,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],l=null;if(void 0===n&&(n=null!==a?a.blendMode:rh),void 0!==s){var u=s.actionByRoot[i];if(void 0!==u&&u.blendMode===n)return u;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;var c=new T_(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,i),c}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?sb.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){t[o]._update(r,e,i,a)}for(var s=this._bindings,l=this._nActiveBindings,u=0;u!==l;++u)s[u].apply(a);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(jh),R_=function(){function e(t){(0,u.Z)(this,e),this.value=t}return(0,c.Z)(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}(),L_=0,P_=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).isUniformsGroup=!0,Object.defineProperty((0,Il.Z)(e),"id",{value:L_++}),e.name="",e.usage=Ph,e.uniforms=[],e}return(0,c.Z)(n,[{key:"add",value:function(e){return this.uniforms.push(e),this}},{key:"remove",value:function(e){var t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}},{key:"setName",value:function(e){return this.name=e,this}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"dispose",value:function(){return this.dispatchEvent({type:"dispose"}),this}},{key:"copy",value:function(e){this.name=e.name,this.usage=e.usage;var t=e.uniforms;this.uniforms.length=0;for(var n=0,r=t.length;n<r;n++)this.uniforms.push(t[n].clone());return this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(jh),D_=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,u.Z)(this,n),(i=t.call(this,e,r)).isInstancedInterleavedBuffer=!0,i.meshPerAttribute=a,i}return(0,c.Z)(n,[{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=(0,Zn.Z)((0,zn.Z)(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=(0,Zn.Z)((0,zn.Z)(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(Kg),O_=function(){function e(t,n,r,i,a){(0,u.Z)(this,e),this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=n,this.itemSize=r,this.elementSize=i,this.count=a,this.version=0}return(0,c.Z)(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}(),F_=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;(0,u.Z)(this,e),this.ray=new hf(t,n),this.near=r,this.far=i,this.camera=null,this.layers=new wf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return(0,c.Z)(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return U_(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(N_),t}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,i=e.length;r<i;r++)U_(e[r],this,n,t);return n.sort(N_),n}}]),e}();function N_(e,t){return e.distance-t.distance}function U_(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var i=e.children,a=0,o=i.length;a<o;a++)U_(i[a],t,n,!0)}var Z_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,u.Z)(this,e),this.radius=t,this.phi=n,this.theta=r,this}return(0,c.Z)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Kh(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),z_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,u.Z)(this,e),this.radius=t,this.theta=n,this.y=r,this}return(0,c.Z)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),H_=new sd,G_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sd(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sd(-1/0,-1/0);(0,u.Z)(this,e),this.isBox2=!0,this.min=t,this.max=n}return(0,c.Z)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=H_.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return this.clampPoint(e,H_).distanceTo(e)}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),Q_=new Dd,V_=new Dd,j_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dd,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dd;(0,u.Z)(this,e),this.start=t,this.end=n}return(0,c.Z)(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){Q_.subVectors(e,this.start),V_.subVectors(this.end,this.start);var n=V_.dot(V_),r=V_.dot(Q_)/n;return t&&(r=Kh(r,0,1)),r}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),W_=new Dd,q_=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){var i;(0,u.Z)(this,n),(i=t.call(this)).light=e,i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.color=r,i.type="SpotLightHelper";for(var a=new Ip,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],s=0,l=1;s<32;s++,l++){var c=s/32*Math.PI*2,h=l/32*Math.PI*2;o.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1)}a.setAttribute("position",new bp(o,3));var d=new Zy({fog:!1,toneMapped:!1});return i.cone=new Jy(a,d),i.add(i.cone),i.update(),i}return(0,c.Z)(n,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),W_.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(W_),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),n}(Ff),J_=new Dd,X_=new df,Y_=new df,K_=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;(0,u.Z)(this,n);for(var i=$_(e),a=new Ip,o=[],s=[],l=new np(0,0,1),c=new np(0,1,0),h=0;h<i.length;h++){var d=i[h];d.parent&&d.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),s.push(l.r,l.g,l.b),s.push(c.r,c.g,c.b))}a.setAttribute("position",new bp(o,3)),a.setAttribute("color",new bp(s,3));var f=new Zy({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(r=t.call(this,a,f)).isSkeletonHelper=!0,r.type="SkeletonHelper",r.root=e,r.bones=i,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r}return(0,c.Z)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,r=this.geometry,i=r.getAttribute("position");Y_.copy(this.root.matrixWorld).invert();for(var a=0,o=0;a<t.length;a++){var s=t[a];s.parent&&s.parent.isBone&&(X_.multiplyMatrices(Y_,s.matrixWorld),J_.setFromMatrixPosition(X_),i.setXYZ(o,J_.x,J_.y,J_.z),X_.multiplyMatrices(Y_,s.parent.matrixWorld),J_.setFromMatrixPosition(X_),i.setXYZ(o+1,J_.x,J_.y,J_.z),o+=2)}r.getAttribute("position").needsUpdate=!0,(0,Zn.Z)((0,zn.Z)(n.prototype),"updateMatrixWorld",this).call(this,e)}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Jy);function $_(e){var t=[];!0===e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,$_(e.children[n]));return t}var ew=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){var a;(0,u.Z)(this,n);var o=new Ex(r,4,2),s=new ip({wireframe:!0,fog:!1,toneMapped:!1});return(a=t.call(this,o,s)).light=e,a.color=i,a.type="PointLightHelper",a.matrix=a.light.matrixWorld,a.matrixAutoUpdate=!1,a.update(),a}return(0,c.Z)(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),n}(qp),tw=new Dd,nw=new np,rw=new np,iw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){var a;(0,u.Z)(this,n),(a=t.call(this)).light=e,a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=i,a.type="HemisphereLightHelper";var o=new bx(r);o.rotateY(.5*Math.PI),a.material=new ip({wireframe:!0,fog:!1,toneMapped:!1}),void 0===a.color&&(a.material.vertexColors=!0);var s=o.getAttribute("position"),l=new Float32Array(3*s.count);return o.setAttribute("color",new dp(l,3)),a.add(new qp(o,a.material)),a.update(),a}return(0,c.Z)(n,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");nw.copy(this.light.color),rw.copy(this.light.groundColor);for(var n=0,r=t.count;n<r;n++){var i=n<r/2?nw:rw;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(tw.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),n}(Ff),aw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;(0,u.Z)(this,n),a=new np(a),o=new np(o);for(var s=i/2,l=r/i,c=r/2,h=[],d=[],f=0,p=0,v=-c;f<=i;f++,v+=l){h.push(-c,0,v,c,0,v),h.push(v,0,-c,v,0,c);var m=f===s?a:o;m.toArray(d,p),p+=3,m.toArray(d,p),p+=3,m.toArray(d,p),p+=3,m.toArray(d,p),p+=3}var g=new Ip;g.setAttribute("position",new bp(h,3)),g.setAttribute("color",new bp(d,3));var y=new Zy({vertexColors:!0,toneMapped:!1});return(e=t.call(this,g,y)).type="GridHelper",e}return(0,c.Z)(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Jy),ow=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;(0,u.Z)(this,n),s=new np(s),l=new np(l);var c=[],h=[];if(i>1)for(var d=0;d<i;d++){var f=d/i*(2*Math.PI),p=Math.sin(f)*r,v=Math.cos(f)*r;c.push(0,0,0),c.push(p,0,v);var m=1&d?s:l;h.push(m.r,m.g,m.b),h.push(m.r,m.g,m.b)}for(var g=0;g<a;g++)for(var y=1&g?s:l,A=r-r/a*g,x=0;x<o;x++){var b=x/o*(2*Math.PI),_=Math.sin(b)*A,w=Math.cos(b)*A;c.push(_,0,w),h.push(y.r,y.g,y.b),b=(x+1)/o*(2*Math.PI),_=Math.sin(b)*A,w=Math.cos(b)*A,c.push(_,0,w),h.push(y.r,y.g,y.b)}var E=new Ip;E.setAttribute("position",new bp(c,3)),E.setAttribute("color",new bp(h,3));var S=new Zy({vertexColors:!0,toneMapped:!1});return(e=t.call(this,E,S)).type="PolarGridHelper",e}return(0,c.Z)(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Jy),sw=new Dd,lw=new Dd,uw=new Dd,cw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){var a;(0,u.Z)(this,n),(a=t.call(this)).light=e,a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=i,a.type="DirectionalLightHelper",void 0===r&&(r=1);var o=new Ip;o.setAttribute("position",new bp([-r,r,0,r,r,0,r,-r,0,-r,-r,0,-r,r,0],3));var s=new Zy({fog:!1,toneMapped:!1});return a.lightPlane=new jy(o,s),a.add(a.lightPlane),(o=new Ip).setAttribute("position",new bp([0,0,0,0,0,1],3)),a.targetLine=new jy(o,s),a.add(a.targetLine),a.update(),a}return(0,c.Z)(n,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),sw.setFromMatrixPosition(this.light.matrixWorld),lw.setFromMatrixPosition(this.light.target.matrixWorld),uw.subVectors(lw,sw),this.lightPlane.lookAt(lw),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(lw),this.targetLine.scale.z=uw.length()}}]),n}(Ff),hw=new Dd,dw=new nv,fw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;(0,u.Z)(this,n);var i=new Ip,a=new Zy({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],s=[],l={};function c(e,t){h(e),h(t)}function h(e){o.push(0,0,0),s.push(0,0,0),void 0===l[e]&&(l[e]=[]),l[e].push(o.length/3-1)}c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4"),i.setAttribute("position",new bp(o,3)),i.setAttribute("color",new bp(s,3)),(r=t.call(this,i,a)).type="CameraHelper",r.camera=e,r.camera.updateProjectionMatrix&&r.camera.updateProjectionMatrix(),r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r.pointMap=l,r.update();var d=new np(16755200),f=new np(16711680),p=new np(43775),v=new np(16777215),m=new np(3355443);return r.setColors(d,f,p,v,m),r}return(0,c.Z)(n,[{key:"setColors",value:function(e,t,n,r,i){var a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,i.r,i.g,i.b),a.setXYZ(41,i.r,i.g,i.b),a.setXYZ(42,i.r,i.g,i.b),a.setXYZ(43,i.r,i.g,i.b),a.setXYZ(44,i.r,i.g,i.b),a.setXYZ(45,i.r,i.g,i.b),a.setXYZ(46,i.r,i.g,i.b),a.setXYZ(47,i.r,i.g,i.b),a.setXYZ(48,i.r,i.g,i.b),a.setXYZ(49,i.r,i.g,i.b),a.needsUpdate=!0}},{key:"update",value:function(){var e=this.geometry,t=this.pointMap;dw.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),pw("c",t,e,dw,0,0,-1),pw("t",t,e,dw,0,0,1),pw("n1",t,e,dw,-1,-1,-1),pw("n2",t,e,dw,1,-1,-1),pw("n3",t,e,dw,-1,1,-1),pw("n4",t,e,dw,1,1,-1),pw("f1",t,e,dw,-1,-1,1),pw("f2",t,e,dw,1,-1,1),pw("f3",t,e,dw,-1,1,1),pw("f4",t,e,dw,1,1,1),pw("u1",t,e,dw,.7,1.1,-1),pw("u2",t,e,dw,-.7,1.1,-1),pw("u3",t,e,dw,0,2,-1),pw("cf1",t,e,dw,-1,0,1),pw("cf2",t,e,dw,1,0,1),pw("cf3",t,e,dw,0,-1,1),pw("cf4",t,e,dw,0,1,1),pw("cn1",t,e,dw,-1,0,-1),pw("cn2",t,e,dw,1,0,-1),pw("cn3",t,e,dw,0,-1,-1),pw("cn4",t,e,dw,0,1,-1),e.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Jy);function pw(e,t,n,r,i,a,o){hw.set(i,a,o).unproject(r);var s=t[e];if(void 0!==s)for(var l=n.getAttribute("position"),u=0,c=s.length;u<c;u++)l.setXYZ(s[u],hw.x,hw.y,hw.z)}var vw,mw,gw=new Nd,yw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;(0,u.Z)(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(24),s=new Ip;return s.setIndex(new dp(a,1)),s.setAttribute("position",new dp(o,3)),(r=t.call(this,s,new Zy({color:i,toneMapped:!1}))).object=e,r.type="BoxHelper",r.matrixAutoUpdate=!1,r.update(),r}return(0,c.Z)(n,[{key:"update",value:function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&gw.setFromObject(this.object),!gw.isEmpty()){var t=gw.min,n=gw.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(e){return this.object=e,this.update(),this}},{key:"copy",value:function(e,t){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e,t),this.object=e.object,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Jy),Aw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;(0,u.Z)(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Ip;return o.setIndex(new dp(a,1)),o.setAttribute("position",new bp([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),(r=t.call(this,o,new Zy({color:i,toneMapped:!1}))).box=e,r.type="Box3Helper",r.geometry.computeBoundingSphere(),r}return(0,c.Z)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),(0,Zn.Z)((0,zn.Z)(n.prototype),"updateMatrixWorld",this).call(this,e))}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Jy),xw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;(0,u.Z)(this,n);var o=a,s=new Ip;s.setAttribute("position",new bp([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),s.computeBoundingSphere(),(r=t.call(this,s,new Zy({color:o,toneMapped:!1}))).type="PlaneHelper",r.plane=e,r.size=i;var l=new Ip;return l.setAttribute("position",new bp([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),l.computeBoundingSphere(),r.add(new qp(l,new ip({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),r}return(0,c.Z)(n,[{key:"updateMatrixWorld",value:function(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),(0,Zn.Z)((0,zn.Z)(n.prototype),"updateMatrixWorld",this).call(this,e)}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}]),n}(jy),bw=new Dd,_w=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dd(0,0,1),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dd(0,0,0),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*a,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*s;return(0,u.Z)(this,n),(e=t.call(this)).type="ArrowHelper",void 0===vw&&((vw=new Ip).setAttribute("position",new bp([0,0,0,0,1,0],3)),(mw=new PA(0,.5,1,5,1)).translate(0,-.5,0)),e.position.copy(i),e.line=new jy(vw,new Zy({color:o,toneMapped:!1})),e.line.matrixAutoUpdate=!1,e.add(e.line),e.cone=new qp(mw,new ip({color:o,toneMapped:!1})),e.cone.matrixAutoUpdate=!1,e.add(e.cone),e.setDirection(r),e.setLength(a,s,l),e}return(0,c.Z)(n,[{key:"setDirection",value:function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{bw.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(bw,t)}}},{key:"setLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}},{key:"setColor",value:function(e){this.line.material.color.set(e),this.cone.material.color.set(e)}},{key:"copy",value:function(e){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}},{key:"dispose",value:function(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}]),n}(Ff),ww=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,u.Z)(this,n);var i=[0,0,0,r,0,0,0,0,0,0,r,0,0,0,0,0,0,r],a=new Ip;a.setAttribute("position",new bp(i,3)),a.setAttribute("color",new bp([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var o=new Zy({vertexColors:!0,toneMapped:!1});return(e=t.call(this,a,o)).type="AxesHelper",e}return(0,c.Z)(n,[{key:"setColors",value:function(e,t,n){var r=new np,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Jy),Ew=function(){function e(){(0,u.Z)(this,e),this.type="ShapePath",this.color=new np,this.subPaths=[],this.currentPath=null}return(0,c.Z)(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new IA,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e){function t(e,t){for(var n=t.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=t[i],s=t[a],l=s.x-o.x,u=s.y-o.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(o=t[a],l=-l,s=t[i],u=-u),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=u*(e.x-o.x)-l*(e.y-o.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return r}var n,r,i,a=vx.isClockWise,o=this.subPaths;if(0===o.length)return[];var s=[];if(1===o.length)return r=o[0],(i=new GA).curves=r.curves,s.push(i),s;var l=!a(o[0].getPoints());l=e?!l:l;var u,c,h=[],d=[],f=[],p=0;d[p]=void 0,f[p]=[];for(var v=0,m=o.length;v<m;v++)n=a(u=(r=o[v]).getPoints()),(n=e?!n:n)?(!l&&d[p]&&p++,d[p]={s:new GA,p:u},d[p].s.curves=r.curves,l&&p++,f[p]=[]):f[p].push({h:r,p:u[0]});if(!d[0])return function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=new GA;a.curves=i.curves,t.push(a)}return t}(o);if(d.length>1){for(var g=!1,y=0,A=0,x=d.length;A<x;A++)h[A]=[];for(var b=0,_=d.length;b<_;b++)for(var w=f[b],E=0;E<w.length;E++){for(var S=w[E],M=!0,C=0;C<d.length;C++)t(S.p,d[C].p)&&(b!==C&&y++,M?(M=!1,h[C].push(S)):g=!0);M&&h[b].push(S)}y>0&&!1===g&&(f=h)}for(var k=0,T=d.length;k<T;k++){i=d[k].s,s.push(i);for(var I=0,B=(c=f[k]).length;I<B;I++)i.holes.push(c[I].h)}return s}}]),e}(),Sw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a,o,s){return(0,u.Z)(this,n),console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),t.call(this,e,r,i,a,o,s)}return(0,c.Z)(n)}(Xp),Mw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a){return(0,u.Z)(this,n),console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),t.call(this,e,r,i,a)}return(0,c.Z)(n)}(RA),Cw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a){return(0,u.Z)(this,n),console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),t.call(this,e,r,i,a)}return(0,c.Z)(n)}(LA),kw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a,o,s,l){return(0,u.Z)(this,n),console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),t.call(this,e,r,i,a,o,s,l)}return(0,c.Z)(n)}(DA),Tw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a,o,s,l,c){return(0,u.Z)(this,n),console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),t.call(this,e,r,i,a,o,s,l,c)}return(0,c.Z)(n)}(PA),Iw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){return(0,u.Z)(this,n),console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),t.call(this,e,r)}return(0,c.Z)(n)}(FA),Bw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){return(0,u.Z)(this,n),console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),t.call(this,e,r)}return(0,c.Z)(n)}(yx),Rw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){return(0,u.Z)(this,n),console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),t.call(this,e,r)}return(0,c.Z)(n)}(xx),Lw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a){return(0,u.Z)(this,n),console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),t.call(this,e,r,i,a)}return(0,c.Z)(n)}(BA),Pw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){return(0,u.Z)(this,n),console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),t.call(this,e,r)}return(0,c.Z)(n)}(bx),Dw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a){return(0,u.Z)(this,n),console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),t.call(this,e,r,i,a)}return(0,c.Z)(n)}(gv),Ow=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a){return(0,u.Z)(this,n),console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),t.call(this,e,r,i,a)}return(0,c.Z)(n)}(OA),Fw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a,o,s){return(0,u.Z)(this,n),console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),t.call(this,e,r,i,a,o,s)}return(0,c.Z)(n)}(_x),Nw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){return(0,u.Z)(this,n),console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),t.call(this,e,r)}return(0,c.Z)(n)}(wx),Uw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a,o,s,l){return(0,u.Z)(this,n),console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),t.call(this,e,r,i,a,o,s,l)}return(0,c.Z)(n)}(Ex),Zw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){return(0,u.Z)(this,n),console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),t.call(this,e,r)}return(0,c.Z)(n)}(Sx),zw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a,o){return(0,u.Z)(this,n),console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),t.call(this,e,r,i,a,o)}return(0,c.Z)(n)}(Mx),Hw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a,o,s){return(0,u.Z)(this,n),console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),t.call(this,e,r,i,a,o,s)}return(0,c.Z)(n)}(Cx),Gw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a,o){return(0,u.Z)(this,n),console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),t.call(this,e,r,i,a,o)}return(0,c.Z)(n)}(kx);"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Bl}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Bl);var Qw=Math.PI/180;Math.PI;function Vw(e,t,n){return(1-n)*e+n*t}var jw=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).type=rc,r}return(0,c.Z)(n,[{key:"parse",value:function(e){var t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},n=function(e,t,n){t=t||1024;for(var r=e.pos,i=-1,a=0,o="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));0>(i=s.indexOf("\n"))&&a<t&&r<e.byteLength;)o+=s,a+=s.length,r+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<i&&(!1!==n&&(e.pos+=a+i+1),o+s.slice(0,i))},r=function(e,t,n,r){var i=e[t+3],a=Math.pow(2,i-128)/255;n[r+0]=e[t+0]*a,n[r+1]=e[t+1]*a,n[r+2]=e[t+2]*a,n[r+3]=1},i=function(e,t,n,r){var i=e[t+3],a=Math.pow(2,i-128)/255;n[r+0]=up.toHalfFloat(Math.min(e[t+0]*a,65504)),n[r+1]=up.toHalfFloat(Math.min(e[t+1]*a,65504)),n[r+2]=up.toHalfFloat(Math.min(e[t+2]*a,65504)),n[r+3]=up.toHalfFloat(1)},a=new Uint8Array(e);a.pos=0;var o=function(e){var r,i,a=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,u={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(r=n(e)))return t(1,"no header found");if(!(i=r.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(u.valid|=1,u.programtype=i[1],u.string+=r+"\n";!1!==(r=n(e));)if(u.string+=r+"\n","#"!==r.charAt(0)){if((i=r.match(a))&&(u.gamma=parseFloat(i[1])),(i=r.match(o))&&(u.exposure=parseFloat(i[1])),(i=r.match(s))&&(u.valid|=2,u.format=i[1]),(i=r.match(l))&&(u.valid|=4,u.height=parseInt(i[1],10),u.width=parseInt(i[2],10)),2&u.valid&&4&u.valid)break}else u.comments+=r+"\n";return 2&u.valid?4&u.valid?u:t(3,"missing image size specifier"):t(3,"missing format specifier")}(a);if(-1!==o){var s=o.width,l=o.height,u=function(e,n,r){var i=n;if(i<8||i>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(i!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");var a=new Uint8Array(4*n*r);if(!a.length)return t(4,"unable to allocate buffer space");for(var o=0,s=0,l=4*i,u=new Uint8Array(4),c=new Uint8Array(l),h=r;h>0&&s<e.byteLength;){if(s+4>e.byteLength)return t(1);if(u[0]=e[s++],u[1]=e[s++],u[2]=e[s++],u[3]=e[s++],2!=u[0]||2!=u[1]||(u[2]<<8|u[3])!=i)return t(3,"bad rgbe scanline format");for(var d=0,f=void 0;d<l&&s<e.byteLength;){var p=(f=e[s++])>128;if(p&&(f-=128),0===f||d+f>l)return t(3,"bad scanline data");if(p)for(var v=e[s++],m=0;m<f;m++)c[d++]=v;else c.set(e.subarray(s,s+f),d),d+=f,s+=f}for(var g=i,y=0;y<g;y++){var A=0;a[o]=c[y+A],A+=i,a[o+1]=c[y+A],A+=i,a[o+2]=c[y+A],A+=i,a[o+3]=c[y+A],o+=4}h--}return a}(a.subarray(a.pos),s,l);if(-1!==u){var c,h,d;switch(this.type){case nc:d=u.length/4;for(var f=new Float32Array(4*d),p=0;p<d;p++)r(u,4*p,f,4*p);c=f,h=nc;break;case rc:d=u.length/4;for(var v=new Uint16Array(4*d),m=0;m<d;m++)i(u,4*m,v,4*m);c=v,h=rc;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:s,height:l,data:c,header:o.string,gamma:o.gamma,exposure:o.exposure,type:h}}}return null}},{key:"setDataType",value:function(e){return this.type=e,this}},{key:"load",value:function(e,t,r,i){return(0,Zn.Z)((0,zn.Z)(n.prototype),"load",this).call(this,e,(function(e,n){switch(e.type){case nc:case rc:e.encoding=lh,e.minFilter=Vu,e.magFilter=Vu,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),r,i)}}]),n}(bb),Ww=Symbol(),qw=Symbol(),Jw="a",Xw="w",Yw=function(e,t){return new Proxy(e,t)},Kw=Object.getPrototypeOf,$w=new WeakMap,eE=function(e){return e&&($w.has(e)?$w.get(e):Kw(e)===Object.prototype||Kw(e)===Array.prototype)},tE=function(e){return"object"==typeof e&&null!==e},nE=function(e){if(Array.isArray(e))return Array.from(e);var t=Object.getOwnPropertyDescriptors(e);return Object.values(t).forEach((function(e){e.configurable=!0})),Object.create(Kw(e),t)},rE=function(e){return e[qw]||e},iE=function e(t,n,r,i){if(!eE(t))return t;var a=i&&i.get(t);if(!a){var o=rE(t);a=function(e){return Object.values(Object.getOwnPropertyDescriptors(e)).some((function(e){return!e.configurable&&!e.writable}))}(o)?[o,nE(o)]:[o],null==i||i.set(t,a)}var l=a,u=(0,s.Z)(l,2),c=u[0],h=u[1],d=r&&r.get(c);return d&&d[1].f===!!h||(d=function(t,n){var r={f:n},i=!1,a=function(e,n){if(!i){var a=r[Jw].get(t);if(a||(a={},r[Jw].set(t,a)),e===Xw)a[Xw]=!0;else{var o=a[e];o||(o=new Set,a[e]=o),o.add(n)}}},o={get:function(n,i){return i===qw?t:(a("k",i),e(Reflect.get(n,i),r[Jw],r.c,r.t))},has:function(e,n){return n===Ww?(i=!0,r[Jw].delete(t),!0):(a("h",n),Reflect.has(e,n))},getOwnPropertyDescriptor:function(e,t){return a("o",t),Reflect.getOwnPropertyDescriptor(e,t)},ownKeys:function(e){return a(Xw),Reflect.ownKeys(e)}};return n&&(o.set=o.deleteProperty=function(){return!1}),[o,r]}(c,!!h),d[1].p=Yw(h||c,d[0]),r&&r.set(c,d)),d[1][Jw]=n,d[1].c=r,d[1].t=i,d[1].p},aE=function e(t,n,r,i){if(Object.is(t,n))return!1;if(!tE(t)||!tE(n))return!0;var a=r.get(rE(t));if(!a)return!0;if(i){var o=i.get(t);if(o&&o.n===n)return o.g;i.set(t,{n:n,g:!1})}var s=null;try{var l,u=(0,Ms.Z)(a.h||[]);try{for(u.s();!(l=u.n()).done;){var c=l.value;if(s=Reflect.has(t,c)!==Reflect.has(n,c))return s}}catch(g){u.e(g)}finally{u.f()}if(!0===a[Xw]){if(s=function(e,t){var n=Reflect.ownKeys(e),r=Reflect.ownKeys(t);return n.length!==r.length||n.some((function(e,t){return e!==r[t]}))}(t,n),s)return s}else{var h,d=(0,Ms.Z)(a.o||[]);try{for(d.s();!(h=d.n()).done;){var f=h.value;if(s=!!Reflect.getOwnPropertyDescriptor(t,f)!=!!Reflect.getOwnPropertyDescriptor(n,f))return s}}catch(g){d.e(g)}finally{d.f()}}var p,v=(0,Ms.Z)(a.k||[]);try{for(v.s();!(p=v.n()).done;){var m=p.value;if(s=e(t[m],n[m],r,i))return s}}catch(g){v.e(g)}finally{v.f()}return null===s&&(s=!0),s}finally{i&&i.set(t,{n:n,g:s})}},oE=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];$w.set(e,t)},sE=function(e){return"object"===typeof e&&null!==e},lE=new WeakMap,uE=new WeakSet,cE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.is,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return new Proxy(e,t)},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return sE(e)&&!uE.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new WeakMap,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,o=i.get(e);if((null==o?void 0:o[0])===t)return o[1];var l=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return oE(l,!0),i.set(e,[t,l]),Reflect.ownKeys(e).forEach((function(t){if(!Object.getOwnPropertyDescriptor(l,t)){var r=Reflect.get(e,t),i={value:r,enumerable:!0,configurable:!0};if(uE.has(r))oE(r,!1);else if(r instanceof Promise)delete i.value,i.get=function(){return n(r)};else if(lE.has(r)){var o=lE.get(r),u=(0,s.Z)(o,2),c=u[0],h=u[1];i.value=a(c,h(),n)}Object.defineProperty(l,t,i)}})),Object.preventExtensions(l)},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new WeakMap,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[1,1],u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:function(r){if(!sE(r))throw new Error("object required");var i=o.get(r);if(i)return i;var c=l[0],h=new Set,d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:++l[0];c!==t&&(c=t,h.forEach((function(n){return n(e,t)})))},f=l[1],p=function(e){return function(t,n){var r=(0,O.Z)(t);r[1]=[e].concat((0,O.Z)(r[1])),d(r,n)}},v=new Map,m=function(e){var t,n=v.get(e);n&&(v.delete(e),null==(t=n[1])||t.call(n))},g=Array.isArray(r)?[]:Object.create(Object.getPrototypeOf(r)),y={deleteProperty:function(e,t){var n=Reflect.get(e,t);m(t);var r=Reflect.deleteProperty(e,t);return r&&d(["delete",[t],n]),r},set:function(t,r,i,a){var s=Reflect.has(t,r),l=Reflect.get(t,r,a);if(s&&(e(l,i)||o.has(i)&&e(l,o.get(i))))return!0;m(r),sE(i)&&(i=function(e){return eE(e)&&e[qw]||null}(i)||i);var c=i;if(i instanceof Promise)i.then((function(e){i.status="fulfilled",i.value=e,d(["resolve",[r],e])})).catch((function(e){i.status="rejected",i.reason=e,d(["reject",[r],e])}));else{!lE.has(i)&&n(i)&&(c=u(i));var f=!uE.has(c)&&lE.get(c);f&&function(e,t){if(v.has(e))throw new Error("prop listener already exists");if(h.size){var n=t[3](p(e));v.set(e,[t,n])}else v.set(e,[t])}(r,f)}return Reflect.set(t,r,c,a),d(["set",[r],i,l]),!0}},A=t(g,y);o.set(r,A);var x=[g,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:++l[1];return f===e||h.size||(f=e,v.forEach((function(t){var n=(0,s.Z)(t,1)[0][1](e);n>c&&(c=n)}))),c},a,function(e){h.add(e),1===h.size&&v.forEach((function(e,t){var n=(0,s.Z)(e,2),r=n[0];if(n[1])throw new Error("remove already exists");var i=r[3](p(t));v.set(t,[r,i])}));return function(){h.delete(e),0===h.size&&v.forEach((function(e,t){var n=(0,s.Z)(e,2),r=n[0],i=n[1];i&&(i(),v.set(t,[r]))}))}}];return lE.set(A,x),Reflect.ownKeys(r).forEach((function(e){var t=Object.getOwnPropertyDescriptor(r,e);"value"in t&&(A[e]=r[e],delete t.value,delete t.writable),Object.defineProperty(g,e,t)})),A};return[u,lE,uE,e,t,n,r,i,a,o,l]},hE=cE(),dE=(0,s.Z)(hE,1)[0];function fE(e,t){var n=lE.get(e);n||console.warn("Please use proxy object");var r=(0,s.Z)(n,3),i=r[0],a=r[1];return(0,r[2])(i,a(),t)}var pE=function(){return dE(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}({productLayerActive:!1,focusedObjectName:null,isStageInitialized:!1,hdrLoaded:!1,productStandsLoaded:!1,GLTFLoaded:!1,modelsLoaded:!1}),vE=function(e,t){var n=D(D({},e),t),r={},i={};for(var a in n)"undefined"===typeof e[a]?i[a]=n[a]:r[a]=n[a];return[r,i]},mE=function(e,t){var n=new np;return n.setStyle(e),n.convertLinearToSRGB(),n},gE=0,yE=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n,r,i){var o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=function(e){return t&&(t.background=e,t.environment=e),pE.hdrLoaded=!0,e},gE||((s=new jw).setPath(n),s.load(r,(function(e){e.mapping=Pu,o(gE=e),console.log("figure out dispose")}))),gE&&o(gE);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),AE=[],xE=function(e,t){return e&&t?(AE.find((function(t){return t.name==e}))||AE.push({name:e,response:t}),AE):e&&!t?AE.find((function(t){return t.name==e})):AE},bE=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scene:new Yg}).scene,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ff,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return arguments.length>0&&void 0!==arguments[0]||new Ff,!0};return e.getObjectsByProperty().filter((function(e){return!!t(e)}))}(e,(function(e){return e.name.includes("ahmetInstancer")}));t.map((function(t){var n=JSON.parse(t.userData._ahmetInstancer);delete t.userData.name;var r=Object.keys(n).filter((function(e){return e>-1})).map((function(e){return(new df).fromArray(n[e])})),i=new Uy(t.geometry,t.material,r.length);r.map((function(e,t){i.setMatrixAt(t,e)})),i.name=t.name+"im",i.userData=n,e.remove(t),e.add(i)}))},_E={},wE=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,u,c,h,d,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new _b,r=[],i=function(e){e.wrapS=Fu,e.wrapT=Fu,e.repeat.set(3,6)},o=function(e){e.normalScale.set(2,2),e.roughness=2,e.displacementScale=.006,e.displacementBias=-.004,d.envMapIntensity=.4},s=function(e){e.wrapS=Fu,e.wrapT=Fu,e.repeat.set(1,28)},l=function(e){e.color.setStyle("#808080"),e.normalScale.set(2,2),e.roughness=2},u=0;case 7:if(!(u<t.length)){e.next=15;break}return e.next=10,n.loadAsync(t[u]);case 10:c=e.sent,r.push(c);case 12:u++,e.next=7;break;case 15:h=(h=["map","normalMap","roughnessMap","map","normalMap","roughnessMap"]).map((function(e,t){return[e,r[t]]})),d=new Px,f=new Px,h.map((function(e,t){t>2?s(e[1]):i(e[1])})),o(d),l(f),d[h[0][0]]=h[0][1],d[h[1][0]]=h[1][1],d[h[2][0]]=h[2][1],f[h[3][0]]=h[3][1],f[h[4][0]]=h[4][1],f[h[5][0]]=h[5][1],_E.rugMaterial=d,_E.overlockMaterial=f,_E.frontGeometry=new gv(1,2),_E.backGeometry=new gv(1,2),_E.overlockTall=new PA(.004,.004,2),_E.overlockShort=new PA(.004,.004,1);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),EE=function(e){var t=[],n=e[0];n["Resim URL"]=n["Resim URL"].split(";"),n["Varyant De\u011fer 1"]=[n["Varyant De\u011fer 1"]];for(var r=1;r<e.length;r++)n["\u0130sim"]==e[r]["\u0130sim"]?n["Varyant De\u011fer 1"].push(e[r]["Varyant De\u011fer 1"]):(t.push(n),(n=e[r])["Resim URL"]=n["Resim URL"].split(";"),n["Varyant De\u011fer 1"]=[n["Varyant De\u011fer 1"]]);return t.push(n),t=t.filter((function(e){return!!e["Sat\u0131\u015f Kanal\u0131:zada"]})),t},SE=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return n=e.sent,r=(r=n.find((function(e){return"textures"==e["\u0130sim"]})))["Resim URL"].split(";"),n=EE(n),_E.productData=n,xE("ikas-urunler",n),e.next=13,wE(r);case 13:return e.abrupt("return");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ME=function(e,t,n){var r={w:1,h:2,thickness:.008,col:"#ababab"};r=D(D({},r),n);var i=new Ug;i.name=t,i.userData=e;var a=new qp,o=new qp;a.name=e,o.name="".concat(t,"-back"),a.userData="".concat(t),a.material=_E.rugMaterial.clone(!1),o.material=_E.rugMaterial.clone(!1);var s=_E.productData.find((function(e){return e.Slug==t}))["Resim URL"][0];(new _b).load(s,(function(e){e.magFilter=Vu,e.minFilter=Vu,a.material.map=e})),a.geometry=_E.frontGeometry.clone(!1),o.geometry=_E.backGeometry.clone(!1),a.position.set(0,0,r.thickness/2),o.position.set(0,0,-r.thickness/2),o.rotation.set(0,180*Qw,0);var l=new qp;l.material=_E.overlockMaterial.clone(!1),l.geometry=_E.overlockTall,l.position.set(.5,0,0),l.name="".concat(t,"-bigov1");var u=l.clone(!1);u.position.set(-.5,0,0),u.name="".concat(t,"-bigov2");var c=new qp;c.material=_E.overlockMaterial.clone(!1),c.geometry=_E.overlockShort,c.position.set(0,1,0),c.rotation.set(0,0,90*Qw),c.name="".concat(t,"-smolov1");var h=c.clone(!1);return h.position.set(0,-1,0),h.name="".concat(t,"-smolov2"),i.add(a),i.add(o),i.add(l),i.add(u),i.add(c),i.add(h),i},CE=function(e){var t=e.children.find((function(e){return e.name.includes("Canvas")})).name;t.includes("back")?e.rotation.set(0,-90*Qw,0):t.includes("front")?e.rotation.set(0,90*Qw,0):t.includes("left")&&e.rotation.set(0,180*Qw,0)},kE=function(e,t){var n=["".concat(e.slug,"-smolov1"),"".concat(e.slug,"-smolov2"),"".concat(e.slug,"-bigov1"),"".concat(e.slug,"-bigov2"),"".concat(e.name)],r=["".concat(e.slug,"-back")],i=mE(e.col);r.map((function(e){t.getObjectByName(e).material.color.set(i)})),i=mE(e.ovcol),n.map((function(e){t.getObjectByName(e).material.color.set(i)}))},TE=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getObjectsByProperty(),i=r.filter((function(e){return e.name.includes("Canvas")})).map((function(e,r){var i=t.find((function(t){return t.name==e.name}));return i?(i.position=e.position,i.rotation=e.rotation,i):(n.remove(e),{})})),i=i.filter((function(e){return e.name})),e.next=5,SE("/assets/data/ikas-urunler.json");case 5:i.map((function(e,t){var r,i,a=ME(e.name,e.slug,{});a.position.set(e.position.x,e.position.y,e.position.z),CE(a),e.size&&(r=a,i=(i=(i=e.size).toLowerCase().split("x")).map((function(e){return+e/100})),i=i.sort(),r.scale.set(i[0],i[1]/2,1)),e.col&&kE(e,a),n.remove(n.getObjectByName(e.name)),n.add(a)})),pE.modelsLoaded=!0;case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),IE=TE,BE=n(184);function RE(){var e=(0,t.useState)(!1),r=(0,s.Z)(e,2),i=r[0],l=r[1],u=(0,t.useState)(),c=(0,s.Z)(u,2),h=c[0],d=c[1],f=(0,t.useState)([]),p=(0,s.Z)(f,2),v=p[0],m=p[1],g=(0,t.useState)([]),y=(0,s.Z)(g,2),A=y[0],x=y[1],b=(0,t.useRef)();function _(e){var t=e.map((function(e){return e["\u0130sim"].split(" ")[0].toLowerCase()})).filter((function(e,t,n){return n.indexOf(e)===t}));x(t)}function w(){return w=(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/assets/data/ikas-urunler.json");case 2:return t=e.sent,e.next=5,t.json();case 5:t=e.sent,t=EE(t),window.data=t,_(t),m(t);case 10:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}return(0,t.useEffect)((function(){!function(){w.apply(this,arguments)}()}),[]),window.sheetRef=b,(0,BE.jsxs)("div",{style:{paddingTop:100,flexWrap:"wrap",width:window.innerWidth,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[(0,BE.jsx)("img",{class:"background",src:kl}),A.map((function(e){return(0,BE.jsxs)("div",{onClick:function(){d(e.toUpperCase()),l(!0)},style:{width:165,height:165,margin:5},children:[(0,BE.jsx)("img",{src:n(1621)("./".concat(e,".webp")),style:{width:165,height:165},alt:""}),(0,BE.jsx)("div",{class:"overlay"})]})})),(0,BE.jsxs)("button",{disabled:!0,class:"topButton",children:[" ",(0,BE.jsx)("text",{children:"Sanal Oda Se\xe7"})]}),i&&(0,BE.jsx)("button",{onClick:function(){location.href="/showroom/"+h.toLowerCase()},class:"ARButton",children:"Sanal Showroomda G\xf6r"}),h&&(0,BE.jsxs)(Cl,{ref:b,isOpen:i,snapPoints:[window.innerHeight,600,0],initialSnap:1,onClose:function(){return l(!1)},children:[(0,BE.jsxs)(Cl.Container,{style:{backgroundColor:"#262626",borderTopLeftRadius:25,borderTopRightRadius:25},children:[(0,BE.jsx)(Cl.Header,{}),(0,BE.jsxs)(Cl.Content,{children:[(0,BE.jsxs)("div",{style:{textAlign:"center",marginLeft:60,marginRight:60,fontSize:24,fontWeight:"bold"},children:[h," Odas\u0131"]}),(0,BE.jsxs)("div",{style:{textAlign:"center",marginLeft:30,marginRight:30},children:["\u0130\xe7inde ",(0,BE.jsxs)("i",{children:[" ",h.toLowerCase()]})," koleksiyonundan hal\u0131lar sergilenmektedir ",(0,BE.jsx)("br",{})," ",(0,BE.jsx)("br",{})]}),(0,BE.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:v.filter((function(e){return e["\u0130sim"].includes(h.toUpperCase())})).slice(0,3).map((function(e){return(0,BE.jsx)("img",{src:e["Resim URL"][0],style:{borderRadius:0,flex:1,height:140,marginLeft:2,marginRight:2,marginBottom:10,objectFit:"cover"}})}))}),(0,BE.jsx)("div",{style:{textAlign:"center",marginLeft:30,marginRight:30,marginTop:10},children:" Consectetur adipiscing elit. Pellentesque at ex in dui laoreet aliquet. Donec bibendum ut sapien ac elementum. Donec in vulputate diam, in lacinia urna. Aenean dolor est, condimentum non turpis vitae, tempus semper nulla. Aliquam fringilla turpis id eros lobortis, vitae egestas dui scelerisque. "})]})]}),(0,BE.jsx)(Cl.Backdrop,{})]})]})}var LE=n(3878),PE=n(9199),DE=n(181),OE=n(5267);function FE(e){return(0,LE.Z)(e)||(0,PE.Z)(e)||(0,DE.Z)(e)||(0,OE.Z)()}var NE=n(5647),UE=n(4585);function ZE(e){var t,n=new Set,r=function(e,r){var i="function"===typeof e?e(t):e;if(i!==t){var a=t;t=r?i:Object.assign({},t,i),n.forEach((function(e){return e(t,a)}))}},i=function(){return t},a={setState:r,getState:i,subscribe:function(e,r,a){return r||a?function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");var o=r(t);function s(){var n=r(t);if(!a(o,n)){var i=o;e(o=n,i)}}return n.add(s),function(){return n.delete(s)}}(e,r,a):(n.add(e),function(){return n.delete(e)})},destroy:function(){return n.clear()}};return t=e(r,i,a),a}var zE="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?t.useEffect:t.useLayoutEffect;function HE(e){var n="function"===typeof e?ZE(e):e,r=function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.getState,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is,a=(0,t.useReducer)((function(e){return e+1}),0),o=(0,s.Z)(a,2)[1],l=n.getState(),u=(0,t.useRef)(l),c=(0,t.useRef)(r),h=(0,t.useRef)(i),d=(0,t.useRef)(!1),f=(0,t.useRef)();void 0===f.current&&(f.current=r(l));var p=!1;(u.current!==l||c.current!==r||h.current!==i||d.current)&&(e=r(l),p=!i(f.current,e)),zE((function(){p&&(f.current=e),u.current=l,c.current=r,h.current=i,d.current=!1}));var v=(0,t.useRef)(l);zE((function(){var e=function(){try{var e=n.getState(),t=c.current(e);h.current(f.current,t)||(u.current=e,f.current=t,o())}catch(r){d.current=!0,o()}},t=n.subscribe(e);return n.getState()!==v.current&&e(),t}),[]);var m=p?e:f.current;return(0,t.useDebugValue)(m),m};return Object.assign(r,n),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");var e=[r,n];return{next:function(){var t=e.length<=0;return{value:e.shift(),done:t}}}},r}var GE=n(258),QE=n.n(GE),VE=n(4545),jE=[];function WE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return e===t};if(e===t)return!0;if(!e||!t)return!1;var r=e.length;if(t.length!==r)return!1;for(var i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function qE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===t&&(t=[e]);for(var i=0,a=jE;i<a.length;i++){var o=a[i];if(WE(t,o.keys,o.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return r.lifespan&&r.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,r.lifespan)),o.response;if(!n)throw o.promise}}var s,l={keys:t,equal:r.equal,remove:function(){var e=jE.indexOf(l);-1!==e&&jE.splice(e,1)},promise:(s=e,"object"===typeof s&&"function"===typeof s.then?e:e.apply(void 0,(0,O.Z)(t))).then((function(e){l.response=e,r.lifespan&&r.lifespan>0&&(l.timeout=setTimeout(l.remove,r.lifespan))})).catch((function(e){return l.error=e}))};if(jE.push(l),!n)throw l.promise}var JE,XE,YE=function(e,t,n){return qE(e,t,!1,n)},KE=["args","attach"],$E=["args","children"],eS=["args","children"],tS=["children","key","ref"],nS=["children","key","ref"],rS=["params"],iS={},aS=function(e){Object.assign(iS,e)};var oS=function(e){return"colorSpace"in e||"outputColorSpace"in e},sS=function(){var e;return null!=(e=iS.ColorManagement)?e:null},lS=function(e){return e&&e.isOrthographicCamera},uS="undefined"!==typeof window&&(null!=(JE=window.document)&&JE.createElement||"ReactNative"===(null==(XE=window.navigator)?void 0:XE.product))?t.useLayoutEffect:t.useEffect;function cS(e){var n=t.useRef(e);return uS((function(){n.current=e}),[e]),n}function hS(e){var t=e.set;return uS((function(){return t(new Promise((function(){return null}))),function(){return t(!1)}}),[t]),null}var dS=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={error:!1},e}return(0,c.Z)(n,[{key:"componentDidCatch",value:function(e){this.props.set(e)}},{key:"render",value:function(){return this.state.error?null:this.props.children}}]),n}(t.Component);dS.getDerivedStateFromError=function(){return{error:!0}};var fS="__default",pS=new Map,vS=function(e){return e&&!!e.memoized&&!!e.changes};function mS(e){var t,n="undefined"!==typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}var gS=function(e){var t;return null==(t=e.__r3f)?void 0:t.root.getState()},yS={obj:function(e){return e===Object(e)&&!yS.arr(e)&&"function"!==typeof e},fun:function(e){return"function"===typeof e},str:function(e){return"string"===typeof e},num:function(e){return"number"===typeof e},boo:function(e){return"boolean"===typeof e},und:function(e){return void 0===e},arr:function(e){return Array.isArray(e)},equ:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.arrays,i=void 0===r?"shallow":r,a=n.objects,o=void 0===a?"reference":a,s=n.strict,l=void 0===s||s;if(typeof e!==typeof t||!!e!==!!t)return!1;if(yS.str(e)||yS.num(e))return e===t;var u=yS.obj(e);if(u&&"reference"===o)return e===t;var c,h=yS.arr(e);if(h&&"reference"===i)return e===t;if((h||u)&&e===t)return!0;for(c in e)if(!(c in t))return!1;if(u&&"shallow"===i&&"shallow"===o){for(c in l?t:e)if(!yS.equ(e[c],t[c],{strict:l,objects:"reference"}))return!1}else for(c in l?t:e)if(e[c]!==t[c])return!1;if(yS.und(c)){if(h&&0===e.length&&0===t.length)return!0;if(u&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function AS(e){var t={nodes:{},materials:{}};return e&&e.traverse((function(e){e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}function xS(e,t){return e.__r3f=D({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},t),e}function bS(e,t){var n=e;if(t.includes("-")){var r=t.split("-"),i=r.pop();return n=r.reduce((function(e,t){return e[t]}),e),{target:n,key:i}}return{target:n,key:t}}var _S=/-\d+$/;function wS(e,t,n){if(yS.str(n)){if(_S.test(n)){var r=bS(e,n.replace(_S,"")),i=r.target,a=r.key;Array.isArray(i[a])||(i[a]=[])}var o=bS(e,n),s=o.target,l=o.key;t.__r3f.previousAttach=s[l],s[l]=t}else t.__r3f.previousAttach=n(e,t)}function ES(e,t,n){var r,i;if(yS.str(n)){var a=bS(e,n),o=a.target,s=a.key,l=t.__r3f.previousAttach;void 0===l?delete o[s]:o[s]=l}else null==(r=t.__r3f)||null==r.previousAttach||r.previousAttach(e,t);null==(i=t.__r3f)||delete i.previousAttach}function SS(e,t){t.children,t.key,t.ref;var n,r=We(t,tS),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(i.children,i.key,i.ref,We(i,nS)),o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=null!=(n=null==e?void 0:e.__r3f)?n:{},u=Object.entries(r),c=[];if(o)for(var h=Object.keys(a),d=0;d<h.length;d++)r.hasOwnProperty(h[d])||u.unshift([h[d],fS+"remove"]);u.forEach((function(t){var n,i=(0,s.Z)(t,2),o=i[0],l=i[1];if((null==(n=e.__r3f)||!n.primitive||"object"!==o)&&!yS.equ(l,a[o])){if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(o))return c.push([o,l,!0,[]]);var u=[];for(var h in o.includes("-")&&(u=o.split("-")),c.push([o,l,!1,u]),r){var d=r[h];h.startsWith("".concat(o,"-"))&&c.push([h,d,!1,h.split("-")])}}}));var f=D({},r);return l.memoizedProps&&l.memoizedProps.args&&(f.args=l.memoizedProps.args),l.memoizedProps&&l.memoizedProps.attach&&(f.attach=l.memoizedProps.attach),{memoized:f,changes:c}}function MS(e,t){var n,r,i,a=null!=(n=e.__r3f)?n:{},o=a.root,l=null!=(r=null==o||null==o.getState?void 0:o.getState())?r:{},u=vS(t)?t:SS(e,t),c=u.memoized,h=u.changes,d=a.eventCount;e.__r3f&&(e.__r3f.memoizedProps=c);for(var f=0;f<h.length;f++){var p=(0,s.Z)(h[f],4),v=p[0],m=p[1],g=p[2],y=p[3];if(oS(e)){var A="srgb",x="srgb-linear";"encoding"===v?(v="colorSpace",m=3001===m?A:x):"outputEncoding"===v&&(v="outputColorSpace",m=3001===m?A:x)}var b=e,_=b[v];if(y.length&&(_=y.reduce((function(e,t){return e[t]}),e),!_||!_.set)){var w=FE(y.reverse()),E=w[0];b=w.slice(1).reverse().reduce((function(e,t){return e[t]}),e),v=E}if(m===fS+"remove")if(b.constructor){var S=pS.get(b.constructor);S||(S=new b.constructor,pS.set(b.constructor,S)),m=S[v]}else m=0;if(g)m?a.handlers[v]=m:delete a.handlers[v],a.eventCount=Object.keys(a.handlers).length;else if(_&&_.set&&(_.copy||_ instanceof wf)){var M;if(Array.isArray(m))_.fromArray?_.fromArray(m):(M=_).set.apply(M,(0,O.Z)(m));else if(_.copy&&m&&m.constructor&&_.constructor===m.constructor)_.copy(m);else if(void 0!==m){var C=_ instanceof np;!C&&_.setScalar?_.setScalar(m):_ instanceof wf&&m instanceof wf?_.mask=m.mask:_.set(m),sS()||l.linear||!C||_.convertSRGBToLinear()}}else if(b[v]=m,b[v]instanceof Md&&b[v].format===lc&&b[v].type===Xu){var k=b[v];oS(k)&&oS(l.gl)?k.colorSpace=l.gl.outputColorSpace:k.encoding=l.gl.outputEncoding}CS(e)}if(a.parent&&l.internal&&e.raycast&&d!==a.eventCount){var T=l.internal.interaction.indexOf(e);T>-1&&l.internal.interaction.splice(T,1),a.eventCount&&l.internal.interaction.push(e)}return!(1===h.length&&"onUpdate"===h[0][0])&&h.length&&null!=(i=e.__r3f)&&i.parent&&kS(e),e}function CS(e){var t,n,r=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function kS(e){null==e.onUpdate||e.onUpdate(e)}function TS(e,t){e.manual||(lS(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function IS(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function BS(e,t,n,r){var i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}function RS(e){function t(e){return e.filter((function(e){return["Move","Over","Enter","Out","Leave"].some((function(t){var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}))}function n(t){var n,r=e.getState().internal,i=(0,Ms.Z)(r.hovered.values());try{var a=function(){var e=n.value;if(!t.length||!t.find((function(t){return t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId}))){var i=e.eventObject.__r3f,a=null==i?void 0:i.handlers;if(r.hovered.delete(IS(e)),null!=i&&i.eventCount){var o=D(D({},e),{},{intersections:t});null==a.onPointerOut||a.onPointerOut(o),null==a.onPointerLeave||a.onPointerLeave(o)}}};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return function(){return n([])};case"onLostPointerCapture":return function(t){var r=e.getState().internal;"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame((function(){r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))}))}}return function(a){var o=e.getState(),s=o.onPointerMissed,l=o.internal;l.lastEvent.current=a;var u="onPointerMove"===i,c="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,h=function(t,n){for(var r=e.getState(),i=new Set,a=[],o=n?n(r.internal.interaction):r.internal.interaction,s=0;s<o.length;s++){var l=gS(o[s]);l&&(l.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);var u=o.flatMap((function(e){var n,r=gS(e);return r&&r.events.enabled&&null!==r.raycaster.camera?(void 0===r.raycaster.camera&&(null==r.events.compute||r.events.compute(t,r,null==(n=r.previousRoot)?void 0:n.getState()),void 0===r.raycaster.camera&&(r.raycaster.camera=null)),r.raycaster.camera?r.raycaster.intersectObject(e,!0):[]):[]})).sort((function(e,t){var n=gS(e.object),r=gS(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance})).filter((function(e){var t=IS(e);return!i.has(t)&&(i.add(t),!0)}));r.events.filter&&(u=r.events.filter(u,r));var c,h=(0,Ms.Z)(u);try{for(h.s();!(c=h.n()).done;)for(var d=c.value,f=d.object;f;){var p;null!=(p=f.__r3f)&&p.eventCount&&a.push(D(D({},d),{},{eventObject:f})),f=f.parent}}catch(y){h.e(y)}finally{h.f()}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId)){var v,m=(0,Ms.Z)(r.internal.capturedMap.get(t.pointerId).values());try{for(m.s();!(v=m.n()).done;){var g=v.value;i.has(IS(g.intersection))||a.push(g.intersection)}}catch(y){m.e(y)}finally{m.f()}}return a}(a,u?t:void 0),d=c?function(t){var n=e.getState().internal,r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(a):0;"onPointerDown"===i&&(l.initialClick=[a.offsetX,a.offsetY],l.initialHits=h.map((function(e){return e.eventObject}))),c&&!h.length&&d<=2&&(r(a,l.interaction),s&&s(a)),u&&n(h),function(t,r,i,a){var o=e.getState();if(t.length){var s,l={stopped:!1},u=(0,Ms.Z)(t);try{var c=function(){var e=s.value,u=gS(e.object)||o,c=u.raycaster,h=u.pointer,d=u.camera,f=u.internal,p=new Dd(h.x,h.y,0).unproject(d),v=function(t){var n,r;return null!=(n=null==(r=f.capturedMap.get(t))?void 0:r.has(e.eventObject))&&n},m=function(t){var n={intersection:e,target:r.target};f.capturedMap.has(t)?f.capturedMap.get(t).set(e.eventObject,n):f.capturedMap.set(t,new Map([[e.eventObject,n]])),r.target.setPointerCapture(t)},g=function(t){var n=f.capturedMap.get(t);n&&BS(f.capturedMap,e.eventObject,n,t)},y={};for(var A in r){var x=r[A];"function"!==typeof x&&(y[A]=x)}var b=D(D(D({},e),y),{},{pointer:h,intersections:t,stopped:l.stopped,delta:i,unprojectedPoint:p,ray:c.ray,camera:d,stopPropagation:function(){var i="pointerId"in r&&f.capturedMap.get(r.pointerId);if((!i||i.has(e.eventObject))&&(b.stopped=l.stopped=!0,f.hovered.size&&Array.from(f.hovered.values()).find((function(t){return t.eventObject===e.eventObject})))){var a=t.slice(0,t.indexOf(e));n([].concat((0,O.Z)(a),[e]))}},target:{hasPointerCapture:v,setPointerCapture:m,releasePointerCapture:g},currentTarget:{hasPointerCapture:v,setPointerCapture:m,releasePointerCapture:g},nativeEvent:r});if(a(b),!0===l.stopped)return"break"};for(u.s();!(s=u.n()).done&&"break"!==c(););}catch(h){u.e(h)}finally{u.f()}}}(h,a,d,(function(e){var t=e.eventObject,n=t.__r3f,o=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(u){if(o.onPointerOver||o.onPointerEnter||o.onPointerOut||o.onPointerLeave){var s=IS(e),h=l.hovered.get(s);h?h.stopped&&e.stopPropagation():(l.hovered.set(s,e),null==o.onPointerOver||o.onPointerOver(e),null==o.onPointerEnter||o.onPointerEnter(e))}null==o.onPointerMove||o.onPointerMove(e)}else{var d=o[i];d?c&&!l.initialHits.includes(t)||(r(a,l.interaction.filter((function(e){return!l.initialHits.includes(e)}))),d(e)):c&&l.initialHits.includes(t)&&r(a,l.interaction.filter((function(e){return!l.initialHits.includes(e)})))}}))}}}}var LS,PS=function(e){return!(null==e||!e.render)},DS=t.createContext(null),OS=function(e,n){var r=HE((function(r,i){var a=new Dd,o=new Dd,s=new Dd;function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i().size,r=n.width,l=n.height,u=n.top,c=n.left,h=r/l;t instanceof Dd?s.copy(t):s.set.apply(s,(0,O.Z)(t));var d=e.getWorldPosition(a).distanceTo(s);if(lS(e))return{width:r/e.zoom,height:l/e.zoom,top:u,left:c,factor:1,distance:d,aspect:h};var f=e.fov*Math.PI/180,p=2*Math.tan(f/2)*d,v=p*(r/l);return{width:v,height:p,top:u,left:c,factor:r/v,distance:d,aspect:h}}var u=void 0,c=function(e){return r((function(t){return{performance:D(D({},t.performance),{},{current:e})}}))},h=new sd,d={set:r,get:i,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(i(),t)},advance:function(e,t){return n(e,t,i())},legacy:!1,linear:!1,flat:!1,controls:null,clock:new a_,pointer:h,mouse:h,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:function(){var e=i();u&&clearTimeout(u),e.performance.current!==e.performance.min&&c(e.performance.min),u=setTimeout((function(){return c(i().performance.max)}),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:function(e){return r((function(t){return D(D({},t),{},{events:D(D({},t.events),e)})}))},setSize:function(e,t,n,a,s){var u=i().camera,c={width:e,height:t,top:a||0,left:s||0,updateStyle:n};r((function(e){return{size:c,viewport:D(D({},e.viewport),l(u,o,c))}}))},setDpr:function(e){return r((function(t){var n=mS(e);return{viewport:D(D({},t.viewport),{},{dpr:n,initialDpr:t.viewport.initialDpr||n})}}))},setFrameloop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always",t=i().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),r((function(){return{frameloop:e}}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:t.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:function(e,t,n){var r=i().internal;return r.priority=r.priority+(t>0?1:0),r.subscribers.push({ref:e,priority:t,store:n}),r.subscribers=r.subscribers.sort((function(e,t){return e.priority-t.priority})),function(){var n=i().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((function(t){return t.ref!==e})))}}}};return d})),i=r.getState(),a=i.size,o=i.viewport.dpr,s=i.camera;return r.subscribe((function(){var e=r.getState(),t=e.camera,n=e.size,i=e.viewport,l=e.gl,u=e.set;if(n!==a||i.dpr!==o){var c;a=n,o=i.dpr,TS(t,n),l.setPixelRatio(i.dpr);var h=null!=(c=n.updateStyle)?c:"undefined"!==typeof HTMLCanvasElement&&l.domElement instanceof HTMLCanvasElement;l.setSize(n.width,n.height,h)}t!==s&&(s=t,u((function(e){return{viewport:D(D({},e.viewport),e.viewport.getCurrentViewport(t))}})))})),r.subscribe((function(t){return e(t)})),r};var FS,NS,US=new Set,ZS=new Set,zS=new Set;function HS(e,t){if(e.size){var n,r=(0,Ms.Z)(e.values());try{for(r.s();!(n=r.n()).done;){(0,n.value.callback)(t)}}catch(i){r.e(i)}finally{r.f()}}}function GS(e,t){switch(e){case"before":return HS(US,t);case"after":return HS(ZS,t);case"tail":return HS(zS,t)}}function QS(e,t,n){var r=t.clock.getDelta();for("never"===t.frameloop&&"number"===typeof e&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),FS=t.internal.subscribers,LS=0;LS<FS.length;LS++)(NS=FS[LS]).ref.current(NS.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function VS(){var e=t.useContext(DS);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function jS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1?arguments[1]:void 0;return VS()(e,t)}function WS(e,t){return function(n){var r=new n;e&&e(r);for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return Promise.all(a.map((function(e){return new Promise((function(n,i){return r.load(e,(function(e){e.scene&&Object.assign(e,AS(e.scene)),n(e)}),t,(function(t){return i(new Error("Could not load ".concat(e,": ").concat(t.message)))}))}))})))}}function qS(e,t,n,r){var i=Array.isArray(t)?t:[t],a=YE(WS(n,r),[e].concat((0,O.Z)(i)),{equal:yS.equ});return Array.isArray(t)?a:a[0]}qS.preload=function(e,t,n){var r=Array.isArray(t)?t:[t];return function(e,t,n){qE(e,t,!0,n)}(WS(n),[e].concat((0,O.Z)(r)))},qS.clear=function(e,t){var n=Array.isArray(t)?t:[t];return function(e){if(void 0===e||0===e.length)jE.splice(0,jE.length);else{var t=jE.find((function(t){return WE(e,t.keys,t.equal)}));t&&t.remove()}}([e].concat((0,O.Z)(n)))};var JS=new Map,XS=function(e){var t,n,r,i=!1;function a(o){n=requestAnimationFrame(a),i=!0,t=0,GS("before",o);var s,l=(0,Ms.Z)(e.values());try{for(l.s();!(s=l.n()).done;){var u,c=s.value;!(r=c.store.getState()).internal.active||!("always"===r.frameloop||r.internal.frames>0)||null!=(u=r.gl.xr)&&u.isPresenting||(t+=QS(o,r))}}catch(h){l.e(h)}finally{l.f()}if(GS("after",o),0===t)return GS("tail",o),i=!1,cancelAnimationFrame(n)}return{loop:a,invalidate:function t(n){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!n)return e.forEach((function(e){return t(e.store.getState())}),o);null!=(r=n.gl.xr)&&r.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+o),i||(i=!0,requestAnimationFrame(a)))},advance:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(n&&GS("before",t),r)QS(t,r,i);else{var a,o=(0,Ms.Z)(e.values());try{for(o.s();!(a=o.n()).done;){QS(t,a.value.store.getState())}}catch(s){o.e(s)}finally{o.f()}}n&&GS("after",t)}}}(JS),YS=XS.invalidate,KS=XS.advance,$S=function(e,t){function n(e,t,n){var r,i=t.args,a=void 0===i?[]:i,o=t.attach,s=We(t,KE),l="".concat(e[0].toUpperCase()).concat(e.slice(1));if("primitive"===e){if(void 0===s.object)throw new Error("R3F: Primitives without 'object' are invalid!");r=xS(s.object,{type:e,root:n,attach:o,primitive:!0})}else{var u=iS[l];if(!u)throw new Error("R3F: ".concat(l," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if(!Array.isArray(a))throw new Error("R3F: The args prop must be an array!");r=xS((0,NE.Z)(u,(0,O.Z)(a)),{type:e,root:n,attach:o,memoizedProps:{args:a}})}return void 0===r.__r3f.attach&&(r instanceof Ip?r.__r3f.attach="geometry":r instanceof Yf&&(r.__r3f.attach="material")),"inject"!==l&&MS(r,s),r}function r(e,t){var n,r,i=!1;t&&(null!=(n=t.__r3f)&&n.attach?wS(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),i=!0),i||null==(r=e.__r3f)||r.objects.push(t),t.__r3f||xS(t,{}),t.__r3f.parent=e,kS(t),CS(t))}function i(e,t,n){var r=!1;if(t){var i,a;if(null!=(i=t.__r3f)&&i.attach)wS(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});var o=e.children.filter((function(e){return e!==t})),s=o.indexOf(n);e.children=[].concat((0,O.Z)(o.slice(0,s)),[t],(0,O.Z)(o.slice(s))),r=!0}r||null==(a=e.__r3f)||a.objects.push(t),t.__r3f||xS(t,{}),t.__r3f.parent=e,kS(t),CS(t)}}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&(0,O.Z)(e).forEach((function(e){return o(t,e,n)}))}function o(e,t,n){if(t){var r,i,o;if(t.__r3f&&(t.__r3f.parent=null),null!=(r=e.__r3f)&&r.objects&&(e.__r3f.objects=e.__r3f.objects.filter((function(e){return e!==t}))),null!=(i=t.__r3f)&&i.attach)ES(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var s;e.remove(t),null!=(s=t.__r3f)&&s.root&&function(e,t){var n=e.getState().internal;n.interaction=n.interaction.filter((function(e){return e!==t})),n.initialHits=n.initialHits.filter((function(e){return e!==t})),n.hovered.forEach((function(e,r){e.eventObject!==t&&e.object!==t||n.hovered.delete(r)})),n.capturedMap.forEach((function(e,r){BS(n.capturedMap,t,e,r)}))}(t.__r3f.root,t)}var l,u=null==(o=t.__r3f)?void 0:o.primitive,c=void 0===n?null!==t.dispose&&!u:n;if(!u)a(null==(l=t.__r3f)?void 0:l.objects,t,c),a(t.children,t,c);delete t.__r3f,c&&t.dispose&&"Scene"!==t.type&&(0,VE.unstable_scheduleCallback)(VE.unstable_IdlePriority,(function(){try{t.dispose()}catch(e){}})),CS(e)}}var l=function(){return console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.")},u=QE()({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:function(e,t){if(t){var n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,r(n,t))}},removeChildFromContainer:function(e,t){t&&o(e.getState().scene,t)},insertInContainerBefore:function(e,t,n){if(t&&n){var r=e.getState().scene;r.__r3f&&i(r,t,n)}},getRootHostContext:function(){return null},getChildHostContext:function(e){return e},finalizeInitialChildren:function(e){var t,n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate:function(e,t,n,r){var i;if((null!=(i=null==e?void 0:e.__r3f)?i:{}).primitive&&r.object&&r.object!==e)return[!0];var a=r.args,o=void 0===a?[]:a,s=(r.children,We(r,$E)),l=n.args,u=void 0===l?[]:l,c=(n.children,We(n,eS));if(!Array.isArray(o))throw new Error("R3F: the args prop must be an array!");if(o.some((function(e,t){return e!==u[t]})))return[!0];var h=SS(e,s,c,!0);return h.changes.length?[!1,h]:null},commitUpdate:function(e,t,i,a,l,u){var c=(0,s.Z)(t,2),h=c[0],d=c[1];h?function(e,t,i,a){var s,l=null==(s=e.__r3f)?void 0:s.parent;if(l){var u=n(t,i,e.__r3f.root);if(e.children){var c,h=(0,Ms.Z)(e.children);try{for(h.s();!(c=h.n()).done;){var d=c.value;d.__r3f&&r(u,d)}}catch(f){h.e(f)}finally{h.f()}e.children=e.children.filter((function(e){return!e.__r3f}))}e.__r3f.objects.forEach((function(e){return r(u,e)})),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||o(l,e),u.parent&&(u.__r3f.autoRemovedBeforeAppend=!0),r(l,u),u.raycast&&u.__r3f.eventCount&&u.__r3f.root.getState().internal.interaction.push(u),[a,a.alternate].forEach((function(e){null!==e&&(e.stateNode=u,e.ref&&("function"===typeof e.ref?e.ref(u):e.ref.current=u))}))}}(e,i,l,u):MS(e,d)},commitMount:function(e,t,n,r){var i,a=null!=(i=e.__r3f)?i:{};e.raycast&&a.handlers&&a.eventCount&&e.__r3f.root.getState().internal.interaction.push(e)},getPublicInstance:function(e){return e},prepareForCommit:function(){return null},preparePortalMount:function(e){return xS(e.getState().scene)},resetAfterCommit:function(){},shouldSetTextContent:function(){return!1},clearContainer:function(){return!1},hideInstance:function(e){var t,n=null!=(t=e.__r3f)?t:{},r=n.attach,i=n.parent;r&&i&&ES(i,e,r),e.isObject3D&&(e.visible=!1),CS(e)},unhideInstance:function(e,t){var n,r=null!=(n=e.__r3f)?n:{},i=r.attach,a=r.parent;i&&a&&wS(a,e,i),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),CS(e)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:function(){return t?t():UE.DefaultEventPriority},beforeActiveInstanceBlur:function(){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},now:"undefined"!==typeof performance&&yS.fun(performance.now)?performance.now:yS.fun(Date.now)?Date.now:function(){return 0},scheduleTimeout:yS.fun(setTimeout)?setTimeout:void 0,cancelTimeout:yS.fun(clearTimeout)?clearTimeout:void 0});return{reconciler:u,applyProps:MS}}(0,(function(){var e,t="undefined"!==typeof self&&self||"undefined"!==typeof window&&window;if(!t)return UE.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return UE.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return UE.ContinuousEventPriority;default:return UE.DefaultEventPriority}})),eM=$S.reconciler,tM=$S.applyProps,nM={objects:"shallow",strict:!1},rM=function(e,t){var n="function"===typeof e?e(t):e;return PS(n)?n:new jg(D({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0},e))};function iM(e){var n=JS.get(e),r=null==n?void 0:n.fiber,i=null==n?void 0:n.store;n&&console.warn("R3F.createRoot should only be called once!");var a,o="function"===typeof reportError?reportError:console.error,s=i||OS(YS,KS),l=r||eM.createContainer(s,UE.ConcurrentRoot,null,!1,null,"",o,null);n||JS.set(e,{fiber:l,store:s});var u,c=!1;return{configure:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.gl,r=t.size,i=t.scene,o=t.events,l=t.onCreated,h=t.shadows,d=void 0!==h&&h,f=t.linear,p=void 0!==f&&f,v=t.flat,m=void 0!==v&&v,g=t.legacy,y=void 0!==g&&g,A=t.orthographic,x=void 0!==A&&A,b=t.frameloop,_=void 0===b?"always":b,w=t.dpr,E=void 0===w?[1,2]:w,S=t.performance,M=t.raycaster,C=t.camera,k=t.onPointerMissed,T=s.getState(),I=T.gl;T.gl||T.set({gl:I=rM(n,e)});var B=T.raycaster;B||T.set({raycaster:B=new F_});var R,L=M||{},P=L.params,O=We(L,rS);if(yS.equ(O,B,nM)||tM(B,D({},O)),yS.equ(P,B.params,nM)||tM(B,{params:D(D({},B.params),P)}),!T.camera||T.camera===u&&!yS.equ(u,C,nM)){u=C;var F=C instanceof nv,N=F?C:x?new kv(0,0,0,0,.1,1e3):new rv(75,0,.1,1e3);F||(N.position.z=5,C&&tM(N,C),T.camera||null!=C&&C.rotation||N.lookAt(0,0,0)),T.set({camera:N})}T.scene||(i instanceof Yg?R=i:(R=new Yg,i&&tM(R,i)),T.set({scene:xS(R)}));if(!T.xr){var U,Z=function(e,t){var n=s.getState();"never"!==n.frameloop&&KS(e,!0,n,t)},z=function(){var e=s.getState();e.gl.xr.enabled=e.gl.xr.isPresenting,e.gl.xr.setAnimationLoop(e.gl.xr.isPresenting?Z:null),e.gl.xr.isPresenting||YS(e)},H={connect:function(){var e=s.getState().gl;e.xr.addEventListener("sessionstart",z),e.xr.addEventListener("sessionend",z)},disconnect:function(){var e=s.getState().gl;e.xr.removeEventListener("sessionstart",z),e.xr.removeEventListener("sessionend",z)}};"function"===typeof(null==(U=I.xr)?void 0:U.addEventListener)&&H.connect(),T.set({xr:H})}if(I.shadowMap){var G=I.shadowMap.enabled,Q=I.shadowMap.type;if(I.shadowMap.enabled=!!d,yS.boo(d))I.shadowMap.type=Zl;else if(yS.str(d)){var V,j={basic:Nl,percentage:Ul,soft:Zl,variance:zl};I.shadowMap.type=null!=(V=j[d])?V:Zl}else yS.obj(d)&&Object.assign(I.shadowMap,d);G===I.shadowMap.enabled&&Q===I.shadowMap.type||(I.shadowMap.needsUpdate=!0)}var W=sS();W&&("enabled"in W?W.enabled=!y:"legacyMode"in W&&(W.legacyMode=y));tM(I,{outputEncoding:p?3e3:3001,toneMapping:m?Su:Tu}),T.legacy!==y&&T.set((function(){return{legacy:y}})),T.linear!==p&&T.set((function(){return{linear:p}})),T.flat!==m&&T.set((function(){return{flat:m}})),!n||yS.fun(n)||PS(n)||yS.equ(n,I,nM)||tM(I,n),o&&!T.events.handlers&&T.set({events:o(s)});var q=function(e,t){if(t)return t;if("undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){var n=e.parentElement.getBoundingClientRect();return{width:n.width,height:n.height,top:n.top,left:n.left}}return"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0}:{width:0,height:0,top:0,left:0}}(e,r);return yS.equ(q,T.size,nM)||T.setSize(q.width,q.height,q.updateStyle,q.top,q.left),E&&T.viewport.dpr!==mS(E)&&T.setDpr(E),T.frameloop!==_&&T.setFrameloop(_),T.onPointerMissed||T.set({onPointerMissed:k}),S&&!yS.equ(S,T.performance,nM)&&T.set((function(e){return{performance:D(D({},e.performance),S)}})),a=l,c=!0,this},render:function(n){return c||this.configure(),eM.updateContainer(t.createElement(aM,{store:s,children:n,onCreated:a,rootElement:e}),l,null,(function(){})),s},unmount:function(){oM(e)}}}function aM(e){var n=e.store,r=e.children,i=e.onCreated,a=e.rootElement;return uS((function(){var e=n.getState();e.set((function(e){return{internal:D(D({},e.internal),{},{active:!0})}})),i&&i(e),n.getState().events.connected||null==e.events.connect||e.events.connect(a)}),[]),t.createElement(DS.Provider,{value:n},r)}function oM(e,t){var n=JS.get(e),r=null==n?void 0:n.fiber;if(r){var i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),eM.updateContainer(null,r,null,(function(){i&&setTimeout((function(){try{var n,r,a,o;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(a=i.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(o=i.gl)&&o.xr&&i.xr.disconnect(),function(e){for(var t in e.dispose&&"Scene"!==e.type&&e.dispose(),e)null==t.dispose||t.dispose(),delete e[t]}(i),JS.delete(e),t&&t(e)}catch(s){}}),500)}))}}eM.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:t.version});t.unstable_act;function sM(){return sM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sM.apply(this,arguments)}var lM=n(7494),uM=n.n(lM);function cM(e){var n=void 0===e?{debounce:0,scroll:!1,offsetSize:!1}:e,r=n.debounce,i=n.scroll,a=n.polyfill,o=n.offsetSize,l=a||("undefined"===typeof window?(0,c.Z)((function e(){(0,u.Z)(this,e)})):window.ResizeObserver);if(!l)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");var h=(0,t.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),d=(0,s.Z)(h,2),f=d[0],p=d[1],v=(0,t.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:f}),m=r?"number"===typeof r?r:r.scroll:null,g=r?"number"===typeof r?r:r.resize:null,y=(0,t.useRef)(!1);(0,t.useEffect)((function(){return y.current=!0,function(){y.current=!1}}));var A=(0,t.useMemo)((function(){var e=function(){if(v.current.element){var e=v.current.element.getBoundingClientRect(),t={left:e.left,top:e.top,width:e.width,height:e.height,bottom:e.bottom,right:e.right,x:e.x,y:e.y};v.current.element instanceof HTMLElement&&o&&(t.height=v.current.element.offsetHeight,t.width=v.current.element.offsetWidth),Object.freeze(t),y.current&&!fM(v.current.lastBounds,t)&&p(v.current.lastBounds=t)}};return[e,g?uM()(e,g):e,m?uM()(e,m):e]}),[p,o,m,g]),x=(0,s.Z)(A,3),b=x[0],_=x[1],w=x[2];function E(){v.current.scrollContainers&&(v.current.scrollContainers.forEach((function(e){return e.removeEventListener("scroll",w,!0)})),v.current.scrollContainers=null),v.current.resizeObserver&&(v.current.resizeObserver.disconnect(),v.current.resizeObserver=null)}function S(){v.current.element&&(v.current.resizeObserver=new l(w),v.current.resizeObserver.observe(v.current.element),i&&v.current.scrollContainers&&v.current.scrollContainers.forEach((function(e){return e.addEventListener("scroll",w,{capture:!0,passive:!0})})))}var M,C,k;return M=w,C=Boolean(i),(0,t.useEffect)((function(){if(C){var e=M;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),function(){window.removeEventListener("scroll",e,!0)}}}),[M,C]),k=_,(0,t.useEffect)((function(){var e=k;return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[k]),(0,t.useEffect)((function(){E(),S()}),[i,w,_]),(0,t.useEffect)((function(){return E}),[]),[function(e){e&&e!==v.current.element&&(E(),v.current.element=e,v.current.scrollContainers=hM(e),S())},f,b]}function hM(e){var t=[];if(!e||e===document.body)return t;var n=window.getComputedStyle(e);return[n.overflow,n.overflowX,n.overflowY].some((function(e){return"auto"===e||"scroll"===e}))&&t.push(e),[].concat(t,(0,O.Z)(hM(e.parentElement)))}var dM=["x","y","top","bottom","left","right","width","height"],fM=function(e,t){return dM.every((function(n){return e[n]===t[n]}))},pM=Object.defineProperty,vM=Object.defineProperties,mM=Object.getOwnPropertyDescriptors,gM=Object.getOwnPropertySymbols,yM=Object.prototype.hasOwnProperty,AM=Object.prototype.propertyIsEnumerable,xM=function(e,t,n){return t in e?pM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},bM=function(e,t){for(var n in t||(t={}))yM.call(t,n)&&xM(e,n,t[n]);if(gM){var r,i=(0,Ms.Z)(gM(t));try{for(i.s();!(r=i.n()).done;){n=r.value;AM.call(t,n)&&xM(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e};function _M(e,t,n){if(e){if(!0===n(e))return e;for(var r=t?e.return:e.child;r;){var i=_M(r,t,n);if(i)return i;r=t?null:r.sibling}}}function wM(e){try{return Object.defineProperties(e,{_currentRenderer:{get:function(){return null},set:function(){}},_currentRenderer2:{get:function(){return null},set:function(){}}})}catch(t){return e}}var EM=wM(t.createContext(null)),SM=function(e){(0,Hn.Z)(r,e);var n=(0,Gn.Z)(r);function r(){return(0,u.Z)(this,r),n.apply(this,arguments)}return(0,c.Z)(r,[{key:"render",value:function(){return t.createElement(EM.Provider,{value:this._reactInternals},this.props.children)}}]),r}(t.Component),MM=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,CM=MM.ReactCurrentOwner,kM=MM.ReactCurrentDispatcher;function TM(){var e=t.useContext(EM);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");var n=t.useId(),r=t.useMemo((function(){for(var t=0,r=[null==CM?void 0:CM.current,e,null==e?void 0:e.alternate];t<r.length;t++){var i=r[t];if(i){var a=_M(i,!1,(function(e){for(var t=e.memoizedState;t;){if(t.memoizedState===n)return!0;t=t.next}}));if(a)return a}}}),[e,n]);return r}function IM(){var e=function(){var e,n,r=TM(),i=t.useState((function(){return new Map})),a=(0,s.Z)(i,1)[0];a.clear();for(var o=r;o;){var l=null==(e=o.type)?void 0:e._context;l&&l!==EM&&!a.has(l)&&a.set(l,null==(n=null==kM?void 0:kM.current)?void 0:n.readContext(wM(l))),o=o.return}return a}();return t.useMemo((function(){return Array.from(e.keys()).reduce((function(n,r){return function(i){return t.createElement(n,null,t.createElement(r.Provider,function(e,t){return vM(e,mM(t))}(bM({},i),{value:e.get(r)})))}}),(function(e){return t.createElement(SM,bM({},e))}))}),[e])}var BM=["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","onPointerMissed","onCreated"],RM={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function LM(e){var t=RS(e).handlePointer;return{priority:1,enabled:!0,compute:function(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(RM).reduce((function(e,n){return D(D({},e),{},(0,L.Z)({},n,t(n)))}),{}),update:function(){var t,n=e.getState(),r=n.events,i=n.internal;null!=(t=i.lastEvent)&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:function(t){var n,r=e.getState(),i=r.set,a=r.events;null==a.disconnect||a.disconnect(),i((function(e){return{events:D(D({},e.events),{},{connected:t})}})),Object.entries(null!=(n=a.handlers)?n:[]).forEach((function(e){var n=(0,s.Z)(e,2),r=n[0],i=n[1],a=(0,s.Z)(RM[r],2),o=a[0],l=a[1];t.addEventListener(o,i,{passive:l})}))},disconnect:function(){var t,n=e.getState(),r=n.set,i=n.events;i.connected&&(Object.entries(null!=(t=i.handlers)?t:[]).forEach((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];if(i&&i.connected instanceof HTMLElement){var a=(0,s.Z)(RM[n],1)[0];i.connected.removeEventListener(a,r)}})),r((function(e){return{events:D(D({},e.events),{},{connected:void 0})}})))}}}var PM=t.forwardRef((function(n,r){var i=n.children,a=n.fallback,o=n.resize,l=n.style,u=n.gl,c=n.events,h=void 0===c?LM:c,d=n.eventSource,f=n.eventPrefix,p=n.shadows,v=n.linear,m=n.flat,g=n.legacy,y=n.orthographic,A=n.frameloop,x=n.dpr,b=n.performance,_=n.raycaster,w=n.camera,E=n.onPointerMissed,S=n.onCreated,M=We(n,BM);t.useMemo((function(){return aS(e)}),[]);var C=IM(),k=cM(D({scroll:!0,debounce:{scroll:50,resize:0}},o)),T=(0,s.Z)(k,2),I=T[0],B=T[1],R=t.useRef(null),L=t.useRef(null);t.useImperativeHandle(r,(function(){return R.current}));var P=cS(E),O=t.useState(!1),F=(0,s.Z)(O,2),N=F[0],U=F[1],Z=t.useState(!1),z=(0,s.Z)(Z,2),H=z[0],G=z[1];if(N)throw N;if(H)throw H;var Q=t.useRef(null);uS((function(){var e=R.current;B.width>0&&B.height>0&&e&&(Q.current||(Q.current=iM(e)),Q.current.configure({gl:u,events:h,shadows:p,linear:v,flat:m,legacy:g,orthographic:y,frameloop:A,dpr:x,performance:b,raycaster:_,camera:w,size:B,onPointerMissed:function(){return null==P.current?void 0:P.current.apply(P,arguments)},onCreated:function(e){var t;null==e.events.connect||e.events.connect(d?(t=d)&&t.hasOwnProperty("current")?d.current:d:L.current),f&&e.setEvents({compute:function(e,t){var n=e[f+"X"],r=e[f+"Y"];t.pointer.set(n/t.size.width*2-1,-r/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==S||S(e)}}),Q.current.render(t.createElement(C,null,t.createElement(dS,{set:G},t.createElement(t.Suspense,{fallback:t.createElement(hS,{set:U})},i)))))})),t.useEffect((function(){var e=R.current;if(e)return function(){return oM(e)}}),[]);var V=d?"none":"auto";return t.createElement("div",sM({ref:L,style:D({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:V},l)},M),t.createElement("div",{ref:I,style:{width:"100%",height:"100%"}},t.createElement("canvas",{ref:R,style:{display:"block"}},a)))})),DM=t.forwardRef((function(e,n){return t.createElement(SM,null,t.createElement(PM,sM({},e,{ref:n})))})),OM=1,FM=2,NM=4,UM=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),ZM=0,zM=1,HM=-1;function GM(e){return e.isPerspectiveCamera}function QM(e){return e.isOrthographicCamera}var VM=2*Math.PI,jM=Math.PI/2,WM=1e-5,qM=Math.PI/180;function JM(e,t,n){return Math.max(t,Math.min(n,e))}function XM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WM;return Math.abs(e)<t}function YM(e,t){return XM(e-t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:WM)}function KM(e,t){return Math.round(e/t)*t}function $M(e){return isFinite(e)?e:e<0?-Number.MAX_VALUE:Number.MAX_VALUE}function eC(e){return Math.abs(e)<Number.MAX_VALUE?e:e*(1/0)}function tC(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,a=arguments.length>5?arguments[5]:void 0,o=2/(r=Math.max(1e-4,r)),s=o*a,l=1/(1+s+.48*s*s+.235*s*s*s),u=e-t,c=t,h=i*r;t=e-(u=JM(u,-h,h));var d=(n.value+o*u)*a;n.value=(n.value-o*d)*l;var f=t+(u+d)*l;return c-e>0===f>c&&(f=c,n.value=(f-c)/a),f}function nC(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,a=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=2/(r=Math.max(1e-4,r)),l=s*a,u=1/(1+l+.48*l*l+.235*l*l*l),c=t.x,h=t.y,d=t.z,f=e.x-c,p=e.y-h,v=e.z-d,m=c,g=h,y=d,A=i*r,x=f*f+p*p+v*v;if(x>A*A){var b=Math.sqrt(x);f=f/b*A,p=p/b*A,v=v/b*A}c=e.x-f,h=e.y-p,d=e.z-v;var _=(n.x+s*f)*a,w=(n.y+s*p)*a,E=(n.z+s*v)*a;n.x=(n.x-s*_)*u,n.y=(n.y-s*w)*u,n.z=(n.z-s*E)*u,o.x=c+(f+_)*u,o.y=h+(p+w)*u,o.z=d+(v+E)*u;var S=m-e.x,M=g-e.y,C=y-e.z;return S*(o.x-m)+M*(o.y-g)+C*(o.z-y)>0&&(o.x=m,o.y=g,o.z=y,n.x=(o.x-m)/a,n.y=(o.y-g)/a,n.z=(o.z-y)/a),o}function rC(e,t){t.set(0,0),e.forEach((function(e){t.x+=e.clientX,t.y+=e.clientY})),t.x/=e.length,t.y/=e.length}function iC(e,t){return!!QM(e)&&(console.warn("".concat(t," is not supported in OrthographicCamera")),!0)}var aC,oC,sC,lC,uC,cC,hC,dC,fC,pC,vC,mC,gC,yC,AC,xC,bC,_C,wC,EC,SC,MC,CC,kC=function(){function e(){(0,u.Z)(this,e),this._listeners={}}return(0,c.Z)(e,[{key:"addEventListener",value:function(e,t){var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},{key:"removeAllEventListeners",value:function(e){e?Array.isArray(this._listeners[e])&&(this._listeners[e].length=0):this._listeners={}}},{key:"dispatchEvent",value:function(e){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}]),e}(),TC=1/8,IC="undefined"!==typeof window,BC=IC&&/Mac/.test(navigator.platform),RC=!(IC&&"PointerEvent"in window),LC=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){var i;(0,u.Z)(this,n),(i=t.call(this)).minPolarAngle=0,i.maxPolarAngle=Math.PI,i.minAzimuthAngle=-1/0,i.maxAzimuthAngle=1/0,i.minDistance=Number.EPSILON,i.maxDistance=1/0,i.infinityDolly=!1,i.minZoom=.01,i.maxZoom=1/0,i.smoothTime=.25,i.draggingSmoothTime=.125,i.maxSpeed=1/0,i.azimuthRotateSpeed=1,i.polarRotateSpeed=1,i.dollySpeed=1,i.dollyDragInverted=!1,i.truckSpeed=2,i.dollyToCursor=!1,i.dragToOffset=!1,i.verticalDragToForward=!1,i.boundaryFriction=0,i.restThreshold=.01,i.colliderMeshes=[],i.cancel=function(){},i._enabled=!0,i._state=UM.NONE,i._viewport=null,i._changedDolly=0,i._changedZoom=0,i._hasRested=!0,i._boundaryEnclosesCamera=!1,i._needsUpdate=!0,i._updatedLastTime=!1,i._elementRect=new DOMRect,i._isDragging=!1,i._activePointers=[],i._lockedPointer=null,i._interactiveArea=new DOMRect(0,0,1,1),i._isUserControllingRotate=!1,i._isUserControllingDolly=!1,i._isUserControllingTruck=!1,i._isUserControllingOffset=!1,i._isUserControllingZoom=!1,i._lastDollyDirection=ZM,i._thetaVelocity={value:0},i._phiVelocity={value:0},i._radiusVelocity={value:0},i._targetVelocity=new aC.Vector3,i._focalOffsetVelocity=new aC.Vector3,i._zoomVelocity={value:0},i._truckInternal=function(e,t,n){var r,a;if(GM(i._camera)){var o=cC.copy(i._camera.position).sub(i._target),s=i._camera.getEffectiveFOV()*qM,l=o.length()*Math.tan(.5*s);r=i.truckSpeed*e*l/i._elementRect.height,a=i.truckSpeed*t*l/i._elementRect.height}else{if(!QM(i._camera))return;var u=i._camera;r=e*(u.right-u.left)/u.zoom/i._elementRect.width,a=t*(u.top-u.bottom)/u.zoom/i._elementRect.height}i.verticalDragToForward?(n?i.setFocalOffset(i._focalOffsetEnd.x+r,i._focalOffsetEnd.y,i._focalOffsetEnd.z,!0):i.truck(r,0,!0),i.forward(-a,!0)):n?i.setFocalOffset(i._focalOffsetEnd.x+r,i._focalOffsetEnd.y+a,i._focalOffsetEnd.z,!0):i.truck(r,a,!0)},i._rotateInternal=function(e,t){var n=VM*i.azimuthRotateSpeed*e/i._elementRect.height,r=VM*i.polarRotateSpeed*t/i._elementRect.height;i.rotate(n,r,!0)},i._dollyInternal=function(e,t,n){var r=Math.pow(.95,-e*i.dollySpeed),a=i._sphericalEnd.radius,o=i._sphericalEnd.radius*r,s=aC.MathUtils.clamp(o,i.minDistance,i.maxDistance),l=s-o;i.infinityDolly&&i.dollyToCursor?i._dollyToNoClamp(o,!0):i.infinityDolly&&!i.dollyToCursor?(i.dollyInFixed(l,!0),i._dollyToNoClamp(s,!0)):i._dollyToNoClamp(s,!0),i.dollyToCursor&&(i._changedDolly+=(i.infinityDolly?o:s)-a,i._dollyControlCoord.set(t,n)),i._lastDollyDirection=Math.sign(-e)},i._zoomInternal=function(e,t,n){var r=Math.pow(.95,e*i.dollySpeed),a=i._zoom,o=i._zoom*r;i.zoomTo(o,!0),i.dollyToCursor&&(i._changedZoom+=o-a,i._dollyControlCoord.set(t,n))},"undefined"===typeof aC&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),i._camera=e,i._yAxisUpSpace=(new aC.Quaternion).setFromUnitVectors(i._camera.up,sC),i._yAxisUpSpaceInverse=i._yAxisUpSpace.clone().invert(),i._state=UM.NONE,i._target=new aC.Vector3,i._targetEnd=i._target.clone(),i._focalOffset=new aC.Vector3,i._focalOffsetEnd=i._focalOffset.clone(),i._spherical=(new aC.Spherical).setFromVector3(cC.copy(i._camera.position).applyQuaternion(i._yAxisUpSpace)),i._sphericalEnd=i._spherical.clone(),i._lastDistance=i._spherical.radius,i._zoom=i._camera.zoom,i._zoomEnd=i._zoom,i._lastZoom=i._zoom,i._nearPlaneCorners=[new aC.Vector3,new aC.Vector3,new aC.Vector3,new aC.Vector3],i._updateNearPlaneCorners(),i._boundary=new aC.Box3(new aC.Vector3(-1/0,-1/0,-1/0),new aC.Vector3(1/0,1/0,1/0)),i._cameraUp0=i._camera.up.clone(),i._target0=i._target.clone(),i._position0=i._camera.position.clone(),i._zoom0=i._zoom,i._focalOffset0=i._focalOffset.clone(),i._dollyControlCoord=new aC.Vector2,i.mouseButtons={left:UM.ROTATE,middle:UM.DOLLY,right:UM.TRUCK,wheel:GM(i._camera)?UM.DOLLY:QM(i._camera)?UM.ZOOM:UM.NONE},i.touches={one:UM.TOUCH_ROTATE,two:GM(i._camera)?UM.TOUCH_DOLLY_TRUCK:QM(i._camera)?UM.TOUCH_ZOOM_TRUCK:UM.NONE,three:UM.TOUCH_TRUCK};var a=new aC.Vector2,o=new aC.Vector2,s=new aC.Vector2,l=function(e){if(i._enabled&&i._domElement){if(0!==i._interactiveArea.left||0!==i._interactiveArea.top||1!==i._interactiveArea.width||1!==i._interactiveArea.height){var t=i._domElement.getBoundingClientRect(),n=e.clientX/t.width,r=e.clientY/t.height;if(n<i._interactiveArea.left||n>i._interactiveArea.right||r<i._interactiveArea.top||r>i._interactiveArea.bottom)return}var a="mouse"!==e.pointerType?null:(e.buttons&OM)===OM?OM:(e.buttons&NM)===NM?NM:(e.buttons&FM)===FM?FM:null;if(null!==a){var o=i._findPointerByMouseButton(a);o&&i._disposePointer(o)}if((e.buttons&OM)!==OM||!i._lockedPointer){var s={pointerId:e.pointerId,clientX:e.clientX,clientY:e.clientY,deltaX:0,deltaY:0,mouseButton:a};i._activePointers.push(s),i._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),i._domElement.ownerDocument.removeEventListener("pointerup",f),i._domElement.ownerDocument.addEventListener("pointermove",h,{passive:!1}),i._domElement.ownerDocument.addEventListener("pointerup",f),i._isDragging=!0,y(e)}}},c=function(e){if(i._enabled&&i._domElement&&!i._lockedPointer){if(0!==i._interactiveArea.left||0!==i._interactiveArea.top||1!==i._interactiveArea.width||1!==i._interactiveArea.height){var t=i._domElement.getBoundingClientRect(),n=e.clientX/t.width,r=e.clientY/t.height;if(n<i._interactiveArea.left||n>i._interactiveArea.right||r<i._interactiveArea.top||r>i._interactiveArea.bottom)return}var a=(e.buttons&OM)===OM?OM:(e.buttons&NM)===NM?NM:(e.buttons&FM)===FM?FM:null;if(null!==a){var o=i._findPointerByMouseButton(a);o&&i._disposePointer(o)}var s={pointerId:1,clientX:e.clientX,clientY:e.clientY,deltaX:0,deltaY:0,mouseButton:(e.buttons&OM)===OM?OM:(e.buttons&NM)===OM?NM:(e.buttons&FM)===OM?FM:null};i._activePointers.push(s),i._domElement.ownerDocument.removeEventListener("mousemove",d),i._domElement.ownerDocument.removeEventListener("mouseup",p),i._domElement.ownerDocument.addEventListener("mousemove",d),i._domElement.ownerDocument.addEventListener("mouseup",p),i._isDragging=!0,y(e)}},h=function(e){e.cancelable&&e.preventDefault();var t=e.pointerId,n=i._lockedPointer||i._findPointerById(t);if(n){if(n.clientX=e.clientX,n.clientY=e.clientY,n.deltaX=e.movementX,n.deltaY=e.movementY,i._state=0,"touch"===e.pointerType)switch(i._activePointers.length){case 1:i._state=i.touches.one;break;case 2:i._state=i.touches.two;break;case 3:i._state=i.touches.three}else(!i._isDragging&&i._lockedPointer||i._isDragging&&(e.buttons&OM)===OM)&&(i._state=i._state|i.mouseButtons.left),i._isDragging&&(e.buttons&NM)===NM&&(i._state=i._state|i.mouseButtons.middle),i._isDragging&&(e.buttons&FM)===FM&&(i._state=i._state|i.mouseButtons.right);A()}},d=function(e){var t=i._lockedPointer||i._findPointerById(1);t&&(t.clientX=e.clientX,t.clientY=e.clientY,t.deltaX=e.movementX,t.deltaY=e.movementY,i._state=0,(i._lockedPointer||(e.buttons&OM)===OM)&&(i._state=i._state|i.mouseButtons.left),(e.buttons&NM)===NM&&(i._state=i._state|i.mouseButtons.middle),(e.buttons&FM)===FM&&(i._state=i._state|i.mouseButtons.right),A())},f=function(e){var t=i._findPointerById(e.pointerId);if(!t||t!==i._lockedPointer){if(t&&i._disposePointer(t),"touch"===e.pointerType)switch(i._activePointers.length){case 0:i._state=UM.NONE;break;case 1:i._state=i.touches.one;break;case 2:i._state=i.touches.two;break;case 3:i._state=i.touches.three}else i._state=UM.NONE;x()}},p=function(){var e=i._findPointerById(1);e&&e===i._lockedPointer||(e&&i._disposePointer(e),i._state=UM.NONE,x())},v=-1,m=function(e){if(i._domElement&&i._enabled&&i.mouseButtons.wheel!==UM.NONE){if(0!==i._interactiveArea.left||0!==i._interactiveArea.top||1!==i._interactiveArea.width||1!==i._interactiveArea.height){var t=i._domElement.getBoundingClientRect(),n=e.clientX/t.width,r=e.clientY/t.height;if(n<i._interactiveArea.left||n>i._interactiveArea.right||r<i._interactiveArea.top||r>i._interactiveArea.bottom)return}if(e.preventDefault(),i.dollyToCursor||i.mouseButtons.wheel===UM.ROTATE||i.mouseButtons.wheel===UM.TRUCK){var a=performance.now();v-a<1e3&&i._getClientRect(i._elementRect),v=a}var o=BC?-1:-3,s=1===e.deltaMode?e.deltaY/o:e.deltaY/(10*o),l=i.dollyToCursor?(e.clientX-i._elementRect.x)/i._elementRect.width*2-1:0,u=i.dollyToCursor?(e.clientY-i._elementRect.y)/i._elementRect.height*-2+1:0;switch(i.mouseButtons.wheel){case UM.ROTATE:i._rotateInternal(e.deltaX,e.deltaY),i._isUserControllingRotate=!0;break;case UM.TRUCK:i._truckInternal(e.deltaX,e.deltaY,!1),i._isUserControllingTruck=!0;break;case UM.OFFSET:i._truckInternal(e.deltaX,e.deltaY,!0),i._isUserControllingOffset=!0;break;case UM.DOLLY:i._dollyInternal(-s,l,u),i._isUserControllingDolly=!0;break;case UM.ZOOM:i._zoomInternal(-s,l,u),i._isUserControllingZoom=!0}i.dispatchEvent({type:"control"})}},g=function(e){if(i._domElement&&i._enabled){if(i.mouseButtons.right===n.ACTION.NONE){var t=e instanceof PointerEvent?e.pointerId:(MouseEvent,0),r=i._findPointerById(t);return r&&i._disposePointer(r),i._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),i._domElement.ownerDocument.removeEventListener("pointerup",f),i._domElement.ownerDocument.removeEventListener("mousemove",d),void i._domElement.ownerDocument.removeEventListener("mouseup",p)}e.preventDefault()}},y=function(e){if(i._enabled){if(rC(i._activePointers,uC),i._getClientRect(i._elementRect),a.copy(uC),o.copy(uC),i._activePointers.length>=2){var t=uC.x-i._activePointers[1].clientX,n=uC.y-i._activePointers[1].clientY,r=Math.sqrt(t*t+n*n);s.set(0,r);var l=.5*(i._activePointers[0].clientX+i._activePointers[1].clientX),u=.5*(i._activePointers[0].clientY+i._activePointers[1].clientY);o.set(l,u)}if(i._state=0,e)if("pointerType"in e&&"touch"===e.pointerType)switch(i._activePointers.length){case 1:i._state=i.touches.one;break;case 2:i._state=i.touches.two;break;case 3:i._state=i.touches.three}else i._lockedPointer||(e.buttons&OM)!==OM||(i._state=i._state|i.mouseButtons.left),(e.buttons&NM)===NM&&(i._state=i._state|i.mouseButtons.middle),(e.buttons&FM)===FM&&(i._state=i._state|i.mouseButtons.right);else i._lockedPointer&&(i._state=i._state|i.mouseButtons.left);(i._state&UM.ROTATE)!==UM.ROTATE&&(i._state&UM.TOUCH_ROTATE)!==UM.TOUCH_ROTATE&&(i._state&UM.TOUCH_DOLLY_ROTATE)!==UM.TOUCH_DOLLY_ROTATE&&(i._state&UM.TOUCH_ZOOM_ROTATE)!==UM.TOUCH_ZOOM_ROTATE||(i._sphericalEnd.theta=i._spherical.theta,i._sphericalEnd.phi=i._spherical.phi,i._thetaVelocity.value=0,i._phiVelocity.value=0),(i._state&UM.TRUCK)!==UM.TRUCK&&(i._state&UM.TOUCH_TRUCK)!==UM.TOUCH_TRUCK&&(i._state&UM.TOUCH_DOLLY_TRUCK)!==UM.TOUCH_DOLLY_TRUCK&&(i._state&UM.TOUCH_ZOOM_TRUCK)!==UM.TOUCH_ZOOM_TRUCK||(i._targetEnd.copy(i._target),i._targetVelocity.set(0,0,0)),(i._state&UM.DOLLY)!==UM.DOLLY&&(i._state&UM.TOUCH_DOLLY)!==UM.TOUCH_DOLLY&&(i._state&UM.TOUCH_DOLLY_TRUCK)!==UM.TOUCH_DOLLY_TRUCK&&(i._state&UM.TOUCH_DOLLY_OFFSET)!==UM.TOUCH_DOLLY_OFFSET&&(i._state&UM.TOUCH_DOLLY_ROTATE)!==UM.TOUCH_DOLLY_ROTATE||(i._sphericalEnd.radius=i._spherical.radius,i._radiusVelocity.value=0),(i._state&UM.ZOOM)!==UM.ZOOM&&(i._state&UM.TOUCH_ZOOM)!==UM.TOUCH_ZOOM&&(i._state&UM.TOUCH_ZOOM_TRUCK)!==UM.TOUCH_ZOOM_TRUCK&&(i._state&UM.TOUCH_ZOOM_OFFSET)!==UM.TOUCH_ZOOM_OFFSET&&(i._state&UM.TOUCH_ZOOM_ROTATE)!==UM.TOUCH_ZOOM_ROTATE||(i._zoomEnd=i._zoom,i._zoomVelocity.value=0),(i._state&UM.OFFSET)!==UM.OFFSET&&(i._state&UM.TOUCH_OFFSET)!==UM.TOUCH_OFFSET&&(i._state&UM.TOUCH_DOLLY_OFFSET)!==UM.TOUCH_DOLLY_OFFSET&&(i._state&UM.TOUCH_ZOOM_OFFSET)!==UM.TOUCH_ZOOM_OFFSET||(i._focalOffsetEnd.copy(i._focalOffset),i._focalOffsetVelocity.set(0,0,0)),i.dispatchEvent({type:"controlstart"})}},A=function(){if(i._enabled){rC(i._activePointers,uC);var e=i._domElement&&document.pointerLockElement===i._domElement?i._lockedPointer||i._activePointers[0]:null,t=e?-e.deltaX:o.x-uC.x,n=e?-e.deltaY:o.y-uC.y;if(o.copy(uC),(i._state&UM.ROTATE)!==UM.ROTATE&&(i._state&UM.TOUCH_ROTATE)!==UM.TOUCH_ROTATE&&(i._state&UM.TOUCH_DOLLY_ROTATE)!==UM.TOUCH_DOLLY_ROTATE&&(i._state&UM.TOUCH_ZOOM_ROTATE)!==UM.TOUCH_ZOOM_ROTATE||(i._rotateInternal(t,n),i._isUserControllingRotate=!0),(i._state&UM.DOLLY)===UM.DOLLY||(i._state&UM.ZOOM)===UM.ZOOM){var r=i.dollyToCursor?(a.x-i._elementRect.x)/i._elementRect.width*2-1:0,l=i.dollyToCursor?(a.y-i._elementRect.y)/i._elementRect.height*-2+1:0,u=i.dollyDragInverted?-1:1;(i._state&UM.DOLLY)===UM.DOLLY?(i._dollyInternal(u*n*TC,r,l),i._isUserControllingDolly=!0):(i._zoomInternal(u*n*TC,r,l),i._isUserControllingZoom=!0)}if((i._state&UM.TOUCH_DOLLY)===UM.TOUCH_DOLLY||(i._state&UM.TOUCH_ZOOM)===UM.TOUCH_ZOOM||(i._state&UM.TOUCH_DOLLY_TRUCK)===UM.TOUCH_DOLLY_TRUCK||(i._state&UM.TOUCH_ZOOM_TRUCK)===UM.TOUCH_ZOOM_TRUCK||(i._state&UM.TOUCH_DOLLY_OFFSET)===UM.TOUCH_DOLLY_OFFSET||(i._state&UM.TOUCH_ZOOM_OFFSET)===UM.TOUCH_ZOOM_OFFSET||(i._state&UM.TOUCH_DOLLY_ROTATE)===UM.TOUCH_DOLLY_ROTATE||(i._state&UM.TOUCH_ZOOM_ROTATE)===UM.TOUCH_ZOOM_ROTATE){var c=uC.x-i._activePointers[1].clientX,h=uC.y-i._activePointers[1].clientY,d=Math.sqrt(c*c+h*h),f=s.y-d;s.set(0,d);var p=i.dollyToCursor?(o.x-i._elementRect.x)/i._elementRect.width*2-1:0,v=i.dollyToCursor?(o.y-i._elementRect.y)/i._elementRect.height*-2+1:0;(i._state&UM.TOUCH_DOLLY)===UM.TOUCH_DOLLY||(i._state&UM.TOUCH_DOLLY_ROTATE)===UM.TOUCH_DOLLY_ROTATE||(i._state&UM.TOUCH_DOLLY_TRUCK)===UM.TOUCH_DOLLY_TRUCK||(i._state&UM.TOUCH_DOLLY_OFFSET)===UM.TOUCH_DOLLY_OFFSET?(i._dollyInternal(f*TC,p,v),i._isUserControllingDolly=!0):(i._zoomInternal(f*TC,p,v),i._isUserControllingZoom=!0)}(i._state&UM.TRUCK)!==UM.TRUCK&&(i._state&UM.TOUCH_TRUCK)!==UM.TOUCH_TRUCK&&(i._state&UM.TOUCH_DOLLY_TRUCK)!==UM.TOUCH_DOLLY_TRUCK&&(i._state&UM.TOUCH_ZOOM_TRUCK)!==UM.TOUCH_ZOOM_TRUCK||(i._truckInternal(t,n,!1),i._isUserControllingTruck=!0),(i._state&UM.OFFSET)!==UM.OFFSET&&(i._state&UM.TOUCH_OFFSET)!==UM.TOUCH_OFFSET&&(i._state&UM.TOUCH_DOLLY_OFFSET)!==UM.TOUCH_DOLLY_OFFSET&&(i._state&UM.TOUCH_ZOOM_OFFSET)!==UM.TOUCH_ZOOM_OFFSET||(i._truckInternal(t,n,!0),i._isUserControllingOffset=!0),i.dispatchEvent({type:"control"})}},x=function(){rC(i._activePointers,uC),o.copy(uC),(0===i._activePointers.length||1===i._activePointers.length&&i._activePointers[0]===i._lockedPointer)&&(i._isDragging=!1),0===i._activePointers.length&&i._domElement&&(i._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),i._domElement.ownerDocument.removeEventListener("mousemove",d),i._domElement.ownerDocument.removeEventListener("pointerup",f),i._domElement.ownerDocument.removeEventListener("mouseup",p),i.dispatchEvent({type:"controlend"}))};i.lockPointer=function(){i._enabled&&i._domElement&&(i.cancel(),i._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},i._activePointers.push(i._lockedPointer),i._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),i._domElement.ownerDocument.removeEventListener("pointerup",f),i._domElement.requestPointerLock(),i._domElement.ownerDocument.addEventListener("pointerlockchange",b),i._domElement.ownerDocument.addEventListener("pointerlockerror",_),i._domElement.ownerDocument.addEventListener("pointermove",h,{passive:!1}),i._domElement.ownerDocument.addEventListener("pointerup",f),y())},i.unlockPointer=function(){null!==i._lockedPointer&&(i._disposePointer(i._lockedPointer),i._lockedPointer=null),document.exitPointerLock(),i.cancel(),i._domElement&&(i._domElement.ownerDocument.removeEventListener("pointerlockchange",b),i._domElement.ownerDocument.removeEventListener("pointerlockerror",_))};var b=function(){i._domElement&&i._domElement.ownerDocument.pointerLockElement===i._domElement||i.unlockPointer()},_=function(){i.unlockPointer()};return i._addAllEventListeners=function(e){i._domElement=e,i._domElement.style.touchAction="none",i._domElement.style.userSelect="none",i._domElement.style.webkitUserSelect="none",i._domElement.addEventListener("pointerdown",l),RC&&i._domElement.addEventListener("mousedown",c),i._domElement.addEventListener("pointercancel",f),i._domElement.addEventListener("wheel",m,{passive:!1}),i._domElement.addEventListener("contextmenu",g)},i._removeAllEventListeners=function(){i._domElement&&(i._domElement.style.touchAction="",i._domElement.style.userSelect="",i._domElement.style.webkitUserSelect="",i._domElement.removeEventListener("pointerdown",l),i._domElement.removeEventListener("mousedown",c),i._domElement.removeEventListener("pointercancel",f),i._domElement.removeEventListener("wheel",m,{passive:!1}),i._domElement.removeEventListener("contextmenu",g),i._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),i._domElement.ownerDocument.removeEventListener("mousemove",d),i._domElement.ownerDocument.removeEventListener("pointerup",f),i._domElement.ownerDocument.removeEventListener("mouseup",p),i._domElement.ownerDocument.removeEventListener("pointerlockchange",b),i._domElement.ownerDocument.removeEventListener("pointerlockerror",_))},i.cancel=function(){i._state!==UM.NONE&&(i._state=UM.NONE,i._activePointers.length=0,x())},r&&i.connect(r),i.update(0),i}return(0,c.Z)(n,[{key:"camera",get:function(){return this._camera},set:function(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}},{key:"active",get:function(){return!this._hasRested}},{key:"currentAction",get:function(){return this._state}},{key:"distance",get:function(){return this._spherical.radius},set:function(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}},{key:"azimuthAngle",get:function(){return this._spherical.theta},set:function(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}},{key:"polarAngle",get:function(){return this._spherical.phi},set:function(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}},{key:"boundaryEnclosesCamera",get:function(){return this._boundaryEnclosesCamera},set:function(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}},{key:"interactiveArea",set:function(e){this._interactiveArea.width=JM(e.width,0,1),this._interactiveArea.height=JM(e.height,0,1),this._interactiveArea.x=JM(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=JM(e.x,0,1-this._interactiveArea.height)}},{key:"addEventListener",value:function(e,t){(0,Zn.Z)((0,zn.Z)(n.prototype),"addEventListener",this).call(this,e,t)}},{key:"removeEventListener",value:function(e,t){(0,Zn.Z)((0,zn.Z)(n.prototype),"removeEventListener",this).call(this,e,t)}},{key:"rotate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,n)}},{key:"rotateAzimuthTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.rotateTo(e,this._sphericalEnd.phi,t)}},{key:"rotatePolarTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.rotateTo(this._sphericalEnd.theta,e,t)}},{key:"rotateTo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._isUserControllingRotate=!1;var r=JM(e,this.minAzimuthAngle,this.maxAzimuthAngle),i=JM(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=i,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);var a=!n||YM(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&YM(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(a)}},{key:"dolly",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.dollyTo(this._sphericalEnd.radius-e,t)}},{key:"dollyTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._isUserControllingDolly=!1,this._lastDollyDirection=ZM,this._changedDolly=0,this._dollyToNoClamp(JM(e,this.minDistance,this.maxDistance),t)}},{key:"_dollyToNoClamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){var r=this._collisionTest(),i=YM(r,this._spherical.radius);if(!(n>e)&&i)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,r)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);var a=!t||YM(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(a)}},{key:"dollyInFixed",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._targetEnd.add(this._getCameraDirection(fC).multiplyScalar(e)),t||this._target.copy(this._targetEnd);var n=!t||YM(this._target.x,this._targetEnd.x,this.restThreshold)&&YM(this._target.y,this._targetEnd.y,this.restThreshold)&&YM(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(n)}},{key:"zoom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.zoomTo(this._zoomEnd+e,t)}},{key:"zoomTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._isUserControllingZoom=!1,this._zoomEnd=JM(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);var n=!t||YM(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(n)}},{key:"pan",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,n)}},{key:"truck",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._camera.updateMatrix(),pC.setFromMatrixColumn(this._camera.matrix,0),vC.setFromMatrixColumn(this._camera.matrix,1),pC.multiplyScalar(e),vC.multiplyScalar(-t);var r=cC.copy(pC).add(vC),i=hC.copy(this._targetEnd).add(r);return this.moveTo(i.x,i.y,i.z,n)}},{key:"forward",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];cC.setFromMatrixColumn(this._camera.matrix,0),cC.crossVectors(this._camera.up,cC),cC.multiplyScalar(e);var n=hC.copy(this._targetEnd).add(cC);return this.moveTo(n.x,n.y,n.z,t)}},{key:"elevate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return cC.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+cC.x,this._targetEnd.y+cC.y,this._targetEnd.z+cC.z,t)}},{key:"moveTo",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._isUserControllingTruck=!1;var i=cC.set(e,t,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,i,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);var a=!r||YM(this._target.x,this._targetEnd.x,this.restThreshold)&&YM(this._target.y,this._targetEnd.y,this.restThreshold)&&YM(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(a)}},{key:"lookInDirectionOf",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=cC.set(e,t,n).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(i.x,i.y,i.z,r)}},{key:"fitToBox",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.cover,i=void 0!==r&&r,a=n.paddingLeft,o=void 0===a?0:a,s=n.paddingRight,l=void 0===s?0:s,u=n.paddingBottom,c=void 0===u?0:u,h=n.paddingTop,d=void 0===h?0:h,f=[],p=e.isBox3?bC.copy(e):bC.setFromObject(e);p.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());var v=KM(this._sphericalEnd.theta,jM),m=KM(this._sphericalEnd.phi,jM);f.push(this.rotateTo(v,m,t));var g=cC.setFromSpherical(this._sphericalEnd).normalize(),y=EC.setFromUnitVectors(g,lC),A=YM(Math.abs(g.y),1);A&&y.multiply(SC.setFromAxisAngle(sC,v)),y.multiply(this._yAxisUpSpaceInverse);var x=_C.makeEmpty();hC.copy(p.min).applyQuaternion(y),x.expandByPoint(hC),hC.copy(p.min).setX(p.max.x).applyQuaternion(y),x.expandByPoint(hC),hC.copy(p.min).setY(p.max.y).applyQuaternion(y),x.expandByPoint(hC),hC.copy(p.max).setZ(p.min.z).applyQuaternion(y),x.expandByPoint(hC),hC.copy(p.min).setZ(p.max.z).applyQuaternion(y),x.expandByPoint(hC),hC.copy(p.max).setY(p.min.y).applyQuaternion(y),x.expandByPoint(hC),hC.copy(p.max).setX(p.min.x).applyQuaternion(y),x.expandByPoint(hC),hC.copy(p.max).applyQuaternion(y),x.expandByPoint(hC),x.min.x-=o,x.min.y-=c,x.max.x+=l,x.max.y+=d,y.setFromUnitVectors(lC,g),A&&y.premultiply(SC.invert()),y.premultiply(this._yAxisUpSpace);var b=x.getSize(cC),_=x.getCenter(hC).applyQuaternion(y);if(GM(this._camera)){var w=this.getDistanceToFitBox(b.x,b.y,b.z,i);f.push(this.moveTo(_.x,_.y,_.z,t)),f.push(this.dollyTo(w,t)),f.push(this.setFocalOffset(0,0,0,t))}else if(QM(this._camera)){var E=this._camera,S=E.right-E.left,M=E.top-E.bottom,C=i?Math.max(S/b.x,M/b.y):Math.min(S/b.x,M/b.y);f.push(this.moveTo(_.x,_.y,_.z,t)),f.push(this.zoomTo(C,t)),f.push(this.setFocalOffset(0,0,0,t))}return Promise.all(f)}},{key:"fitToSphere",value:function(e,t){var r=[],i=e instanceof aC.Sphere?wC.copy(e):n.createBoundingSphere(e,wC);if(r.push(this.moveTo(i.center.x,i.center.y,i.center.z,t)),GM(this._camera)){var a=this.getDistanceToFitSphere(i.radius);r.push(this.dollyTo(a,t))}else if(QM(this._camera)){var o=this._camera.right-this._camera.left,s=this._camera.top-this._camera.bottom,l=2*i.radius,u=Math.min(o/l,s/l);r.push(this.zoomTo(u,t))}return r.push(this.setFocalOffset(0,0,0,t)),Promise.all(r)}},{key:"setLookAt",value:function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=ZM,this._changedDolly=0;var s=hC.set(r,i,a),l=cC.set(e,t,n);this._targetEnd.copy(s),this._sphericalEnd.setFromVector3(l.sub(s).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,o||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));var u=!o||YM(this._target.x,this._targetEnd.x,this.restThreshold)&&YM(this._target.y,this._targetEnd.y,this.restThreshold)&&YM(this._target.z,this._targetEnd.z,this.restThreshold)&&YM(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&YM(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&YM(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(u)}},{key:"lerpLookAt",value:function(e,t,n,r,i,a,o,s,l,u,c,h,d){var f=arguments.length>13&&void 0!==arguments[13]&&arguments[13];this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=ZM,this._changedDolly=0;var p=cC.set(r,i,a),v=hC.set(e,t,n);AC.setFromVector3(v.sub(p).applyQuaternion(this._yAxisUpSpace));var m=dC.set(u,c,h),g=hC.set(o,s,l);xC.setFromVector3(g.sub(m).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(p.lerp(m,d));var y=xC.theta-AC.theta,A=xC.phi-AC.phi,x=xC.radius-AC.radius;this._sphericalEnd.set(AC.radius+x*d,AC.phi+A*d,AC.theta+y*d),this.normalizeRotations(),this._needsUpdate=!0,f||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));var b=!f||YM(this._target.x,this._targetEnd.x,this.restThreshold)&&YM(this._target.y,this._targetEnd.y,this.restThreshold)&&YM(this._target.z,this._targetEnd.z,this.restThreshold)&&YM(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&YM(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&YM(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(b)}},{key:"setPosition",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.setLookAt(e,t,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}},{key:"setTarget",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.getPosition(cC),a=this.setLookAt(i.x,i.y,i.z,e,t,n,r);return this._sphericalEnd.phi=JM(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),a}},{key:"setFocalOffset",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,n),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);var i=!r||YM(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&YM(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&YM(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}},{key:"setOrbitPoint",value:function(e,t,n){this._camera.updateMatrixWorld(),pC.setFromMatrixColumn(this._camera.matrixWorldInverse,0),vC.setFromMatrixColumn(this._camera.matrixWorldInverse,1),mC.setFromMatrixColumn(this._camera.matrixWorldInverse,2);var r=cC.set(e,t,n),i=r.distanceTo(this._camera.position),a=r.sub(this._camera.position);pC.multiplyScalar(a.x),vC.multiplyScalar(a.y),mC.multiplyScalar(a.z),cC.copy(pC).add(vC).add(mC),cC.z=cC.z+i,this.dollyTo(i,!1),this.setFocalOffset(-cC.x,cC.y,-cC.z,!1),this.moveTo(e,t,n,!1)}},{key:"setBoundary",value:function(e){if(!e)return this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),void(this._needsUpdate=!0);this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}},{key:"setViewport",value:function(e,t,n,r){null!==e?(this._viewport=this._viewport||new aC.Vector4,"number"===typeof e?this._viewport.set(e,t,n,r):this._viewport.copy(e)):this._viewport=null}},{key:"getDistanceToFitBox",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(iC(this._camera,"getDistanceToFitBox"))return this._spherical.radius;var i=e/t,a=this._camera.getEffectiveFOV()*qM,o=this._camera.aspect;return.5*((r?i>o:i<o)?t:e/o)/Math.tan(.5*a)+.5*n}},{key:"getDistanceToFitSphere",value:function(e){if(iC(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;var t=this._camera.getEffectiveFOV()*qM,n=2*Math.atan(Math.tan(.5*t)*this._camera.aspect),r=1<this._camera.aspect?t:n;return e/Math.sin(.5*r)}},{key:"getTarget",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(e&&e.isVector3?e:new aC.Vector3).copy(t?this._targetEnd:this._target)}},{key:"getPosition",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(e&&e.isVector3?e:new aC.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}},{key:"getSpherical",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(e&&e instanceof aC.Spherical?e:new aC.Spherical).copy(t?this._sphericalEnd:this._spherical)}},{key:"getFocalOffset",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(e&&e.isVector3?e:new aC.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}},{key:"normalizeRotations",value:function(){this._sphericalEnd.theta=this._sphericalEnd.theta%VM,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=VM),this._spherical.theta+=VM*Math.round((this._sphericalEnd.theta-this._spherical.theta)/VM)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!YM(this._camera.up.x,this._cameraUp0.x)||!YM(this._camera.up.y,this._cameraUp0.y)||!YM(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);var t=this.getPosition(cC);this.updateCameraUp(),this.setPosition(t.x,t.y,t.z)}var n=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(n)}},{key:"saveState",value:function(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}},{key:"updateCameraUp",value:function(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,sC),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}},{key:"applyCameraUp",value:function(){var e=cC.subVectors(this._target,this._camera.position).normalize(),t=hC.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e),this._camera.updateMatrixWorld();var n=this.getPosition(cC);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}},{key:"update",value:function(e){var t=this._sphericalEnd.theta-this._spherical.theta,n=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,i=gC.subVectors(this._targetEnd,this._target),a=yC.subVectors(this._focalOffsetEnd,this._focalOffset),o=this._zoomEnd-this._zoom;if(XM(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{var s=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=tC(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,s,1/0,e),this._needsUpdate=!0}if(XM(n))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{var l=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=tC(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,l,1/0,e),this._needsUpdate=!0}if(XM(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{var u=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=tC(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,u,this.maxSpeed,e),this._needsUpdate=!0}if(XM(i.x)&&XM(i.y)&&XM(i.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{var c=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;nC(this._target,this._targetEnd,this._targetVelocity,c,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(XM(a.x)&&XM(a.y)&&XM(a.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{var h=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;nC(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,h,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(XM(o))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{var d=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=tC(this._zoom,this._zoomEnd,this._zoomVelocity,d,1/0,e)}if(this.dollyToCursor)if(GM(this._camera)&&0!==this._changedDolly){var f=this._spherical.radius-this._lastDistance,p=this._camera,v=this._getCameraDirection(fC),m=cC.copy(v).cross(p.up).normalize();0===m.lengthSq()&&(m.x=1);var g=hC.crossVectors(m,v),y=this._sphericalEnd.radius*Math.tan(p.getEffectiveFOV()*qM*.5),A=(this._sphericalEnd.radius-f-this._sphericalEnd.radius)/this._sphericalEnd.radius,x=dC.copy(this._targetEnd).add(m.multiplyScalar(this._dollyControlCoord.x*y*p.aspect)).add(g.multiplyScalar(this._dollyControlCoord.y*y)),b=cC.copy(this._targetEnd).lerp(x,A),_=this._lastDollyDirection===zM&&this._spherical.radius<=this.minDistance,w=this._lastDollyDirection===HM&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(_||w)){this._sphericalEnd.radius-=f,this._spherical.radius-=f;var E=hC.copy(v).multiplyScalar(-f);b.add(E)}this._boundary.clampPoint(b,b);var S=hC.subVectors(b,this._targetEnd);this._targetEnd.copy(b),this._target.add(S),this._changedDolly-=f,XM(this._changedDolly)&&(this._changedDolly=0)}else if(QM(this._camera)&&0!==this._changedZoom){var M=this._zoom-this._lastZoom,C=this._camera,k=cC.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(C.near+C.far)/(C.near-C.far)).unproject(C),T=hC.set(0,0,-1).applyQuaternion(C.quaternion),I=dC.copy(k).add(T.multiplyScalar(-k.dot(C.up))),B=-(this._zoom-M-this._zoom)/this._zoom,R=this._getCameraDirection(fC),L=this._targetEnd.dot(R),P=cC.copy(this._targetEnd).lerp(I,B),D=P.dot(R),O=R.multiplyScalar(D-L);P.sub(O),this._boundary.clampPoint(P,P);var F=hC.subVectors(P,this._targetEnd);this._targetEnd.copy(P),this._target.add(F),this._changedZoom-=M,XM(this._changedZoom)&&(this._changedZoom=0)}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);var N=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,N),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!XM(this._focalOffset.x)||!XM(this._focalOffset.y)||!XM(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),pC.setFromMatrixColumn(this._camera.matrix,0),vC.setFromMatrixColumn(this._camera.matrix,1),mC.setFromMatrixColumn(this._camera.matrix,2),pC.multiplyScalar(this._focalOffset.x),vC.multiplyScalar(-this._focalOffset.y),mC.multiplyScalar(this._focalOffset.z),cC.copy(pC).add(vC).add(mC),this._camera.position.add(cC)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),cC.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);var U=this._needsUpdate;return U&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):U?(this.dispatchEvent({type:"update"}),XM(t,this.restThreshold)&&XM(n,this.restThreshold)&&XM(r,this.restThreshold)&&XM(i.x,this.restThreshold)&&XM(i.y,this.restThreshold)&&XM(i.z,this.restThreshold)&&XM(a.x,this.restThreshold)&&XM(a.y,this.restThreshold)&&XM(a.z,this.restThreshold)&&XM(o,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!U&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=U,this._needsUpdate=!1,U}},{key:"toJSON",value:function(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:$M(this.maxDistance),minZoom:this.minZoom,maxZoom:$M(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:$M(this.maxPolarAngle),minAzimuthAngle:$M(this.minAzimuthAngle),maxAzimuthAngle:$M(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:cC.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}},{key:"fromJSON",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=JSON.parse(e);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=eC(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=eC(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=eC(n.maxPolarAngle),this.minAzimuthAngle=eC(n.minAzimuthAngle),this.maxAzimuthAngle=eC(n.maxAzimuthAngle),this.smoothTime=n.smoothTime,this.draggingSmoothTime=n.draggingSmoothTime,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],t),AC.setFromVector3(cC.fromArray(n.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(AC.theta,AC.phi,t),this.dollyTo(AC.radius,t),this.zoomTo(n.zoom,t),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],t),this._needsUpdate=!0}},{key:"connect",value:function(e){this._domElement?console.warn("camera-controls is already connected."):(e.setAttribute("data-camera-controls-version","2.7.0"),this._addAllEventListeners(e))}},{key:"disconnect",value:function(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}},{key:"dispose",value:function(){this.removeAllEventListeners(),this.disconnect()}},{key:"_getTargetDirection",value:function(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}},{key:"_getCameraDirection",value:function(e){return this._getTargetDirection(e).negate()}},{key:"_findPointerById",value:function(e){return this._activePointers.find((function(t){return t.pointerId===e}))}},{key:"_findPointerByMouseButton",value:function(e){return this._activePointers.find((function(t){return t.mouseButton===e}))}},{key:"_disposePointer",value:function(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}},{key:"_encloseToBoundary",value:function(e,t,n){var r=t.lengthSq();if(0===r)return e;var i=hC.copy(t).add(e),a=this._boundary.clampPoint(i,dC).sub(i),o=a.lengthSq();if(0===o)return e.add(t);if(o===r)return e;if(0===n)return e.add(t).add(a);var s=1+n*o/t.dot(a);return e.add(hC.copy(t).multiplyScalar(s)).add(a.multiplyScalar(1-n))}},{key:"_updateNearPlaneCorners",value:function(){if(GM(this._camera)){var e=this._camera,t=e.near,n=e.getEffectiveFOV()*qM,r=Math.tan(.5*n)*t,i=r*e.aspect;this._nearPlaneCorners[0].set(-i,-r,0),this._nearPlaneCorners[1].set(i,-r,0),this._nearPlaneCorners[2].set(i,r,0),this._nearPlaneCorners[3].set(-i,r,0)}else if(QM(this._camera)){var a=this._camera,o=1/a.zoom,s=a.left*o,l=a.right*o,u=a.top*o,c=a.bottom*o;this._nearPlaneCorners[0].set(s,u,0),this._nearPlaneCorners[1].set(l,u,0),this._nearPlaneCorners[2].set(l,c,0),this._nearPlaneCorners[3].set(s,c,0)}}},{key:"_collisionTest",value:function(){var e=1/0;if(!(this.colliderMeshes.length>=1))return e;if(iC(this._camera,"_collisionTest"))return e;var t=this._getTargetDirection(fC);MC.lookAt(oC,t,this._camera.up);for(var n=0;n<4;n++){var r=hC.copy(this._nearPlaneCorners[n]);r.applyMatrix4(MC);var i=dC.addVectors(this._target,r);CC.set(i,t),CC.far=this._spherical.radius+1;var a=CC.intersectObjects(this.colliderMeshes);0!==a.length&&a[0].distance<e&&(e=a[0].distance)}return e}},{key:"_getClientRect",value:function(e){if(this._domElement){var t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}}},{key:"_createOnRestPromise",value:function(e){var t=this;return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise((function(e){t.addEventListener("rest",(function n(){t.removeEventListener("rest",n),e()}))})))}},{key:"_addAllEventListeners",value:function(e){}},{key:"_removeAllEventListeners",value:function(){}},{key:"dampingFactor",get:function(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0},set:function(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}},{key:"draggingDampingFactor",get:function(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0},set:function(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}}],[{key:"install",value:function(e){aC=e.THREE,oC=Object.freeze(new aC.Vector3(0,0,0)),sC=Object.freeze(new aC.Vector3(0,1,0)),lC=Object.freeze(new aC.Vector3(0,0,1)),uC=new aC.Vector2,cC=new aC.Vector3,hC=new aC.Vector3,dC=new aC.Vector3,fC=new aC.Vector3,pC=new aC.Vector3,vC=new aC.Vector3,mC=new aC.Vector3,gC=new aC.Vector3,yC=new aC.Vector3,AC=new aC.Spherical,xC=new aC.Spherical,bC=new aC.Box3,_C=new aC.Box3,wC=new aC.Sphere,EC=new aC.Quaternion,SC=new aC.Quaternion,MC=new aC.Matrix4,CC=new aC.Raycaster}},{key:"ACTION",get:function(){return UM}},{key:"createBoundingSphere",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new aC.Sphere,n=t.center;bC.makeEmpty(),e.traverseVisible((function(e){e.isMesh&&bC.expandByObject(e)})),bC.getCenter(n);var r=0;return e.traverseVisible((function(e){if(e.isMesh){var t=e,i=t.geometry.clone();i.applyMatrix4(t.matrixWorld);for(var a=i.attributes.position,o=0,s=a.count;o<s;o++)cC.fromBufferAttribute(a,o),r=Math.max(r,n.distanceToSquared(cC))}})),t.radius=Math.sqrt(r),t}}]),n}(kC),PC=["camera","domElement","makeDefault","onStart","onEnd","onChange","regress"],DC=(0,t.forwardRef)((function(e,n){(0,t.useMemo)((function(){var e={Box3:Nd,MathUtils:{clamp:od.clamp},Matrix4:df,Quaternion:Pd,Raycaster:F_,Sphere:nf,Spherical:Z_,Vector2:sd,Vector3:Dd,Vector4:Cd};LC.install({THREE:e}),aS({CameraControlsImpl:LC})}),[]);var r=e.camera,i=e.domElement,a=e.makeDefault,o=e.onStart,s=e.onEnd,l=e.onChange,u=e.regress,c=We(e,PC),h=jS((function(e){return e.camera})),d=jS((function(e){return e.gl})),f=jS((function(e){return e.invalidate})),p=jS((function(e){return e.events})),v=jS((function(e){return e.setEvents})),m=jS((function(e){return e.set})),g=jS((function(e){return e.get})),y=jS((function(e){return e.performance})),A=r||h,x=i||p.connected||d.domElement,b=(0,t.useMemo)((function(){return new LC(A)}),[A]);return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=VS(),r=n.getState().internal.subscribe,i=cS(e);uS((function(){return r(i,t,n)}),[t,r,n])}((function(e,t){b.enabled&&b.update(t)}),-1),(0,t.useEffect)((function(){return b.connect(x),function(){b.disconnect()}}),[x,b]),(0,t.useEffect)((function(){var e=function(e){f(),u&&y.regress(),l&&l(e)},t=function(e){o&&o(e)},n=function(e){s&&s(e)};return b.addEventListener("update",e),b.addEventListener("controlstart",t),b.addEventListener("controlend",n),b.addEventListener("control",e),b.addEventListener("transitionstart",e),b.addEventListener("wake",e),function(){b.removeEventListener("update",e),b.removeEventListener("controlstart",t),b.removeEventListener("controlend",n),b.removeEventListener("control",e),b.removeEventListener("transitionstart",e),b.removeEventListener("wake",e)}}),[b,o,s,f,v,u,l]),(0,t.useEffect)((function(){if(a){var e=g().controls;return m({controls:b}),function(){return m({controls:e})}}}),[a,b]),t.createElement("primitive",sM({ref:n,object:b},c))}));function OC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.forEach((function(t){return function(e,t){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)}(t,e)}))}}function FC(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,t.useCallback)(OC.apply(void 0,n),n)}var NC=["children"],UC=["children"],ZC=(0,t.forwardRef)((function(e,n){var r=e.children,i=We(e,NC),a=t.Children.toArray(r),o=a.find(GC);if(o){var s=o.props.children,l=a.map((function(e){return e===o?t.Children.count(s)>1?t.Children.only(null):(0,t.isValidElement)(s)?s.props.children:null:e}));return(0,t.createElement)(zC,sM({},i,{ref:n}),(0,t.isValidElement)(s)?(0,t.cloneElement)(s,void 0,l):null)}return(0,t.createElement)(zC,sM({},i,{ref:n}),r)}));ZC.displayName="Slot";var zC=(0,t.forwardRef)((function(e,n){var r=e.children,i=We(e,UC);return(0,t.isValidElement)(r)?(0,t.cloneElement)(r,D(D({},function(e,t){var n=D({},t),r=function(){var r=e[i],a=t[i];/^on[A-Z]/.test(i)?r&&a?n[i]=function(){a.apply(void 0,arguments),r.apply(void 0,arguments)}:r&&(n[i]=r):"style"===i?n[i]=D(D({},r),a):"className"===i&&(n[i]=[r,a].filter(Boolean).join(" "))};for(var i in t)r();return D(D({},e),n)}(i,r.props)),{},{ref:n?OC(n,r.ref):r.ref})):t.Children.count(r)>1?t.Children.only(null):null}));zC.displayName="SlotClone";var HC=function(e){var n=e.children;return(0,t.createElement)(t.Fragment,null,n)};function GC(e){return(0,t.isValidElement)(e)&&e.type===HC}var QC=["asChild"],VC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((function(e,n){var r=(0,t.forwardRef)((function(e,r){var i=e.asChild,a=We(e,QC),o=i?ZC:n;return(0,t.useEffect)((function(){window[Symbol.for("radix-ui")]=!0}),[]),(0,t.createElement)(o,sM({},a,{ref:r}))}));return r.displayName="Primitive.".concat(n),D(D({},e),{},(0,L.Z)({},n,r))}),{});var jC=["container"],WC=(0,t.forwardRef)((function(e,n){var r,i=e.container,a=void 0===i?null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body:i,o=We(e,jC);return a?l.createPortal((0,t.createElement)(VC.div,sM({},o,{ref:n})),a):null})),qC=WC,JC=Object.prototype.hasOwnProperty;function XC(e,t){var n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&XC(e[r],t[r]););return-1===r}if(!n||"object"===typeof e){for(n in r=0,e){if(JC.call(e,n)&&++r&&!JC.call(t,n))return!1;if(!(n in t)||!XC(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!==e&&t!==t}function YC(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(var r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}var KC=function(e,t,n,r){this.name=e,this.fn=t,this.args=n,this.modifiers=r};function $C(e,t){return void 0===t&&(t="simple"),"object"===typeof e?e[t]:e}function ek(e,t,n){if(e.length){var r=e.shift(),i=ek(e,t,n);return r.perform(i,n)}return $C(t)}function tk(e,t,n){if(e.length){var r=e.shift(),i=tk(e,t,n);return r.performAsync(i,n)}return function(e){return Promise.resolve($C(t,"async")(e))}}KC.prototype._test=function(e){var t=this.fn;try{ek(this.modifiers.slice(),t,this)(e)}catch(n){t=function(){return!1}}try{return ek(this.modifiers.slice(),t,this)(e)}catch(r){return!1}},KC.prototype._check=function(e){try{ek(this.modifiers.slice(),this.fn,this)(e)}catch(t){if(ek(this.modifiers.slice(),(function(e){return e}),this)(!1))return}if(!ek(this.modifiers.slice(),this.fn,this)(e))throw null},KC.prototype._testAsync=function(e){var t=this;return new Promise((function(n,r){tk(t.modifiers.slice(),t.fn,t)(e).then((function(t){t?n(e):r(null)})).catch((function(e){return r(e)}))}))};var nk=function(e,t,n){this.name=e,this.perform=t,this.performAsync=n},rk=function(e){function t(n,r,i,a){for(var o=[],s=arguments.length-4;s-- >0;)o[s]=arguments[s+4];e.call(this,o),e.captureStackTrace&&e.captureStackTrace(this,t),this.rule=n,this.value=r,this.cause=i,this.target=a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),ik=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.chain=e,this.nextRuleModifiers=t};function ak(e,t,n,r){if(t.length){var i=t.shift();i._testAsync(e).then((function(){ak(e,t,n,r)}),(function(t){r(new rk(i,e,t))}))}else n(e)}ik.prototype._applyRule=function(e,t){var n=this;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return n.chain.push(new KC(t,e.apply(n,r),r,n.nextRuleModifiers)),n.nextRuleModifiers=[],n}},ik.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new nk(t,e.simple,e.async)),this},ik.prototype._clone=function(){return new ik(this.chain.slice(),this.nextRuleModifiers.slice())},ik.prototype.test=function(e){return this.chain.every((function(t){return t._test(e)}))},ik.prototype.testAll=function(e){var t=[];return this.chain.forEach((function(n){try{n._check(e)}catch(r){t.push(new rk(n,e,r))}})),t},ik.prototype.check=function(e){this.chain.forEach((function(t){try{t._check(e)}catch(n){throw new rk(t,e,n)}}))},ik.prototype.testAsync=function(e){var t=this;return new Promise((function(n,r){ak(e,t.chain.slice(),n,r)}))};var ok=function(e,t){return!(!t||"string"!==typeof e||0!==e.trim().length)||(void 0===e||null===e)};function sk(){return"undefined"!==typeof Proxy?uk(new ik):ck(new ik)}var lk={};function uk(e){return new Proxy(e,{get:function(t,n){if(n in t)return t[n];var r=uk(e._clone());return n in hk?r._applyModifier(hk[n],n):n in lk?r._applyRule(lk[n],n):n in pk?r._applyRule(pk[n],n):void 0}})}function ck(e){var t=function(e,t){return Object.keys(e).forEach((function(n){t[n]=function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return ck(t._clone())._applyRule(e[n],n).apply(void 0,r)}})),t},n=t(pk,e),r=t(lk,n);return Object.keys(hk).forEach((function(e){Object.defineProperty(r,e,{get:function(){return ck(r._clone())._applyModifier(hk[e],e)}})})),r}sk.extend=function(e){Object.assign(lk,e)},sk.clearCustomRules=function(){lk={}};var hk={not:{simple:function(e){return function(t){return!e(t)}},async:function(e){return function(t){return Promise.resolve(e(t)).then((function(e){return!e})).catch((function(){return!0}))}}},some:{simple:function(e){return function(t){return fk(t).some((function(t){try{return e(t)}catch(n){return!1}}))}},async:function(e){return function(t){return Promise.all(fk(t).map((function(t){try{return e(t).catch((function(){return!1}))}catch(n){return!1}}))).then((function(e){return e.some(Boolean)}))}}},every:{simple:function(e){return function(t){return!1!==t&&fk(t).every(e)}},async:function(e){return function(t){return Promise.all(fk(t).map(e)).then((function(e){return e.every(Boolean)}))}}},strict:{simple:function(e,t){return function(n){return dk(t)&&n&&"object"===typeof n?Object.keys(t.args[0]).length===Object.keys(n).length&&e(n):e(n)}},async:function(e,t){return function(n){return Promise.resolve(e(n)).then((function(e){return dk(t)&&n&&"object"===typeof n?Object.keys(t.args[0]).length===Object.keys(n).length&&e:e})).catch((function(){return!1}))}}}};function dk(e){return e&&"schema"===e.name&&e.args.length>0&&"object"===typeof e.args[0]}function fk(e){return"string"===typeof e?e.split(""):e}var pk={equal:function(e){return function(t){return t==e}},exact:function(e){return function(t){return t===e}},number:function(e){return void 0===e&&(e=!0),function(t){return"number"===typeof t&&(e||isFinite(t))}},integer:function(){return function(e){return(Number.isInteger||mk)(e)}},numeric:function(){return function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},string:function(){return vk("string")},boolean:function(){return vk("boolean")},undefined:function(){return vk("undefined")},null:function(){return vk("null")},array:function(){return vk("array")},object:function(){return vk("object")},instanceOf:function(e){return function(t){return t instanceof e}},pattern:function(e){return function(t){return e.test(t)}},lowercase:function(){return function(e){return"boolean"===typeof e||e===e.toLowerCase()&&""!==e.trim()}},uppercase:function(){return function(e){return e===e.toUpperCase()&&""!==e.trim()}},vowel:function(){return function(e){return/^[aeiou]+$/i.test(e)}},consonant:function(){return function(e){return/^(?=[^aeiou])([a-z]+)$/i.test(e)}},first:function(e){return function(t){return t[0]==e}},last:function(e){return function(t){return t[t.length-1]==e}},empty:function(){return function(e){return 0===e.length}},length:function(e,t){return function(n){return n.length>=e&&n.length<=(t||e)}},minLength:function(e){return function(t){return t.length>=e}},maxLength:function(e){return function(t){return t.length<=e}},negative:function(){return function(e){return e<0}},positive:function(){return function(e){return e>=0}},between:function(e,t){return function(n){return n>=e&&n<=t}},range:function(e,t){return function(n){return n>=e&&n<=t}},lessThan:function(e){return function(t){return t<e}},lessThanOrEqual:function(e){return function(t){return t<=e}},greaterThan:function(e){return function(t){return t>e}},greaterThanOrEqual:function(e){return function(t){return t>=e}},even:function(){return function(e){return e%2===0}},odd:function(){return function(e){return e%2!==0}},includes:function(e){return function(t){return~t.indexOf(e)}},schema:function(e){return function(e){return{simple:function(t){var n=[];if(Object.keys(e).forEach((function(r){var i=e[r];try{i.check((t||{})[r])}catch(a){a.target=r,n.push(a)}})),n.length>0)throw n;return!0},async:function(t){var n=[],r=Object.keys(e).map((function(r){return e[r].testAsync((t||{})[r]).catch((function(e){e.target=r,n.push(e)}))}));return Promise.all(r).then((function(){if(n.length>0)throw n;return!0}))}}}(e)},passesAnyOf:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t){return e.some((function(e){return e.test(t)}))}},optional:function(e,t){return void 0===t&&(t=!1),{simple:function(n){return ok(n,t)||void 0===e.check(n)},async:function(n){return ok(n,t)||e.testAsync(n)}}}};function vk(e){return function(t){return Array.isArray(t)&&"array"===e||null===t&&"null"===e||typeof t===e}}function mk(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}var gk=sk,yk=["variants","compoundVariants","defaultVariants"],Ak=["css"],xk=["css"],bk="colors",_k="sizes",wk="space",Ek={gap:wk,gridGap:wk,columnGap:wk,gridColumnGap:wk,rowGap:wk,gridRowGap:wk,inset:wk,insetBlock:wk,insetBlockEnd:wk,insetBlockStart:wk,insetInline:wk,insetInlineEnd:wk,insetInlineStart:wk,margin:wk,marginTop:wk,marginRight:wk,marginBottom:wk,marginLeft:wk,marginBlock:wk,marginBlockEnd:wk,marginBlockStart:wk,marginInline:wk,marginInlineEnd:wk,marginInlineStart:wk,padding:wk,paddingTop:wk,paddingRight:wk,paddingBottom:wk,paddingLeft:wk,paddingBlock:wk,paddingBlockEnd:wk,paddingBlockStart:wk,paddingInline:wk,paddingInlineEnd:wk,paddingInlineStart:wk,top:wk,right:wk,bottom:wk,left:wk,scrollMargin:wk,scrollMarginTop:wk,scrollMarginRight:wk,scrollMarginBottom:wk,scrollMarginLeft:wk,scrollMarginX:wk,scrollMarginY:wk,scrollMarginBlock:wk,scrollMarginBlockEnd:wk,scrollMarginBlockStart:wk,scrollMarginInline:wk,scrollMarginInlineEnd:wk,scrollMarginInlineStart:wk,scrollPadding:wk,scrollPaddingTop:wk,scrollPaddingRight:wk,scrollPaddingBottom:wk,scrollPaddingLeft:wk,scrollPaddingX:wk,scrollPaddingY:wk,scrollPaddingBlock:wk,scrollPaddingBlockEnd:wk,scrollPaddingBlockStart:wk,scrollPaddingInline:wk,scrollPaddingInlineEnd:wk,scrollPaddingInlineStart:wk,fontSize:"fontSizes",background:bk,backgroundColor:bk,backgroundImage:bk,borderImage:bk,border:bk,borderBlock:bk,borderBlockEnd:bk,borderBlockStart:bk,borderBottom:bk,borderBottomColor:bk,borderColor:bk,borderInline:bk,borderInlineEnd:bk,borderInlineStart:bk,borderLeft:bk,borderLeftColor:bk,borderRight:bk,borderRightColor:bk,borderTop:bk,borderTopColor:bk,caretColor:bk,color:bk,columnRuleColor:bk,fill:bk,outline:bk,outlineColor:bk,stroke:bk,textDecorationColor:bk,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:_k,minBlockSize:_k,maxBlockSize:_k,inlineSize:_k,minInlineSize:_k,maxInlineSize:_k,width:_k,minWidth:_k,maxWidth:_k,height:_k,minHeight:_k,maxHeight:_k,flexBasis:_k,gridTemplateColumns:_k,gridTemplateRows:_k,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},Sk=function(e,t){return"function"==typeof t?{"()":Function.prototype.toString.call(t)}:t},Mk=function(){var e=Object.create(null);return function(t,n){for(var r=function(e){return JSON.stringify(e,Sk)}(t),i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];return r in e?e[r]:e[r]=n.apply(void 0,[t].concat(a))}},Ck=Symbol.for("sxs.internal"),kk=function(e,t){return Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))},Tk=function(e){for(var t in e)return!0;return!1},Ik=Object.prototype.hasOwnProperty,Bk=function(e){return e.includes("-")?e:e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))},Rk=/\s+(?![^()]*\))/,Lk=function(e){return function(t){return e.apply(void 0,(0,O.Z)("string"==typeof t?String(t).split(Rk):[t]))}},Pk={appearance:function(e){return{WebkitAppearance:e,appearance:e}},backfaceVisibility:function(e){return{WebkitBackfaceVisibility:e,backfaceVisibility:e}},backdropFilter:function(e){return{WebkitBackdropFilter:e,backdropFilter:e}},backgroundClip:function(e){return{WebkitBackgroundClip:e,backgroundClip:e}},boxDecorationBreak:function(e){return{WebkitBoxDecorationBreak:e,boxDecorationBreak:e}},clipPath:function(e){return{WebkitClipPath:e,clipPath:e}},content:function(e){return{content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:'"'.concat(e,'"')}},hyphens:function(e){return{WebkitHyphens:e,hyphens:e}},maskImage:function(e){return{WebkitMaskImage:e,maskImage:e}},maskSize:function(e){return{WebkitMaskSize:e,maskSize:e}},tabSize:function(e){return{MozTabSize:e,tabSize:e}},textSizeAdjust:function(e){return{WebkitTextSizeAdjust:e,textSizeAdjust:e}},userSelect:function(e){return{WebkitUserSelect:e,userSelect:e}},marginBlock:Lk((function(e,t){return{marginBlockStart:e,marginBlockEnd:t||e}})),marginInline:Lk((function(e,t){return{marginInlineStart:e,marginInlineEnd:t||e}})),maxSize:Lk((function(e,t){return{maxBlockSize:e,maxInlineSize:t||e}})),minSize:Lk((function(e,t){return{minBlockSize:e,minInlineSize:t||e}})),paddingBlock:Lk((function(e,t){return{paddingBlockStart:e,paddingBlockEnd:t||e}})),paddingInline:Lk((function(e,t){return{paddingInlineStart:e,paddingInlineEnd:t||e}}))},Dk=/([\d.]+)([^]*)/,Ok=function(e,t){return e.length?e.reduce((function(e,n){return e.push.apply(e,(0,O.Z)(t.map((function(e){return e.includes("&")?e.replace(/&/g,/[ +>|~]/.test(n)&&/&.*&/.test(e)?":is(".concat(n,")"):n):n+" "+e})))),e}),[]):t},Fk=function(e,t){return e in Nk&&"string"==typeof t?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(function(t,n,r,i){return n+("stretch"===r?"-moz-available".concat(i,";").concat(Bk(e),":").concat(n,"-webkit-fill-available"):"-moz-fit-content".concat(i,";").concat(Bk(e),":").concat(n,"fit-content"))+i})):String(t)},Nk={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Uk=function(e){return e?e+"-":""},Zk=function(e,t,n){return e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(function(e,r,i,a,o){return"$"==a==!!i?e:(r||"--"==a?"calc(":"")+"var(--"+("$"===a?Uk(t)+(o.includes("$")?"":Uk(n))+o.replace(/\$/g,"-"):o)+")"+(r||"--"==a?"*"+(r||"")+(i||"1")+")":"")}))},zk=/\s*,\s*(?![^()]*\))/,Hk=Object.prototype.toString,Gk=function(e,t,n,r,i){var a,o,l;!function e(t,n,u){var c,h;(function t(d){for(c in d){var f,p=64===c.charCodeAt(0),v=p&&Array.isArray(d[c])?d[c]:[d[c]],m=(0,Ms.Z)(v);try{for(m.s();!(f=m.n()).done;){h=f.value;var g=/[A-Z]/.test(E=c)?E:E.replace(/-[^]/g,(function(e){return e[1].toUpperCase()})),y="object"==typeof h&&h&&h.toString===Hk&&(!r.utils[g]||!n.length);if(g in r.utils&&!y){var A=r.utils[g];if(A!==o){o=A,t(A(h)),o=null;continue}}else if(g in Pk){var x=Pk[g];if(x!==l){l=x,t(x(h)),l=null;continue}}if(p&&(w=c.slice(1)in r.media?"@media "+r.media[c.slice(1)]:c,c=w.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(function(e,t,n,r,i,a){var o=Dk.test(t),l=.0625*(o?-1:1),u=o?[r,t]:[t,r],c=(0,s.Z)(u,2),h=c[0],d=c[1];return"("+("="===n[0]?"":">"===n[0]===o?"max-":"min-")+h+":"+("="!==n[0]&&1===n.length?d.replace(Dk,(function(e,t,r){return Number(t)+l*(">"===n?1:-1)+r})):d)+(i?") and ("+(">"===i[0]?"min-":"max-")+h+":"+(1===i.length?a.replace(Dk,(function(e,t,n){return Number(t)+l*(">"===i?-1:1)+n})):a):"")+")"}))),y){var b=p?u.concat(c):(0,O.Z)(u),_=p?(0,O.Z)(n):Ok(n,c.split(zk));void 0!==a&&i(Qk.apply(void 0,(0,O.Z)(a))),a=void 0,e(h,_,b)}else void 0===a&&(a=[[],n,u]),c=p||36!==c.charCodeAt(0)?c:"--".concat(Uk(r.prefix)).concat(c.slice(1).replace(/\$/g,"-")),h=y?h:"number"==typeof h?h&&g in Vk?String(h)+"px":String(h):Zk(Fk(g,null==h?"":h),r.prefix,r.themeMap[g]),a[0].push("".concat(p?"".concat(c," "):"".concat(Bk(c),":")).concat(h))}}catch(S){m.e(S)}finally{m.f()}}var w,E})(t),void 0!==a&&i(Qk.apply(void 0,(0,O.Z)(a))),a=void 0}(e,t,n)},Qk=function(e,t,n){return"".concat(n.map((function(e){return"".concat(e,"{")})).join("")).concat(t.length?"".concat(t.join(","),"{"):"").concat(e.join(";")).concat(t.length?"}":"").concat(Array(n.length?n.length+1:0).join("}"))},Vk={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},jk=function(e){return String.fromCharCode(e+(e>25?39:97))},Wk=function(e){return function(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=jk(t%52)+n;return jk(t%52)+n}(function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e}(5381,JSON.stringify(e))>>>0)},qk=["themed","global","styled","onevar","resonevar","allvar","inline"],Jk=function(e){if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch(e){return!1}},Xk=function(e){var t=e.group,n=t.cssRules.length;e.apply=function(e){try{t.insertRule(e,n),++n}catch(e){}}},Yk=Symbol(),Kk=Mk(),$k=function(e,t){return Kk(e,(function(){return function(){for(var n={type:null,composers:new Set},r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];for(var o=0,s=i;o<s.length;o++){var l=s[o];if(null!=l)if(l[Ck]){null==n.type&&(n.type=l[Ck].type);var u,c=(0,Ms.Z)(l[Ck].composers);try{for(c.s();!(u=c.n()).done;){var h=u.value;n.composers.add(h)}}catch(d){c.e(d)}finally{c.f()}}else l.constructor!==Object||l.$$typeof?null==n.type&&(n.type=l):n.composers.add(eT(l,e))}return null==n.type&&(n.type="span"),n.composers.size||n.composers.add(["PJLV",{},[],[],{},[]]),tT(e,n,t)}}))},eT=function(e,t){var n,r,i=e.variants,a=e.compoundVariants,o=e.defaultVariants,s=We(e,yk),l="".concat(Uk(t.prefix),"c-").concat(Wk(s)),u=[],c=[],h=Object.create(null),d=[];for(var f in o)h[f]=String(o[f]);if("object"==typeof i&&i)for(var p in i){n=h,r=p,Ik.call(n,r)||(h[p]="undefined");var v=i[p];for(var m in v){var g=(0,L.Z)({},p,String(m));"undefined"===String(m)&&d.push(p);var y=v[m],A=[g,y,!Tk(y)];u.push(A)}}if("object"==typeof a&&a){var x,b=(0,Ms.Z)(a);try{for(b.s();!(x=b.n()).done;){var _=x.value,w=_.css,E=We(_,Ak);for(var S in w="object"==typeof w&&w||{},E)E[S]=String(E[S]);var M=[E,w,!Tk(w)];c.push(M)}}catch(C){b.e(C)}finally{b.f()}}return[l,s,u,c,h,d]},tT=function(e,t,n){var r,i=nT(t.composers),a=(0,s.Z)(i,4),o=a[0],l=a[1],u=a[2],c=a[3],h="function"==typeof t.type||t.type.$$typeof?function(e){function t(){for(var n=0;n<t[Yk].length;n++){var r=(0,s.Z)(t[Yk][n],2),i=r[0],a=r[1];e.rules[i].apply(a)}return t[Yk]=[],null}return t[Yk]=[],t.rules={},qk.forEach((function(e){return t.rules[e]={apply:function(n){return t[Yk].push([e,n])}}})),t}(n):null,d=(h||n).rules,f=".".concat(o).concat(l.length>1?":where(.".concat(l.slice(1).join("."),")"):""),p=function(r){var i=r="object"==typeof r&&r||iT,a=i.css,p=We(i,xk),v={};for(var m in u)if(delete p[m],m in r){var g=r[m];"object"==typeof g&&g?v[m]=D({"@initial":u[m]},g):(g=String(g),v[m]="undefined"!==g||c.has(m)?g:u[m])}else v[m]=u[m];var y,A=new Set((0,O.Z)(l)),x=(0,Ms.Z)(t.composers);try{for(x.s();!(y=x.n()).done;){var b=(0,s.Z)(y.value,4),_=b[0],w=b[1],E=b[2],S=b[3];n.rules.styled.cache.has(_)||(n.rules.styled.cache.add(_),Gk(w,[".".concat(_)],[],e,(function(e){d.styled.apply(e)})));var M,C=rT(E,v,e.media),k=rT(S,v,e.media,!0),T=(0,Ms.Z)(C);try{for(T.s();!(M=T.n()).done;){var I=M.value;if(void 0!==I){var B,R=(0,Ms.Z)(I);try{var L=function(){var t=(0,s.Z)(B.value,3),r=t[0],i=t[1],a=t[2],o="".concat(_,"-").concat(Wk(i),"-").concat(r);A.add(o);var l=(a?n.rules.resonevar:n.rules.onevar).cache,u=a?d.resonevar:d.onevar;l.has(o)||(l.add(o),Gk(i,[".".concat(o)],[],e,(function(e){u.apply(e)})))};for(R.s();!(B=R.n()).done;)L()}catch(X){R.e(X)}finally{R.f()}}}}catch(X){T.e(X)}finally{T.f()}var P,F=(0,Ms.Z)(k);try{for(F.s();!(P=F.n()).done;){var N=P.value;if(void 0!==N){var U,Z=(0,Ms.Z)(N);try{for(Z.s();!(U=Z.n()).done;){var z=(0,s.Z)(U.value,2),H=z[0],G=z[1],Q="".concat(_,"-").concat(Wk(G),"-").concat(H);A.add(Q),n.rules.allvar.cache.has(Q)||(n.rules.allvar.cache.add(Q),Gk(G,[".".concat(Q)],[],e,(function(e){d.allvar.apply(e)})))}}catch(X){Z.e(X)}finally{Z.f()}}}}catch(X){F.e(X)}finally{F.f()}}}catch(X){x.e(X)}finally{x.f()}if("object"==typeof a&&a){var V="".concat(o,"-i").concat(Wk(a),"-css");A.add(V),n.rules.inline.cache.has(V)||(n.rules.inline.cache.add(V),Gk(a,[".".concat(V)],[],e,(function(e){d.inline.apply(e)})))}var j,W=(0,Ms.Z)(String(r.className||"").trim().split(/\s+/));try{for(W.s();!(j=W.n()).done;){var q=j.value;q&&A.add(q)}}catch(X){W.e(X)}finally{W.f()}var J=p.className=(0,O.Z)(A).join(" ");return{type:t.type,className:J,selector:f,props:p,toString:function(){return J},deferredInjector:h}};return kk(p,(r={className:o,selector:f},(0,L.Z)(r,Ck,t),(0,L.Z)(r,"toString",(function(){return n.rules.styled.cache.has(o)||p(),o})),r))},nT=function(e){var t,n="",r=[],i={},a=[],o=(0,Ms.Z)(e);try{for(o.s();!(t=o.n()).done;){var l=(0,s.Z)(t.value,6),u=l[0],c=l[4],h=l[5];for(var d in""===n&&(n=u),r.push(u),a.push.apply(a,(0,O.Z)(h)),c){var f=c[d];(void 0===i[d]||"undefined"!==f||h.includes(f))&&(i[d]=f)}}}catch(p){o.e(p)}finally{o.f()}return[n,r,i,new Set(a)]},rT=function(e,t,n,r){var i,a=[],o=(0,Ms.Z)(e);try{e:for(o.s();!(i=o.n()).done;){var l=(0,s.Z)(i.value,3),u=l[0],c=l[1];if(!l[2]){var h=void 0,d=0,f=!1;for(h in u){var p=u[h],v=t[h];if(v!==p){if("object"!=typeof v||!v)continue e;var m=void 0,g=void 0,y=0;for(var A in v){if(p===String(v[A])){if("@initial"!==A){var x=A.slice(1);(g=g||[]).push(x in n?n[x]:A.replace(/^@media ?/,"")),f=!0}d+=y,m=!0}++y}if(g&&g.length&&(c=(0,L.Z)({},"@media "+g.join(", "),c)),!m)continue e}}(a[d]=a[d]||[]).push([r?"cv":"".concat(h,"-").concat(u[h]),c,f])}}}catch(b){o.e(b)}finally{o.f()}return a},iT={},aT=Mk(),oT=function(e,t){return aT(e,(function(){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=function(){for(var n=0,i=r;n<i.length;n++){var a=i[n],o=Wk(a="object"==typeof a&&a||{});if(!t.rules.global.cache.has(o)){if(t.rules.global.cache.add(o),"@import"in a){var s,l=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1,u=(0,Ms.Z)([].concat(a["@import"]));try{for(u.s();!(s=u.n()).done;){var c=s.value;c=c.includes('"')||c.includes("'")?c:'"'.concat(c,'"'),t.sheet.insertRule("@import ".concat(c,";"),l++)}}catch(h){u.e(h)}finally{u.f()}delete a["@import"]}Gk(a,[],[],e,(function(e){t.rules.global.apply(e)}))}}return""};return kk(a,{toString:a})}}))},sT=Mk(),lT=function(e,t){return sT(e,(function(){return function(n){var r="".concat(Uk(e.prefix),"k-").concat(Wk(n)),i=function(){if(!t.rules.global.cache.has(r)){t.rules.global.cache.add(r);var i=[];Gk(n,[],[],e,(function(e){return i.push(e)}));var a="@keyframes ".concat(r,"{").concat(i.join(""),"}");t.rules.global.apply(a)}return r};return kk(i,{get name(){return i()},toString:i})}}))},uT=function(){function e(t,n,r,i){(0,u.Z)(this,e),this.token=null==t?"":String(t),this.value=null==n?"":String(n),this.scale=null==r?"":String(r),this.prefix=null==i?"":String(i)}return(0,c.Z)(e,[{key:"computedValue",get:function(){return"var("+this.variable+")"}},{key:"variable",get:function(){return"--"+Uk(this.prefix)+Uk(this.scale)+this.token}},{key:"toString",value:function(){return this.computedValue}}]),e}(),cT=Mk(),hT=function(e,t){return cT(e,(function(){return function(n,r){r="object"==typeof n&&n||Object(r);var i=".".concat(n=(n="string"==typeof n?n:"")||"".concat(Uk(e.prefix),"t-").concat(Wk(r))),a={},o=[];for(var s in r)for(var l in a[s]={},r[s]){var u="--".concat(Uk(e.prefix)).concat(s,"-").concat(l),c=Zk(String(r[s][l]),e.prefix,s);a[s][l]=new uT(l,c,s,e.prefix),o.push("".concat(u,":").concat(c))}var h=function(){if(o.length&&!t.rules.themed.cache.has(n)){t.rules.themed.cache.add(n);var i="".concat(r===e.theme?":root,":"",".").concat(n,"{").concat(o.join(";"),"}");t.rules.themed.apply(i)}return n};return D(D({},a),{},{get className(){return h()},selector:i,toString:h})}}))},dT=Mk(),fT=Mk(),pT=function(e){var n=function(e){var t=!1,n=dT(e,(function(e){t=!0;var n="prefix"in(e="object"==typeof e&&e||{})?String(e.prefix):"",r="object"==typeof e.media&&e.media||{},i="object"==typeof e.root?e.root||null:globalThis.document||null,a="object"==typeof e.theme&&e.theme||{},o={prefix:n,media:r,theme:a,themeMap:"object"==typeof e.themeMap&&e.themeMap||D({},Ek),utils:"object"==typeof e.utils&&e.utils||{}},s=function(e){var t,n=function(){var e=t.sheet.cssRules;return[].map.call(e,(function(n,r){var i=n.cssText,a="";if(i.startsWith("--sxs"))return"";if(e[r-1]&&(a=e[r-1].cssText).startsWith("--sxs")){if(!n.cssRules.length)return"";for(var o in t.rules)if(t.rules[o].group===n)return"--sxs{--sxs:".concat((0,O.Z)(t.rules[o].cache).join(" "),"}").concat(i);return n.cssRules.length?"".concat(a).concat(i):""}return i})).join("")};return function r(){if(t){var i=t,a=i.rules,o=i.sheet;if(!o.deleteRule){for(;3===Object(Object(o.cssRules)[0]).type;)o.cssRules.splice(0,1);o.cssRules=[]}for(var s in a)delete a[s]}var l,u=Object(e).styleSheets||[],c=(0,Ms.Z)(u);try{for(c.s();!(l=c.n()).done;){var h=l.value;if(Jk(h)){for(var d=0,f=h.cssRules;f[d];++d){var p=Object(f[d]);if(1===p.type){var v=Object(f[d+1]);if(4===v.type){++d;var m=p.cssText;if(m.startsWith("--sxs")){var g=m.slice(14,-3).trim().split(/\s+/),y=qk[g[0]];y&&(t||(t={sheet:h,reset:r,rules:{},toString:n}),t.rules[y]={group:v,index:d,cache:new Set(g)})}}}}if(t)break}}}catch(M){c.e(M)}finally{c.f()}t||(t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:function e(t,n){return{type:n,cssRules:[],insertRule:function(t,n){this.cssRules.splice(n,0,e(t,{import:3,undefined:1}[(t.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return"@media{}"===t?"@media{".concat([].map.call(this.cssRules,(function(e){return e.cssText})).join(""),"}"):t}}}("","text/css"),rules:{},reset:r,toString:n});for(var A=t,x=A.sheet,b=A.rules,_=qk.length-1;_>=0;--_){var w=qk[_];if(!b[w]){var E=qk[_+1],S=b[E]?b[E].index:x.cssRules.length;x.insertRule("@media{}",S),x.insertRule("--sxs{--sxs:".concat(_,"}"),S),b[w]={group:x.cssRules[S+1],index:S,cache:new Set([_])}}Xk(b[w])}}(),t}(i),l={css:$k(o,s),globalCss:oT(o,s),keyframes:lT(o,s),createTheme:hT(o,s),reset:function(){s.reset(),l.theme.toString()},theme:{},sheet:s,config:o,prefix:n,getCssText:s.toString,toString:s.toString};return String(l.theme=l.createTheme(a)),l}));return t||n.reset(),n}(e);return n.styled=function(e){var n=e.config,r=e.sheet;return fT(n,(function(){var e=$k(n,r);return function(){var n=e.apply(void 0,arguments),r=n[Ck].type,i=t.forwardRef((function(e,i){var a=e&&e.as||r,o=n(e),s=o.props,l=o.deferredInjector;return delete s.as,s.ref=i,l?t.createElement(t.Fragment,null,t.createElement(a,s),t.createElement(l,null)):t.createElement(a,s)}));return i.className=n.className,i.displayName="Styled.".concat(r.displayName||r.name||r),i.selector=n.selector,i.toString=function(){return n.selector},i[Ck]=n[Ck],i}}))}(n),n};var vT=function(e,t){return void 0===e&&(e=t),Array.isArray(e)?e:[e,e]},mT=function(e,t){return[e[0]+t[0],e[1]+t[1]]},gT=function(e,t){return[e[0]-t[0],e[1]-t[1]]},yT=function(e,t){e[0]+=t[0],e[1]+=t[1]};function AT(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function xT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.15;return 0===r?function(e,t,n){return Math.max(t,Math.min(e,n))}(e,t,n):e<t?-AT(t-e,n-t,r)+t:e>n?+AT(e-n,n-t,r)+n:e}function bT(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function _T(e,t,n){return(t=bT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ET(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wT(Object(n),!0).forEach((function(t){_T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ST={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function MT(e){return e?e[0].toUpperCase()+e.slice(1):""}var CT=["enter","leave"];function kT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ST[e],i=r&&r[t]||t;return"on"+MT(e)+MT(i)+(function(){var e=arguments.length>1?arguments[1]:void 0;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&!CT.includes(e)}(n,i)?"Capture":"")}var TT=["gotpointercapture","lostpointercapture"];function IT(e){var t=e.substring(2).toLowerCase(),n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));var r=TT.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function BT(e){return"touches"in e}function RT(e){return BT(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function LT(e){return BT(e)?function(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function PT(e){return function(e){return Array.from(e.touches).filter((function(t){var n,r;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,t.target))}))}(e).map((function(e){return e.identifier}))}function DT(e){var t=LT(e);return BT(e)?t.identifier:t.pointerId}function OT(e){var t=LT(e);return[t.clientX,t.clientY]}function FT(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}return e}function NT(){}function UT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?NT:1===t.length?t[0]:function(){for(var e,n=0,r=t;n<r.length;n++){e=r[n].apply(this,arguments)||e}return e}}function ZT(e,t){return Object.assign({},t,e||{})}var zT=function(){function e(t,n,r){(0,u.Z)(this,e),this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}return(0,c.Z)(e,[{key:"state",get:function(){return this.ctrl.state[this.key]},set:function(e){this.ctrl.state[this.key]=e}},{key:"shared",get:function(){return this.ctrl.state.shared}},{key:"eventStore",get:function(){return this.ctrl.gestureEventStores[this.key]}},{key:"timeoutStore",get:function(){return this.ctrl.gestureTimeoutStores[this.key]}},{key:"config",get:function(){return this.ctrl.config[this.key]}},{key:"sharedConfig",get:function(){return this.ctrl.config.shared}},{key:"handler",get:function(){return this.ctrl.handlers[this.key]}},{key:"reset",value:function(){var e=this.state,t=this.shared,n=this.ingKey,r=this.args;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}},{key:"start",value:function(e){var t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?FT(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}},{key:"computeValues",value:function(e){var t=this.state;t._values=e,t.values=this.config.transform(e)}},{key:"computeInitial",value:function(){var e=this.state;e._initial=e._values,e.initial=e.values}},{key:"compute",value:function(e){var t=this.state,n=this.config,r=this.shared;t.args=this.args;var i=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,function(e){var t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){var n=e.shiftKey,r=e.altKey,i=e.metaKey,a=e.ctrlKey;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:a})}return t}(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,i=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){var a=t._delta.map(Math.abs);yT(t._distance,a)}this.axisIntent&&this.axisIntent(e);var o=(0,s.Z)(t._movement,2),l=o[0],u=o[1],c=(0,s.Z)(n.threshold,2),h=c[0],d=c[1],f=t._step,p=t.values;if(n.hasCustomTransform?(!1===f[0]&&(f[0]=Math.abs(l)>=h&&p[0]),!1===f[1]&&(f[1]=Math.abs(u)>=d&&p[1])):(!1===f[0]&&(f[0]=Math.abs(l)>=h&&Math.sign(l)*h),!1===f[1]&&(f[1]=Math.abs(u)>=d&&Math.sign(u)*d)),t.intentional=!1!==f[0]||!1!==f[1],t.intentional){var v=[0,0];if(n.hasCustomTransform){var m=(0,s.Z)(p,2),g=m[0],y=m[1];v[0]=!1!==f[0]?g-f[0]:0,v[1]=!1!==f[1]?y-f[1]:0}else v[0]=!1!==f[0]?l-f[0]:0,v[1]=!1!==f[1]?u-f[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(v);var A=t.offset,x=t._active&&!t._blocked||t.active;x&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=FT(n.bounds,t)),this.setup&&this.setup()),t.movement=v,this.computeOffset()));var b=(0,s.Z)(t.offset,2),_=b[0],w=b[1],E=(0,s.Z)(t._bounds,2),S=(0,s.Z)(E[0],2),M=S[0],C=S[1],k=(0,s.Z)(E[1],2),T=k[0],I=k[1];t.overflow=[_<M?-1:_>C?1:0,w<T?-1:w>I?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);var B=t._active&&n.rubberband||[0,0];if(t.offset=function(e,t,n){var r=(0,s.Z)(t,2),i=r[0],a=r[1],o=(0,s.Z)(n,2),l=o[0],u=o[1],c=(0,s.Z)(e,2),h=(0,s.Z)(c[0],2),d=h[0],f=h[1],p=(0,s.Z)(c[1],2),v=p[0],m=p[1];return[xT(i,d,f,l),xT(a,v,m,u)]}(t._bounds,t.offset,B),t.delta=gT(t.offset,A),this.computeMovement(),x&&(!t.last||i>32)){t.delta=gT(t.offset,A);var R=t.delta.map(Math.abs);yT(t.distance,R),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&i>0&&(t.velocity=[R[0]/i,R[1]/i],t.timeDelta=i)}}}},{key:"emit",value:function(){var e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),!e._blocked&&e.intentional||e._force||n.triggerAllEvents){var r=this.handler(ET(ET(ET({},t),e),{},(0,L.Z)({},this.aliasKey,e.values)));void 0!==r&&(e.memo=r)}}},{key:"clean",value:function(){this.eventStore.clean(),this.timeoutStore.clean()}}]),e}();var HT=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),_T((0,Il.Z)(e),"aliasKey","xy"),e}return(0,c.Z)(n,[{key:"reset",value:function(){(0,Zn.Z)((0,zn.Z)(n.prototype),"reset",this).call(this),this.state.axis=void 0}},{key:"init",value:function(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}},{key:"computeOffset",value:function(){this.state.offset=mT(this.state.lastOffset,this.state.movement)}},{key:"computeMovement",value:function(){this.state.movement=gT(this.state.offset,this.state.lastOffset)}},{key:"axisIntent",value:function(e){var t=this.state,n=this.config;if(!t.axis&&e){var r="object"===typeof n.axisThreshold?n.axisThreshold[RT(e)]:n.axisThreshold;t.axis=function(e,t){var n=(0,s.Z)(e,2),r=n[0],i=n[1],a=Math.abs(r),o=Math.abs(i);return a>o&&a>t?"x":o>a&&o>t?"y":void 0}(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}},{key:"restrictToAxis",value:function(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}]),n}(zT),GT=function(e){return e},QT={enabled:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},eventOptions:function(e,t,n){return ET(ET({},n.shared.eventOptions),e)},preventDefault:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},triggerAllEvents:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},rubberband:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return vT(e)}},from:function(e){return"function"===typeof e?e:null!=e?vT(e):void 0},transform:function(e,t,n){var r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||GT},threshold:function(e){return vT(e,0)}};var VT=ET(ET({},QT),{},{axis:function(e,t,n){var r=n.axis;if(this.lockDirection="lock"===r,!this.lockDirection)return r},axisThreshold:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},bounds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"===typeof e)return function(t){return VT.bounds(e(t))};if("current"in e)return function(){return e.current};if("function"===typeof HTMLElement&&e instanceof HTMLElement)return e;var t=e.left,n=void 0===t?-1/0:t,r=e.right,i=void 0===r?1/0:r,a=e.top,o=void 0===a?-1/0:a,s=e.bottom;return[[n,i],[o,void 0===s?1/0:s]]}}),jT={ArrowRight:function(e){return[e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),0]},ArrowLeft:function(e){return[-1*e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),0]},ArrowUp:function(e){return[0,-1*e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)]},ArrowDown:function(e){return[0,e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)]}},WT=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),_T((0,Il.Z)(e),"ingKey","dragging"),e}return(0,c.Z)(n,[{key:"reset",value:function(){(0,Zn.Z)((0,zn.Z)(n.prototype),"reset",this).call(this);var e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}},{key:"setup",value:function(){var e=this.state;if(e._bounds instanceof HTMLElement){var t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=VT.bounds(r)}}},{key:"cancel",value:function(){var e=this,t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout((function(){e.compute(),e.emit()}),0))}},{key:"setActive",value:function(){this.state._active=this.state._pointerActive||this.state._keyboardActive}},{key:"clean",value:function(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,(0,Zn.Z)((0,zn.Z)(n.prototype),"clean",this).call(this)}},{key:"pointerDown",value:function(e){var t=this.config,n=this.state;if(null==e.buttons||(Array.isArray(t.pointerButtons)?t.pointerButtons.includes(e.buttons):-1===t.pointerButtons||t.pointerButtons===e.buttons)){var r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),r&&r.size>1&&n._pointerActive||(this.start(e),this.setupPointer(e),n._pointerId=DT(e),n._pointerActive=!0,this.computeValues(OT(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==RT(e)?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}}},{key:"startPointerDrag",value:function(e){var t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}},{key:"pointerMove",value:function(e){var t=this.state,n=this.config;if(t._pointerActive){var r=DT(e);if(void 0===t._pointerId||r===t._pointerId){var i=OT(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=gT(i,t._values),this.computeValues(i)),yT(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):n.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}}}},{key:"pointerUp",value:function(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(w){0}var t=this.state,n=this.config;if(t._active&&t._pointerActive){var r=DT(e);if(void 0===t._pointerId||r===t._pointerId){this.state._pointerActive=!1,this.setActive(),this.compute(e);var i=(0,s.Z)(t._distance,2),a=i[0],o=i[1];if(t.tap=a<=n.tapsThreshold&&o<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{var l=(0,s.Z)(t._delta,2),u=l[0],c=l[1],h=(0,s.Z)(t._movement,2),d=h[0],f=h[1],p=(0,s.Z)(n.swipe.velocity,2),v=p[0],m=p[1],g=(0,s.Z)(n.swipe.distance,2),y=g[0],A=g[1],x=n.swipe.duration;if(t.elapsedTime<x){var b=Math.abs(u/t.timeDelta),_=Math.abs(c/t.timeDelta);b>v&&Math.abs(d)>y&&(t.swipe[0]=Math.sign(u)),_>m&&Math.abs(f)>A&&(t.swipe[1]=Math.sign(c))}}this.emit()}}}},{key:"pointerClick",value:function(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}},{key:"setupPointer",value:function(e){var t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}},{key:"pointerClean",value:function(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}},{key:"preventScroll",value:function(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}},{key:"setupScrollPrevention",value:function(e){this.state._preventScroll=!1,function(e){"persist"in e&&"function"===typeof e.persist&&e.persist()}(e);var t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}},{key:"setupDelayTrigger",value:function(e){var t=this;this.state._delayed=!0,this.timeoutStore.add("dragDelay",(function(){t.state._step=[0,0],t.startPointerDrag(e)}),this.config.delay)}},{key:"keyDown",value:function(e){var t=jT[e.key];if(t){var n=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,r),n._keyboardActive=!0,yT(n._movement,n._delta),this.compute(e),this.emit()}}},{key:"keyUp",value:function(e){e.key in jT&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}},{key:"bind",value:function(e){var t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}]),n}(HT);var qT="undefined"!==typeof window&&window.document&&window.document.createElement;function JT(){return qT&&"ontouchstart"in window||qT&&window.navigator.maxTouchPoints>1}var XT={isBrowser:qT,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:JT(),touchscreen:JT(),pointer:qT&&"onpointerdown"in window,pointerLock:qT&&"exitPointerLock"in window.document},YT={mouse:0,touch:0,pen:8},KT=ET(ET({},VT),{},{device:function(e,t,n){var r=n.pointer,i=void 0===r?{}:r,a=i.touch,o=void 0!==a&&a,s=i.lock,l=void 0!==s&&s,u=i.mouse,c=void 0!==u&&u;return this.pointerLock=l&&XT.pointerLock,XT.touch&&o?"touch":this.pointerLock?"mouse":XT.pointer&&!c?"pointer":XT.touch?"touch":"mouse"},preventScrollAxis:function(e,t,n){var r=n.preventScroll;if(this.preventScrollDelay="number"===typeof r?r:r||void 0===r&&e?250:void 0,XT.touchscreen&&!1!==r)return e||(void 0!==r?"y":void 0)},pointerCapture:function(e,t,n){var r=n.pointer,i=void 0===r?{}:r,a=i.capture,o=void 0===a||a,s=i.buttons,l=void 0===s?1:s,u=i.keys,c=void 0===u||u;return this.pointerButtons=l,this.keys=c,!this.pointerLock&&"pointer"===this.device&&o},threshold:function(e,t,n){var r=n.filterTaps,i=void 0!==r&&r,a=n.tapsThreshold,o=void 0===a?3:a,s=n.axis,l=vT(e,i?o:(void 0===s?void 0:s)?1:0);return this.filterTaps=i,this.tapsThreshold=o,l},swipe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.velocity,n=void 0===t?.5:t,r=e.distance,i=void 0===r?50:r,a=e.duration,o=void 0===a?250:a;return{velocity:this.transform(vT(n)),distance:this.transform(vT(i)),duration:o}},delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:function(e){return e?ET(ET({},YT),e):YT},keyboardDisplacement:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:10}});ET(ET({},QT),{},{device:function(e,t,n){var r=n.shared,i=n.pointer,a=(void 0===i?{}:i).touch,o=void 0!==a&&a;if(r.target&&!XT.touch&&XT.gesture)return"gesture";if(XT.touch&&o)return"touch";if(XT.touchscreen){if(XT.pointer)return"pointer";if(XT.touch)return"touch"}},bounds:function(e,t,n){var r=n.scaleBounds,i=void 0===r?{}:r,a=n.angleBounds,o=void 0===a?{}:a,s=function(e){var t=ZT(FT(i,e),{min:-1/0,max:1/0});return[t.min,t.max]},l=function(e){var t=ZT(FT(o,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!==typeof i&&"function"!==typeof o?[s(),l()]:function(e){return[s(e),l(e)]}},threshold:function(e,t,n){this.lockDirection="lock"===n.axis;var r=vT(e,this.lockDirection?[.1,3]:0);return r},modifierKey:function(e){return void 0===e?"ctrlKey":e},pinchOnWheel:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),ET(ET({},VT),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),ET(ET({},VT),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}});var $T=new Map,eI=new Map;var tI={key:"drag",engine:WT,resolver:KT};function nI(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var rI={target:function(e){if(e)return function(){return"current"in e?e.current:e}},enabled:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:XT.isBrowser?window:void 0})),eventOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.passive,n=void 0===t||t,r=e.capture;return{passive:n,capture:void 0!==r&&r}},transform:function(e){return e}},iI=["target","eventOptions","window","enabled","transform"];function aI(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={},r=0,i=Object.entries(t);r<i.length;r++){var a=(0,s.Z)(i[r],2),o=a[0],l=a[1];switch(typeof l){case"function":n[o]=l.call(n,e[o],o,e);break;case"object":n[o]=aI(e[o],l);break;case"boolean":l&&(n[o]=e[o])}}return n}var oI=function(){function e(t,n){(0,u.Z)(this,e),_T(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}return(0,c.Z)(e,[{key:"add",value:function(e,t,n,r,i){var a=this._listeners,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=ST[e];return e+(n&&n[t]||t)}(t,n),s=ET(ET({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),i);e.addEventListener(o,r,s);var l=function t(){e.removeEventListener(o,r,s),a.delete(t)};return a.add(l),l}},{key:"clean",value:function(){this._listeners.forEach((function(e){return e()})),this._listeners.clear()}}]),e}(),sI=function(){function e(){(0,u.Z)(this,e),_T(this,"_timeouts",new Map)}return(0,c.Z)(e,[{key:"add",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:140;this.remove(e);for(var i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];this._timeouts.set(e,(n=window).setTimeout.apply(n,[t,r].concat(a)))}},{key:"remove",value:function(e){var t=this._timeouts.get(e);t&&window.clearTimeout(t)}},{key:"clean",value:function(){this._timeouts.forEach((function(e){window.clearTimeout(e)})),this._timeouts.clear()}}]),e}(),lI=function(){function e(t){(0,u.Z)(this,e),_T(this,"gestures",new Set),_T(this,"_targetEventStore",new oI(this)),_T(this,"gestureEventStores",{}),_T(this,"gestureTimeoutStores",{}),_T(this,"handlers",{}),_T(this,"config",{}),_T(this,"pointerIds",new Set),_T(this,"touchIds",new Set),_T(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&uI(e,"drag");t.wheel&&uI(e,"wheel");t.scroll&&uI(e,"scroll");t.move&&uI(e,"move");t.pinch&&uI(e,"pinch");t.hover&&uI(e,"hover")}(this,t)}return(0,c.Z)(e,[{key:"setEventIds",value:function(e){return BT(e)?(this.touchIds=new Set(PT(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}},{key:"applyHandlers",value:function(e,t){this.handlers=e,this.nativeHandlers=t}},{key:"applyConfig",value:function(e,t){this.config=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e,i=r.target,a=r.eventOptions,o=r.window,s=r.enabled,l=r.transform,u=nI(r,iI);if(n.shared=aI({target:i,eventOptions:a,window:o,enabled:s,transform:l},rI),t){var c=eI.get(t);n[t]=aI(ET({shared:n.shared},u),c)}else for(var h in u){var d=eI.get(h);d&&(n[h]=aI(ET({shared:n.shared},u[h]),d))}return n}(e,t,this.config)}},{key:"clean",value:function(){this._targetEventStore.clean();var e,t=(0,Ms.Z)(this.gestures);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.gestureEventStores[n].clean(),this.gestureTimeoutStores[n].clean()}}catch(r){t.e(r)}finally{t.f()}}},{key:"effect",value:function(){var e=this;return this.config.shared.target&&this.bind(),function(){return e._targetEventStore.clean()}}},{key:"bind",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i,a=this.config.shared,o={};if(!a.target||(i=a.target())){if(a.enabled){var s,l=(0,Ms.Z)(this.gestures);try{for(l.s();!(s=l.n()).done;){var u=s.value,c=this.config[u],h=cI(o,c.eventOptions,!!i);if(c.enabled)new($T.get(u))(this,n,u).bind(h)}}catch(b){l.e(b)}finally{l.f()}var d=cI(o,a.eventOptions,!!i),f=function(t){d(t,"",(function(r){return e.nativeHandlers[t](ET(ET({},e.state.shared),{},{event:r,args:n}))}),void 0,!0)};for(var p in this.nativeHandlers)f(p)}for(var v in o)o[v]=UT.apply(void 0,(0,O.Z)(o[v]));if(!i)return o;for(var m in o){var g=IT(m),y=g.device,A=g.capture,x=g.passive;this._targetEventStore.add(i,y,"",o[m],{capture:A,passive:x})}}}}]),e}();function uI(e,t){e.gestures.add(t),e.gestureEventStores[t]=new oI(e,t),e.gestureTimeoutStores[t]=new sI}var cI=function(e,t,n){return function(r,i,a){var o,s,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=null!==(o=l.capture)&&void 0!==o?o:t.capture,h=null!==(s=l.passive)&&void 0!==s?s:t.passive,d=u?r:kT(r,i,c);n&&h&&(d+="Passive"),e[d]=e[d]||[],e[d].push(a)}};function hI(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=t.useMemo((function(){return new lI(e)}),[]);if(a.applyHandlers(e,i),a.applyConfig(n,r),t.useEffect(a.effect.bind(a)),t.useEffect((function(){return a.clean.bind(a)}),[]),void 0===n.target)return a.bind.bind(a)}function dI(e,t){var n;return n=tI,$T.set(n.key,n.engine),eI.set(n.key,n.resolver),hI({drag:e},t||{},"drag")}function fI(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).checkForDefaultPrevented,r=void 0===n||n;return function(n){if(null===e||void 0===e||e(n),!1===r||!n.defaultPrevented)return null===t||void 0===t?void 0:t(n)}}var pI=["scope","children"];function vI(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];var i=function(){var n=r.map((function(e){return(0,t.createContext)(e)}));return function(r){var i=(null===r||void 0===r?void 0:r[e])||n;return(0,t.useMemo)((function(){return(0,L.Z)({},"__scope".concat(e),D(D({},r),{},(0,L.Z)({},e,i)))}),[r,i])}};return i.scopeName=e,[function(n,i){var a=(0,t.createContext)(i),o=r.length;function s(n){var r=n.scope,i=n.children,s=We(n,pI),l=(null===r||void 0===r?void 0:r[e][o])||a,u=(0,t.useMemo)((function(){return s}),Object.values(s));return(0,t.createElement)(l.Provider,{value:u},i)}return r=[].concat((0,O.Z)(r),[i]),s.displayName=n+"Provider",[s,function(r,s){var l=(null===s||void 0===s?void 0:s[e][o])||a,u=(0,t.useContext)(l);if(u)return u;if(void 0!==i)return i;throw new Error("`".concat(r,"` must be used within `").concat(n,"`"))}]},mI.apply(void 0,[i].concat((0,O.Z)(n)))]}function mI(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(1===n.length)return i;var a=function(){var e=n.map((function(e){return{useScope:e(),scopeName:e.scopeName}}));return function(n){var r=e.reduce((function(e,t){var r=t.useScope,i=t.scopeName,a=r(n)["__scope".concat(i)];return D(D({},e),a)}),{});return(0,t.useMemo)((function(){return(0,L.Z)({},"__scope".concat(i.scopeName),r)}),[r])}};return a.scopeName=i.scopeName,a}function gI(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e})),(0,t.useMemo)((function(){return function(){for(var e,t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return null===(t=n.current)||void 0===t?void 0:(e=t).call.apply(e,[n].concat(i))}}),[])}var yI,AI=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"],xI="dismissableLayer.update",bI="dismissableLayer.pointerDownOutside",_I="dismissableLayer.focusOutside",wI=(0,t.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),EI=(0,t.forwardRef)((function(e,n){var r,i=e.disableOutsidePointerEvents,a=void 0!==i&&i,o=e.onEscapeKeyDown,l=e.onPointerDownOutside,u=e.onFocusOutside,c=e.onInteractOutside,h=e.onDismiss,d=We(e,AI),f=(0,t.useContext)(wI),p=(0,t.useState)(null),v=(0,s.Z)(p,2),m=v[0],g=v[1],y=null!==(r=null===m||void 0===m?void 0:m.ownerDocument)&&void 0!==r?r:null===globalThis||void 0===globalThis?void 0:globalThis.document,A=(0,t.useState)({}),x=(0,s.Z)(A,2)[1],b=FC(n,(function(e){return g(e)})),_=Array.from(f.layers),w=(0,O.Z)(f.layersWithOutsidePointerEventsDisabled).slice(-1),E=(0,s.Z)(w,1)[0],S=_.indexOf(E),M=m?_.indexOf(m):-1,C=f.layersWithOutsidePointerEventsDisabled.size>0,k=M>=S,T=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,r=gI(e),i=(0,t.useRef)(!1),a=(0,t.useRef)((function(){}));return(0,t.useEffect)((function(){var e=function(e){if(e.target&&!i.current){var t=function(){MI(bI,r,o,{discrete:!0})},o={originalEvent:e};"touch"===e.pointerType?(n.removeEventListener("click",a.current),a.current=t,n.addEventListener("click",a.current,{once:!0})):t()}i.current=!1},t=window.setTimeout((function(){n.addEventListener("pointerdown",e)}),0);return function(){window.clearTimeout(t),n.removeEventListener("pointerdown",e),n.removeEventListener("click",a.current)}}),[n,r]),{onPointerDownCapture:function(){return i.current=!0}}}((function(e){var t=e.target,n=(0,O.Z)(f.branches).some((function(e){return e.contains(t)}));k&&!n&&(null===l||void 0===l||l(e),null===c||void 0===c||c(e),e.defaultPrevented||null===h||void 0===h||h())}),y),I=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,r=gI(e),i=(0,t.useRef)(!1);return(0,t.useEffect)((function(){var e=function(e){e.target&&!i.current&&MI(_I,r,{originalEvent:e},{discrete:!1})};return n.addEventListener("focusin",e),function(){return n.removeEventListener("focusin",e)}}),[n,r]),{onFocusCapture:function(){return i.current=!0},onBlurCapture:function(){return i.current=!1}}}((function(e){var t=e.target;(0,O.Z)(f.branches).some((function(e){return e.contains(t)}))||(null===u||void 0===u||u(e),null===c||void 0===c||c(e),e.defaultPrevented||null===h||void 0===h||h())}),y);return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,r=gI(e);(0,t.useEffect)((function(){var e=function(e){"Escape"===e.key&&r(e)};return n.addEventListener("keydown",e),function(){return n.removeEventListener("keydown",e)}}),[r,n])}((function(e){M===f.layers.size-1&&(null===o||void 0===o||o(e),!e.defaultPrevented&&h&&(e.preventDefault(),h()))}),y),(0,t.useEffect)((function(){if(m)return a&&(0===f.layersWithOutsidePointerEventsDisabled.size&&(yI=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),SI(),function(){a&&1===f.layersWithOutsidePointerEventsDisabled.size&&(y.body.style.pointerEvents=yI)}}),[m,y,a,f]),(0,t.useEffect)((function(){return function(){m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),SI())}}),[m,f]),(0,t.useEffect)((function(){var e=function(){return x({})};return document.addEventListener(xI,e),function(){return document.removeEventListener(xI,e)}}),[]),(0,t.createElement)(VC.div,sM({},d,{ref:b,style:D({pointerEvents:C?k?"auto":"none":void 0},e.style),onFocusCapture:fI(e.onFocusCapture,I.onFocusCapture),onBlurCapture:fI(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:fI(e.onPointerDownCapture,T.onPointerDownCapture)}))}));function SI(){var e=new CustomEvent(xI);document.dispatchEvent(e)}function MI(e,t,n,r){var i=r.discrete,a=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),i?function(e,t){e&&(0,l.flushSync)((function(){return e.dispatchEvent(t)}))}(a,o):a.dispatchEvent(o)}var CI=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?t.useLayoutEffect:function(){},kI=r["useId".toString()]||function(){},TI=0;var II=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],BI=["strategy"],RI=["mainAxis","crossAxis","limiter"],LI=["apply"];function PI(e){return e.split("-")[1]}function DI(e){return"y"===e?"height":"width"}function OI(e){return e.split("-")[0]}function FI(e){return["top","bottom"].includes(OI(e))?"x":"y"}function NI(e,t,n){var r,i=e.reference,a=e.floating,o=i.x+i.width/2-a.width/2,s=i.y+i.height/2-a.height/2,l=FI(t),u=DI(l),c=i[u]/2-a[u]/2,h="x"===l;switch(OI(t)){case"top":r={x:o,y:i.y-a.height};break;case"bottom":r={x:o,y:i.y+i.height};break;case"right":r={x:i.x+i.width,y:s};break;case"left":r={x:i.x-a.width,y:s};break;default:r={x:i.x,y:i.y}}switch(PI(t)){case"start":r[l]-=c*(n&&h?-1:1);break;case"end":r[l]+=c*(n&&h?-1:1)}return r}var UI=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,s,l,u,c,h,d,f,p,v,m,g,y,A,x,b,_,w,E,S,M,C,k,T,I;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.placement,o=void 0===i?"bottom":i,s=r.strategy,l=void 0===s?"absolute":s,u=r.middleware,c=void 0===u?[]:u,h=r.platform,d=c.filter(Boolean),e.next=10,null==h.isRTL?void 0:h.isRTL(n);case 10:return f=e.sent,e.next=13,h.getElementRects({reference:t,floating:n,strategy:l});case 13:p=e.sent,v=NI(p,o,f),m=v.x,g=v.y,y=o,A={},x=0,b=0;case 21:if(!(b<d.length)){e.next=56;break}return w=d[b],E=w.name,S=w.fn,e.next=27,S({x:m,y:g,initialPlacement:o,placement:y,strategy:l,middlewareData:A,rects:p,platform:h,elements:{reference:t,floating:n}});case 27:if(M=e.sent,C=M.x,k=M.y,T=M.data,I=M.reset,m=null!=C?C:m,g=null!=k?k:g,A=D(D({},A),{},(0,L.Z)({},E,D(D({},A[E]),T))),e.t0=I&&x<=50,!e.t0){e.next=53;break}if(x++,e.t1="object"==typeof I,!e.t1){e.next=52;break}if(I.placement&&(y=I.placement),e.t2=I.rects,!e.t2){e.next=51;break}if(!0!==I.rects){e.next=49;break}return e.next=46,h.getElementRects({reference:t,floating:n,strategy:l});case 46:e.t3=e.sent,e.next=50;break;case 49:e.t3=I.rects;case 50:p=e.t3;case 51:_=NI(p,y,f),m=_.x,g=_.y;case 52:b=-1;case 53:b++,e.next=21;break;case 56:return e.abrupt("return",{x:m,y:g,placement:y,strategy:l,middlewareData:A});case 57:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function ZI(e,t){return"function"==typeof e?e(t):e}function zI(e){return"number"!=typeof e?function(e){return D({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function HI(e){return D(D({},e),{},{top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height})}function GI(e,t){return QI.apply(this,arguments)}function QI(){return QI=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,s,l,u,c,h,d,f,p,v,m,g,y,A,x,b,_,w,E,S,M,C;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),i=t.x,o=t.y,s=t.platform,l=t.rects,u=t.elements,c=t.strategy,h=ZI(n,t),d=h.boundary,f=void 0===d?"clippingAncestors":d,p=h.rootBoundary,v=void 0===p?"viewport":p,m=h.elementContext,g=void 0===m?"floating":m,y=h.altBoundary,A=void 0!==y&&y,x=h.padding,b=zI(void 0===x?0:x),_=u[A?"floating"===g?"reference":"floating":g],e.t0=HI,e.t1=s,e.next=24,null==s.isElement?void 0:s.isElement(_);case 24:if(e.t3=r=e.sent,e.t2=null==e.t3,e.t2){e.next=28;break}e.t2=r;case 28:if(!e.t2){e.next=32;break}e.t4=_,e.next=38;break;case 32:if(e.t5=_.contextElement,e.t5){e.next=37;break}return e.next=36,null==s.getDocumentElement?void 0:s.getDocumentElement(u.floating);case 36:e.t5=e.sent;case 37:e.t4=e.t5;case 38:return e.t6=e.t4,e.t7=f,e.t8=v,e.t9=c,e.t10={element:e.t6,boundary:e.t7,rootBoundary:e.t8,strategy:e.t9},e.next=45,e.t1.getClippingRect.call(e.t1,e.t10);case 45:return e.t11=e.sent,w=(0,e.t0)(e.t11),E="floating"===g?D(D({},l.floating),{},{x:i,y:o}):l.reference,e.next=50,null==s.getOffsetParent?void 0:s.getOffsetParent(u.floating);case 50:return S=e.sent,e.next=53,null==s.isElement?void 0:s.isElement(S);case 53:if(e.t13=e.sent,!e.t13){e.next=58;break}return e.next=57,null==s.getScale?void 0:s.getScale(S);case 57:e.t13=e.sent;case 58:if(e.t12=e.t13,e.t12){e.next=61;break}e.t12={x:1,y:1};case 61:if(M=e.t12,e.t14=HI,!s.convertOffsetParentRelativeRectToViewportRelativeRect){e.next=69;break}return e.next=66,s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:E,offsetParent:S,strategy:c});case 66:e.t15=e.sent,e.next=70;break;case 69:e.t15=E;case 70:return e.t16=e.t15,C=(0,e.t14)(e.t16),e.abrupt("return",{top:(w.top-C.top+b.top)/M.y,bottom:(C.bottom-w.bottom+b.bottom)/M.y,left:(w.left-C.left+b.left)/M.x,right:(C.right-w.right+b.right)/M.x});case 73:case"end":return e.stop()}}),e)}))),QI.apply(this,arguments)}var VI=Math.min,jI=Math.max;function WI(e,t,n){return jI(e,VI(t,n))}var qI=function(e){return{name:"arrow",options:e,fn:function(t){return(0,o.Z)((0,a.Z)().mark((function n(){var r,i,o,s,l,u,c,h,d,f,p,v,m,g,y,A,x,b,_,w,E,S,M,C,k,T,I,B,R,P,D,O,F,N;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.x,s=t.y,l=t.placement,u=t.rects,c=t.platform,h=t.elements,d=ZI(e,t)||{},f=d.element,p=d.padding,v=void 0===p?0:p,null!=f){n.next=3;break}return n.abrupt("return",{});case 3:return m=zI(v),g={x:o,y:s},y=FI(l),A=DI(y),n.next=9,c.getDimensions(f);case 9:return x=n.sent,_=(b="y"===y)?"top":"left",w=b?"bottom":"right",E=b?"clientHeight":"clientWidth",S=u.reference[A]+u.reference[y]-g[y]-u.floating[A],M=g[y]-u.reference[y],n.next=18,null==c.getOffsetParent?void 0:c.getOffsetParent(f);case 18:if(C=n.sent,k=C?C[E]:0,n.t0=k,!n.t0){n.next=25;break}return n.next=24,null==c.isElement?void 0:c.isElement(C);case 24:n.t0=n.sent;case 25:if(n.t1=n.t0,n.t1){n.next=28;break}k=h.floating[E]||u.floating[A];case 28:return T=S/2-M/2,I=k/2-x[A]/2-1,B=VI(m[_],I),R=VI(m[w],I),P=B,D=k-x[A]-R,O=k/2-x[A]/2+T,F=WI(P,O,D),N=null!=PI(l)&&O!=F&&u.reference[A]/2-(O<P?B:R)-x[A]/2<0?O<P?P-O:D-O:0,n.abrupt("return",(i={},(0,L.Z)(i,y,g[y]-N),(0,L.Z)(i,"data",(r={},(0,L.Z)(r,y,F),(0,L.Z)(r,"centerOffset",O-F+N),r)),i));case 30:case"end":return n.stop()}}),n)})))()}}},JI=["top","right","bottom","left"],XI=(JI.reduce((function(e,t){return e.concat(t,t+"-start",t+"-end")}),[]),{left:"right",right:"left",bottom:"top",top:"bottom"});function YI(e){return e.replace(/left|right|bottom|top/g,(function(e){return XI[e]}))}function KI(e,t,n){void 0===n&&(n=!1);var r=PI(e),i=FI(e),a=DI(i),o="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=YI(o)),{main:o,cross:YI(o)}}var $I={start:"end",end:"start"};function eB(e){return e.replace(/start|end/g,(function(e){return $I[e]}))}var tB=function(e){return void 0===e&&(e={}),{name:"flip",options:e,fn:function(t){return(0,o.Z)((0,a.Z)().mark((function n(){var r,i,o,s,l,u,c,h,d,f,p,v,m,g,y,A,x,b,_,w,E,S,M,C,k,T,I,B,R,L,P,D,F,N,U,Z,z,H;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.placement,o=t.middlewareData,s=t.rects,l=t.initialPlacement,u=t.platform,c=t.elements,h=ZI(e,t),d=h.mainAxis,f=void 0===d||d,p=h.crossAxis,v=void 0===p||p,m=h.fallbackPlacements,g=h.fallbackStrategy,y=void 0===g?"bestFit":g,A=h.fallbackAxisSideDirection,x=void 0===A?"none":A,b=h.flipAlignment,_=void 0===b||b,w=We(h,II),E=OI(i),S=OI(l)===l,n.next=23,null==u.isRTL?void 0:u.isRTL(c.floating);case 23:return M=n.sent,C=m||(S||!_?[YI(l)]:function(e){var t=YI(e);return[eB(e),t,eB(t)]}(l)),m||"none"===x||C.push.apply(C,(0,O.Z)(function(e,t,n,r){var i=PI(e),a=function(e,t,n){var r=["left","right"],i=["right","left"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(OI(e),"start"===n,r);return i&&(a=a.map((function(e){return e+"-"+i})),t&&(a=a.concat(a.map(eB)))),a}(l,_,x,M))),k=[l].concat((0,O.Z)(C)),n.next=29,GI(t,w);case 29:if(T=n.sent,I=[],B=(null==(r=o.flip)?void 0:r.overflows)||[],f&&I.push(T[E]),v&&(R=KI(i,s,M),L=R.main,P=R.cross,I.push(T[L],T[P])),B=[].concat((0,O.Z)(B),[{placement:i,overflows:I}]),I.every((function(e){return e<=0}))){n.next=48;break}if(N=((null==(D=o.flip)?void 0:D.index)||0)+1,!(U=k[N])){n.next=37;break}return n.abrupt("return",{data:{index:N,overflows:B},reset:{placement:U}});case 37:if(Z=null==(F=B.filter((function(e){return e.overflows[0]<=0})).sort((function(e,t){return e.overflows[1]-t.overflows[1]}))[0])?void 0:F.placement,Z){n.next=46;break}n.t0=y,n.next="bestFit"===n.t0?42:"initialPlacement"===n.t0?45:46;break;case 42:return H=null==(z=B.map((function(e){return[e.placement,e.overflows.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0)]})).sort((function(e,t){return e[1]-t[1]}))[0])?void 0:z[0],H&&(Z=H),n.abrupt("break",46);case 45:Z=l;case 46:if(i===Z){n.next=48;break}return n.abrupt("return",{reset:{placement:Z}});case 48:return n.abrupt("return",{});case 49:case"end":return n.stop()}}),n)})))()}}};function nB(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function rB(e){return JI.some((function(t){return e[t]>=0}))}var iB=function(e){return void 0===e&&(e={}),{name:"hide",options:e,fn:function(t){return(0,o.Z)((0,a.Z)().mark((function n(){var r,i,o,s,l,u,c;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=t.rects,i=ZI(e,t),o=i.strategy,s=void 0===o?"referenceHidden":o,l=We(i,BI),n.t0=s,n.next="referenceHidden"===n.t0?4:"escaped"===n.t0?11:18;break;case 4:return n.t1=nB,n.next=7,GI(t,D(D({},l),{},{elementContext:"reference"}));case 7:return n.t2=n.sent,n.t3=r.reference,u=(0,n.t1)(n.t2,n.t3),n.abrupt("return",{data:{referenceHiddenOffsets:u,referenceHidden:rB(u)}});case 11:return n.t4=nB,n.next=14,GI(t,D(D({},l),{},{altBoundary:!0}));case 14:return n.t5=n.sent,n.t6=r.floating,c=(0,n.t4)(n.t5,n.t6),n.abrupt("return",{data:{escapedOffsets:c,escaped:rB(c)}});case 18:return n.abrupt("return",{});case 19:case"end":return n.stop()}}),n)})))()}}};var aB=function(e){return void 0===e&&(e=0),{name:"offset",options:e,fn:function(t){return(0,o.Z)((0,a.Z)().mark((function n(){var r,i,s;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.x,i=t.y,n.next=4,function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,s,l,u,c,h,d,f,p,v,m,g;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.placement,i=t.platform,o=t.elements,e.next=5,null==i.isRTL?void 0:i.isRTL(o.floating);case 5:return s=e.sent,l=OI(r),u=PI(r),c="x"===FI(r),h=["left","top"].includes(l)?-1:1,d=s&&c?-1:1,f=ZI(n,t),p="number"==typeof f?{mainAxis:f,crossAxis:0,alignmentAxis:null}:D({mainAxis:0,crossAxis:0,alignmentAxis:null},f),v=p.mainAxis,m=p.crossAxis,g=p.alignmentAxis,e.abrupt("return",(u&&"number"==typeof g&&(m="end"===u?-1*g:g),c?{x:m*d,y:v*h}:{x:v*h,y:m*d}));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,e);case 4:return s=n.sent,n.abrupt("return",{x:r+s.x,y:i+s.y,data:s});case 6:case"end":return n.stop()}}),n)})))()}}};function oB(e){return"x"===e?"y":"x"}var sB=function(e){return void 0===e&&(e={}),{name:"shift",options:e,fn:function(t){return(0,o.Z)((0,a.Z)().mark((function n(){var r,i,o,s,l,u,c,h,d,f,p,v,m,g,y,A,x,b,_,w,E;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.x,o=t.y,s=t.placement,l=ZI(e,t),u=l.mainAxis,c=void 0===u||u,h=l.crossAxis,d=void 0!==h&&h,f=l.limiter,p=void 0===f?{fn:function(e){return{x:e.x,y:e.y}}}:f,v=We(l,RI),m={x:i,y:o},n.next=14,GI(t,v);case 14:return g=n.sent,y=FI(OI(s)),A=oB(y),x=m[y],b=m[A],c&&(_="y"===y?"bottom":"right",x=WI(x+g["y"===y?"top":"left"],x,x-g[_])),d&&(w="y"===A?"bottom":"right",b=WI(b+g["y"===A?"top":"left"],b,b-g[w])),E=p.fn(D(D({},t),{},(r={},(0,L.Z)(r,y,x),(0,L.Z)(r,A,b),r))),n.abrupt("return",D(D({},E),{},{data:{x:E.x-i,y:E.y-o}}));case 22:case"end":return n.stop()}}),n)})))()}}},lB=function(e){return void 0===e&&(e={}),{options:e,fn:function(t){var n,r=t.x,i=t.y,a=t.placement,o=t.rects,s=t.middlewareData,l=ZI(e,t),u=l.offset,c=void 0===u?0:u,h=l.mainAxis,d=void 0===h||h,f=l.crossAxis,p=void 0===f||f,v={x:r,y:i},m=FI(a),g=oB(m),y=v[m],A=v[g],x=ZI(c,t),b="number"==typeof x?{mainAxis:x,crossAxis:0}:D({mainAxis:0,crossAxis:0},x);if(d){var _="y"===m?"height":"width",w=o.reference[m]-o.floating[_]+b.mainAxis,E=o.reference[m]+o.reference[_]-b.mainAxis;y<w?y=w:y>E&&(y=E)}if(p){var S,M,C="y"===m?"width":"height",k=["top","left"].includes(OI(a)),T=o.reference[g]-o.floating[C]+(k&&(null==(S=s.offset)?void 0:S[g])||0)+(k?0:b.crossAxis),I=o.reference[g]+o.reference[C]+(k?0:(null==(M=s.offset)?void 0:M[g])||0)-(k?b.crossAxis:0);A<T?A=T:A>I&&(A=I)}return n={},(0,L.Z)(n,m,y),(0,L.Z)(n,g,A),n}}},uB=function(e){return void 0===e&&(e={}),{name:"size",options:e,fn:function(t){return(0,o.Z)((0,a.Z)().mark((function n(){var r,i,o,s,l,u,c,h,d,f,p,v,m,g,y,A,x,b,_,w,E,S,M,C,k,T,I,B,R;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.placement,i=t.rects,o=t.platform,s=t.elements,l=ZI(e,t),u=l.apply,c=void 0===u?function(){}:u,h=We(l,LI),n.next=10,GI(t,h);case 10:if(d=n.sent,f=OI(r),p=PI(r),v="x"===FI(r),m=i.floating,g=m.width,y=m.height,"top"!==f&&"bottom"!==f){n.next=36;break}return A=f,n.t0=p,n.next=22,null==o.isRTL?void 0:o.isRTL(s.floating);case 22:if(!n.sent){n.next=26;break}n.t1="start",n.next=27;break;case 26:n.t1="end";case 27:if(n.t2=n.t1,n.t0!==n.t2){n.next=32;break}n.t3="left",n.next=33;break;case 32:n.t3="right";case 33:x=n.t3,n.next=37;break;case 36:x=f,A="end"===p?"top":"bottom";case 37:return b=y-d[A],_=g-d[x],w=!t.middlewareData.shift,E=b,S=_,v?(M=g-d.left-d.right,S=p||w?VI(_,M):M):(C=y-d.top-d.bottom,E=p||w?VI(b,C):C),w&&!p&&(k=jI(d.left,0),T=jI(d.right,0),I=jI(d.top,0),B=jI(d.bottom,0),v?S=g-2*(0!==k||0!==T?k+T:jI(d.left,d.right)):E=y-2*(0!==I||0!==B?I+B:jI(d.top,d.bottom))),n.next=43,c(D(D({},t),{},{availableWidth:S,availableHeight:E}));case 43:return n.next=45,o.getDimensions(s.floating);case 45:return R=n.sent,n.abrupt("return",g!==R.width||y!==R.height?{reset:{rects:!0}}:{});case 47:case"end":return n.stop()}}),n)})))()}}};function cB(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function hB(e){return cB(e).getComputedStyle(e)}function dB(e){return e instanceof cB(e).Node}function fB(e){return dB(e)?(e.nodeName||"").toLowerCase():"#document"}function pB(e){return e instanceof HTMLElement||e instanceof cB(e).HTMLElement}function vB(e){return"undefined"!=typeof ShadowRoot&&(e instanceof cB(e).ShadowRoot||e instanceof ShadowRoot)}function mB(e){var t=hB(e),n=t.overflow,r=t.overflowX,i=t.overflowY,a=t.display;return/auto|scroll|overlay|hidden|clip/.test(n+i+r)&&!["inline","contents"].includes(a)}function gB(e){return["table","td","th"].includes(fB(e))}function yB(e){var t=AB(),n=hB(e);return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((function(e){return(n.willChange||"").includes(e)}))||["paint","layout","strict","content"].some((function(e){return(n.contain||"").includes(e)}))}function AB(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function xB(e){return["html","body","#document"].includes(fB(e))}var bB=Math.min,_B=Math.max,wB=Math.round,EB=Math.floor,SB=function(e){return{x:e,y:e}};function MB(e){var t=hB(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,i=pB(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:r,s=wB(n)!==a||wB(r)!==o;return s&&(n=a,r=o),{width:n,height:r,$:s}}function CB(e){return e instanceof Element||e instanceof cB(e).Element}function kB(e){return CB(e)?e:e.contextElement}function TB(e){var t=kB(e);if(!pB(t))return SB(1);var n=t.getBoundingClientRect(),r=MB(t),i=r.width,a=r.height,o=r.$,s=(o?wB(n.width):n.width)/i,l=(o?wB(n.height):n.height)/a;return s&&Number.isFinite(s)||(s=1),l&&Number.isFinite(l)||(l=1),{x:s,y:l}}var IB=SB(0);function BB(e){var t=cB(e);return AB()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:IB}function RB(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),a=kB(e),o=SB(1);t&&(r?CB(r)&&(o=TB(r)):o=TB(e));var s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==cB(e))&&t}(a,n,r)?BB(a):SB(0),l=(i.left+s.x)/o.x,u=(i.top+s.y)/o.y,c=i.width/o.x,h=i.height/o.y;if(a)for(var d=cB(a),f=r&&CB(r)?cB(r):r,p=d.frameElement;p&&r&&f!==d;){var v=TB(p),m=p.getBoundingClientRect(),g=getComputedStyle(p),y=m.left+(p.clientLeft+parseFloat(g.paddingLeft))*v.x,A=m.top+(p.clientTop+parseFloat(g.paddingTop))*v.y;l*=v.x,u*=v.y,c*=v.x,h*=v.y,l+=y,u+=A,p=cB(p).frameElement}return HI({width:c,height:h,x:l,y:u})}function LB(e){return CB(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function PB(e){var t;return null==(t=(dB(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function DB(e){return RB(PB(e)).left+LB(e).scrollLeft}function OB(e){if("html"===fB(e))return e;var t=e.assignedSlot||e.parentNode||vB(e)&&e.host||PB(e);return vB(t)?t.host:t}function FB(e){var t=OB(e);return xB(t)?e.ownerDocument?e.ownerDocument.body:e.body:pB(t)&&mB(t)?t:FB(t)}function NB(e,t){var n;void 0===t&&(t=[]);var r=FB(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),a=cB(r);return i?t.concat(a,a.visualViewport||[],mB(r)?r:[]):t.concat(r,NB(r))}function UB(e,t,n){var r;if("viewport"===t)r=function(e,t){var n=cB(e),r=PB(e),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;var u=AB();(!u||u&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s,y:l}}(e,n);else if("document"===t)r=function(e){var t=PB(e),n=LB(e),r=e.ownerDocument.body,i=_B(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=_B(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight),o=-n.scrollLeft+DB(e),s=-n.scrollTop;return"rtl"===hB(r).direction&&(o+=_B(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:s}}(PB(e));else if(CB(t))r=function(e,t){var n=RB(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,a=pB(e)?TB(e):SB(1);return{width:e.clientWidth*a.x,height:e.clientHeight*a.y,x:i*a.x,y:r*a.y}}(t,n);else{var i=BB(e);r=D(D({},t),{},{x:t.x-i.x,y:t.y-i.y})}return HI(r)}function ZB(e,t){var n=OB(e);return!(n===t||!CB(n)||xB(n))&&("fixed"===hB(n).position||ZB(n,t))}function zB(e,t,n){var r=pB(t),i=PB(t),a="fixed"===n,o=RB(e,!0,a,t),s={scrollLeft:0,scrollTop:0},l=SB(0);if(r||!r&&!a)if(("body"!==fB(t)||mB(i))&&(s=LB(t)),pB(t)){var u=RB(t,!0,a,t);l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}else i&&(l.x=DB(i));return{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function HB(e,t){return pB(e)&&"fixed"!==hB(e).position?t?t(e):e.offsetParent:null}function GB(e,t){var n=cB(e);if(!pB(e))return n;for(var r=HB(e,t);r&&gB(r)&&"static"===hB(r).position;)r=HB(r,t);return r&&("html"===fB(r)||"body"===fB(r)&&"static"===hB(r).position&&!yB(r))?n:r||function(e){for(var t=OB(e);pB(t)&&!xB(t);){if(yB(t))return t;t=OB(t)}return null}(e)||n}var QB={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){var t=e.rect,n=e.offsetParent,r=e.strategy,i=pB(n),a=PB(n);if(n===a)return t;var o={scrollLeft:0,scrollTop:0},s=SB(1),l=SB(0);if((i||!i&&"fixed"!==r)&&(("body"!==fB(n)||mB(a))&&(o=LB(n)),pB(n))){var u=RB(n);s=TB(n),l.x=u.x+n.clientLeft,l.y=u.y+n.clientTop}return{width:t.width*s.x,height:t.height*s.y,x:t.x*s.x-o.scrollLeft*s.x+l.x,y:t.y*s.y-o.scrollTop*s.y+l.y}},getDocumentElement:PB,getClippingRect:function(e){var t=e.element,n=e.boundary,r=e.rootBoundary,i=e.strategy,a=[].concat((0,O.Z)("clippingAncestors"===n?function(e,t){var n=t.get(e);if(n)return n;for(var r=NB(e).filter((function(e){return CB(e)&&"body"!==fB(e)})),i=null,a="fixed"===hB(e).position,o=a?OB(e):e;CB(o)&&!xB(o);){var s=hB(o),l=yB(o);l||"fixed"!==s.position||(i=null),(a?!l&&!i:!l&&"static"===s.position&&i&&["absolute","fixed"].includes(i.position)||mB(o)&&!l&&ZB(e,o))?r=r.filter((function(e){return e!==o})):i=s,o=OB(o)}return t.set(e,r),r}(t,this._c):[].concat(n)),[r]),o=a[0],s=a.reduce((function(e,n){var r=UB(t,n,i);return e.top=_B(r.top,e.top),e.right=bB(r.right,e.right),e.bottom=bB(r.bottom,e.bottom),e.left=_B(r.left,e.left),e}),UB(t,o,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:GB,getElementRects:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.reference,r=t.floating,i=t.strategy,o=this.getOffsetParent||GB,s=this.getDimensions,e.t0=zB,e.t1=n,e.next=6,o(r);case 6:return e.t2=e.sent,e.t3=i,e.t4=(0,e.t0)(e.t1,e.t2,e.t3),e.t5=D,e.t6={x:0,y:0},e.next=13,s(r);case 13:return e.t7=e.sent,e.t8=(0,e.t5)(e.t6,e.t7),e.abrupt("return",{reference:e.t4,floating:e.t8});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){return MB(e)},getScale:TB,isElement:CB,isRTL:function(e){return"rtl"===getComputedStyle(e).direction}};function VB(e,t,n,r){void 0===r&&(r={});var i=r,a=i.ancestorScroll,o=void 0===a||a,l=i.ancestorResize,u=void 0===l||l,c=i.elementResize,h=void 0===c?"function"==typeof ResizeObserver:c,d=i.layoutShift,f=void 0===d?"function"==typeof IntersectionObserver:d,p=i.animationFrame,v=void 0!==p&&p,m=kB(e),g=o||u?[].concat((0,O.Z)(m?NB(m):[]),(0,O.Z)(NB(t))):[];g.forEach((function(e){o&&e.addEventListener("scroll",n,{passive:!0}),u&&e.addEventListener("resize",n)}));var y,A=m&&f?function(e,t){var n,r=null,i=PB(e);function a(){clearTimeout(n),r&&r.disconnect(),r=null}return function o(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),a();var u=e.getBoundingClientRect(),c=u.left,h=u.top,d=u.width,f=u.height;if(s||t(),d&&f){var p={rootMargin:-EB(h)+"px "+-EB(i.clientWidth-(c+d))+"px "+-EB(i.clientHeight-(h+f))+"px "+-EB(c)+"px",threshold:_B(0,bB(1,l))||1},v=!0;try{r=new IntersectionObserver(m,D(D({},p),{},{root:i.ownerDocument}))}catch(e){r=new IntersectionObserver(m,p)}r.observe(e)}function m(e){var t=e[0].intersectionRatio;if(t!==l){if(!v)return o();t?o(!1,t):n=setTimeout((function(){o(!1,1e-7)}),100)}v=!1}}(!0),a}(m,n):null,x=-1,b=null;h&&(b=new ResizeObserver((function(e){var r=(0,s.Z)(e,1)[0];r&&r.target===m&&b&&(b.unobserve(t),cancelAnimationFrame(x),x=requestAnimationFrame((function(){b&&b.observe(t)}))),n()})),m&&!v&&b.observe(m),b.observe(t));var _=v?RB(e):null;return v&&function t(){var r=RB(e);!_||r.x===_.x&&r.y===_.y&&r.width===_.width&&r.height===_.height||n(),_=r,y=requestAnimationFrame(t)}(),n(),function(){g.forEach((function(e){o&&e.removeEventListener("scroll",n),u&&e.removeEventListener("resize",n)})),A&&A(),b&&b.disconnect(),b=null,v&&cancelAnimationFrame(y)}}var jB="undefined"!==typeof document?t.useLayoutEffect:t.useEffect;function WB(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;var n,r,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(r=n;0!==r--;)if(!WB(e[r],t[r]))return!1;return!0}if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){var a=i[r];if(("_owner"!==a||!e.$$typeof)&&!WB(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function qB(e){return"undefined"===typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function JB(e,t){var n=qB(e);return Math.round(t*n)/n}function XB(e){var n=t.useRef(e);return jB((function(){n.current=e})),n}function YB(e){void 0===e&&(e={});var n=e,r=n.placement,i=void 0===r?"bottom":r,a=n.strategy,o=void 0===a?"absolute":a,u=n.middleware,c=void 0===u?[]:u,h=n.platform,d=n.elements,f=void 0===d?{}:d,p=f.reference,v=f.floating,m=n.transform,g=void 0===m||m,y=n.whileElementsMounted,A=n.open,x=t.useState({x:0,y:0,strategy:o,placement:i,middlewareData:{},isPositioned:!1}),b=(0,s.Z)(x,2),_=b[0],w=b[1],E=t.useState(c),S=(0,s.Z)(E,2),M=S[0],C=S[1];WB(M,c)||C(c);var k=t.useState(null),T=(0,s.Z)(k,2),I=T[0],B=T[1],R=t.useState(null),L=(0,s.Z)(R,2),P=L[0],O=L[1],F=t.useCallback((function(e){e!=z.current&&(z.current=e,B(e))}),[B]),N=t.useCallback((function(e){e!==H.current&&(H.current=e,O(e))}),[O]),U=p||I,Z=v||P,z=t.useRef(null),H=t.useRef(null),G=t.useRef(_),Q=XB(y),V=XB(h),j=t.useCallback((function(){if(z.current&&H.current){var e={placement:i,strategy:o,middleware:M};V.current&&(e.platform=V.current),function(e,t,n){var r=new Map,i=D({platform:QB},n),a=D(D({},i.platform),{},{_c:r});return UI(e,t,D(D({},i),{},{platform:a}))}(z.current,H.current,e).then((function(e){var t=D(D({},e),{},{isPositioned:!0});W.current&&!WB(G.current,t)&&(G.current=t,l.flushSync((function(){w(t)})))}))}}),[M,i,o,V]);jB((function(){!1===A&&G.current.isPositioned&&(G.current.isPositioned=!1,w((function(e){return D(D({},e),{},{isPositioned:!1})})))}),[A]);var W=t.useRef(!1);jB((function(){return W.current=!0,function(){W.current=!1}}),[]),jB((function(){if(U&&(z.current=U),Z&&(H.current=Z),U&&Z){if(Q.current)return Q.current(U,Z,j);j()}}),[U,Z,j,Q]);var q=t.useMemo((function(){return{reference:z,floating:H,setReference:F,setFloating:N}}),[F,N]),J=t.useMemo((function(){return{reference:U,floating:Z}}),[U,Z]),X=t.useMemo((function(){var e={position:o,left:0,top:0};if(!J.floating)return e;var t=JB(J.floating,_.x),n=JB(J.floating,_.y);return g?D(D({},e),{},{transform:"translate("+t+"px, "+n+"px)"},qB(J.floating)>=1.5&&{willChange:"transform"}):{position:o,left:t,top:n}}),[o,g,J.floating,_.x,_.y]);return t.useMemo((function(){return D(D({},_),{},{update:j,refs:q,elements:J,floatingStyles:X})}),[_,j,q,J,X])}var KB=["children","width","height"],$B=(0,t.forwardRef)((function(e,n){var r=e.children,i=e.width,a=void 0===i?10:i,o=e.height,s=void 0===o?5:o,l=We(e,KB);return(0,t.createElement)(VC.svg,sM({},l,{ref:n,width:a,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),e.asChild?r:(0,t.createElement)("polygon",{points:"0,0 30,0 15,10"}))})),eR=$B;var tR=["__scopePopper","virtualRef"],nR=["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions","onPlaced"],rR=["__scopePopper"],iR="Popper",aR=vI(iR),oR=(0,s.Z)(aR,2),sR=oR[0],lR=oR[1],uR=sR(iR),cR=(0,s.Z)(uR,2),hR=cR[0],dR=cR[1],fR=function(e){var n=e.__scopePopper,r=e.children,i=(0,t.useState)(null),a=(0,s.Z)(i,2),o=a[0],l=a[1];return(0,t.createElement)(hR,{scope:n,anchor:o,onAnchorChange:l},r)},pR="PopperAnchor",vR=(0,t.forwardRef)((function(e,n){var r=e.__scopePopper,i=e.virtualRef,a=We(e,tR),o=dR(pR,r),s=(0,t.useRef)(null),l=FC(n,s);return(0,t.useEffect)((function(){o.onAnchorChange((null===i||void 0===i?void 0:i.current)||s.current)})),i?null:(0,t.createElement)(VC.div,sM({},a,{ref:l}))})),mR="PopperContent",gR=sR(mR),yR=(0,s.Z)(gR,2),AR=yR[0],xR=yR[1],bR=(0,t.forwardRef)((function(e,n){var r,i,a,o,l,u,c,h,d,f=e.__scopePopper,p=e.side,v=void 0===p?"bottom":p,m=e.sideOffset,g=void 0===m?0:m,y=e.align,A=void 0===y?"center":y,x=e.alignOffset,b=void 0===x?0:x,_=e.arrowPadding,w=void 0===_?0:_,E=e.collisionBoundary,S=void 0===E?[]:E,M=e.collisionPadding,C=void 0===M?0:M,k=e.sticky,T=void 0===k?"partial":k,I=e.hideWhenDetached,B=void 0!==I&&I,R=e.avoidCollisions,P=void 0===R||R,O=e.onPlaced,F=We(e,nR),N=dR(mR,f),U=(0,t.useState)(null),Z=(0,s.Z)(U,2),z=Z[0],H=Z[1],G=FC(n,(function(e){return H(e)})),Q=(0,t.useState)(null),V=(0,s.Z)(Q,2),j=V[0],W=V[1],q=function(e){var n=(0,t.useState)(void 0),r=(0,s.Z)(n,2),i=r[0],a=r[1];return CI((function(){if(e){a({width:e.offsetWidth,height:e.offsetHeight});var t=new ResizeObserver((function(t){if(Array.isArray(t)&&t.length){var n,r,i=t[0];if("borderBoxSize"in i){var o=i.borderBoxSize,s=Array.isArray(o)?o[0]:o;n=s.inlineSize,r=s.blockSize}else n=e.offsetWidth,r=e.offsetHeight;a({width:n,height:r})}}));return t.observe(e,{box:"border-box"}),function(){return t.unobserve(e)}}a(void 0)}),[e]),i}(j),J=null!==(r=null===q||void 0===q?void 0:q.width)&&void 0!==r?r:0,X=null!==(i=null===q||void 0===q?void 0:q.height)&&void 0!==i?i:0,Y=v+("center"!==A?"-"+A:""),K="number"===typeof C?C:D({top:0,right:0,bottom:0,left:0},C),$=Array.isArray(S)?S:[S],ee=$.length>0,te={padding:K,boundary:$.filter(SR),altBoundary:ee},ne=YB({strategy:"fixed",placement:Y,whileElementsMounted:VB,elements:{reference:N.anchor},middleware:[aB({mainAxis:g+X,alignmentAxis:b}),P&&sB(D({mainAxis:!0,crossAxis:!1,limiter:"partial"===T?lB():void 0},te)),P&&tB(D({},te)),uB(D(D({},te),{},{apply:function(e){var t=e.elements,n=e.rects,r=e.availableWidth,i=e.availableHeight,a=n.reference,o=a.width,s=a.height,l=t.floating.style;l.setProperty("--radix-popper-available-width","".concat(r,"px")),l.setProperty("--radix-popper-available-height","".concat(i,"px")),l.setProperty("--radix-popper-anchor-width","".concat(o,"px")),l.setProperty("--radix-popper-anchor-height","".concat(s,"px"))}})),j&&(d={element:j,padding:w},{name:"arrow",options:d,fn:function(e){var t,n="function"===typeof d?d(e):d,r=n.element,i=n.padding;return r&&(t=r,{}.hasOwnProperty.call(t,"current"))?null!=r.current?qI({element:r.current,padding:i}).fn(e):{}:r?qI({element:r,padding:i}).fn(e):{}}}),MR({arrowWidth:J,arrowHeight:X}),B&&iB({strategy:"referenceHidden"})]}),re=ne.refs,ie=ne.floatingStyles,ae=ne.placement,oe=ne.isPositioned,se=ne.middlewareData,le=CR(ae),ue=(0,s.Z)(le,2),ce=ue[0],he=ue[1],de=gI(O);CI((function(){oe&&(null===de||void 0===de||de())}),[oe,de]);var fe=null===(a=se.arrow)||void 0===a?void 0:a.x,pe=null===(o=se.arrow)||void 0===o?void 0:o.y,ve=0!==(null===(l=se.arrow)||void 0===l?void 0:l.centerOffset),me=(0,t.useState)(),ge=(0,s.Z)(me,2),ye=ge[0],Ae=ge[1];return CI((function(){z&&Ae(window.getComputedStyle(z).zIndex)}),[z]),(0,t.createElement)("div",{ref:re.setFloating,"data-radix-popper-content-wrapper":"",style:D(D({},ie),{},(0,L.Z)({transform:oe?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ye},"--radix-popper-transform-origin",[null===(u=se.transformOrigin)||void 0===u?void 0:u.x,null===(c=se.transformOrigin)||void 0===c?void 0:c.y].join(" "))),dir:e.dir},(0,t.createElement)(AR,{scope:f,placedSide:ce,onArrowChange:W,arrowX:fe,arrowY:pe,shouldHideArrow:ve},(0,t.createElement)(VC.div,sM({"data-side":ce,"data-align":he},F,{ref:G,style:D(D({},F.style),{},{animation:oe?void 0:"none",opacity:null!==(h=se.hide)&&void 0!==h&&h.referenceHidden?0:void 0})}))))})),_R="PopperArrow",wR={top:"bottom",right:"left",bottom:"top",left:"right"},ER=(0,t.forwardRef)((function(e,n){var r,i=e.__scopePopper,a=We(e,rR),o=xR(_R,i),s=wR[o.placedSide];return(0,t.createElement)("span",{ref:o.onArrowChange,style:(r={position:"absolute",left:o.arrowX,top:o.arrowY},(0,L.Z)(r,s,0),(0,L.Z)(r,"transformOrigin",{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide]),(0,L.Z)(r,"transform",{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide]),(0,L.Z)(r,"visibility",o.shouldHideArrow?"hidden":void 0),r)},(0,t.createElement)(eR,sM({},a,{ref:n,style:D(D({},a.style),{},{display:"block"})})))}));function SR(e){return null!==e}var MR=function(e){return{name:"transformOrigin",options:e,fn:function(t){var n,r,i,a,o,l=t.placement,u=t.rects,c=t.middlewareData,h=0!==(null===(n=c.arrow)||void 0===n?void 0:n.centerOffset),d=h?0:e.arrowWidth,f=h?0:e.arrowHeight,p=CR(l),v=(0,s.Z)(p,2),m=v[0],g={start:"0%",center:"50%",end:"100%"}[v[1]],y=(null!==(r=null===(i=c.arrow)||void 0===i?void 0:i.x)&&void 0!==r?r:0)+d/2,A=(null!==(a=null===(o=c.arrow)||void 0===o?void 0:o.y)&&void 0!==a?a:0)+f/2,x="",b="";return"bottom"===m?(x=h?g:"".concat(y,"px"),b="".concat(-f,"px")):"top"===m?(x=h?g:"".concat(y,"px"),b="".concat(u.floating.height+f,"px")):"right"===m?(x="".concat(-f,"px"),b=h?g:"".concat(A,"px")):"left"===m&&(x="".concat(u.floating.width+f,"px"),b=h?g:"".concat(A,"px")),{data:{x:x,y:b}}}}};function CR(e){var t=e.split("-"),n=(0,s.Z)(t,2),r=n[0],i=n[1];return[r,void 0===i?"center":i]}var kR=fR,TR=vR,IR=bR,BR=ER;var RR=function(e){var n=e.present,r=e.children,i=function(e){var n=(0,t.useState)(),r=(0,s.Z)(n,2),i=r[0],a=r[1],o=(0,t.useRef)({}),u=(0,t.useRef)(e),c=(0,t.useRef)("none"),h=e?"mounted":"unmounted",d=function(e,n){return(0,t.useReducer)((function(e,t){var r=n[e][t];return null!==r&&void 0!==r?r:e}),e)}(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),f=(0,s.Z)(d,2),p=f[0],v=f[1];return(0,t.useEffect)((function(){var e=LR(o.current);c.current="mounted"===p?e:"none"}),[p]),CI((function(){var t=o.current,n=u.current;if(n!==e){var r=c.current,i=LR(t);if(e)v("MOUNT");else if("none"===i||"none"===(null===t||void 0===t?void 0:t.display))v("UNMOUNT");else{v(n&&r!==i?"ANIMATION_OUT":"UNMOUNT")}u.current=e}}),[e,v]),CI((function(){if(i){var e=function(e){var t=LR(o.current).includes(e.animationName);e.target===i&&t&&(0,l.flushSync)((function(){return v("ANIMATION_END")}))},t=function(e){e.target===i&&(c.current=LR(o.current))};return i.addEventListener("animationstart",t),i.addEventListener("animationcancel",e),i.addEventListener("animationend",e),function(){i.removeEventListener("animationstart",t),i.removeEventListener("animationcancel",e),i.removeEventListener("animationend",e)}}v("ANIMATION_END")}),[i,v]),{isPresent:["mounted","unmountSuspended"].includes(p),ref:(0,t.useCallback)((function(e){e&&(o.current=getComputedStyle(e)),a(e)}),[])}}(n),a="function"===typeof r?r({present:i.isPresent}):t.Children.only(r),o=FC(i.ref,a.ref);return"function"===typeof r||i.isPresent?(0,t.cloneElement)(a,{ref:o}):null};function LR(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}function PR(e){var n=e.prop,r=e.defaultProp,i=e.onChange,a=void 0===i?function(){}:i,o=function(e){var n=e.defaultProp,r=e.onChange,i=(0,t.useState)(n),a=(0,s.Z)(i,1)[0],o=(0,t.useRef)(a),l=gI(r);return(0,t.useEffect)((function(){o.current!==a&&(l(a),o.current=a)}),[a,o,l]),i}({defaultProp:r,onChange:a}),l=(0,s.Z)(o,2),u=l[0],c=l[1],h=void 0!==n,d=h?n:u,f=gI(a);return[d,(0,t.useCallback)((function(e){if(h){var t="function"===typeof e?e(n):e;t!==n&&f(t)}else c(e)}),[h,n,c,f])]}RR.displayName="Presence";var DR=(0,t.forwardRef)((function(e,n){return(0,t.createElement)(VC.span,sM({},e,{ref:n,style:D({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},e.style)}))})),OR=DR,FR=["__scopeTooltip"],NR=["forceMount","side"],UR=["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"],ZR=["__scopeTooltip"],zR=vI("Tooltip",[lR]),HR=(0,s.Z)(zR,2),GR=HR[0],QR=(HR[1],lR()),VR="TooltipProvider",jR="tooltip.open",WR=GR(VR),qR=(0,s.Z)(WR,2),JR=(qR[0],qR[1]),XR="Tooltip",YR=GR(XR),KR=(0,s.Z)(YR,2),$R=KR[0],eL=KR[1],tL=function(e){var n=e.__scopeTooltip,r=e.children,i=e.open,a=e.defaultOpen,o=void 0!==a&&a,l=e.onOpenChange,u=e.disableHoverableContent,c=e.delayDuration,h=JR(XR,e.__scopeTooltip),d=QR(n),f=(0,t.useState)(null),p=(0,s.Z)(f,2),v=p[0],m=p[1],g=function(e){var n=t.useState(kI()),r=(0,s.Z)(n,2),i=r[0],a=r[1];return CI((function(){e||a((function(e){return null!==e&&void 0!==e?e:String(TI++)}))}),[e]),e||(i?"radix-".concat(i):"")}(),y=(0,t.useRef)(0),A=null!==u&&void 0!==u?u:h.disableHoverableContent,x=null!==c&&void 0!==c?c:h.delayDuration,b=(0,t.useRef)(!1),_=PR({prop:i,defaultProp:o,onChange:function(e){e?(h.onOpen(),document.dispatchEvent(new CustomEvent(jR))):h.onClose(),null===l||void 0===l||l(e)}}),w=(0,s.Z)(_,2),E=w[0],S=void 0!==E&&E,M=w[1],C=(0,t.useMemo)((function(){return S?b.current?"delayed-open":"instant-open":"closed"}),[S]),k=(0,t.useCallback)((function(){window.clearTimeout(y.current),b.current=!1,M(!0)}),[M]),T=(0,t.useCallback)((function(){window.clearTimeout(y.current),M(!1)}),[M]),I=(0,t.useCallback)((function(){window.clearTimeout(y.current),y.current=window.setTimeout((function(){b.current=!0,M(!0)}),x)}),[x,M]);return(0,t.useEffect)((function(){return function(){return window.clearTimeout(y.current)}}),[]),(0,t.createElement)(kR,d,(0,t.createElement)($R,{scope:n,contentId:g,open:S,stateAttribute:C,trigger:v,onTriggerChange:m,onTriggerEnter:(0,t.useCallback)((function(){h.isOpenDelayed?I():k()}),[h.isOpenDelayed,I,k]),onTriggerLeave:(0,t.useCallback)((function(){A?T():window.clearTimeout(y.current)}),[T,A]),onOpen:k,onClose:T,disableHoverableContent:A},r))},nL="TooltipTrigger",rL=(0,t.forwardRef)((function(e,n){var r=e.__scopeTooltip,i=We(e,FR),a=eL(nL,r),o=JR(nL,r),s=QR(r),l=FC(n,(0,t.useRef)(null),a.onTriggerChange),u=(0,t.useRef)(!1),c=(0,t.useRef)(!1),h=(0,t.useCallback)((function(){return u.current=!1}),[]);return(0,t.useEffect)((function(){return function(){return document.removeEventListener("pointerup",h)}}),[h]),(0,t.createElement)(TR,sM({asChild:!0},s),(0,t.createElement)(VC.button,sM({"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute},i,{ref:l,onPointerMove:fI(e.onPointerMove,(function(e){"touch"!==e.pointerType&&(c.current||o.isPointerInTransitRef.current||(a.onTriggerEnter(),c.current=!0))})),onPointerLeave:fI(e.onPointerLeave,(function(){a.onTriggerLeave(),c.current=!1})),onPointerDown:fI(e.onPointerDown,(function(){u.current=!0,document.addEventListener("pointerup",h,{once:!0})})),onFocus:fI(e.onFocus,(function(){u.current||a.onOpen()})),onBlur:fI(e.onBlur,a.onClose),onClick:fI(e.onClick,a.onClose)})))})),iL="TooltipPortal",aL=GR(iL,{forceMount:void 0}),oL=(0,s.Z)(aL,2),sL=(oL[0],oL[1]),lL="TooltipContent",uL=(0,t.forwardRef)((function(e,n){var r=sL(lL,e.__scopeTooltip),i=e.forceMount,a=void 0===i?r.forceMount:i,o=e.side,s=void 0===o?"top":o,l=We(e,NR),u=eL(lL,e.__scopeTooltip);return(0,t.createElement)(RR,{present:a||u.open},u.disableHoverableContent?(0,t.createElement)(vL,sM({side:s},l,{ref:n})):(0,t.createElement)(cL,sM({side:s},l,{ref:n})))})),cL=(0,t.forwardRef)((function(e,n){var r=eL(lL,e.__scopeTooltip),i=JR(lL,e.__scopeTooltip),a=(0,t.useRef)(null),o=FC(n,a),l=(0,t.useState)(null),u=(0,s.Z)(l,2),c=u[0],h=u[1],d=r.trigger,f=r.onClose,p=a.current,v=i.onPointerInTransitChange,m=(0,t.useCallback)((function(){h(null),v(!1)}),[v]),g=(0,t.useCallback)((function(e,t){var n=e.currentTarget,r={x:e.clientX,y:e.clientY},i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return r}(r,function(e,t){var n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,i,a)){case a:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,n.getBoundingClientRect())),a=function(e){var t=e.top,n=e.right,r=e.bottom,i=e.left;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}(t.getBoundingClientRect()),o=function(e){var t=e.slice();return t.sort((function(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0})),function(e){if(e.length<=1)return e.slice();for(var t=[],n=0;n<e.length;n++){for(var r=e[n];t.length>=2;){var i=t[t.length-1],a=t[t.length-2];if(!((i.x-a.x)*(r.y-a.y)>=(i.y-a.y)*(r.x-a.x)))break;t.pop()}t.push(r)}t.pop();for(var o=[],s=e.length-1;s>=0;s--){for(var l=e[s];o.length>=2;){var u=o[o.length-1],c=o[o.length-2];if(!((u.x-c.x)*(l.y-c.y)>=(u.y-c.y)*(l.x-c.x)))break;o.pop()}o.push(l)}return o.pop(),1===t.length&&1===o.length&&t[0].x===o[0].x&&t[0].y===o[0].y?t:t.concat(o)}(t)}([].concat((0,O.Z)(i),(0,O.Z)(a)));h(o),v(!0)}),[v]);return(0,t.useEffect)((function(){return function(){return m()}}),[m]),(0,t.useEffect)((function(){if(d&&p){var e=function(e){return g(e,p)},t=function(e){return g(e,d)};return d.addEventListener("pointerleave",e),p.addEventListener("pointerleave",t),function(){d.removeEventListener("pointerleave",e),p.removeEventListener("pointerleave",t)}}}),[d,p,g,m]),(0,t.useEffect)((function(){if(c){var e=function(e){var t=e.target,n={x:e.clientX,y:e.clientY},r=(null===d||void 0===d?void 0:d.contains(t))||(null===p||void 0===p?void 0:p.contains(t)),i=!function(e,t){for(var n=e.x,r=e.y,i=!1,a=0,o=t.length-1;a<t.length;o=a++){var s=t[a].x,l=t[a].y,u=t[o].x,c=t[o].y;l>r!==c>r&&n<(u-s)*(r-l)/(c-l)+s&&(i=!i)}return i}(n,c);r?m():i&&(m(),f())};return document.addEventListener("pointermove",e),function(){return document.removeEventListener("pointermove",e)}}}),[d,p,c,f,m]),(0,t.createElement)(vL,sM({},e,{ref:o}))})),hL=GR(XR,{isInside:!1}),dL=(0,s.Z)(hL,2),fL=dL[0],pL=dL[1],vL=(0,t.forwardRef)((function(e,n){var r=e.__scopeTooltip,i=e.children,a=e["aria-label"],o=e.onEscapeKeyDown,s=e.onPointerDownOutside,l=We(e,UR),u=eL(lL,r),c=QR(r),h=u.onClose;return(0,t.useEffect)((function(){return document.addEventListener(jR,h),function(){return document.removeEventListener(jR,h)}}),[h]),(0,t.useEffect)((function(){if(u.trigger){var e=function(e){var t=e.target;null!==t&&void 0!==t&&t.contains(u.trigger)&&h()};return window.addEventListener("scroll",e,{capture:!0}),function(){return window.removeEventListener("scroll",e,{capture:!0})}}}),[u.trigger,h]),(0,t.createElement)(EI,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:function(e){return e.preventDefault()},onDismiss:h},(0,t.createElement)(IR,sM({"data-state":u.stateAttribute},c,l,{ref:n,style:D(D({},l.style),{},{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"})}),(0,t.createElement)(HC,null,i),(0,t.createElement)(fL,{scope:r,isInside:!0},(0,t.createElement)(OR,{id:u.contentId,role:"tooltip"},a||i))))})),mL="TooltipArrow",gL=(0,t.forwardRef)((function(e,n){var r=e.__scopeTooltip,i=We(e,ZR),a=QR(r);return pL(mL,r).isInside?null:(0,t.createElement)(BR,sM({},a,i,{ref:n}))}));var yL,AL,xL,bL,_L,wL=tL,EL=rL,SL=uL,ML=gL;function CL(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}!function(e){e[e.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",e[e.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",e[e.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",e[e.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",e[e.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",e[e.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",e[e.THEME_ERROR=6]="THEME_ERROR",e[e.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",e[e.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",e[e.EMPTY_KEY=9]="EMPTY_KEY"}(_L||(_L={}));var kL=(yL={},(0,L.Z)(yL,_L.UNSUPPORTED_INPUT,(function(e,t){return["An input with type `".concat(e,"` input was found at path `").concat(t,"` but it's not supported yet.")]})),(0,L.Z)(yL,_L.NO_COMPONENT_FOR_TYPE,(function(e,t){return["Type `".concat(e,"` found at path `").concat(t,"` can't be displayed in panel because no component supports it yet.")]})),(0,L.Z)(yL,_L.UNKNOWN_INPUT,(function(e,t){return["input at path `".concat(e,"` is not recognized."),t]})),(0,L.Z)(yL,_L.DUPLICATE_KEYS,(function(e,t,n){return["Key `".concat(e,"` of path `").concat(t,"` already exists at path `").concat(n,"`. Even nested keys need to be unique. Rename one of the keys.")]})),(0,L.Z)(yL,_L.ALREADY_REGISTERED_TYPE,(function(e){return["Type ".concat(e," has already been registered. You can't register a component with the same type.")]})),(0,L.Z)(yL,_L.CLIPBOARD_ERROR,(function(e){return["Error copying the value",e]})),(0,L.Z)(yL,_L.THEME_ERROR,(function(e,t){return["Error accessing the theme `".concat(e,".").concat(t,"` value.")]})),(0,L.Z)(yL,_L.PATH_DOESNT_EXIST,(function(e){return["Error getting the value at path `".concat(e,"`. There is probably an error in your `render` function.")]})),(0,L.Z)(yL,_L.PATH_DOESNT_EXIST,(function(e){return["Error accessing the value at path `".concat(e,"`")]})),(0,L.Z)(yL,_L.INPUT_TYPE_OVERRIDE,(function(e,t,n){return["Input at path `".concat(e,"` already exists with type: `").concat(t,"`. Its type cannot be overridden with type `").concat(n,"`.")]})),(0,L.Z)(yL,_L.EMPTY_KEY,(function(){return["Keys can not be empty, if you want to hide a label use whitespace."]})),yL);function TL(e,t){for(var n,r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var o=FE(kL[t].apply(kL,i)),s=o[0],l=o.slice(1);(n=console)[e].apply(n,["LEVA: "+s].concat((0,O.Z)(l)))}var IL=TL.bind(null,"warn"),BL=TL.bind(null,"log"),RL=["value"],LL=["schema"],PL=["value"],DL=[],OL={};function FL(e){var t,n=e.value,r=CL(e,RL),i=(0,Ms.Z)(DL);try{for(i.s();!(t=i.n()).done;){var a=(0,t.value)(n,r);if(a)return a}}catch(o){i.e(o)}finally{i.f()}}function NL(e,t){var n=t.schema,r=CL(t,LL);e in OL?IL(_L.ALREADY_REGISTERED_TYPE,e):(DL.push((function(t,r){return n(t,r)&&e})),OL[e]=r)}function UL(e,t,n,r){var i=OL[e].normalize;return i?i(t,n,r):"object"===typeof t&&"value"in t?{value:t.value,settings:CL(t,PL)}:{value:t}}function ZL(e,t,n){var r=OL[e].format;return r?r(t,n):t}function zL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HL(Object(n),!0).forEach((function(t){zL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var QL=function(e,t,n){return e>n?n:e<t?t:e},VL=function(e){if(""===e||"number"===typeof e)return e;try{var t=nP(e);if(!isNaN(t))return t}catch(n){}return parseFloat(e)},jL=Math.log(10);function WL(e){var t=Math.abs(+String(e).replace(".",""));if(0===t)return.01;for(;0!==t&&t%10===0;)t/=10;var n=Math.floor(Math.log(t)/jL)+1,r=Math.floor(Math.log10(Math.abs(e))),i=Math.pow(10,r-n);return Math.max(i,.001)}var qL=function(e,t,n){return n===t?0:(QL(e,t,n)-t)/(n-t)},JL=function(e,t,n){return e*(n-t)+t},XL=/\(([0-9+\-*/^ .]+)\)/,YL=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,KL=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,$L=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,eP=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,tP=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function nP(e){if(isNaN(Number(e))){if(XL.test(e)){var t=e.replace(XL,(function(e,t){return String(nP(t))}));return nP(t)}if(YL.test(e))return nP(e.replace(YL,(function(e,t,n){return String(Math.pow(Number(t),Number(n)))})));if(KL.test(e)){var n=e.replace(KL,(function(e,t,n){return String(Number(t)*Number(n))}));return nP(n)}if($L.test(e)){var r=e.replace($L,(function(e,t,n){if(0!=n)return String(Number(t)/Number(n));throw new Error("Division by zero")}));return nP(r)}if(eP.test(e)){var i=e.replace(eP,(function(e,t,n){return String(Number(t)+Number(n))}));return nP(i)}if(tP.test(e)){var a=e.replace(tP,(function(e,t,n){return String(Number(t)-Number(n))}));return nP(a)}return Number(e)}return Number(e)}function rP(e){return"[object Object]"===Object.prototype.toString.call(e)}var iP,aP,oP=function(e){return rP(e)&&0===Object.keys(e).length};!function(e){e.BUTTON="BUTTON",e.BUTTON_GROUP="BUTTON_GROUP",e.MONITOR="MONITOR",e.FOLDER="FOLDER"}(iP||(iP={})),function(e){e.SELECT="SELECT",e.IMAGE="IMAGE",e.NUMBER="NUMBER",e.COLOR="COLOR",e.STRING="STRING",e.BOOLEAN="BOOLEAN",e.INTERVAL="INTERVAL",e.VECTOR3D="VECTOR3D",e.VECTOR2D="VECTOR2D"}(aP||(aP={}));var sP=["type","__customInput"],lP=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],uP=["type"];function cP(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if("object"!==typeof e||Array.isArray(e))return{type:a,input:e,options:GL({key:t,label:t,optional:!1,disabled:!1,order:0},i)};if("__customInput"in e){var o=e.type;return cP(e.__customInput,t,CL(e,sP),o)}var s=e.render,l=e.label,u=e.optional,c=e.order,h=void 0===c?0:c,d=e.disabled,f=e.hint,p=e.onChange,v=e.onEditStart,m=e.onEditEnd,g=e.transient,y=CL(e,lP),A=GL({render:s,key:t,label:null!==l&&void 0!==l?l:t,hint:f,transient:null!==g&&void 0!==g?g:!!p,onEditStart:v,onEditEnd:m,disabled:d,optional:u,order:h},i),x=y.type,b=CL(y,uP);return(x=null!==a&&void 0!==a?a:x)in iP?{type:x,input:b,options:A}:{type:x,input:a&&rP(b)&&"value"in b?b.value:oP(b)?void 0:b,options:GL(GL({},A),{},{onChange:p,optional:null!==(n=A.optional)&&void 0!==n&&n,disabled:null!==(r=A.disabled)&&void 0!==r&&r})}}function hP(e,t,n,r){var i=cP(e,t),a=i.type,o=i.input,s=i.options;if(a)return a in iP?i:{type:a,input:UL(a,o,n,r),options:s};var l=FL(o);return l?{type:l,input:UL(l,o,n,r),options:s}:!!(l=FL({value:o}))&&{type:l,input:UL(l,{value:o},n,r),options:s}}function dP(e,t,n,r,i){var a=e.value,o=e.type,s=e.settings;e.value=pP({type:o,value:a,settings:s},t,n,r),e.fromPanel=i}var fP=function(e,t,n){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=n};function pP(e,t,n,r){var i,a=e.type,o=e.value,s=e.settings,l="SELECT"!==a&&"function"===typeof t?t(o):t;try{i=function(e,t,n,r,i,a){var o=OL[e].sanitize;return o?o(t,n,r,i,a):t}(a,l,s,o,n,r)}catch(u){throw new fP("The value `".concat(t,"` did not result in a correct value."),o,u)}return XC(i,o)?o:i}var vP=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;return function(){var i=this,a=arguments,o=n&&!r,s=function(){return e.apply(i,a)};window.clearTimeout(r),r=window.setTimeout(s,t),o&&s()}},mP=function(e){return e.shiftKey?5:e.altKey?.2:1};var gP=["value"],yP=["min","max"],AP=function(e,t){var n=t.min,r=void 0===n?-1/0:n,i=t.max,a=void 0===i?1/0:i,o=t.suffix,s=parseFloat(e);if(""===e||isNaN(s))throw Error("Invalid number");var l=QL(s,r,a);return o?l+o:l},xP=function(e){var t=e.value,n=CL(e,gP),r=n.min,i=void 0===r?-1/0:r,a=n.max,o=void 0===a?1/0:a,s=CL(n,yP),l=parseFloat(t),u="string"===typeof t?t.substring((""+l).length):void 0;l=QL(l,i,o);var c=n.step;c||(Number.isFinite(i)?c=Number.isFinite(o)?+(Math.abs(o-i)/100).toPrecision(1):+(Math.abs(l-i)/100).toPrecision(1):Number.isFinite(o)&&(c=+(Math.abs(o-l)/100).toPrecision(1)));var h=c?10*WL(c):WL(l);return{value:u?l+u:l,settings:GL({initialValue:l,step:c=c||h/10,pad:Math.round(QL(Math.log10(1/h),0,2)),min:i,max:o,suffix:u},s)}},bP=function(e,t){var n=t.step,r=t.initialValue;return r+Math.round((e-r)/n)*n},_P=Object.freeze({__proto__:null,schema:function(e){if("number"===typeof e)return!0;if("string"===typeof e){var t=parseFloat(e);return!isNaN(t)&&e.substring((""+t).length).trim().length<4}return!1},sanitize:AP,format:function(e,t){var n=t.pad,r=void 0===n?0:n,i=t.suffix,a=parseFloat(e).toFixed(r);return i?a+i:a},normalize:xP,sanitizeStep:bP});function wP(){return wP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wP.apply(this,arguments)}var EP=(0,t.createContext)({});function SP(){return(0,t.useContext)(EP)}var MP=(0,t.createContext)(null),CP=(0,t.createContext)(null),kP=(0,t.createContext)(null);function TP(){return(0,t.useContext)(CP)}function IP(e,t){var n=e.split(" "),r=(0,s.Z)(n,2),i=r[0],a=r[1],o={};return"none"!==i&&(o.boxShadow="".concat(t.inset?"inset ":"","0 0 0 $borderWidths").concat([t.key]," $colors").concat("default"!==i&&i||t.borderColor)),a&&(o.backgroundColor=a),o}var BP={$inputStyle:function(){return function(e){return IP(e,{key:"$input",borderColor:"$highlight1",inset:!0})}},$focusStyle:function(){return function(e){return IP(e,{key:"$focus",borderColor:"$accent2"})}},$hoverStyle:function(){return function(e){return IP(e,{key:"$hover",borderColor:"$accent1",inset:!0})}},$activeStyle:function(){return function(e){return IP(e,{key:"$active",borderColor:"$accent1",inset:!0})}}},RP=pT({prefix:"leva",theme:{colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}},utils:GL(GL({},BP),{},{$flex:function(){return{display:"flex",alignItems:"center"}},$flexCenter:function(){return{display:"flex",alignItems:"center",justifyContent:"center"}},$reset:function(){return{outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}},$draggable:function(){return{touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}},$focus:function(e){return{"&:focus":BP.$focusStyle()(e)}},$focusWithin:function(e){return{"&:focus-within":BP.$focusStyle()(e)}},$hover:function(e){return{"&:hover":BP.$hoverStyle()(e)}},$active:function(e){return{"&:active":BP.$activeStyle()(e)}}})}),LP=RP.styled,PP=(RP.css,RP.createTheme,RP.globalCss),DP=(RP.keyframes,PP({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}}));function OP(e,n){var r=(0,t.useContext)(MP).theme;if(!(e in r)||!(n in r[e]))return IL(_L.THEME_ERROR,e,n),"";for(var i=n;;){var a=r[e][i];if("string"!==typeof a||"$"!==a.charAt(0))return a;i=a.substr(1)}}var FP=LP("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),NP=LP("div",(0,L.Z)({$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none"},"& + ".concat(FP),{paddingLeft:0})),UP=LP(NP,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),ZP=LP("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),zP=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],HP=["onUpdate"];function GP(e){var n=e.innerLabel,r=e.value,i=e.onUpdate,a=e.onChange,o=e.onKeyDown,s=e.type,l=e.id,u=e.inputType,c=void 0===u?"text":u,h=e.rows,d=void 0===h?0:h,f=CL(e,zP),p=SP(),v=p.id,m=p.emitOnEditStart,g=p.emitOnEditEnd,y=p.disabled,A=l||v,x=(0,t.useRef)(null),b=d>0,_=b?"textarea":"input",w=(0,t.useCallback)((function(e){return function(t){var n=t.currentTarget.value;e(n)}}),[]);t.useEffect((function(){var e=x.current,t=w((function(e){i(e),g()}));return null===e||void 0===e||e.addEventListener("blur",t),function(){return null===e||void 0===e?void 0:e.removeEventListener("blur",t)}}),[w,i,g]);var E=(0,t.useCallback)((function(e){"Enter"===e.key&&w(i)(e)}),[w,i]),S=Object.assign({as:_},b?{rows:d}:{},f);return t.createElement(ZP,{textArea:b},n&&"string"===typeof n?t.createElement(NP,null,n):n,t.createElement(FP,wP({levaType:s,ref:x,id:A,type:c,autoComplete:"off",spellCheck:"false",value:r,onChange:w(a),onFocus:function(){return m()},onKeyPress:E,onKeyDown:o,disabled:y},S)))}function QP(e){var n=e.onUpdate,r=CL(e,HP),i=(0,t.useCallback)((function(e){return n(VL(e))}),[n]),a=(0,t.useCallback)((function(e){var t="ArrowUp"===e.key?1:"ArrowDown"===e.key?-1:0;if(t){e.preventDefault();var r=e.altKey?.1:e.shiftKey?10:1;n((function(e){return parseFloat(e)+t*r}))}}),[n]);return t.createElement(GP,wP({},r,{onUpdate:i,onKeyDown:a,type:"number"}))}var VP=LP("div",{}),jP=LP("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),WP=LP("div",(AL={$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"}},(0,L.Z)(AL,"&:hover + ".concat(jP,"::after"),{opacity:.6}),(0,L.Z)(AL,"".concat(VP,":hover > & + ").concat(jP,"::after"),{opacity:.6}),(0,L.Z)(AL,"".concat(VP,":hover > & > svg"),{opacity:1}),AL)),qP=LP("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:(0,L.Z)({"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"}},"> ".concat(VP,":not(:first-of-type)"),{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"})}}}),JP=LP("div",(xL={position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2"},(0,L.Z)(xL,"".concat(qP," > &"),{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}}),(0,L.Z)(xL,"variants",{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}),xL)),XP=LP(JP,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),YP=LP("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),KP=LP("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),$P=LP("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),eD=LP("div",{opacity:1,variants:{disabled:{true:(0,L.Z)({opacity:.6,pointerEvents:"none"},"& ".concat($P),{pointerEvents:"auto"})}}}),tD=LP("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),nD=LP("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),rD=LP(ML,{fill:"$toolTipBackground"});function iD(e){var n=e.children,r=(0,t.useContext)(MP).className;return t.createElement(qC,{className:r},n)}var aD=["align"];function oD(){var e=SP(),n=e.id,r=e.disable,i=e.disabled;return t.createElement(t.Fragment,null,t.createElement(KP,{id:n+"__disable",type:"checkbox",checked:!i,onChange:function(){return r(!i)}}),t.createElement("label",{htmlFor:n+"__disable"}))}function sD(e){var n=SP(),r=n.id,i=n.optional,a=n.hint,o=e.htmlFor||(r?{htmlFor:r}:null),s=a||"string"!==typeof e.children?null:{title:e.children};return t.createElement(t.Fragment,null,i&&t.createElement(oD,null),void 0!==a?t.createElement(wL,null,t.createElement(EL,{asChild:!0},t.createElement($P,wP({},o,e))),t.createElement(SL,{side:"top",sideOffset:2},t.createElement(nD,null,a,t.createElement(rD,null)))):t.createElement($P,wP({},o,s,e)))}function lD(e){var n=e.align,r=CL(e,aD),i=SP(),l=i.value,u=i.label,c=i.key,h=i.disabled,d=!(0,t.useContext)(kP).hideCopyButton&&void 0!==c,f=(0,t.useState)(!1),p=(0,s.Z)(f,2),v=p[0],m=p[1],g=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(JSON.stringify((0,L.Z)({},c,null!==l&&void 0!==l?l:"")));case 3:m(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),IL(_L.CLIPBOARD_ERROR,(0,L.Z)({},c,l));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return t.createElement(YP,{align:n,onPointerLeave:function(){return m(!1)}},t.createElement(sD,r),d&&!h&&t.createElement("div",{title:"Click to copy ".concat("string"===typeof u?u:c," value")},v?t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},t.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),t.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):t.createElement("svg",{onClick:g,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},t.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),t.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}var uD=["toggled"],cD=LP("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function hD(e){var n=e.toggled,r=CL(e,uD);return t.createElement(cD,wP({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(".concat(n?0:-90,"deg)")}},r),t.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}var dD=["input"];function fD(e){var n=e.input,r=CL(e,dD);return n?t.createElement(XP,r):t.createElement(JP,r)}function pD(e){var n=e.value,r=e.type,i=e.settings,a=e.setValue,o=(0,t.useState)(ZL(r,n,i)),l=(0,s.Z)(o,2),u=l[0],c=l[1],h=(0,t.useRef)(n),d=(0,t.useRef)(i);d.current=i;var f=(0,t.useCallback)((function(e){return c(ZL(r,e,d.current))}),[r]),p=(0,t.useCallback)((function(e){try{a(e)}catch(r){var t=r.type,n=r.previousValue;if("LEVA_ERROR"!==t)throw r;f(n)}}),[f,a]);return(0,t.useEffect)((function(){XC(n,h.current)||f(n),h.current=n}),[n,f]),{displayValue:u,onChange:c,onUpdate:p}}function vD(e,t){var n=SP(),r=n.emitOnEditStart,i=n.emitOnEditEnd;return dI((function(t){t.first&&(document.body.classList.add("leva__panel__dragged"),null===r||void 0===r||r());var n=e(t);return t.last&&(document.body.classList.remove("leva__panel__dragged"),null===i||void 0===i||i()),n}),t)}function mD(){var e=(0,t.useRef)(null),n=(0,t.useRef)({x:0,y:0}),r=(0,t.useCallback)((function(t){Object.assign(n.current,t),e.current&&(e.current.style.transform="translate3d(".concat(n.current.x,"px, ").concat(n.current.y,"px, 0)"))}),[]);return[e,r]}var gD=["__refCount"],yD=function(e,t){return e[t]?CL(e[t],gD):null};var AD=LP("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),xD=LP("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),bD=LP("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),_D=LP("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),wD=LP("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function ED(e){var n=e.value,r=e.min,i=e.max,a=e.onDrag,o=e.step,l=e.initialValue,u=(0,t.useRef)(null),c=(0,t.useRef)(null),h=(0,t.useRef)(0),d=OP("sizes","scrubberWidth"),f=vD((function(e){var t=e.event,f=e.first,p=(0,s.Z)(e.xy,1)[0],v=(0,s.Z)(e.movement,1)[0],m=e.memo;if(f){var g=u.current.getBoundingClientRect(),y=g.width,A=g.left;h.current=y-parseFloat(d),m=(null===t||void 0===t?void 0:t.target)===c.current?n:JL((p-A)/y,r,i)}var x=m+JL(v/h.current,0,i-r);return a(bP(x,{step:o,initialValue:l})),m})),p=qL(n,r,i);return t.createElement(_D,wP({ref:u},f()),t.createElement(xD,null,t.createElement(wD,{style:{left:0,right:"".concat(100*(1-p),"%")}})),t.createElement(bD,{ref:c,style:{left:"calc(".concat(p," * (100% - ").concat(d,"))")}}))}var SD=t.memo((function(e){var n=e.label,r=e.onUpdate,i=e.step,a=e.innerLabelTrim,o=(0,t.useState)(!1),l=(0,s.Z)(o,2),u=l[0],c=l[1],h=vD((function(e){var t=e.active,n=(0,s.Z)(e.delta,1)[0],a=e.event,o=e.memo,l=void 0===o?0:o;return c(t),l+=n/2,Math.abs(l)>=1&&(r((function(e){return parseFloat(e)+Math.floor(l)*i*mP(a)})),l=0),l}));return t.createElement(UP,wP({dragging:u,title:n.length>1?n:""},h()),n.slice(0,a))}));function MD(e){var n=e.label,r=e.id,i=e.displayValue,a=e.onUpdate,o=e.onChange,s=e.settings,l=e.innerLabelTrim,u=void 0===l?1:l,c=u>0&&t.createElement(SD,{label:n,step:s.step,onUpdate:a,innerLabelTrim:u});return t.createElement(QP,{id:r,value:String(i),onUpdate:a,onChange:o,innerLabel:c})}var CD=_P.sanitizeStep,kD=GL({component:function(){var e=SP(),n=e.label,r=e.value,i=e.onUpdate,a=e.settings,o=e.id,s=a.min,l=a.max!==1/0&&s!==-1/0;return t.createElement(fD,{input:!0},t.createElement(lD,null,n),t.createElement(AD,{hasRange:l},l&&t.createElement(ED,wP({value:parseFloat(r),onDrag:i},a)),t.createElement(MD,wP({},e,{id:o,label:"value",innerLabelTrim:l?0:1}))))}},CL(_P,["sanitizeStep"])),TD=Object.freeze({__proto__:null,schema:function(e,t){return gk().schema({options:gk().passesAnyOf(gk().object(),gk().array())}).test(t)},sanitize:function(e,t){if(t.values.indexOf(e)<0)throw Error("Selected value doesn't match Select options");return e},format:function(e,t){return t.values.indexOf(e)},normalize:function(e){var t,n,r=e.value,i=e.options;return Array.isArray(i)?(n=i,t=i.map((function(e){return String(e)}))):(n=Object.values(i),t=Object.keys(i)),"value"in e?n.includes(r)||(t.unshift(String(r)),n.unshift(r)):r=n[0],Object.values(i).includes(r)||(i[String(r)]=r),{value:r,settings:{keys:t,values:n}}}}),ID=LP("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),BD=LP("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),RD=LP("div",(bL={display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer"},(0,L.Z)(bL,"".concat(BD,":focus + &"),{$focusStyle:""}),(0,L.Z)(bL,"".concat(BD,":hover + &"),{$hoverStyle:""}),bL));function LD(e){var n=e.displayValue,r=e.value,i=e.onUpdate,a=e.id,o=e.settings,s=e.disabled,l=o.keys,u=o.values,c=(0,t.useRef)();return r===u[n]&&(c.current=l[n]),t.createElement(ID,null,t.createElement(BD,{id:a,value:n,onChange:function(e){return i(u[Number(e.currentTarget.value)])},disabled:s},l.map((function(e,n){return t.createElement("option",{key:e,value:n},e)}))),t.createElement(RD,null,c.current),t.createElement(hD,{toggled:!0}))}var PD=GL({component:function(){var e=SP(),n=e.label,r=e.value,i=e.displayValue,a=e.onUpdate,o=e.id,s=e.disabled,l=e.settings;return t.createElement(fD,{input:!0},t.createElement(lD,null,n),t.createElement(LD,{id:o,value:r,displayValue:i,onUpdate:a,settings:l,disabled:s}))}},TD),DD=Object.freeze({__proto__:null,schema:function(e){return gk().string().test(e)},sanitize:function(e){if("string"!==typeof e)throw Error("Invalid string");return e},normalize:function(e){var t=e.value,n=e.editable,r=void 0===n||n,i=e.rows,a=void 0!==i&&i;return{value:t,settings:{editable:r,rows:"number"===typeof a?a:a?5:0}}}}),OD=["displayValue","onUpdate","onChange","editable"],FD=LP("div",{whiteSpace:"pre-wrap"});function ND(e){var n=e.displayValue,r=e.onUpdate,i=e.onChange,a=e.editable,o=void 0===a||a,s=CL(e,OD);return o?t.createElement(GP,wP({value:n,onUpdate:r,onChange:i},s)):t.createElement(FD,null,n)}var UD=GL({component:function(){var e=SP(),n=e.label,r=e.settings,i=e.displayValue,a=e.onUpdate,o=e.onChange;return t.createElement(fD,{input:!0},t.createElement(lD,null,n),t.createElement(ND,wP({displayValue:i,onUpdate:a,onChange:o},r)))}},DD),ZD=Object.freeze({__proto__:null,schema:function(e){return gk().boolean().test(e)},sanitize:function(e){if("boolean"!==typeof e)throw Error("Invalid boolean");return e}}),zD=LP("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function HD(e){var n=e.value,r=e.onUpdate,i=e.id,a=e.disabled;return t.createElement(zD,null,t.createElement("input",{id:i,type:"checkbox",checked:n,onChange:function(e){return r(e.currentTarget.checked)},disabled:a}),t.createElement("label",{htmlFor:i},t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}var GD=GL({component:function(){var e=SP(),n=e.label,r=e.value,i=e.onUpdate,a=e.disabled,o=e.id;return t.createElement(fD,{input:!0},t.createElement(lD,null,n),t.createElement(HD,{value:r,onUpdate:i,id:o,disabled:a}))}},ZD),QD=["locked"];function VD(e){var n=e.value,r=e.id,i=e.valueKey,a=e.settings,o=e.onUpdate,s=e.innerLabelTrim,l=(0,t.useRef)(n[i]);l.current=n[i];var u=(0,t.useCallback)((function(e){return o((0,L.Z)({},i,pP({type:"NUMBER",value:l.current,settings:a},e)))}),[o,a,i]),c=pD({type:"NUMBER",value:n[i],settings:a,setValue:u});return t.createElement(MD,{id:r,label:i,value:n[i],displayValue:c.displayValue,onUpdate:c.onUpdate,onChange:c.onChange,settings:a,innerLabelTrim:s})}var jD=LP("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function WD(e){var n=e.locked,r=CL(e,QD);return t.createElement("svg",wP({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),n?t.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):t.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function qD(e){var n=e.value,r=e.onUpdate,i=e.settings,a=e.innerLabelTrim,o=SP(),s=o.id,l=o.setSettings,u=i.lock,c=i.locked;return t.createElement(jD,{withLock:u},u&&t.createElement(WD,{locked:c,onClick:function(){return l({locked:!c})}}),Object.keys(n).map((function(e,o){return t.createElement(VD,{id:0===o?s:"".concat(s,".").concat(e),key:e,valueKey:e,value:n,settings:i[e],onUpdate:r,innerLabelTrim:a})})))}var JD=function(e,t){var n={},r=0,i=1/0;for(var a in Object.entries(e).forEach((function(e){var a=(0,s.Z)(e,2),o=a[0],l=a[1];n[o]=xP(GL({value:l},t[o])).settings,r=Math.max(r,n[o].step),i=Math.min(i,n[o].pad)})),n){var o=t[a]||{},l=o.step,u=o.min,c=o.max;isFinite(l)||isFinite(u)&&isFinite(c)||(n[a].step=r,n[a].pad=i)}return n},XD=["lock"],YD=["value"];function KD(e){var t=gk().array().length(e).every.number();return function(n){return t.test(n)||function(t){if(!t||"object"!==typeof t)return!1;var n=Object.values(t);return n.length===e&&n.every((function(e){return isFinite(e)}))}(n)}}function $D(e,t,n){return function(e){return Array.isArray(e)?"array":"object"}(e)===t?e:"array"===t?Object.values(e):function(e,t){return e.reduce((function(e,n,r){return Object.assign(e,(0,L.Z)({},t[r],n))}),{})}(e,n)}var eO=function(e){return!!e&&("step"in e||"min"in e||"max"in e)};function tO(e){return{schema:KD(e.length),normalize:function(t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=t.lock,i=void 0!==r&&r,a=CL(t,XD),o=Array.isArray(e)?"array":"object",s="object"===o?Object.keys(e):n,l=$D(e,"object",s),u=eO(a)?s.reduce((function(e,t){return Object.assign(e,(0,L.Z)({},t,a))}),{}):a;return{value:"array"===o?e:l,settings:GL(GL({},JD(l,u)),{},{format:o,keys:s,lock:i,locked:!1})}}(t.value,CL(t,YD),e)},format:function(e,t){return function(e,t){return $D(e,"object",t.keys)}(e,t)},sanitize:function(e,t,n){return function(e,t,n){var r=$D(e,"object",t.keys);for(var i in r)r[i]=AP(r[i],t[i]);var a=Object.keys(r),o={};if(a.length===t.keys.length)o=r;else{var s=$D(n,"object",t.keys);if(1===a.length&&t.locked){var l=a[0],u=r[l],c=s[l],h=0!==c?u/c:1;for(var d in s)d===l?o[l]=u:o[d]=s[d]*h}else o=GL(GL({},s),r)}return $D(o,t.format,t.keys)}(e,t,n)}}}var nO={grad:.9,turn:360,rad:360/(2*Math.PI)},rO=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},iO=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},aO=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},oO=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},sO=function(e){return{r:aO(e.r,0,255),g:aO(e.g,0,255),b:aO(e.b,0,255),a:aO(e.a)}},lO=function(e){return{r:iO(e.r),g:iO(e.g),b:iO(e.b),a:iO(e.a,3)}},uO=/^#([0-9a-f]{3,8})$/i,cO=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},hO=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=Math.max(t,n,r),o=a-Math.min(t,n,r),s=o?a===t?(n-r)/o:a===n?2+(r-t)/o:4+(t-n)/o:0;return{h:60*(s<0?s+6:s),s:a?o/a*100:0,v:a/255*100,a:i}},dO=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var a=Math.floor(t),o=r*(1-n),s=r*(1-(t-a)*n),l=r*(1-(1-t+a)*n),u=a%6;return{r:255*[r,s,o,o,l,r][u],g:255*[l,r,r,s,o,o][u],b:255*[o,o,l,r,r,s][u],a:i}},fO=function(e){return{h:oO(e.h),s:aO(e.s,0,100),l:aO(e.l,0,100),a:aO(e.a)}},pO=function(e){return{h:iO(e.h),s:iO(e.s),l:iO(e.l),a:iO(e.a,3)}},vO=function(e){return dO((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},mO=function(e){return{h:(t=hO(e)).h,s:(i=(200-(n=t.s))*(r=t.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,n,r,i},gO=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,yO=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,AO=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,xO=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,bO={string:[[function(e){var t=uO.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?iO(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?iO(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=AO.exec(e)||xO.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:sO({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=gO.exec(e)||yO.exec(e);if(!t)return null;var n,r,i=fO({h:(n=t[1],r=t[2],void 0===r&&(r="deg"),Number(n)*(nO[r]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return vO(i)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=void 0===i?1:i;return rO(t)&&rO(n)&&rO(r)?sO({r:Number(t),g:Number(n),b:Number(r),a:Number(a)}):null},"rgb"],[function(e){var t=e.h,n=e.s,r=e.l,i=e.a,a=void 0===i?1:i;if(!rO(t)||!rO(n)||!rO(r))return null;var o=fO({h:Number(t),s:Number(n),l:Number(r),a:Number(a)});return vO(o)},"hsl"],[function(e){var t=e.h,n=e.s,r=e.v,i=e.a,a=void 0===i?1:i;if(!rO(t)||!rO(n)||!rO(r))return null;var o=function(e){return{h:oO(e.h),s:aO(e.s,0,100),v:aO(e.v,0,100),a:aO(e.a)}}({h:Number(t),s:Number(n),v:Number(r),a:Number(a)});return dO(o)},"hsv"]]},_O=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},wO=function(e){return"string"==typeof e?_O(e.trim(),bO.string):"object"==typeof e&&null!==e?_O(e,bO.object):[null,void 0]},EO=function(e,t){var n=mO(e);return{h:n.h,s:aO(n.s+100*t,0,100),l:n.l,a:n.a}},SO=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},MO=function(e,t){var n=mO(e);return{h:n.h,s:n.s,l:aO(n.l+100*t,0,100),a:n.a}},CO=function(){function e(e){this.parsed=wO(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return iO(SO(this.rgba),2)},e.prototype.isDark=function(){return SO(this.rgba)<.5},e.prototype.isLight=function(){return SO(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=lO(this.rgba)).r,n=e.g,r=e.b,a=(i=e.a)<1?cO(iO(255*i)):"","#"+cO(t)+cO(n)+cO(r)+a;var e,t,n,r,i,a},e.prototype.toRgb=function(){return lO(this.rgba)},e.prototype.toRgbString=function(){return t=(e=lO(this.rgba)).r,n=e.g,r=e.b,(i=e.a)<1?"rgba("+t+", "+n+", "+r+", "+i+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,i},e.prototype.toHsl=function(){return pO(mO(this.rgba))},e.prototype.toHslString=function(){return t=(e=pO(mO(this.rgba))).h,n=e.s,r=e.l,(i=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+i+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,i},e.prototype.toHsv=function(){return e=hO(this.rgba),{h:iO(e.h),s:iO(e.s),v:iO(e.v),a:iO(e.a,3)};var e},e.prototype.invert=function(){return kO({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),kO(EO(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),kO(EO(this.rgba,-e))},e.prototype.grayscale=function(){return kO(EO(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),kO(MO(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),kO(MO(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?kO({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):iO(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=mO(this.rgba);return"number"==typeof e?kO({h:e,s:t.s,l:t.l,a:t.a}):iO(t.h)},e.prototype.isEqual=function(e){return this.toHex()===kO(e).toHex()},e}(),kO=function(e){return e instanceof CO?e:new CO(e)},TO=[];function IO(){return(IO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function BO(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}function RO(e){var n=(0,t.useRef)(e),r=(0,t.useRef)((function(e){n.current&&n.current(e)}));return n.current=e,r.current}var LO=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e<t?t:e},PO=function(e){return"touches"in e},DO=function(e){return e&&e.ownerDocument.defaultView||self},OO=function(e,t,n){var r=e.getBoundingClientRect(),i=PO(t)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return e[0]}(t.touches,n):t;return{left:LO((i.pageX-(r.left+DO(e).pageXOffset))/r.width),top:LO((i.pageY-(r.top+DO(e).pageYOffset))/r.height)}},FO=function(e){!PO(e)&&e.preventDefault()},NO=t.memo((function(e){var n=e.onMove,r=e.onKey,i=BO(e,["onMove","onKey"]),a=(0,t.useRef)(null),o=RO(n),s=RO(r),l=(0,t.useRef)(null),u=(0,t.useRef)(!1),c=(0,t.useMemo)((function(){var e=function(e){FO(e),(PO(e)?e.touches.length>0:e.buttons>0)&&a.current?o(OO(a.current,e,l.current)):n(!1)},t=function(){return n(!1)};function n(n){var r=u.current,i=DO(a.current),o=n?i.addEventListener:i.removeEventListener;o(r?"touchmove":"mousemove",e),o(r?"touchend":"mouseup",t)}return[function(e){var t=e.nativeEvent,r=a.current;if(r&&(FO(t),!function(e,t){return t&&!PO(e)}(t,u.current)&&r)){if(PO(t)){u.current=!0;var i=t.changedTouches||[];i.length&&(l.current=i[0].identifier)}r.focus(),o(OO(r,t,l.current)),n(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),s({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},n]}),[s,o]),h=c[0],d=c[1],f=c[2];return(0,t.useEffect)((function(){return f}),[f]),t.createElement("div",IO({},i,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:a,onKeyDown:d,tabIndex:0,role:"slider"}))})),UO=function(e){return e.filter(Boolean).join(" ")},ZO=function(e){var n=e.color,r=e.left,i=e.top,a=void 0===i?.5:i,o=UO(["react-colorful__pointer",e.className]);return t.createElement("div",{className:o,style:{top:100*a+"%",left:100*r+"%"}},t.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:n}}))},zO=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n},HO=(Math.PI,function(e){var t=e.s,n=e.v,r=e.a,i=(200-t)*n/100;return{h:zO(e.h),s:zO(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:zO(i/2),a:zO(r,2)}}),GO=function(e){var t=HO(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},QO=function(e){var t=HO(e);return"hsla("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")"},VO=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var a=Math.floor(t),o=r*(1-n),s=r*(1-(t-a)*n),l=r*(1-(1-t+a)*n),u=a%6;return{r:zO(255*[r,s,o,o,l,r][u]),g:zO(255*[l,r,r,s,o,o][u]),b:zO(255*[o,o,l,r,r,s][u]),a:zO(i,2)}},jO=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=Math.max(t,n,r),o=a-Math.min(t,n,r),s=o?a===t?(n-r)/o:a===n?2+(r-t)/o:4+(t-n)/o:0;return{h:zO(60*(s<0?s+6:s)),s:zO(a?o/a*100:0),v:zO(a/255*100),a:i}},WO=t.memo((function(e){var n=e.hue,r=e.onChange,i=UO(["react-colorful__hue",e.className]);return t.createElement("div",{className:i},t.createElement(NO,{onMove:function(e){r({h:360*e.left})},onKey:function(e){r({h:LO(n+360*e.left,0,360)})},"aria-label":"Hue","aria-valuenow":zO(n),"aria-valuemax":"360","aria-valuemin":"0"},t.createElement(ZO,{className:"react-colorful__hue-pointer",left:n/360,color:GO({h:n,s:100,v:100,a:1})})))})),qO=t.memo((function(e){var n=e.hsva,r=e.onChange,i={backgroundColor:GO({h:n.h,s:100,v:100,a:1})};return t.createElement("div",{className:"react-colorful__saturation",style:i},t.createElement(NO,{onMove:function(e){r({s:100*e.left,v:100-100*e.top})},onKey:function(e){r({s:LO(n.s+100*e.left,0,100),v:LO(n.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+zO(n.s)+"%, Brightness "+zO(n.v)+"%"},t.createElement(ZO,{className:"react-colorful__saturation-pointer",top:1-n.v/100,left:n.s/100,color:GO(n)})))})),JO=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0};function XO(e,n,r){var i=RO(r),a=(0,t.useState)((function(){return e.toHsva(n)})),o=a[0],s=a[1],l=(0,t.useRef)({color:n,hsva:o});(0,t.useEffect)((function(){if(!e.equal(n,l.current.color)){var t=e.toHsva(n);l.current={hsva:t,color:n},s(t)}}),[n,e]),(0,t.useEffect)((function(){var t;JO(o,l.current.hsva)||e.equal(t=e.fromHsva(o),l.current.color)||(l.current={hsva:o,color:t},i(t))}),[o,e,i]);var u=(0,t.useCallback)((function(e){s((function(t){return Object.assign({},t,e)}))}),[]);return[o,u]}var YO,KO="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,$O=new Map,eF=function(e){KO((function(){var t=e.current?e.current.ownerDocument:document;if(void 0!==t&&!$O.has(t)){var r=t.createElement("style");r.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',$O.set(t,r);var i=YO||n.nc;i&&r.setAttribute("nonce",i),t.head.appendChild(r)}}),[])},tF=function(e){var n=e.className,r=e.colorModel,i=e.color,a=void 0===i?r.defaultColor:i,o=e.onChange,s=BO(e,["className","colorModel","color","onChange"]),l=(0,t.useRef)(null);eF(l);var u=XO(r,a,o),c=u[0],h=u[1],d=UO(["react-colorful",n]);return t.createElement("div",IO({},s,{ref:l,className:d}),t.createElement(qO,{hsva:c,onChange:h}),t.createElement(WO,{hue:c.h,onChange:h,className:"react-colorful__last-control"}))},nF=function(e){var n=e.className,r=e.hsva,i=e.onChange,a={backgroundImage:"linear-gradient(90deg, "+QO(Object.assign({},r,{a:0}))+", "+QO(Object.assign({},r,{a:1}))+")"},o=UO(["react-colorful__alpha",n]),s=zO(100*r.a);return t.createElement("div",{className:o},t.createElement("div",{className:"react-colorful__alpha-gradient",style:a}),t.createElement(NO,{onMove:function(e){i({a:e.left})},onKey:function(e){i({a:LO(r.a+e.left)})},"aria-label":"Alpha","aria-valuetext":s+"%","aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"},t.createElement(ZO,{className:"react-colorful__alpha-pointer",left:r.a,color:QO(r)})))},rF=function(e){var n=e.className,r=e.colorModel,i=e.color,a=void 0===i?r.defaultColor:i,o=e.onChange,s=BO(e,["className","colorModel","color","onChange"]),l=(0,t.useRef)(null);eF(l);var u=XO(r,a,o),c=u[0],h=u[1],d=UO(["react-colorful",n]);return t.createElement("div",IO({},s,{ref:l,className:d}),t.createElement(qO,{hsva:c,onChange:h}),t.createElement(WO,{hue:c.h,onChange:h}),t.createElement(nF,{hsva:c,onChange:h,className:"react-colorful__last-control"}))},iF={defaultColor:{r:0,g:0,b:0,a:1},toHsva:jO,fromHsva:VO,equal:JO},aF=function(e){return t.createElement(rF,IO({},e,{colorModel:iF}))},oF={defaultColor:{r:0,g:0,b:0},toHsva:function(e){return jO({r:e.r,g:e.g,b:e.b,a:1})},fromHsva:function(e){return{r:(t=VO(e)).r,g:t.g,b:t.b};var t},equal:JO},sF=function(e){return t.createElement(tF,IO({},e,{colorModel:oF}))},lF=n(2007),uF=n.n(lF);function cF(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))}function hF(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}Object.create;function dF(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function fF(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(dF(arguments[t]));return e}Object.create;"function"===typeof SuppressedError&&SuppressedError;var pF=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function vF(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),r=pF.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!==typeof n.path){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"===typeof t?t:"string"===typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var mF=[".DS_Store","Thumbs.db"];function gF(e){return"object"===typeof e&&null!==e}function yF(e){return _F(e.target.files).map((function(e){return vF(e)}))}function AF(e){return cF(this,void 0,void 0,(function(){return hF(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return e.getFile()})))];case 1:return[2,t.sent().map((function(e){return vF(e)}))]}}))}))}function xF(e,t){return cF(this,void 0,void 0,(function(){var n;return hF(this,(function(r){switch(r.label){case 0:return null===e?[2,[]]:e.items?(n=_F(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(wF))]):[3,2];case 1:return[2,bF(EF(r.sent()))];case 2:return[2,bF(_F(e.files).map((function(e){return vF(e)})))]}}))}))}function bF(e){return e.filter((function(e){return-1===mF.indexOf(e.name)}))}function _F(e){if(null===e)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function wF(e){if("function"!==typeof e.webkitGetAsEntry)return SF(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?CF(t):SF(e)}function EF(e){return e.reduce((function(e,t){return fF(e,Array.isArray(t)?EF(t):[t])}),[])}function SF(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=vF(t);return Promise.resolve(n)}function MF(e){return cF(this,void 0,void 0,(function(){return hF(this,(function(t){return[2,e.isDirectory?CF(e):kF(e)]}))}))}function CF(e){var t=e.createReader();return new Promise((function(e,n){var r=[];!function i(){var a=this;t.readEntries((function(t){return cF(a,void 0,void 0,(function(){var a,o,s;return hF(this,(function(l){switch(l.label){case 0:if(t.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return a=l.sent(),e(a),[3,4];case 3:return o=l.sent(),n(o),[3,4];case 4:return[3,6];case 5:s=Promise.all(t.map(MF)),r.push(s),i(),l.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function kF(e){return cF(this,void 0,void 0,(function(){return hF(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var r=vF(n,e.fullPath);t(r)}),(function(e){n(e)}))}))]}))}))}var TF=n(9998);function IF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IF(Object(n),!0).forEach((function(t){RF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function RF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return PF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PF(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var DF="file-invalid-type",OF="file-too-large",FF="file-too-small",NF="too-many-files",UF=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:DF,message:"File type must be ".concat(t)}},ZF=function(e){return{code:OF,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},zF=function(e){return{code:FF,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},HF={code:NF,message:"Too many files"};function GF(e,t){var n="application/x-moz-file"===e.type||(0,TF.Z)(e,t);return[n,n?null:UF(t)]}function QF(e,t,n){if(VF(e.size))if(VF(t)&&VF(n)){if(e.size>n)return[!1,ZF(n)];if(e.size<t)return[!1,zF(t)]}else{if(VF(t)&&e.size<t)return[!1,zF(t)];if(VF(n)&&e.size>n)return[!1,ZF(n)]}return[!0,null]}function VF(e){return void 0!==e&&null!==e}function jF(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function WF(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function qF(e){e.preventDefault()}function JF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.some((function(t){return!jF(e)&&t&&t.apply(void 0,[e].concat(r)),jF(e)}))}}function XF(e){return e="string"===typeof e?e.split(","):e,[{description:"everything",accept:Array.isArray(e)?e.filter((function(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)})).reduce((function(e,t){return BF(BF({},e),{},RF({},t,[]))}),{}):{}}]}var YF=["children"],KF=["open"],$F=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],eN=["refKey","onChange","onClick"];function tN(e){return function(e){if(Array.isArray(e))return iN(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rN(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||rN(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rN(e,t){if(e){if("string"===typeof e)return iN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iN(e,t):void 0}}function iN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function aN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aN(Object(n),!0).forEach((function(t){sN(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lN(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var uN=(0,t.forwardRef)((function(e,n){var r=e.children,i=dN(lN(e,YF)),a=i.open,o=lN(i,KF);return(0,t.useImperativeHandle)(n,(function(){return{open:a}}),[a]),t.createElement(t.Fragment,null,r(oN(oN({},o),{},{open:a})))}));uN.displayName="Dropzone";var cN={disabled:!1,getFilesFromEvent:function(e){return cF(this,void 0,void 0,(function(){return hF(this,(function(t){return gF(e)&&gF(e.dataTransfer)?[2,xF(e.dataTransfer,e.type)]:function(e){return gF(e)&&gF(e.target)}(e)?[2,yF(e)]:Array.isArray(e)&&e.every((function(e){return"getFile"in e&&"function"===typeof e.getFile}))?[2,AF(e)]:[2,[]]}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};uN.defaultProps=cN,uN.propTypes={children:uF().func,accept:uF().oneOfType([uF().string,uF().arrayOf(uF().string)]),multiple:uF().bool,preventDropOnDocument:uF().bool,noClick:uF().bool,noKeyboard:uF().bool,noDrag:uF().bool,noDragEventsBubbling:uF().bool,minSize:uF().number,maxSize:uF().number,maxFiles:uF().number,disabled:uF().bool,getFilesFromEvent:uF().func,onFileDialogCancel:uF().func,onFileDialogOpen:uF().func,useFsAccessApi:uF().bool,onDragEnter:uF().func,onDragLeave:uF().func,onDragOver:uF().func,onDrop:uF().func,onDropAccepted:uF().func,onDropRejected:uF().func,validator:uF().func};var hN={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function dN(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=oN(oN({},cN),e),r=n.accept,i=n.disabled,a=n.getFilesFromEvent,o=n.maxSize,s=n.minSize,l=n.multiple,u=n.maxFiles,c=n.onDragEnter,h=n.onDragLeave,d=n.onDragOver,f=n.onDrop,p=n.onDropAccepted,v=n.onDropRejected,m=n.onFileDialogCancel,g=n.onFileDialogOpen,y=n.useFsAccessApi,A=n.preventDropOnDocument,x=n.noClick,b=n.noKeyboard,_=n.noDrag,w=n.noDragEventsBubbling,E=n.validator,S=(0,t.useMemo)((function(){return"function"===typeof g?g:pN}),[g]),M=(0,t.useMemo)((function(){return"function"===typeof m?m:pN}),[m]),C=(0,t.useRef)(null),k=(0,t.useRef)(null),T=nN((0,t.useReducer)(fN,hN),2),I=T[0],B=T[1],R=I.isFocused,L=I.isFileDialogActive,P=I.draggedFiles,D=(0,t.useRef)("undefined"!==typeof window&&window.isSecureContext&&y&&"showOpenFilePicker"in window),O=function(){!D.current&&L&&setTimeout((function(){k.current&&(k.current.files.length||(B({type:"closeDialog"}),M()))}),300)};(0,t.useEffect)((function(){return window.addEventListener("focus",O,!1),function(){window.removeEventListener("focus",O,!1)}}),[k,L,M,D]);var F=(0,t.useRef)([]),N=function(e){C.current&&C.current.contains(e.target)||(e.preventDefault(),F.current=[])};(0,t.useEffect)((function(){return A&&(document.addEventListener("dragover",qF,!1),document.addEventListener("drop",N,!1)),function(){A&&(document.removeEventListener("dragover",qF),document.removeEventListener("drop",N))}}),[C,A]);var U=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),K(e),F.current=[].concat(tN(F.current),[e.target]),WF(e)&&Promise.resolve(a(e)).then((function(t){jF(e)&&!w||(B({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),c&&c(e))}))}),[a,c,w]),Z=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),K(e);var t=WF(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&d&&d(e),!1}),[d,w]),z=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),K(e);var t=F.current.filter((function(e){return C.current&&C.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),F.current=t,t.length>0||(B({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),WF(e)&&h&&h(e))}),[C,h,w]),H=(0,t.useCallback)((function(e,t){var n=[],i=[];e.forEach((function(e){var t=nN(GF(e,r),2),a=t[0],l=t[1],u=nN(QF(e,s,o),2),c=u[0],h=u[1],d=E?E(e):null;if(a&&c&&!d)n.push(e);else{var f=[l,h];d&&(f=f.concat(d)),i.push({file:e,errors:f.filter((function(e){return e}))})}})),(!l&&n.length>1||l&&u>=1&&n.length>u)&&(n.forEach((function(e){i.push({file:e,errors:[HF]})})),n.splice(0)),B({acceptedFiles:n,fileRejections:i,type:"setFiles"}),f&&f(n,i,t),i.length>0&&v&&v(i,t),n.length>0&&p&&p(n,t)}),[B,l,r,s,o,u,f,p,v,E]),G=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),K(e),F.current=[],WF(e)&&Promise.resolve(a(e)).then((function(t){jF(e)&&!w||H(t,e)})),B({type:"reset"})}),[a,H,w]),Q=(0,t.useCallback)((function(){if(D.current){B({type:"openDialog"}),S();var e={multiple:l,types:XF(r)};window.showOpenFilePicker(e).then((function(e){return a(e)})).then((function(e){H(e,null),B({type:"closeDialog"})})).catch((function(e){!function(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}(e)?function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)&&(D.current=!1,k.current&&(k.current.value=null,k.current.click())):(M(e),B({type:"closeDialog"}))}))}else k.current&&(B({type:"openDialog"}),S(),k.current.value=null,k.current.click())}),[B,S,M,y,H,r,l]),V=(0,t.useCallback)((function(e){C.current&&C.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),Q()))}),[C,Q]),j=(0,t.useCallback)((function(){B({type:"focus"})}),[]),W=(0,t.useCallback)((function(){B({type:"blur"})}),[]),q=(0,t.useCallback)((function(){x||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?Q():setTimeout(Q,0))}),[x,Q]),J=function(e){return i?null:e},X=function(e){return b?null:J(e)},Y=function(e){return _?null:J(e)},K=function(e){w&&e.stopPropagation()},$=(0,t.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.role,a=e.onKeyDown,o=e.onFocus,s=e.onBlur,l=e.onClick,u=e.onDragEnter,c=e.onDragOver,h=e.onDragLeave,d=e.onDrop,f=lN(e,$F);return oN(oN(sN({onKeyDown:X(JF(a,V)),onFocus:X(JF(o,j)),onBlur:X(JF(s,W)),onClick:J(JF(l,q)),onDragEnter:Y(JF(u,U)),onDragOver:Y(JF(c,Z)),onDragLeave:Y(JF(h,z)),onDrop:Y(JF(d,G)),role:"string"===typeof r&&""!==r?r:"button"},n,C),i||b?{}:{tabIndex:0}),f)}}),[C,V,j,W,q,U,Z,z,G,b,_,i]),ee=(0,t.useCallback)((function(e){e.stopPropagation()}),[]),te=(0,t.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,i=e.onChange,a=e.onClick,o=lN(e,eN);return oN(oN({},sN({accept:r,multiple:l,type:"file",style:{display:"none"},onChange:J(JF(i,G)),onClick:J(JF(a,ee)),tabIndex:-1},n,k)),o)}}),[k,r,l,G,i]),ne=P.length,re=ne>0&&function(e){var t=e.files,n=e.accept,r=e.minSize,i=e.maxSize,a=e.multiple,o=e.maxFiles;return!(!a&&t.length>1||a&&o>=1&&t.length>o)&&t.every((function(e){var t=LF(GF(e,n),1)[0],a=LF(QF(e,r,i),1)[0];return t&&a}))}({files:P,accept:r,minSize:s,maxSize:o,multiple:l,maxFiles:u}),ie=ne>0&&!re;return oN(oN({},I),{},{isDragAccept:re,isDragReject:ie,isFocused:R&&!i,getRootProps:$,getInputProps:te,rootRef:C,inputRef:k,open:J(Q)})}function fN(e,t){switch(t.type){case"focus":return oN(oN({},e),{},{isFocused:!0});case"blur":return oN(oN({},e),{},{isFocused:!1});case"openDialog":return oN(oN({},hN),{},{isFileDialogActive:!0});case"closeDialog":return oN(oN({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=t.isDragActive,r=t.draggedFiles;return oN(oN({},e),{},{draggedFiles:r,isDragActive:n});case"setFiles":return oN(oN({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return oN({},hN);default:return e}}function pN(){}Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var vN,mN,gN=n(8089),yN=n.n(gN),AN=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(".")};function xN(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,n=(0,t.useRef)(null),r=(0,t.useRef)(null),i=(0,t.useState)(!1),a=(0,s.Z)(i,2),o=a[0],l=a[1],u=(0,t.useCallback)((function(){return l(!0)}),[]),c=(0,t.useCallback)((function(){return l(!1)}),[]);return(0,t.useLayoutEffect)((function(){if(o){var t=n.current.getBoundingClientRect(),i=t.bottom,a=t.top,s=t.left,l=i+r.current.getBoundingClientRect().height>window.innerHeight-40?"up":"down";r.current.style.position="fixed",r.current.style.zIndex="10000",r.current.style.left=s+"px","down"===l?r.current.style.top=i+e+"px":r.current.style.bottom=window.innerHeight-a+e+"px"}}),[e,o]),{popinRef:n,wrapperRef:r,shown:o,show:u,hide:c}}!function(e){e.forEach((function(e){TO.indexOf(e)<0&&(e(CO,bO),TO.push(e))}))}([function(e,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var a={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var i,o,s=r[this.toHex()];if(s)return s;if(null==t?void 0:t.closest){var l=this.toRgb(),u=1/0,c="black";if(!a.length)for(var h in n)a[h]=new e(n[h]).toRgb();for(var d in n){var f=(i=l,o=a[d],Math.pow(i.r-o.r,2)+Math.pow(i.g-o.g,2)+Math.pow(i.b-o.b,2));f<u&&(u=f,c=d)}return c}},t.string.push([function(t){var r=t.toLowerCase(),i="transparent"===r?"#0000":n[r];return i?new e(i).toRgb():null},"name"])}]);var bN={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};gk.extend({color:function(){return function(e){return kO(e).isValid()}}});function _N(e,t){var n=t.format,r=t.hasAlpha,i=t.isString,a=e[bN[n]+(i&&"hex"!==n?"String":"")]();return"object"!==typeof a||r?a:function(e,t){var n=GL({},e);return t.forEach((function(t){return t in e&&delete n[t]})),n}(a,["a"])}var wN=function(e,t){var n=kO(e);if(!n.isValid())throw Error("Invalid color");return _N(n,t)},EN=Object.freeze({__proto__:null,schema:function(e){return gk().color().test(e)},sanitize:wN,format:function(e,t){return _N(kO(e),GL(GL({},t),{},{isString:!0,format:"hex"}))},normalize:function(e){var t=e.value,n=function(e){return wO(e)[1]}(t),r={format:"name"===n?"hex":n,hasAlpha:"object"===typeof t?"a"in t:"hex"===n&&8===t.length||/^(rgba)|(hsla)|(hsva)/.test(t),isString:"string"===typeof t};return{value:wN(t,r),settings:r}}}),SN=LP("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:'url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')',$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),MN=LP("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),CN=LP("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function kN(e,t){return"rgb"!==t?kO(e).toRgb():e}function TN(e){var n=e.value,r=e.displayValue,i=e.settings,a=e.onUpdate,o=SP(),l=o.emitOnEditStart,u=o.emitOnEditEnd,c=i.format,h=i.hasAlpha,d=xN(),f=d.popinRef,p=d.wrapperRef,v=d.shown,m=d.show,g=d.hide,y=(0,t.useRef)(0),A=(0,t.useState)((function(){return kN(n,c)})),x=(0,s.Z)(A,2),b=x[0],_=x[1],w=h?aF:sF,E=function(){g(),u(),window.clearTimeout(y.current)};return(0,t.useEffect)((function(){return function(){return window.clearTimeout(y.current)}}),[]),t.createElement(t.Fragment,null,t.createElement(SN,{ref:f,active:v,onClick:function(){return _(kN(n,c)),m(),void l()},style:{color:r}}),v&&t.createElement(iD,null,t.createElement(tD,{onPointerUp:E}),t.createElement(CN,{ref:p,onMouseEnter:function(){return window.clearTimeout(y.current)},onMouseLeave:function(e){return 0===e.buttons&&void(y.current=window.setTimeout(E,500))}},t.createElement(w,{color:b,onChange:a}))))}var IN=GL({component:function(){var e=SP(),n=e.value,r=e.displayValue,i=e.label,a=e.onChange,o=e.onUpdate,s=e.settings;return t.createElement(fD,{input:!0},t.createElement(lD,null,i),t.createElement(MN,null,t.createElement(TN,{value:n,displayValue:r,onChange:a,onUpdate:o,settings:s}),t.createElement(GP,{value:r,onChange:a,onUpdate:o})))}},EN);var BN=GL({component:function(){var e=SP(),n=e.label,r=e.displayValue,i=e.onUpdate,a=e.settings;return t.createElement(fD,{input:!0},t.createElement(lD,null,n),t.createElement(qD,{value:r,settings:a,onUpdate:i}))}},tO(["x","y","z"])),RN=LP("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),LN=LP("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function PN(e){var n=e.value,r=e.settings,i=e.onUpdate,a=(0,t.useRef)(),o=(0,t.useRef)(0),l=(0,t.useRef)(0),u=(0,t.useRef)(1),c=(0,t.useState)(!1),h=(0,s.Z)(c,2),d=h[0],f=h[1],p=(0,t.useState)(!1),v=(0,s.Z)(p,2),m=v[0],g=v[1],y=mD(),A=(0,s.Z)(y,2),x=A[0],b=A[1],_=(0,t.useRef)(null),w=(0,t.useRef)(null);(0,t.useLayoutEffect)((function(){if(d){var e=_.current.getBoundingClientRect(),t=e.top,n=e.left,r=e.width,i=e.height;w.current.style.left=n+r/2+"px",w.current.style.top=t+i/2+"px"}}),[d]);var E=(0,s.Z)(r.keys,2),S=E[0],M=E[1],C="invertY"===r.joystick?1:-1,k=r[S].step,T=r[M].step,I=OP("sizes","joystickWidth"),B=OP("sizes","joystickHeight"),R=.8*parseFloat(I)/2,P=.8*parseFloat(B)/2,D=(0,t.useCallback)((function(){a.current||(g(!0),o.current&&b({x:o.current*R}),l.current&&b({y:l.current*-P}),a.current=window.setInterval((function(){i((function(e){var t,n,r=k*o.current*u.current,i=C*T*l.current*u.current;return Array.isArray(e)?(t={},(0,L.Z)(t,S,e[0]+r),(0,L.Z)(t,M,e[1]+i),t):(n={},(0,L.Z)(n,S,e[S]+r),(0,L.Z)(n,M,e[M]+i),n)}))}),16))}),[R,P,i,b,k,T,S,M,C]),O=(0,t.useCallback)((function(){window.clearTimeout(a.current),a.current=void 0,g(!1)}),[]);(0,t.useEffect)((function(){function e(e){u.current=mP(e)}return window.addEventListener("keydown",e),window.addEventListener("keyup",e),function(){window.clearTimeout(a.current),window.removeEventListener("keydown",e),window.removeEventListener("keyup",e)}}),[]);var F=vD((function(e){var t=e.first,r=e.active,a=(0,s.Z)(e.delta,2),c=a[0],h=a[1],d=(0,s.Z)(e.movement,2),p=d[0],v=d[1];t&&f(!0);var m=QL(p,-R,R),g=QL(v,-P,P);o.current=Math.abs(p)>Math.abs(m)?Math.sign(p-m):0,l.current=Math.abs(v)>Math.abs(g)?Math.sign(g-v):0;var y,A=n[S],x=n[M];r?(o.current||(A+=c*k*u.current,b({x:m})),l.current||(x-=C*h*T*u.current,b({y:g})),o.current||l.current?D():O(),i((y={},(0,L.Z)(y,S,A),(0,L.Z)(y,M,x),y))):(f(!1),o.current=0,l.current=0,b({x:0,y:0}),O())}));return t.createElement(RN,wP({ref:_},F()),d&&t.createElement(iD,null,t.createElement(LN,{ref:w,isOutOfBounds:m},t.createElement("div",null),t.createElement("span",{ref:x}))))}var DN=LP("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});var ON=["joystick"],FN=tO(["x","y"]),NN=GL(GL({component:function(){var e=SP(),n=e.label,r=e.displayValue,i=e.onUpdate,a=e.settings;return t.createElement(fD,{input:!0},t.createElement(lD,null,n),t.createElement(DN,{withJoystick:!!a.joystick},a.joystick&&t.createElement(PN,{value:r,settings:a,onUpdate:i}),t.createElement(qD,{value:r,settings:a,onUpdate:i})))}},FN),{},{normalize:function(e){var t=e.joystick,n=void 0===t||t,r=CL(e,ON),i=FN.normalize(r);return{value:i.value,settings:GL(GL({},i.settings),{},{joystick:n})}}}),UN=Object.freeze({__proto__:null,sanitize:function(e){if(void 0!==e){if(e instanceof File)try{return URL.createObjectURL(e)}catch(t){return}if("string"===typeof e&&0===e.indexOf("blob:"))return e;throw Error("Invalid image format [undefined | blob |\xa0File].")}},schema:function(e,t){return"object"===typeof t&&"image"in t},normalize:function(e){return{value:e.image}}}),ZN=LP("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),zN=LP("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),HN=LP("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),GN=LP("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),QN=LP("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),VN=LP("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});var jN=GL({component:function(){var e=SP(),n=e.label,r=e.value,i=e.onUpdate,a=e.disabled,o=xN(),s=o.popinRef,l=o.wrapperRef,u=o.shown,c=o.show,h=o.hide,d=(0,t.useCallback)((function(e){e.length&&i(e[0])}),[i]),f=(0,t.useCallback)((function(e){e.stopPropagation(),i(void 0)}),[i]),p=dN({maxFiles:1,accept:"image/*",onDrop:d,disabled:a}),v=p.getRootProps,m=p.getInputProps,g=p.isDragAccept;return t.createElement(fD,{input:!0},t.createElement(lD,null,n),t.createElement(ZN,null,t.createElement(HN,{ref:s,hasImage:!!r,onPointerDown:function(){return!!r&&c()},onPointerUp:h,style:{backgroundImage:r?"url(".concat(r,")"):"none"}}),u&&!!r&&t.createElement(iD,null,t.createElement(tD,{onPointerUp:h,style:{cursor:"pointer"}}),t.createElement(GN,{ref:l,style:{backgroundImage:"url(".concat(r,")")}})),t.createElement(zN,v({isDragAccept:g}),t.createElement("input",m()),t.createElement(QN,null,g?"drop image":"click or drop")),t.createElement(VN,{onClick:f,disabled:!r})))}},UN),WN=gk().number(),qN=function(e){return{min:e[0],max:e[1]}},JN=function(e,t,n){var r=(0,s.Z)(t.bounds,2),i=r[0],a=r[1],o=Array.isArray(e)?qN(e):e,l=GL(GL({},{min:n[0],max:n[1]}),o),u=l.min,c=l.max;return[QL(Number(u),i,Math.max(i,c)),QL(Number(c),Math.min(a,u),a)]},XN=Object.freeze({__proto__:null,schema:function(e,t){return gk().array().length(2).every.number().test(e)&&gk().schema({min:WN,max:WN}).test(t)},format:qN,sanitize:JN,normalize:function(e){var t=e.value,n=e.min,r=e.max,i={min:n,max:r},a=[n,r],o=GL(GL({},JD(qN(t),{min:i,max:i})),{},{bounds:a});return{value:JN(qN(t),o,t),settings:o}}}),YN=["value","bounds","onDrag"],KN=["bounds"],$N=LP("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function eU(e){var n=e.value,r=(0,s.Z)(e.bounds,2),i=r[0],a=r[1],o=e.onDrag,l=CL(e,YN),u=(0,t.useRef)(null),c=(0,t.useRef)(null),h=(0,t.useRef)(null),d=(0,t.useRef)(0),f=OP("sizes","scrubberWidth"),p=vD((function(e){var t=e.event,r=e.first,p=(0,s.Z)(e.xy,1)[0],v=(0,s.Z)(e.movement,1)[0],m=e.memo,g=void 0===m?{}:m;if(r){var y=u.current.getBoundingClientRect(),A=y.width,x=y.left;d.current=A-parseFloat(f);var b=(null===t||void 0===t?void 0:t.target)===c.current||(null===t||void 0===t?void 0:t.target)===h.current;g.pos=JL((p-x)/A,i,a);var _=Math.abs(g.pos-n.min)-Math.abs(g.pos-n.max);g.key=_<0||0===_&&g.pos<=n.min?"min":"max",b&&(g.pos=n[g.key])}var w=g.pos+JL(v/d.current,0,a-i);return o((0,L.Z)({},g.key,CD(w,l[g.key]))),g})),v="calc(".concat(qL(n.min,i,a)," * (100% - ").concat(f," - 8px) + 4px)"),m="calc(".concat(1-qL(n.max,i,a)," * (100% - ").concat(f," - 8px) + 4px)");return t.createElement(_D,wP({ref:u},p()),t.createElement(xD,null,t.createElement(wD,{style:{left:v,right:m}})),t.createElement(bD,{position:"left",ref:c,style:{left:v}}),t.createElement(bD,{position:"right",ref:h,style:{right:m}}))}var tU=GL({component:function(){var e=SP(),n=e.label,r=e.displayValue,i=e.onUpdate,a=e.settings,o=CL(a,KN);return t.createElement(t.Fragment,null,t.createElement(fD,{input:!0},t.createElement(lD,null,n),t.createElement($N,null,t.createElement(eU,wP({value:r},a,{onDrag:i})),t.createElement(qD,{value:r,settings:o,onUpdate:i,innerLabelTrim:0}))))}},XN),nU=["type","value"],rU=["onChange","transient","onEditStart","onEditEnd"],iU=function(){var e=this,t=HE(function(e){return function(t,n,r){var i=r.subscribe;return r.subscribe=function(e,t,n){var a=e;if(t){var o=(null==n?void 0:n.equalityFn)||Object.is,s=e(r.getState());a=function(n){var r=e(n);if(!o(s,r)){var i=s;t(s=r,i)}},(null==n?void 0:n.fireImmediately)&&t(s,s)}return i(a)},e(t,n,r)}}((function(){return{data:{}}}))),n=function(){var e=new Map;return{on:function(t,n){var r=e.get(t);void 0===r&&(r=new Set,e.set(t,r)),r.add(n)},off:function(t,n){var r=e.get(t);void 0!==r&&(r.delete(n),0===r.size&&e.delete(t))},emit:function(t){var n=e.get(t);if(void 0!==n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var o,s=(0,Ms.Z)(n);try{for(s.s();!(o=s.n()).done;)o.value.apply(void 0,i)}catch(l){s.e(l)}finally{s.f()}}}}}();this.storeId="_"+Math.random().toString(36).substr(2,9),this.useStore=t;var r={},i=new Set;this.getVisiblePaths=function(){var t=e.getData(),n=Object.keys(t),a=[];Object.entries(r).forEach((function(t){var r=(0,s.Z)(t,2),i=r[0],o=r[1];o.render&&n.some((function(e){return 0===e.indexOf(i)}))&&!o.render(e.get)&&a.push(i+".")}));var o=[];return i.forEach((function(n){n in t&&t[n].__refCount>0&&a.every((function(e){return-1===n.indexOf(e)}))&&(!t[n].render||t[n].render(e.get))&&o.push(n)})),o},this.setOrderedPaths=function(e){e.forEach((function(e){return i.add(e)}))},this.orderPaths=function(t){return e.setOrderedPaths(t),t},this.disposePaths=function(e){t.setState((function(t){var n=t.data;return e.forEach((function(e){if(e in n){var t=n[e];t.__refCount--,0===t.__refCount&&t.type in iP&&delete n[e]}})),{data:n}}))},this.dispose=function(){t.setState((function(){return{data:{}}}))},this.getFolderSettings=function(e){return r[e]||{}},this.getData=function(){return t.getState().data},this.addData=function(e,n){t.setState((function(t){var r=t.data;return Object.entries(e).forEach((function(e){var t=(0,s.Z)(e,2),i=t[0],a=t[1],o=r[i];if(o){var l=a.type,u=(a.value,CL(a,nU));l!==o.type?IL(_L.INPUT_TYPE_OVERRIDE,l):((0===o.__refCount||n)&&Object.assign(o,u),o.__refCount++)}else r[i]=GL(GL({},a),{},{__refCount:1})})),{data:r}}))},this.setValueAtPath=function(n,r,i){t.setState((function(t){var a=t.data;return dP(a[n],r,n,e,i),{data:a}}))},this.setSettingsAtPath=function(e,n){t.setState((function(t){var r=t.data;return r[e].settings=GL(GL({},r[e].settings),n),{data:r}}))},this.disableInputAtPath=function(e,n){t.setState((function(t){var r=t.data;return r[e].disabled=n,{data:r}}))},this.set=function(e,n){t.setState((function(t){var r=t.data;return Object.entries(e).forEach((function(e){var t=(0,s.Z)(e,2),i=t[0],a=t[1];try{dP(r[i],a,void 0,void 0,n)}catch(o){0}})),{data:r}}))},this.getInput=function(t){try{return e.getData()[t]}catch(n){IL(_L.PATH_DOESNT_EXIST,t)}},this.get=function(t){var n;return null===(n=e.getInput(t))||void 0===n?void 0:n.value},this.emitOnEditStart=function(t){n.emit("onEditStart:".concat(t),e.get(t),t,GL(GL({},e.getInput(t)),{},{get:e.get}))},this.emitOnEditEnd=function(t){n.emit("onEditEnd:".concat(t),e.get(t),t,GL(GL({},e.getInput(t)),{},{get:e.get}))},this.subscribeToEditStart=function(e,t){var r="onEditStart:".concat(e);return n.on(r,t),function(){return n.off(r,t)}},this.subscribeToEditEnd=function(e,t){var r="onEditEnd:".concat(e);return n.on(r,t),function(){return n.off(r,t)}};var a=function e(t,n,i){var a={};return Object.entries(t).forEach((function(t){var o=(0,s.Z)(t,2),l=o[0],u=o[1];if(""===l)return IL(_L.EMPTY_KEY);var c=AN(n,l);if(u.type===iP.FOLDER){var h=e(u.schema,c,i);Object.assign(a,h),c in r||(r[c]=u.settings)}else if(l in i)IL(_L.DUPLICATE_KEYS,l,c,i[l].path);else{var d=hP(u,l,c,a);if(d){var f=d.type,p=d.options,v=d.input,m=p.onChange,g=p.transient,y=p.onEditStart,A=p.onEditEnd,x=CL(p,rU);a[c]=GL(GL(GL({type:f},x),v),{},{fromPanel:!0}),i[l]={path:c,onChange:m,transient:g,onEditStart:y,onEditEnd:A}}else IL(_L.UNKNOWN_INPUT,c,u)}})),a};this.getDataFromSchema=function(e){var t={};return[a(e,"",t),t]}};new iU;var aU=function(e){return"__levaInput"in e},oU=["type","label","path","valueKey","value","settings","setValue","disabled"];function sU(e){var n=e.type,r=e.label,i=e.path,a=e.valueKey,o=e.value,s=e.settings,l=e.setValue,u=e.disabled,c=CL(e,oU),h=pD({type:n,value:o,settings:s,setValue:l}),d=h.displayValue,f=h.onChange,p=h.onUpdate,v=OL[n].component;return v?t.createElement(EP.Provider,{value:GL({key:a,path:i,id:""+i,label:r,displayValue:d,value:o,onChange:f,onUpdate:p,settings:s,setValue:l,disabled:u},c)},t.createElement(eD,{disabled:u},t.createElement(v,null))):(IL(_L.NO_COMPONENT_FOR_TYPE,n,i),null)}var lU=LP("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});var uU=LP("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),cU=LP("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}});var hU=LP("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"});var dU=(0,t.forwardRef)((function(e,n){var r=e.initialValue,i=OP("colors","highlight3"),a=OP("colors","elevation2"),o=OP("colors","highlight1"),l=(0,t.useMemo)((function(){return[kO(o).alpha(.4).toRgbString(),kO(o).alpha(.1).toRgbString()]}),[o]),u=(0,s.Z)(l,2),c=u[0],h=u[1],d=(0,t.useRef)([r]),f=(0,t.useRef)(r),p=(0,t.useRef)(r),v=(0,t.useRef)(),m=(0,t.useCallback)((function(e,t){if(e){for(var n=e.width,r=e.height,o=new Path2D,s=n/100,l=.05*r,u=0;u<d.current.length;u++){var v=s*u,m=r-qL(d.current[u],f.current,p.current)*(r-2*l)-l;o.lineTo(v,m)}t.clearRect(0,0,n,r);var g=new Path2D(o);g.lineTo(s*(d.current.length+1),r),g.lineTo(0,r),g.lineTo(0,0);var y=t.createLinearGradient(0,0,0,r);y.addColorStop(0,c),y.addColorStop(1,h),t.fillStyle=y,t.fill(g),t.strokeStyle=a,t.lineJoin="round",t.lineWidth=14,t.stroke(o),t.strokeStyle=i,t.lineWidth=2,t.stroke(o)}}),[i,a,c,h]),g=function(e){var n=(0,t.useRef)(null),r=(0,t.useRef)(null),i=(0,t.useRef)(!1);return(0,t.useEffect)((function(){var t=vP((function(){n.current.width=n.current.offsetWidth*window.devicePixelRatio,n.current.height=n.current.offsetHeight*window.devicePixelRatio,e(n.current,r.current)}),250);return window.addEventListener("resize",t),i.current||(t(),i.current=!0),function(){return window.removeEventListener("resize",t)}}),[e]),(0,t.useEffect)((function(){r.current=n.current.getContext("2d")}),[]),[n,r]}(m),y=(0,s.Z)(g,2),A=y[0],x=y[1];return(0,t.useImperativeHandle)(n,(function(){return{frame:function(e){(void 0===f.current||e<f.current)&&(f.current=e),(void 0===p.current||e>p.current)&&(p.current=e),function(e,t){e.push(t),e.length>100&&e.shift()}(d.current,e),v.current=requestAnimationFrame((function(){return m(A.current,x.current)}))}}}),[A,x,m]),(0,t.useEffect)((function(){return function(){return cancelAnimationFrame(v.current)}}),[]),t.createElement(hU,{ref:A})})),fU=function(e){return Number.isFinite(e)?e.toPrecision(2):e.toString()},pU=(0,t.forwardRef)((function(e,n){var r=e.initialValue,i=(0,t.useState)(fU(r)),a=(0,s.Z)(i,2),o=a[0],l=a[1];return(0,t.useImperativeHandle)(n,(function(){return{frame:function(e){return l(fU(e))}}}),[]),t.createElement("div",null,o)}));function vU(e){return"function"===typeof e?e():e.current}var mU=["type","label","key"],gU=(vN={},(0,L.Z)(vN,iP.BUTTON,(function(e){var n=e.onClick,r=e.settings,i=e.label,a=TP();return t.createElement(fD,null,t.createElement(lU,{disabled:r.disabled,onClick:function(){return n(a.get)}},i))})),(0,L.Z)(vN,iP.BUTTON_GROUP,(function(e){var n=function(e){var t=e.label,n=e.opts,r="string"===typeof t&&""===t.trim()?null:t,i=n;return"object"===typeof n.opts&&(void 0!==i.label&&(r=n.label),i=n.opts),{label:r,opts:i}}(e),r=n.label,i=n.opts,a=TP();return t.createElement(fD,{input:!!r},r&&t.createElement(lD,null,r),t.createElement(uU,null,Object.entries(i).map((function(e){var n=(0,s.Z)(e,2),r=n[0],i=n[1];return t.createElement(cU,{key:r,onClick:function(){return i(a.get)}},r)}))))})),(0,L.Z)(vN,iP.MONITOR,(function(e){var n=e.label,r=e.objectOrFn,i=e.settings,a=(0,t.useRef)(),o=(0,t.useRef)(vU(r));return(0,t.useEffect)((function(){var e=window.setInterval((function(){var e;document.hidden||null===(e=a.current)||void 0===e||e.frame(vU(r))}),i.interval);return function(){return window.clearInterval(e)}}),[r,i.interval]),t.createElement(fD,{input:!0},t.createElement(lD,{align:"top"},n),i.graph?t.createElement(dU,{ref:a,initialValue:o.current}):t.createElement(pU,{ref:a,initialValue:o.current}))})),vN),yU=t.memo((function(e){var n=e.path,r=function(e){var n=TP(),r=(0,t.useState)(yD(n.getData(),e)),i=(0,s.Z)(r,2),a=i[0],o=i[1],l=(0,t.useCallback)((function(t){return n.setValueAtPath(e,t,!0)}),[e,n]),u=(0,t.useCallback)((function(t){return n.setSettingsAtPath(e,t)}),[e,n]),c=(0,t.useCallback)((function(t){return n.disableInputAtPath(e,t)}),[e,n]),h=(0,t.useCallback)((function(){return n.emitOnEditStart(e)}),[e,n]),d=(0,t.useCallback)((function(){return n.emitOnEditEnd(e)}),[e,n]);return(0,t.useEffect)((function(){o(yD(n.getData(),e));var t=n.useStore.subscribe((function(t){return yD(t.data,e)}),o,{equalityFn:YC});return function(){return t()}}),[n,e]),[a,{set:l,setSettings:u,disable:c,storeId:n.storeId,emitOnEditStart:h,emitOnEditEnd:d}]}(n),i=(0,s.Z)(r,2),a=i[0],o=i[1],l=o.set,u=o.setSettings,c=o.disable,h=o.storeId,d=o.emitOnEditStart,f=o.emitOnEditEnd;if(!a)return null;var p=a.type,v=a.label,m=a.key,g=CL(a,mU);if(p in iP){var y=gU[p];return t.createElement(y,wP({label:v,path:n},g))}return p in OL?t.createElement(sU,wP({key:h+n,type:p,label:v,storeId:h,path:n,valueKey:m,setValue:l,setSettings:u,disable:c,emitOnEditStart:d,emitOnEditEnd:f},g)):(BL(_L.UNSUPPORTED_INPUT,p,n),null)}));function AU(e){var n=e.toggle,r=e.toggled,i=e.name;return t.createElement(WP,{onClick:function(){return n()}},t.createElement(hD,{toggled:r}),t.createElement("div",null,i))}var xU=function(e){var n=e.name,r=e.path,i=e.tree,a=TP(),o=AN(r,n),l=a.getFolderSettings(o),u=l.collapsed,c=l.color,h=(0,t.useState)(!u),d=(0,s.Z)(h,2),f=d[0],p=d[1],v=(0,t.useRef)(null),m=OP("colors","folderWidgetColor"),g=OP("colors","folderTextColor");return(0,t.useLayoutEffect)((function(){v.current.style.setProperty("--leva-colors-folderWidgetColor",c||m),v.current.style.setProperty("--leva-colors-folderTextColor",c||g)}),[c,m,g]),t.createElement(VP,{ref:v},t.createElement(AU,{name:n,toggled:f,toggle:function(){return p((function(e){return!e}))}}),t.createElement(bU,{parent:o,tree:i,toggled:f}))},bU=t.memo((function(e){var n=e.isRoot,r=void 0!==n&&n,i=e.fill,a=void 0!==i&&i,o=e.flat,l=void 0!==o&&o,u=e.parent,c=e.tree,h=e.toggled,d=function(e){var n=(0,t.useRef)(null),r=(0,t.useRef)(null),i=(0,t.useRef)(!0);return(0,t.useLayoutEffect)((function(){e||(n.current.style.height="0px",n.current.style.overflow="hidden")}),[]),(0,t.useEffect)((function(){if(!i.current){var t,a=n.current,o=function(){e&&(a.style.removeProperty("height"),a.style.removeProperty("overflow"),r.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};a.addEventListener("transitionend",o,{once:!0});var s=r.current.getBoundingClientRect().height;return a.style.height=s+"px",e||(a.style.overflow="hidden",t=window.setTimeout((function(){return a.style.height="0px"}),50)),function(){a.removeEventListener("transitionend",o),clearTimeout(t)}}i.current=!1}),[e]),{wrapperRef:n,contentRef:r}}(h),f=d.wrapperRef,p=d.contentRef,v=TP(),m=function(e){var t,n=(0,s.Z)(e,2),r=n[0],i=n[1];return(aU(i)?null===(t=v.getInput(i.path))||void 0===t?void 0:t.order:v.getFolderSettings(AN(u,r)).order)||0},g=Object.entries(c).sort((function(e,t){return m(e)-m(t)}));return t.createElement(jP,{ref:f,isRoot:r,fill:a,flat:l},t.createElement(qP,{ref:p,isRoot:r,toggled:h},g.map((function(e){var n=(0,s.Z)(e,2),r=n[0],i=n[1];return aU(i)?t.createElement(yU,{key:i.path,valueKey:i.valueKey,path:i.path}):t.createElement(xU,{key:r,name:r,path:u,tree:i})}))))})),_U=LP("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:(0,L.Z)({},"".concat(XP),{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"})},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),wU=LP("i",{$flexCenter:"",width:40,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),EU=LP("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),SU=LP("div",(mN={$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md"},(0,L.Z)(mN,"> ".concat(wU),{height:30}),(0,L.Z)(mN,"variants",{toggled:{true:{height:30},false:{height:0}}}),mN)),MU=LP("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),CU=LP("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:40}}}}),kU=t.forwardRef((function(e,n){var r=e.setFilter,i=e.toggle,a=(0,t.useState)(""),o=(0,s.Z)(a,2),l=o[0],u=o[1],c=(0,t.useMemo)((function(){return vP(r,250)}),[r]);return(0,t.useEffect)((function(){c(l)}),[l,c]),t.createElement(t.Fragment,null,t.createElement(MU,{ref:n,value:l,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:function(e){return e.stopPropagation()},onChange:function(e){var t=e.currentTarget.value;i(!0),u(t)}}),t.createElement(wU,{onClick:function(){return r(""),void u("")},style:{visibility:l?"visible":"hidden"}},t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},t.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))}));function TU(e){var n=e.setFilter,r=e.onDrag,i=e.onDragStart,a=e.onDragEnd,o=e.toggle,l=e.toggled,u=e.title,c=e.drag,h=e.filterEnabled,d=e.from,f=(0,t.useState)(!1),p=(0,s.Z)(f,2),v=p[0],m=p[1],g=(0,t.useRef)(null);(0,t.useEffect)((function(){var e,t;v?null===(e=g.current)||void 0===e||e.focus():null===(t=g.current)||void 0===t||t.blur()}),[v]);var y=vD((function(e){var t=(0,s.Z)(e.offset,2),n=t[0],o=t[1],l=e.first,u=e.last;r({x:n,y:o}),l&&i({x:n,y:o}),u&&a({x:n,y:o})}),{filterTaps:!0,from:function(e){var t=(0,s.Z)(e.offset,2),n=t[0],r=t[1];return[(null===d||void 0===d?void 0:d.x)||n,(null===d||void 0===d?void 0:d.y)||r]}});return(0,t.useEffect)((function(){var e=function(e){"L"===e.key&&e.shiftKey&&e.metaKey&&m((function(e){return!e}))};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]),t.createElement(t.Fragment,null,t.createElement(EU,{mode:c?"drag":void 0},t.createElement(wU,{active:!l,onClick:function(){return o()}},t.createElement(hD,{toggled:l,width:12,height:8})),t.createElement(CU,wP({},c?y():{},{drag:c,filterEnabled:h}),void 0===u&&c?t.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},t.createElement("circle",{cx:"2",cy:"2",r:"2"}),t.createElement("circle",{cx:"14",cy:"2",r:"2"}),t.createElement("circle",{cx:"26",cy:"2",r:"2"}),t.createElement("circle",{cx:"2",cy:"12",r:"2"}),t.createElement("circle",{cx:"14",cy:"12",r:"2"}),t.createElement("circle",{cx:"26",cy:"12",r:"2"})):u),h&&t.createElement(wU,{active:v,onClick:function(){return m((function(e){return!e}))}},t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},t.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),t.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),t.createElement(SU,{toggled:v},t.createElement(kU,{ref:g,setFilter:n,toggle:o})))}t.memo((function(e){var n,r,i=e.store,a=e.rootClass,o=e.fill,l=void 0!==o&&o,u=e.flat,c=void 0!==u&&u,h=e.neverHide,d=void 0!==h&&h,f=e.oneLineLabels,p=void 0!==f&&f,v=e.titleBar,m=void 0===v?{title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0}:v,g=e.hideCopyButton,y=void 0!==g&&g,A=e.toggled,x=e.setToggle,b=function(e){var n=(0,t.useState)(e.getVisiblePaths()),r=(0,s.Z)(n,2),i=r[0],a=r[1];return(0,t.useEffect)((function(){a(e.getVisiblePaths());var t=e.useStore.subscribe(e.getVisiblePaths,a,{equalityFn:YC});return function(){return t()}}),[e]),i}(i),_=(0,t.useState)(""),w=(0,s.Z)(_,2),E=w[0],S=w[1],M=(0,t.useMemo)((function(){return function(e,t){var n={},r=t?t.toLowerCase():null;return e.forEach((function(e){var t=function(e){var t=e.split(".");return[t.pop(),t.join(".")||void 0]}(e),i=(0,s.Z)(t,2),a=i[0],o=i[1];(!r||a.toLowerCase().indexOf(r)>-1)&&yN()(n,o,(0,L.Z)({},a,{__levaInput:!0,path:e}))})),n}(b,E)}),[b,E]),C=mD(),k=(0,s.Z)(C,2),T=k[0],I=k[1],B=d||b.length>0,R="object"===typeof m&&m.title||void 0,P="object"!==typeof m||(null===(n=m.drag)||void 0===n||n),D="object"!==typeof m||(null===(r=m.filter)||void 0===r||r),O="object"===typeof m&&m.position||void 0,F="object"===typeof m&&m.onDrag||void 0,N="object"===typeof m&&m.onDragStart||void 0,U="object"===typeof m&&m.onDragEnd||void 0;return t.useEffect((function(){I({x:null===O||void 0===O?void 0:O.x,y:null===O||void 0===O?void 0:O.y})}),[O,I]),DP(),t.createElement(kP.Provider,{value:{hideCopyButton:y}},t.createElement(_U,{ref:T,className:a,fill:l,flat:c,oneLineLabels:p,hideTitleBar:!m,style:{display:B?"block":"none"}},m&&t.createElement(TU,{onDrag:function(e){I(e),null===F||void 0===F||F(e)},onDragStart:function(e){return null===N||void 0===N?void 0:N(e)},onDragEnd:function(e){return null===U||void 0===U?void 0:U(e)},setFilter:S,toggle:function(e){return x((function(t){return null!==e&&void 0!==e?e:!t}))},toggled:A,title:R,drag:P,filterEnabled:D,from:O}),B&&t.createElement(CP.Provider,{value:i},t.createElement(bU,{isRoot:!0,fill:l,flat:c,tree:M,toggled:A}))))}));function IU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}NL(aP.SELECT,PD),NL(aP.IMAGE,jN),NL(aP.NUMBER,kD),NL(aP.COLOR,IN),NL(aP.STRING,UD),NL(aP.BOOLEAN,GD),NL(aP.INTERVAL,tU),NL(aP.VECTOR3D,BN),NL(aP.VECTOR2D,NN);new sd,new sd;function BU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var RU=function e(t,n,r){var i=this;BU(this,e),IU(this,"dot2",(function(e,t){return i.x*e+i.y*t})),IU(this,"dot3",(function(e,t,n){return i.x*e+i.y*t+i.z*n})),this.x=t,this.y=n,this.z=r},LU=[new RU(1,1,0),new RU(-1,1,0),new RU(1,-1,0),new RU(-1,-1,0),new RU(1,0,1),new RU(-1,0,1),new RU(1,0,-1),new RU(-1,0,-1),new RU(0,1,1),new RU(0,-1,1),new RU(0,1,-1),new RU(0,-1,-1)],PU=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],DU=new Array(512),OU=new Array(512),FU=function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;n=1&t?PU[t]^255&e:PU[t]^e>>8&255,DU[t]=DU[t+256]=n,OU[t]=OU[t+256]=LU[n%12]}};FU(0);Math.sqrt(3),Math.sqrt(3),Math.PI;function NU(e){var t=function(e){if("number"===typeof e)e=Math.abs(e);else if("string"===typeof e){var t=e;e=0;for(var n=0;n<t.length;n++)e=(e+(n+1)*(t.charCodeAt(n)%96))%2147483647}return 0===e&&(e=311),e}(e);return function(){var e=48271*t%2147483647;return t=e,e/2147483647}}var UU=function e(t){var n=this;BU(this,e),IU(this,"seed",0),IU(this,"init",(function(e){n.seed=e,n.value=NU(e)})),IU(this,"value",NU(this.seed)),this.init(t)};new UU(Math.random());var ZU,zU=new WeakMap,HU=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).decoderPath="",r.decoderConfig={},r.decoderBinary=null,r.decoderPending=null,r.workerLimit=4,r.workerPool=[],r.workerNextTaskID=1,r.workerSourceURL="",r.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},r.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"},r}return(0,c.Z)(n,[{key:"setDecoderPath",value:function(e){return this.decoderPath=e,this}},{key:"setDecoderConfig",value:function(e){return this.decoderConfig=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerLimit=e,this}},{key:"load",value:function(e,t,n,r){var i=this,a=new mb(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){var n={attributeIDs:i.defaultAttributeIDs,attributeTypes:i.defaultAttributeTypes,useUniqueIDs:!1};i.decodeGeometry(e,n).then(t).catch(r)}),n,r)}},{key:"decodeDracoFile",value:function(e,t,n,r){var i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(t)}},{key:"decodeGeometry",value:function(e,t){var n=this;for(var r in t.attributeTypes){var i=t.attributeTypes[r];void 0!==i.BYTES_PER_ELEMENT&&(t.attributeTypes[r]=i.name)}var a,o=JSON.stringify(t);if(zU.has(e)){var s=zU.get(e);if(s.key===o)return s.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var l=this.workerNextTaskID++,u=e.byteLength,c=this._getWorker(l,u).then((function(n){return a=n,new Promise((function(n,r){a._callbacks[l]={resolve:n,reject:r},a.postMessage({type:"decode",id:l,taskConfig:t,buffer:e},[e])}))})).then((function(e){return n._createGeometry(e.geometry)}));return c.catch((function(){return!0})).then((function(){a&&l&&n._releaseTask(a,l)})),zU.set(e,{key:o,promise:c}),c}},{key:"_createGeometry",value:function(e){var t=new Ip;e.index&&t.setIndex(new dp(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n],i=r.name,a=r.array,o=r.itemSize;t.setAttribute(i,new dp(a,o))}return t}},{key:"_loadLibrary",value:function(e,t){var n=new mb(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((function(t,r){n.load(e,t,void 0,r)}))}},{key:"preload",value:function(){return this._initDecoder(),this}},{key:"_initDecoder",value:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then((function(n){var r=n[0];t||(e.decoderConfig.wasmBinary=n[1]);var i=GU.toString(),a=["/* draco decoder */",r,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([a]))})),this.decoderPending}},{key:"_getWorker",value:function(e,t){var n=this;return this._initDecoder().then((function(){if(n.workerPool.length<n.workerLimit){var r=new Worker(n.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:n.decoderConfig}),r.onmessage=function(e){var t=e.data;switch(t.type){case"decode":r._callbacks[t.id].resolve(t);break;case"error":r._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},n.workerPool.push(r)}else n.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));var i=n.workerPool[n.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i}))}},{key:"_releaseTask",value:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}},{key:"debug",value:function(){console.log("Task load: ",this.workerPool.map((function(e){return e._taskLoad})))}},{key:"dispose",value:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}]),n}(fb);function GU(){var e,t;function n(e,t,n,r,i,a){var o=a.num_components(),s=n.num_points()*o,l=s*i.BYTES_PER_ELEMENT,u=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),c=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,a,u,l,c);var h=new i(e.HEAPF32.buffer,c,s).slice();return e._free(c),{name:r,array:h,itemSize:o}}onmessage=function(r){var i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var a=i.buffer,o=i.taskConfig;t.then((function(e){var t=e.draco,r=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(a),a.byteLength);try{var l=function(e,t,r,i){var a,o,s=i.attributeIDs,l=i.attributeTypes,u=t.GetEncodedGeometryType(r);if(u===e.TRIANGULAR_MESH)a=new e.Mesh,o=t.DecodeBufferToMesh(r,a);else{if(u!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,o=t.DecodeBufferToPointCloud(r,a)}if(!o.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+o.error_msg());var c={index:null,attributes:[]};for(var h in s){var d=self[l[h]],f=void 0,p=void 0;if(i.useUniqueIDs)p=s[h],f=t.GetAttributeByUniqueId(a,p);else{if(-1===(p=t.GetAttributeId(a,e[s[h]])))continue;f=t.GetAttribute(a,p)}c.attributes.push(n(e,t,a,h,d,f))}u===e.TRIANGULAR_MESH&&(c.index=function(e,t,n){var r=n.num_faces(),i=3*r,a=4*i,o=e._malloc(a);t.GetTrianglesUInt32Array(n,a,o);var s=new Uint32Array(e.HEAPF32.buffer,o,i).slice();return e._free(o),{array:s,itemSize:1}}(e,t,a));return e.destroy(a),c}(t,r,s,o),u=l.attributes.map((function(e){return e.array.buffer}));l.index&&u.push(l.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:l},u)}catch(c){console.error(c),self.postMessage({type:"error",id:i.id,error:c.message})}finally{t.destroy(s),t.destroy(r)}}))}}}var QU=function(){if(ZU)return ZU;var e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!==typeof WebAssembly)return{supported:!1};var n,r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(r="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");var i=WebAssembly.instantiate(function(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;++r){var i=e.charCodeAt(r);n[r]=i>96?i-71:i>64?i-65:i>47?i+4:i>46?63:62}for(var a=0,o=0;o<e.length;++o)n[a++]=n[o]<60?t[n[o]]:64*(n[o]-60)+n[++o];return n.buffer.slice(0,a)}(r),{}).then((function(e){(n=e.instance).exports.__wasm_call_ctors()}));function a(e,t,r,i,a,o){var s=n.exports.sbrk,l=r+3&-4,u=s(l*i),c=s(a.length),h=new Uint8Array(n.exports.memory.buffer);h.set(a,c);var d=e(u,r,i,c,a.length);if(0===d&&o&&o(u,l,i),t.set(h.subarray(u,u+r*i)),s(u-s(0)),0!==d)throw new Error("Malformed buffer data: ".concat(d))}var o={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},s={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return ZU={ready:i,supported:!0,decodeVertexBuffer:function(e,t,r,i,s){a(n.exports.meshopt_decodeVertexBuffer,e,t,r,i,n.exports[o[s]])},decodeIndexBuffer:function(e,t,r,i){a(n.exports.meshopt_decodeIndexBuffer,e,t,r,i)},decodeIndexSequence:function(e,t,r,i){a(n.exports.meshopt_decodeIndexSequence,e,t,r,i)},decodeGltfBuffer:function(e,t,r,i,l,u){a(n.exports[s[l]],e,t,r,i,n.exports[o[u]])}},ZU};function VU(e,t){if(t===ah)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===sh||t===oh){var n=e.getIndex();if(null===n){var r=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<i.count;a++)r.push(a);e.setIndex(r),n=e.getIndex()}var o=n.count-2,s=[];if(n)if(t===sh)for(var l=1;l<=o;l++)s.push(n.getX(0)),s.push(n.getX(l)),s.push(n.getX(l+1));else for(var u=0;u<o;u++)u%2===0?(s.push(n.getX(u)),s.push(n.getX(u+1)),s.push(n.getX(u+2))):(s.push(n.getX(u+2)),s.push(n.getX(u+1)),s.push(n.getX(u)));s.length/3!==o&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(s),c.clearGroups(),c}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}var jU=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).dracoLoader=null,r.ktx2Loader=null,r.meshoptDecoder=null,r.pluginCallbacks=[],r.register((function(e){return new KU(e)})),r.register((function(e){return new oZ(e)})),r.register((function(e){return new sZ(e)})),r.register((function(e){return new lZ(e)})),r.register((function(e){return new eZ(e)})),r.register((function(e){return new tZ(e)})),r.register((function(e){return new nZ(e)})),r.register((function(e){return new rZ(e)})),r.register((function(e){return new YU(e)})),r.register((function(e){return new iZ(e)})),r.register((function(e){return new $U(e)})),r.register((function(e){return new aZ(e)})),r.register((function(e){return new JU(e)})),r.register((function(e){return new uZ(e)})),r.register((function(e){return new cZ(e)})),r}return(0,c.Z)(n,[{key:"load",value:function(e,t,n,r){var i,a=this;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Gb.extractUrlBase(e),this.manager.itemStart(e);var o=function(t){r?r(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},s=new mb(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{a.parse(n,i,(function(n){t(n),a.manager.itemEnd(e)}),o)}catch(r){o(r)}}),n,o)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){var i,a={},o={};if("string"===typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer){if(Gb.decodeText(new Uint8Array(e.slice(0,4)))===hZ){try{a[qU.KHR_BINARY_GLTF]=new pZ(e)}catch(f){return void(r&&r(f))}i=JSON.parse(a[qU.KHR_BINARY_GLTF].content)}else i=JSON.parse(Gb.decodeText(new Uint8Array(e)))}else i=e;if(void 0===i.asset||i.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var s=new ZZ(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});s.fileLoader.setRequestHeader(this.requestHeader);for(var l=0;l<this.pluginCallbacks.length;l++){var u=this.pluginCallbacks[l](s);o[u.name]=u,a[u.name]=!0}if(i.extensionsUsed)for(var c=0;c<i.extensionsUsed.length;++c){var h=i.extensionsUsed[c],d=i.extensionsRequired||[];switch(h){case qU.KHR_MATERIALS_UNLIT:a[h]=new XU;break;case qU.KHR_DRACO_MESH_COMPRESSION:a[h]=new vZ(i,this.dracoLoader);break;case qU.KHR_TEXTURE_TRANSFORM:a[h]=new mZ;break;case qU.KHR_MESH_QUANTIZATION:a[h]=new gZ;break;default:d.indexOf(h)>=0&&void 0===o[h]&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}s.setExtensions(a),s.setPlugins(o),s.parse(n,r)}}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}]),n}(fb);function WU(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var qU={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},JU=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=qU.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return(0,c.Z)(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var i,a=t.json,o=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],s=new np(16777215);void 0!==o.color&&s.fromArray(o.color);var l=void 0!==o.range?o.range:0;switch(o.type){case"directional":(i=new Fb(s)).target.position.set(0,0,-1),i.add(i.target);break;case"point":(i=new Db(s)).distance=l;break;case"spot":(i=new Ib(s)).distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,i.angle=o.spot.outerConeAngle,i.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return i.position.set(0,0,0),i.decay=2,PZ(i,o),void 0!==o.intensity&&(i.intensity=o.intensity),i.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(i),t.cache.add(n,r),r}},{key:"getDependency",value:function(e,t){if("light"===e)return this._loadLight(t)}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}]),e}(),XU=function(){function e(){(0,u.Z)(this,e),this.name=qU.KHR_MATERIALS_UNLIT}return(0,c.Z)(e,[{key:"getMaterialType",value:function(){return ip}},{key:"extendParams",value:function(e,t,n){var r=[];e.color=new np(1,1,1),e.opacity=1;var i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var a=i.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,3001))}return Promise.all(r)}}]),e}(),YU=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=qU.KHR_MATERIALS_EMISSIVE_STRENGTH}return(0,c.Z)(e,[{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}]),e}(),KU=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=qU.KHR_MATERIALS_CLEARCOAT}return(0,c.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Dx:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new sd(o,o)}return Promise.all(i)}}]),e}(),$U=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=qU.KHR_MATERIALS_IRIDESCENCE}return(0,c.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Dx:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(i)}}]),e}(),eZ=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=qU.KHR_MATERIALS_SHEEN}return(0,c.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Dx:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[];t.sheenColor=new np(0,0,0),t.sheenRoughness=0,t.sheen=1;var a=r.extensions[this.name];return void 0!==a.sheenColorFactor&&t.sheenColor.fromArray(a.sheenColorFactor),void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,3001)),void 0!==a.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(i)}}]),e}(),tZ=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=qU.KHR_MATERIALS_TRANSMISSION}return(0,c.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Dx:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}]),e}(),nZ=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=qU.KHR_MATERIALS_VOLUME}return(0,c.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Dx:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;var o=a.attenuationColor||[1,1,1];return t.attenuationColor=new np(o[0],o[1],o[2]),Promise.all(i)}}]),e}(),rZ=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=qU.KHR_MATERIALS_IOR}return(0,c.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Dx:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}]),e}(),iZ=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=qU.KHR_MATERIALS_SPECULAR}return(0,c.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Dx:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));var o=a.specularColorFactor||[1,1,1];return t.specularColor=new np(o[0],o[1],o[2]),void 0!==a.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,3001)),Promise.all(i)}}]),e}(),aZ=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=qU.KHR_MATERIALS_ANISOTROPY}return(0,c.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Dx:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.anisotropyStrength&&(t.anisotropy=a.anisotropyStrength),void 0!==a.anisotropyRotation&&(t.anisotropyRotation=a.anisotropyRotation),void 0!==a.anisotropyTexture&&i.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(i)}}]),e}(),oZ=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=qU.KHR_TEXTURE_BASISU}return(0,c.Z)(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var i=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,a)}}]),e}(),sZ=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=qU.EXT_TEXTURE_WEBP,this.isSupported=null}return(0,c.Z)(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var a=i.extensions[t],o=r.images[a.source],s=n.textureLoader;if(o.uri){var l=n.options.manager.getHandler(o.uri);null!==l&&(s=l)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,a.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),lZ=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=qU.EXT_TEXTURE_AVIF,this.isSupported=null}return(0,c.Z)(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var a=i.extensions[t],o=r.images[a.source],s=n.textureLoader;if(o.uri){var l=n.options.manager.getHandler(o.uri);null!==l&&(s=l)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,a.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),uZ=function(){function e(t){(0,u.Z)(this,e),this.name=qU.EXT_MESHOPT_COMPRESSION,this.parser=t}return(0,c.Z)(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then((function(e){var t=r.byteOffset||0,n=r.byteLength||0,i=r.count,o=r.byteStride,s=new Uint8Array(e,t,n);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(i,o,s,r.mode,r.filter).then((function(e){return e.buffer})):a.ready.then((function(){var e=new ArrayBuffer(i*o);return a.decodeGltfBuffer(new Uint8Array(e),i,o,s,r.mode,r.filter),e}))}))}return null}}]),e}(),cZ=function(){function e(t){(0,u.Z)(this,e),this.name=qU.EXT_MESH_GPU_INSTANCING,this.parser=t}return(0,c.Z)(e,[{key:"createNodeMesh",value:function(e){var t=this,n=this.parser.json,r=n.nodes[e];if(!r.extensions||!r.extensions[this.name]||void 0===r.mesh)return null;var i,a=n.meshes[r.mesh],o=(0,Ms.Z)(a.primitives);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(s.mode!==bZ.TRIANGLES&&s.mode!==bZ.TRIANGLE_STRIP&&s.mode!==bZ.TRIANGLE_FAN&&void 0!==s.mode)return null}}catch(f){o.e(f)}finally{o.f()}var l=r.extensions[this.name].attributes,u=[],c={},h=function(e){u.push(t.parser.getDependency("accessor",l[e]).then((function(t){return c[e]=t,c[e]})))};for(var d in l)h(d);return u.length<1?null:(u.push(this.parser.createNodeMesh(e)),Promise.all(u).then((function(e){var n,r=e.pop(),i=r.isGroup?r.children:[r],a=e[0].count,o=[],s=(0,Ms.Z)(i);try{for(s.s();!(n=s.n()).done;){for(var l=n.value,u=new df,h=new Dd,d=new Pd,p=new Dd(1,1,1),v=new Uy(l.geometry,l.material,a),m=0;m<a;m++)c.TRANSLATION&&h.fromBufferAttribute(c.TRANSLATION,m),c.ROTATION&&d.fromBufferAttribute(c.ROTATION,m),c.SCALE&&p.fromBufferAttribute(c.SCALE,m),v.setMatrixAt(m,u.compose(h,d,p));for(var g in c)"TRANSLATION"!==g&&"ROTATION"!==g&&"SCALE"!==g&&l.geometry.setAttribute(g,c[g]);Ff.prototype.copy.call(v,l),t.parser.assignFinalMaterial(v),o.push(v)}}catch(f){s.e(f)}finally{s.f()}return r.isGroup?(r.clear(),r.add.apply(r,o),r):o[0]})))}}]),e}(),hZ="glTF",dZ=1313821514,fZ=5130562,pZ=(0,c.Z)((function e(t){(0,u.Z)(this,e),this.name=qU.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,12);if(this.header={magic:Gb.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==hZ)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=this.header.length-12,i=new DataView(t,12),a=0;a<r;){var o=i.getUint32(a,!0);a+=4;var s=i.getUint32(a,!0);if(a+=4,s===dZ){var l=new Uint8Array(t,12+a,o);this.content=Gb.decodeText(l)}else if(s===fZ){var c=12+a;this.body=t.slice(c,c+o)}a+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")})),vZ=function(){function e(t,n){if((0,u.Z)(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=qU.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return(0,c.Z)(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},s={},l={};for(var u in a){var c=MZ[u]||u.toLowerCase();o[c]=a[u]}for(var h in e.attributes){var d=MZ[h]||h.toLowerCase();if(void 0!==a[h]){var f=n.accessors[e.attributes[h]],p=_Z[f.componentType];l[d]=p.name,s[d]=!0===f.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}t(e)}),o,l)}))}))}}]),e}(),mZ=function(){function e(){(0,u.Z)(this,e),this.name=qU.KHR_TEXTURE_TRANSFORM}return(0,c.Z)(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}]),e}(),gZ=(0,c.Z)((function e(){(0,u.Z)(this,e),this.name=qU.KHR_MESH_QUANTIZATION})),yZ=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a){return(0,u.Z)(this,n),t.call(this,e,r,i,a)}return(0,c.Z)(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,a=0;a!==r;a++)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,l=3*o,u=r-t,c=(n-t)/u,h=c*c,d=h*c,f=e*l,p=f-l,v=-2*d+3*h,m=d-h,g=1-v,y=m-h+c,A=0;A!==o;A++){var x=a[p+A+o],b=a[p+A+s]*u,_=a[f+A+o],w=a[f+A]*u;i[A]=g*x+y*b+v*_+m*w}return i}}]),n}(Jx),AZ=new Pd,xZ=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"interpolate_",value:function(e,t,r,i){var a=(0,Zn.Z)((0,zn.Z)(n.prototype),"interpolate_",this).call(this,e,t,r,i);return AZ.fromArray(a).normalize().toArray(a),a}}]),n}(yZ),bZ={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},_Z={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},wZ={9728:Zu,9729:Vu,9984:zu,9985:ju,9986:Gu,9987:qu},EZ={33071:Nu,33648:Uu,10497:Fu},SZ={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},MZ=D(D({POSITION:"position",NORMAL:"normal",TANGENT:"tangent"},Bl.replace(/\D+/g,"")>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"}),{},{COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"}),CZ={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},kZ={CUBICSPLINE:void 0,LINEAR:Kc,STEP:Yc},TZ="OPAQUE",IZ="MASK",BZ="BLEND";function RZ(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new Px({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Hl})),e.DefaultMaterial}function LZ(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function PZ(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function DZ(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(var a=0,o=i.length;a<o;a++)e.morphTargetDictionary[i[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function OZ(e){var t,n=e.extensions&&e.extensions[qU.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+FZ(n.attributes):e.indices+":"+FZ(e.attributes)+":"+e.mode,void 0!==e.targets)for(var r=0,i=e.targets.length;r<i;r++)t+=":"+FZ(e.targets[r]);return t}function FZ(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function NZ(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var UZ=new df,ZZ=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,u.Z)(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new WU,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};var r=!1,i=!1,a=-1;"undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent&&(r=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),a=(i=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"===typeof createImageBitmap||r||i&&a<98?this.textureLoader=new _b(this.options.manager):this.textureLoader=new Xb(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new mb(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return(0,c.Z)(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var a={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};LZ(i,a,r),PZ(a,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(a)}))).then((function(){e(a)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,i=t.length;r<i;r++)for(var a=t[r].joints,o=0,s=a.length;o<s;o++)e[a[o]].isBone=!0;for(var l=0,u=e.length;l<u;l++){var c=e[l];void 0!==c.mesh&&(this._addNodeRef(this.meshCache,c.mesh),void 0!==c.skin&&(n[c.mesh].isSkinnedMesh=!0)),void 0!==c.camera&&this._addNodeRef(this.cameraCache,c.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var r=this;if(e.refs[t]<=1)return n;var i=n.clone();return function e(t,n){var i=r.associations.get(t);null!=i&&r.associations.set(n,i);var a,o=(0,Ms.Z)(t.children.entries());try{for(o.s();!(a=o.n()).done;){var l=(0,s.Z)(a.value,2),u=l[0];e(l[1],n.children[u])}}catch(c){o.e(c)}finally{o.f()}}(n,i),i.name+="_instance_"+e.uses[t]++,i}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var i=e(t[r]);i&&n.push(i)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:if(!(r=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}))))throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[qU.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,i){n.load(Gb.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){var i=SZ[r.type],a=_Z[r.componentType],o=!0===r.normalized,s=new a(r.count*i);return Promise.resolve(new dp(s,i,o))}var l=[];return void 0!==r.bufferView?l.push(this.getDependency("bufferView",r.bufferView)):l.push(null),void 0!==r.sparse&&(l.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),l.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(l).then((function(e){var i,a,o=e[0],s=SZ[r.type],l=_Z[r.componentType],u=l.BYTES_PER_ELEMENT,c=u*s,h=r.byteOffset||0,d=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,f=!0===r.normalized;if(d&&d!==c){var p=Math.floor(h/d),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count,m=t.cache.get(v);m||(i=new l(o,p*d,r.count*d/u),m=new Kg(i,d/u),t.cache.add(v,m)),a=new ey(m,s,h%d/u,f)}else i=null===o?new l(r.count*s):new l(o,h,r.count*s),a=new dp(i,s,f);if(void 0!==r.sparse){var g=SZ.SCALAR,y=_Z[r.sparse.indices.componentType],A=r.sparse.indices.byteOffset||0,x=r.sparse.values.byteOffset||0,b=new y(e[1],A,r.sparse.count*g),_=new l(e[2],x,r.sparse.count*s);null!==o&&(a=new dp(a.array.slice(),a.itemSize,a.normalized));for(var w=0,E=b.length;w<E;w++){var S=b[w];if(a.setX(S,_[w*s]),s>=2&&a.setY(S,_[w*s+1]),s>=3&&a.setZ(S,_[w*s+2]),s>=4&&a.setW(S,_[w*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r],a=this.textureLoader;if(i.uri){var o=n.manager.getHandler(i.uri);null!==o&&(a=o)}return this.loadTextureImage(e,r,a)}},{key:"loadTextureImage",value:function(e,t,n){var r=this,i=this.json,a=i.textures[e],o=i.images[t],s=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[s])return this.textureCache[s];var l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=a.name||o.name||"",""===t.name&&"string"===typeof o.uri&&!1===o.uri.startsWith("data:image/")&&(t.name=o.uri);var n=(i.samplers||{})[a.sampler]||{};return t.magFilter=wZ[n.magFilter]||Vu,t.minFilter=wZ[n.minFilter]||qu,t.wrapS=EZ[n.wrapS]||Fu,t.wrapT=EZ[n.wrapT]||Fu,r.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[s]=l,l}},{key:"loadImageSource",value:function(e,t){var n=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((function(e){return e.clone()}));var i=n.images[e],a=self.URL||self.webkitURL,o=i.uri||"",s=!1;if(void 0!==i.bufferView)o=this.getDependency("bufferView",i.bufferView).then((function(e){s=!0;var t=new Blob([e],{type:i.mimeType});return o=a.createObjectURL(t)}));else if(void 0===i.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var l=Promise.resolve(o).then((function(e){return new Promise((function(n,i){var a=n;!0===t.isImageBitmapLoader&&(a=function(e){var t=new Md(e);t.needsUpdate=!0,n(t)}),t.load(Gb.resolveURL(e,r.path),a,void 0,i)}))})).then((function(e){var t;return!0===s&&a.revokeObjectURL(o),e.userData.mimeType=i.mimeType||((t=i.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e}));return this.sourceCache[e]=l,l}},{key:"assignTexture",value:function(e,t,n,r){var i=this;return this.getDependency("texture",n.index).then((function(a){if(!a)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((a=a.clone()).channel=n.texCoord),i.extensions[qU.KHR_TEXTURE_TRANSFORM]){var o=void 0!==n.extensions?n.extensions[qU.KHR_TEXTURE_TRANSFORM]:void 0;if(o){var s=i.associations.get(a);a=i.extensions[qU.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),i.associations.set(a,s)}}return void 0!==r&&("colorSpace"in a?a.colorSpace=3001===r?"srgb":"srgb-linear":a.encoding=r),e[t]=a,a}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){var o="PointsMaterial:"+n.uuid,s=this.cache.get(o);s||(s=new Yy,Yf.prototype.copy.call(s,n),s.color.copy(n.color),s.map=n.map,s.sizeAttenuation=!1,this.cache.add(o,s)),n=s}else if(e.isLine){var l="LineBasicMaterial:"+n.uuid,u=this.cache.get(l);u||(u=new Zy,Yf.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,this.cache.add(l,u)),n=u}if(r||i||a){var c="ClonedMaterial:"+n.uuid+":";r&&(c+="derivative-tangents:"),i&&(c+="vertex-colors:"),a&&(c+="flat-shading:");var h=this.cache.get(c);h||(h=n.clone(),i&&(h.vertexColors=!0),a&&(h.flatShading=!0),r&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(c,h),this.associations.set(h,this.associations.get(n))),n=h}e.material=n}},{key:"getMaterialType",value:function(){return Px}},{key:"loadMaterial",value:function(e){var t,n=this,r=this.json,i=this.extensions,a=r.materials[e],o={},s=[];if((a.extensions||{})[qU.KHR_MATERIALS_UNLIT]){var l=i[qU.KHR_MATERIALS_UNLIT];t=l.getMaterialType(),s.push(l.extendParams(o,a,n))}else{var u=a.pbrMetallicRoughness||{};if(o.color=new np(1,1,1),o.opacity=1,Array.isArray(u.baseColorFactor)){var c=u.baseColorFactor;o.color.fromArray(c),o.opacity=c[3]}void 0!==u.baseColorTexture&&s.push(n.assignTexture(o,"map",u.baseColorTexture,3001)),o.metalness=void 0!==u.metallicFactor?u.metallicFactor:1,o.roughness=void 0!==u.roughnessFactor?u.roughnessFactor:1,void 0!==u.metallicRoughnessTexture&&(s.push(n.assignTexture(o,"metalnessMap",u.metallicRoughnessTexture)),s.push(n.assignTexture(o,"roughnessMap",u.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),s.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)}))))}!0===a.doubleSided&&(o.side=Ql);var h=a.alphaMode||TZ;if(h===BZ?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,h===IZ&&(o.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==ip&&(s.push(n.assignTexture(o,"normalMap",a.normalTexture)),o.normalScale=new sd(1,1),void 0!==a.normalTexture.scale)){var d=a.normalTexture.scale;o.normalScale.set(d,d)}return void 0!==a.occlusionTexture&&t!==ip&&(s.push(n.assignTexture(o,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(o.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==ip&&(o.emissive=(new np).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==ip&&s.push(n.assignTexture(o,"emissiveMap",a.emissiveTexture,3001)),Promise.all(s).then((function(){var r=new t(o);return a.name&&(r.name=a.name),PZ(r,a),n.associations.set(r,{materials:e}),a.extensions&&LZ(i,r,a),r}))}},{key:"createUniqueName",value:function(e){var t=C_.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[qU.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return zZ(n,e,t)}))}for(var a=[],o=0,s=e.length;o<s;o++){var l=e[o],u=OZ(l),c=r[u];if(c)a.push(c.promise);else{var h=void 0;h=l.extensions&&l.extensions[qU.KHR_DRACO_MESH_COMPRESSION]?i(l):zZ(new Ip,l,t),r[u]={primitive:l,promise:h},a.push(h)}}return Promise.all(a)}},{key:"loadMesh",value:function(e){for(var t=this,n=this.json,r=this.extensions,i=n.meshes[e],a=i.primitives,o=[],s=0,l=a.length;s<l;s++){var u=void 0===a[s].material?RZ(this.cache):this.getDependency("material",a[s].material);o.push(u)}return o.push(t.loadGeometries(a)),Promise.all(o).then((function(n){for(var o=n.slice(0,n.length-1),s=n[n.length-1],l=[],u=0,c=s.length;u<c;u++){var h=s[u],d=a[u],f=void 0,p=o[u];if(d.mode===bZ.TRIANGLES||d.mode===bZ.TRIANGLE_STRIP||d.mode===bZ.TRIANGLE_FAN||void 0===d.mode)!0===(f=!0===i.isSkinnedMesh?new Sy(h,p):new qp(h,p)).isSkinnedMesh&&f.normalizeSkinWeights(),d.mode===bZ.TRIANGLE_STRIP?f.geometry=VU(f.geometry,oh):d.mode===bZ.TRIANGLE_FAN&&(f.geometry=VU(f.geometry,sh));else if(d.mode===bZ.LINES)f=new Jy(h,p);else if(d.mode===bZ.LINE_STRIP)f=new jy(h,p);else if(d.mode===bZ.LINE_LOOP)f=new Xy(h,p);else{if(d.mode!==bZ.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);f=new nA(h,p)}Object.keys(f.geometry.morphAttributes).length>0&&DZ(f,i),f.name=t.createUniqueName(i.name||"mesh_"+e),PZ(f,i),d.extensions&&LZ(r,f,d),t.assignFinalMaterial(f),l.push(f)}for(var v=0,m=l.length;v<m;v++)t.associations.set(l[v],{meshes:e,primitives:v});if(1===l.length)return i.extensions&&LZ(r,l[0],i),l[0];var g=new Ug;i.extensions&&LZ(r,g,i),t.associations.set(g,{meshes:e});for(var y=0,A=l.length;y<A;y++)g.add(l[y]);return g}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new rv(od.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new kv(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),PZ(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){for(var t=this.json.skins[e],n=[],r=0,i=t.joints.length;r<i;r++)n.push(this._loadNodeShallow(t.joints[r]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){for(var n=e.pop(),r=e,i=[],a=[],o=0,s=r.length;o<s;o++){var l=r[o];if(l){i.push(l);var u=new df;null!==n&&u.fromArray(n.array,16*o),a.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}return new Iy(i,a)}))}},{key:"loadAnimation",value:function(e){for(var t=this.json.animations[e],n=t.name?t.name:"animation_"+e,r=[],i=[],a=[],o=[],s=[],l=0,u=t.channels.length;l<u;l++){var c=t.channels[l],h=t.samplers[c.sampler],d=c.target,f=d.node,p=void 0!==t.parameters?t.parameters[h.input]:h.input,v=void 0!==t.parameters?t.parameters[h.output]:h.output;void 0!==d.node&&(r.push(this.getDependency("node",f)),i.push(this.getDependency("accessor",p)),a.push(this.getDependency("accessor",v)),o.push(h),s.push(d))}return Promise.all([Promise.all(r),Promise.all(i),Promise.all(a),Promise.all(o),Promise.all(s)]).then((function(e){for(var t=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=[],l=function(){var e,n=t[u],l=r[u],c=i[u],h=a[u],d=o[u];if(void 0===n)return"continue";switch(n.updateMatrix(),CZ[d.path]){case CZ.weights:e=nb;break;case CZ.rotation:e=ib;break;default:e=ob}var f=n.name?n.name:n.uuid,p=void 0!==h.interpolation?kZ[h.interpolation]:Kc,v=[];CZ[d.path]===CZ.weights?n.traverse((function(e){e.morphTargetInfluences&&v.push(e.name?e.name:e.uuid)})):v.push(f);var m=c.array;if(c.normalized){for(var g=NZ(m.constructor),y=new Float32Array(m.length),A=0,x=m.length;A<x;A++)y[A]=m[A]*g;m=y}for(var b=0,_=v.length;b<_;b++){var w=new e(v[b]+"."+CZ[d.path],l.array,m,p);"CUBICSPLINE"===h.interpolation&&(w.createInterpolant=function(e){return new(this instanceof ib?xZ:yZ)(this.times,this.values,this.getValueSize()/3,e)},w.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),s.push(w)}},u=0,c=t.length;u<c;u++)l();return new sb(n,void 0,s)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}},{key:"loadNode",value:function(e){for(var t=this,n=this.json.nodes[e],r=t._loadNodeShallow(e),i=[],a=n.children||[],o=0,s=a.length;o<s;o++)i.push(t.getDependency("node",a[o]));var l=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([r,Promise.all(i),l]).then((function(e){var t=e[0],n=e[1],r=e[2];null!==r&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(r,UZ)}));for(var i=0,a=n.length;i<a;i++)t.add(n[i]);return t}))}},{key:"_loadNodeShallow",value:function(e){var t=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];var i=t.nodes[e],a=i.name?r.createUniqueName(i.name):"",o=[],s=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return s&&o.push(s),void 0!==i.camera&&o.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){o.push(e)})),this.nodeCache[e]=Promise.all(o).then((function(t){var o;if((o=!0===i.isBone?new My:t.length>1?new Ug:1===t.length?t[0]:new Ff)!==t[0])for(var s=0,l=t.length;s<l;s++)o.add(t[s]);if(i.name&&(o.userData.name=i.name,o.name=a),PZ(o,i),i.extensions&&LZ(n,o,i),void 0!==i.matrix){var u=new df;u.fromArray(i.matrix),o.applyMatrix4(u)}else void 0!==i.translation&&o.position.fromArray(i.translation),void 0!==i.rotation&&o.quaternion.fromArray(i.rotation),void 0!==i.scale&&o.scale.fromArray(i.scale);return r.associations.has(o)||r.associations.set(o,{}),r.associations.get(o).nodes=e,o})),this.nodeCache[e]}},{key:"loadScene",value:function(e){var t=this.extensions,n=this.json.scenes[e],r=this,i=new Ug;n.name&&(i.name=r.createUniqueName(n.name)),PZ(i,n),n.extensions&&LZ(t,i,n);for(var a=n.nodes||[],o=[],l=0,u=a.length;l<u;l++)o.push(r.getDependency("node",a[l]));return Promise.all(o).then((function(e){for(var t=0,n=e.length;t<n;t++)i.add(e[t]);return r.associations=function(e){var t,n=new Map,i=(0,Ms.Z)(r.associations);try{for(i.s();!(t=i.n()).done;){var a=(0,s.Z)(t.value,2),o=a[0],l=a[1];(o instanceof Yf||o instanceof Md)&&n.set(o,l)}}catch(u){i.e(u)}finally{i.f()}return e.traverse((function(e){var t=r.associations.get(e);null!=t&&n.set(e,t)})),n}(i),i}))}}]),e}();function zZ(e,t,n){var r=t.attributes,i=[];function a(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var o in r){var s=MZ[o]||o.toLowerCase();s in e.attributes||i.push(a(r[o],s))}if(void 0!==t.indices&&!e.index){var l=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(l)}return PZ(e,t),function(e,t,n){var r=t.attributes,i=new Nd;if(void 0!==r.POSITION){var a=n.json.accessors[r.POSITION],o=a.min,s=a.max;if(void 0!==o&&void 0!==s){if(i.set(new Dd(o[0],o[1],o[2]),new Dd(s[0],s[1],s[2])),a.normalized){var l=NZ(_Z[a.componentType]);i.min.multiplyScalar(l),i.max.multiplyScalar(l)}var u=t.targets;if(void 0!==u){for(var c=new Dd,h=new Dd,d=0,f=u.length;d<f;d++){var p=u[d];if(void 0!==p.POSITION){var v=n.json.accessors[p.POSITION],m=v.min,g=v.max;if(void 0!==m&&void 0!==g){if(h.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),h.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),h.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),v.normalized){var y=NZ(_Z[v.componentType]);h.multiplyScalar(y)}c.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(c)}e.boundingBox=i;var A=new nf;i.getCenter(A.center),A.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=A}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,i=!1,a=!1,o=0,s=t.length;o<s;o++){var l=t[o];if(void 0!==l.POSITION&&(r=!0),void 0!==l.NORMAL&&(i=!0),void 0!==l.COLOR_0&&(a=!0),r&&i&&a)break}if(!r&&!i&&!a)return Promise.resolve(e);for(var u=[],c=[],h=[],d=0,f=t.length;d<f;d++){var p=t[d];if(r){var v=void 0!==p.POSITION?n.getDependency("accessor",p.POSITION):e.attributes.position;u.push(v)}if(i){var m=void 0!==p.NORMAL?n.getDependency("accessor",p.NORMAL):e.attributes.normal;c.push(m)}if(a){var g=void 0!==p.COLOR_0?n.getDependency("accessor",p.COLOR_0):e.attributes.color;h.push(g)}}return Promise.all([Promise.all(u),Promise.all(c),Promise.all(h)]).then((function(t){var n=t[0],o=t[1],s=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),a&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}var HZ=null;function GZ(e,t,n){return function(r){n&&n(r),e&&(HZ||(HZ=new HU),HZ.setDecoderPath("string"===typeof e?e:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),r.setDRACOLoader(HZ)),t&&r.setMeshoptDecoder("function"===typeof QU?QU():QU)}}function QZ(e){return qS(jU,e,GZ(!(arguments.length>1&&void 0!==arguments[1])||arguments[1],!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments.length>3?arguments[3]:void 0))}QZ.preload=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0;return qS.preload(jU,e,GZ(t,n,r))},QZ.clear=function(e){return qS.clear(jU,e)},QZ.preload("/room-test.glb"),QZ.preload("/woodfloor-repeated.glb");var VZ=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var jZ="undefined"!==typeof window?n(4097):void 0,WZ={children:!0,direction:!0,options:!0,recognizeWith:!0,vertical:!0},qZ={action:"tap press",onDoubleTap:"doubletap",onPan:"pan",onPanCancel:"pancancel",onPanEnd:"panend",onPanStart:"panstart",onPinch:"pinch",onPinchCancel:"pinchcancel",onPinchEnd:"pinchend",onPinchIn:"pinchin",onPinchOut:"pinchout",onPinchStart:"pinchstart",onPress:"press",onPressUp:"pressup",onRotate:"rotate",onRotateCancel:"rotatecancel",onRotateEnd:"rotateend",onRotateMove:"rotatemove",onRotateStart:"rotatestart",onSwipe:"swipe",onSwipeRight:"swiperight",onSwipeLeft:"swipeleft",onSwipeUp:"swipeup",onSwipeDown:"swipedown",onTap:"tap"};function JZ(e,t){t.hasOwnProperty("vertical")&&console.warn("vertical is deprecated, please use `direction` instead");var n=t.direction;if(n||t.hasOwnProperty("vertical")){var r=n||(t.vertical?"DIRECTION_ALL":"DIRECTION_HORIZONTAL");e.get("pan").set({direction:jZ[r]}),e.get("swipe").set({direction:jZ[r]})}t.options&&Object.keys(t.options).forEach((function(n){if("recognizers"===n)Object.keys(t.options.recognizers).forEach((function(n){var r=e.get(n);r.set(t.options.recognizers[n]),t.options.recognizers[n].requireFailure&&r.requireFailure(t.options.recognizers[n].requireFailure)}),this);else{var r={};r[n]=t.options[n],e.set(r)}}),this),t.recognizeWith&&Object.keys(t.recognizeWith).forEach((function(n){e.get(n).recognizeWith(t.recognizeWith[n])}),this),Object.keys(t).forEach((function(n){var r=qZ[n];r&&(e.off(r),e.on(r,t[n]))}))}Object.keys(qZ).forEach((function(e){WZ[e]=!0}));var XZ=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),VZ(n,[{key:"componentDidMount",value:function(){this.hammer=new jZ(this.domElement),JZ(this.hammer,this.props)}},{key:"componentDidUpdate",value:function(){this.hammer&&JZ(this.hammer,this.props)}},{key:"componentWillUnmount",value:function(){this.hammer&&(this.hammer.stop(),this.hammer.destroy()),this.hammer=null}},{key:"render",value:function(){var e={};Object.keys(this.props).forEach((function(t){WZ[t]||(e[t]=this.props[t])}),this);var n=this;return e.ref=function(e){n.props.ref&&n.props.ref(e),n.domElement=e},t.cloneElement(t.Children.only(this.props.children),e)}}]),n}(t.Component);XZ.displayName="Hammer",XZ.propTypes={className:uF().string};var YZ=n(4924),KZ=new WeakMap,$Z=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).decoderPath="",r.decoderConfig={},r.decoderBinary=null,r.decoderPending=null,r.workerLimit=4,r.workerPool=[],r.workerNextTaskID=1,r.workerSourceURL="",r.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},r.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"},r}return(0,c.Z)(n,[{key:"setDecoderPath",value:function(e){return this.decoderPath=e,this}},{key:"setDecoderConfig",value:function(e){return this.decoderConfig=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerLimit=e,this}},{key:"load",value:function(e,t,n,r){var i=this,a=new mb(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){i.parse(e,t,r)}),n,r)}},{key:"parse",value:function(e,t,n){this.decodeDracoFile(e,t,null,null,vh).catch(n)}},{key:"decodeDracoFile",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:mh,a={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:i};return this.decodeGeometry(e,a).then(t)}},{key:"decodeGeometry",value:function(e,t){var n,r=this,i=JSON.stringify(t);if(KZ.has(e)){var a=KZ.get(e);if(a.key===i)return a.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var o=this.workerNextTaskID++,s=e.byteLength,l=this._getWorker(o,s).then((function(r){return n=r,new Promise((function(r,i){n._callbacks[o]={resolve:r,reject:i},n.postMessage({type:"decode",id:o,taskConfig:t,buffer:e},[e])}))})).then((function(e){return r._createGeometry(e.geometry)}));return l.catch((function(){return!0})).then((function(){n&&o&&r._releaseTask(n,o)})),KZ.set(e,{key:i,promise:l}),l}},{key:"_createGeometry",value:function(e){var t=new Ip;e.index&&t.setIndex(new dp(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n],i=r.name,a=r.array,o=r.itemSize,s=new dp(a,o);"color"===i&&this._assignVertexColorSpace(s,r.vertexColorSpace),t.setAttribute(i,s)}return t}},{key:"_assignVertexColorSpace",value:function(e,t){if(t===vh)for(var n=new np,r=0,i=e.count;r<i;r++)n.fromBufferAttribute(e,r).convertSRGBToLinear(),e.setXYZ(r,n.r,n.g,n.b)}},{key:"_loadLibrary",value:function(e,t){var n=new mb(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((function(t,r){n.load(e,t,void 0,r)}))}},{key:"preload",value:function(){return this._initDecoder(),this}},{key:"_initDecoder",value:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then((function(n){var r=n[0];t||(e.decoderConfig.wasmBinary=n[1]);var i=ez.toString(),a=["/* draco decoder */",r,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([a]))})),this.decoderPending}},{key:"_getWorker",value:function(e,t){var n=this;return this._initDecoder().then((function(){if(n.workerPool.length<n.workerLimit){var r=new Worker(n.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:n.decoderConfig}),r.onmessage=function(e){var t=e.data;switch(t.type){case"decode":r._callbacks[t.id].resolve(t);break;case"error":r._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},n.workerPool.push(r)}else n.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));var i=n.workerPool[n.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i}))}},{key:"_releaseTask",value:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}},{key:"debug",value:function(){console.log("Task load: ",this.workerPool.map((function(e){return e._taskLoad})))}},{key:"dispose",value:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}]),n}(fb);function ez(){var e,t;function n(e,t,n,r,i,a){var o=a.num_components(),s=n.num_points()*o,l=s*i.BYTES_PER_ELEMENT,u=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),c=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,a,u,l,c);var h=new i(e.HEAPF32.buffer,c,s).slice();return e._free(c),{name:r,array:h,itemSize:o}}onmessage=function(r){var i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var a=i.buffer,o=i.taskConfig;t.then((function(e){var t=e.draco,r=new t.Decoder;try{var s=function(e,t,r,i){var a,o,s=i.attributeIDs,l=i.attributeTypes,u=t.GetEncodedGeometryType(r);if(u===e.TRIANGULAR_MESH)a=new e.Mesh,o=t.DecodeArrayToMesh(r,r.byteLength,a);else{if(u!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,o=t.DecodeArrayToPointCloud(r,r.byteLength,a)}if(!o.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+o.error_msg());var c={index:null,attributes:[]};for(var h in s){var d=self[l[h]],f=void 0,p=void 0;if(i.useUniqueIDs)p=s[h],f=t.GetAttributeByUniqueId(a,p);else{if(-1===(p=t.GetAttributeId(a,e[s[h]])))continue;f=t.GetAttribute(a,p)}var v=n(e,t,a,h,d,f);"color"===h&&(v.vertexColorSpace=i.vertexColorSpace),c.attributes.push(v)}u===e.TRIANGULAR_MESH&&(c.index=function(e,t,n){var r=n.num_faces(),i=3*r,a=4*i,o=e._malloc(a);t.GetTrianglesUInt32Array(n,a,o);var s=new Uint32Array(e.HEAPF32.buffer,o,i).slice();return e._free(o),{array:s,itemSize:1}}(e,t,a));return e.destroy(a),c}(t,r,new Int8Array(a),o),l=s.attributes.map((function(e){return e.array.buffer}));s.index&&l.push(s.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:s},l)}catch(u){console.error(u),self.postMessage({type:"error",id:i.id,error:u.message})}finally{t.destroy(r)}}))}}}var tz=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,l,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("worked"),n=vE({path:"/room-transformed.glb"},t),r=(0,s.Z)(n,2),i=r[0],r[1],!window.ahmetBuffer[i.path]){e.next=6;break}return console.log("update here"),e.abrupt("return");case 6:if(o=new YZ.o,(l=new $Z).setDecoderPath("/examples/jsm/libs/draco/"),o.setDRACOLoader(l),!window.ahmetBuffer[i.path]){e.next=13;break}return e.abrupt("return");case 13:return window.ahmetBuffer[i.path]=1,console.log(i,"arranged"),e.next=17,o.loadAsync(i.path);case 17:return u=e.sent,e.abrupt("return",u);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nz=n(7248),rz=t.use,iz=nz.useSyncExternalStore,az=function(e,n){var r=(0,t.useRef)();(0,t.useEffect)((function(){r.current=function(e,t,n){var r=[],i=new WeakSet;return function e(a,o){if(!i.has(a)){tE(a)&&i.add(a);var s=tE(a)&&t.get(rE(a));if(s){var l,u;if(null==(l=s.h)||l.forEach((function(e){var t=":has(".concat(String(e),")");r.push(o?[].concat((0,O.Z)(o),[t]):[t])})),!0===s[Xw]){var c=":ownKeys";r.push(o?[].concat((0,O.Z)(o),[c]):[c])}else{var h;null==(h=s.o)||h.forEach((function(e){var t=":hasOwn(".concat(String(e),")");r.push(o?[].concat((0,O.Z)(o),[t]):[t])}))}null==(u=s.k)||u.forEach((function(t){n&&!("value"in(Object.getOwnPropertyDescriptor(a,t)||{}))||e(a[t],o?[].concat((0,O.Z)(o),[t]):[t])}))}else o&&r.push(o)}}(e),r}(e,n,!0)})),(0,t.useDebugValue)(r.current)},oz=new WeakMap;function sz(e,n){var r=null==n?void 0:n.sync,i=(0,t.useRef)(),a=(0,t.useRef)(),o=!0,s=iz((0,t.useCallback)((function(t){var n=function(e,t,n){var r,i=lE.get(e);i||console.warn("Please use proxy object");var a=[],o=i[3],s=!1,l=o((function(e){a.push(e),n?t(a.splice(0)):r||(r=Promise.resolve().then((function(){r=void 0,s&&t(a.splice(0))})))}));return s=!0,function(){s=!1,l()}}(e,t,r);return t(),n}),[e,r]),(function(){var t=fE(e,rz);try{if(!o&&i.current&&a.current&&!aE(i.current,t,a.current,new WeakMap))return i.current}catch(n){}return t}),(function(){return fE(e,rz)}));o=!1;var l=new WeakMap;(0,t.useEffect)((function(){i.current=s,a.current=l})),az(s,l);var u=(0,t.useMemo)((function(){return new WeakMap}),[]);return iE(s,l,u,oz)}function lz(e,t){if(t===ah)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===sh||t===oh){var n=e.getIndex();if(null===n){var r=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<i.count;a++)r.push(a);e.setIndex(r),n=e.getIndex()}var o=n.count-2,s=[];if(t===sh)for(var l=1;l<=o;l++)s.push(n.getX(0)),s.push(n.getX(l)),s.push(n.getX(l+1));else for(var u=0;u<o;u++)u%2===0?(s.push(n.getX(u)),s.push(n.getX(u+1)),s.push(n.getX(u+2))):(s.push(n.getX(u+2)),s.push(n.getX(u+1)),s.push(n.getX(u)));s.length/3!==o&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(s),c.clearGroups(),c}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}var uz=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).dracoLoader=null,r.ktx2Loader=null,r.meshoptDecoder=null,r.pluginCallbacks=[],r.register((function(e){return new vz(e)})),r.register((function(e){return new _z(e)})),r.register((function(e){return new wz(e)})),r.register((function(e){return new Ez(e)})),r.register((function(e){return new gz(e)})),r.register((function(e){return new yz(e)})),r.register((function(e){return new Az(e)})),r.register((function(e){return new xz(e)})),r.register((function(e){return new pz(e)})),r.register((function(e){return new bz(e)})),r.register((function(e){return new mz(e)})),r.register((function(e){return new dz(e)})),r.register((function(e){return new Sz(e)})),r.register((function(e){return new Mz(e)})),r}return(0,c.Z)(n,[{key:"load",value:function(e,t,n,r){var i,a=this;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Gb.extractUrlBase(e),this.manager.itemStart(e);var o=function(t){r?r(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},s=new mb(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{a.parse(n,i,(function(n){t(n),a.manager.itemEnd(e)}),o)}catch(r){o(r)}}),n,o)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){var i,a={},o={},s=new TextDecoder;if("string"===typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer){if(s.decode(new Uint8Array(e,0,4))===Cz){try{a[hz.KHR_BINARY_GLTF]=new Iz(e)}catch(p){return void(r&&r(p))}i=JSON.parse(a[hz.KHR_BINARY_GLTF].content)}else i=JSON.parse(s.decode(e))}else i=e;if(void 0===i.asset||i.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var l=new nH(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(var u=0;u<this.pluginCallbacks.length;u++){var c=this.pluginCallbacks[u](l);o[c.name]=c,a[c.name]=!0}if(i.extensionsUsed)for(var h=0;h<i.extensionsUsed.length;++h){var d=i.extensionsUsed[h],f=i.extensionsRequired||[];switch(d){case hz.KHR_MATERIALS_UNLIT:a[d]=new fz;break;case hz.KHR_DRACO_MESH_COMPRESSION:a[d]=new Bz(i,this.dracoLoader);break;case hz.KHR_TEXTURE_TRANSFORM:a[d]=new Rz;break;case hz.KHR_MESH_QUANTIZATION:a[d]=new Lz;break;default:f.indexOf(d)>=0&&void 0===o[d]&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(a),l.setPlugins(o),l.parse(n,r)}}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}]),n}(fb);function cz(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var hz={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},dz=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=hz.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return(0,c.Z)(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var i,a=t.json,o=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],s=new np(16777215);void 0!==o.color&&s.fromArray(o.color);var l=void 0!==o.range?o.range:0;switch(o.type){case"directional":(i=new Fb(s)).target.position.set(0,0,-1),i.add(i.target);break;case"point":(i=new Db(s)).distance=l;break;case"spot":(i=new Ib(s)).distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,i.angle=o.spot.outerConeAngle,i.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return i.position.set(0,0,0),i.decay=2,Xz(i,o),void 0!==o.intensity&&(i.intensity=o.intensity),i.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(i),t.cache.add(n,r),r}},{key:"getDependency",value:function(e,t){if("light"===e)return this._loadLight(t)}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}]),e}(),fz=function(){function e(){(0,u.Z)(this,e),this.name=hz.KHR_MATERIALS_UNLIT}return(0,c.Z)(e,[{key:"getMaterialType",value:function(){return ip}},{key:"extendParams",value:function(e,t,n){var r=[];e.color=new np(1,1,1),e.opacity=1;var i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var a=i.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,uh))}return Promise.all(r)}}]),e}(),pz=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=hz.KHR_MATERIALS_EMISSIVE_STRENGTH}return(0,c.Z)(e,[{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}]),e}(),vz=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=hz.KHR_MATERIALS_CLEARCOAT}return(0,c.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Dx:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new sd(o,o)}return Promise.all(i)}}]),e}(),mz=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=hz.KHR_MATERIALS_IRIDESCENCE}return(0,c.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Dx:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(i)}}]),e}(),gz=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=hz.KHR_MATERIALS_SHEEN}return(0,c.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Dx:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[];t.sheenColor=new np(0,0,0),t.sheenRoughness=0,t.sheen=1;var a=r.extensions[this.name];return void 0!==a.sheenColorFactor&&t.sheenColor.fromArray(a.sheenColorFactor),void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,uh)),void 0!==a.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(i)}}]),e}(),yz=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=hz.KHR_MATERIALS_TRANSMISSION}return(0,c.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Dx:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}]),e}(),Az=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=hz.KHR_MATERIALS_VOLUME}return(0,c.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Dx:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;var o=a.attenuationColor||[1,1,1];return t.attenuationColor=new np(o[0],o[1],o[2]),Promise.all(i)}}]),e}(),xz=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=hz.KHR_MATERIALS_IOR}return(0,c.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Dx:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}]),e}(),bz=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=hz.KHR_MATERIALS_SPECULAR}return(0,c.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Dx:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));var o=a.specularColorFactor||[1,1,1];return t.specularColor=new np(o[0],o[1],o[2]),void 0!==a.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,uh)),Promise.all(i)}}]),e}(),_z=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=hz.KHR_TEXTURE_BASISU}return(0,c.Z)(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var i=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,a)}}]),e}(),wz=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=hz.EXT_TEXTURE_WEBP,this.isSupported=null}return(0,c.Z)(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var a=i.extensions[t],o=r.images[a.source],s=n.textureLoader;if(o.uri){var l=n.options.manager.getHandler(o.uri);null!==l&&(s=l)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,a.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),Ez=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=hz.EXT_TEXTURE_AVIF,this.isSupported=null}return(0,c.Z)(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var a=i.extensions[t],o=r.images[a.source],s=n.textureLoader;if(o.uri){var l=n.options.manager.getHandler(o.uri);null!==l&&(s=l)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,a.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),Sz=function(){function e(t){(0,u.Z)(this,e),this.name=hz.EXT_MESHOPT_COMPRESSION,this.parser=t}return(0,c.Z)(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then((function(e){var t=r.byteOffset||0,n=r.byteLength||0,i=r.count,o=r.byteStride,s=new Uint8Array(e,t,n);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(i,o,s,r.mode,r.filter).then((function(e){return e.buffer})):a.ready.then((function(){var e=new ArrayBuffer(i*o);return a.decodeGltfBuffer(new Uint8Array(e),i,o,s,r.mode,r.filter),e}))}))}return null}}]),e}(),Mz=function(){function e(t){(0,u.Z)(this,e),this.name=hz.EXT_MESH_GPU_INSTANCING,this.parser=t}return(0,c.Z)(e,[{key:"createNodeMesh",value:function(e){var t=this,n=this.parser.json,r=n.nodes[e];if(!r.extensions||!r.extensions[this.name]||void 0===r.mesh)return null;var i,a=n.meshes[r.mesh],o=(0,Ms.Z)(a.primitives);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(s.mode!==Fz.TRIANGLES&&s.mode!==Fz.TRIANGLE_STRIP&&s.mode!==Fz.TRIANGLE_FAN&&void 0!==s.mode)return null}}catch(f){o.e(f)}finally{o.f()}var l=r.extensions[this.name].attributes,u=[],c={},h=function(e){u.push(t.parser.getDependency("accessor",l[e]).then((function(t){return c[e]=t,c[e]})))};for(var d in l)h(d);return u.length<1?null:(u.push(this.parser.createNodeMesh(e)),Promise.all(u).then((function(e){var n,r=e.pop(),i=r.isGroup?r.children:[r],a=e[0].count,o=[],s=(0,Ms.Z)(i);try{for(s.s();!(n=s.n()).done;){for(var l=n.value,u=new df,h=new Dd,d=new Pd,p=new Dd(1,1,1),v=new Uy(l.geometry,l.material,a),m=0;m<a;m++)c.TRANSLATION&&h.fromBufferAttribute(c.TRANSLATION,m),c.ROTATION&&d.fromBufferAttribute(c.ROTATION,m),c.SCALE&&p.fromBufferAttribute(c.SCALE,m),v.setMatrixAt(m,u.compose(h,d,p));for(var g in c)"TRANSLATION"!==g&&"ROTATION"!==g&&"SCALE"!==g&&l.geometry.setAttribute(g,c[g]);Ff.prototype.copy.call(v,l),t.parser.assignFinalMaterial(v),o.push(v)}}catch(f){s.e(f)}finally{s.f()}return r.isGroup?(r.clear(),r.add.apply(r,o),r):o[0]})))}}]),e}(),Cz="glTF",kz=1313821514,Tz=5130562,Iz=(0,c.Z)((function e(t){(0,u.Z)(this,e),this.name=hz.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,12),r=new TextDecoder;if(this.header={magic:r.decode(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Cz)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var i=this.header.length-12,a=new DataView(t,12),o=0;o<i;){var s=a.getUint32(o,!0);o+=4;var l=a.getUint32(o,!0);if(o+=4,l===kz){var c=new Uint8Array(t,12+o,s);this.content=r.decode(c)}else if(l===Tz){var h=12+o;this.body=t.slice(h,h+s)}o+=s}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")})),Bz=function(){function e(t,n){if((0,u.Z)(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=hz.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return(0,c.Z)(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},s={},l={};for(var u in a){var c=Hz[u]||u.toLowerCase();o[c]=a[u]}for(var h in e.attributes){var d=Hz[h]||h.toLowerCase();if(void 0!==a[h]){var f=n.accessors[e.attributes[h]],p=Nz[f.componentType];l[d]=p.name,s[d]=!0===f.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}t(e)}),o,l)}))}))}}]),e}(),Rz=function(){function e(){(0,u.Z)(this,e),this.name=hz.KHR_TEXTURE_TRANSFORM}return(0,c.Z)(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}]),e}(),Lz=(0,c.Z)((function e(){(0,u.Z)(this,e),this.name=hz.KHR_MESH_QUANTIZATION})),Pz=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a){return(0,u.Z)(this,n),t.call(this,e,r,i,a)}return(0,c.Z)(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,a=0;a!==r;a++)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,l=3*o,u=r-t,c=(n-t)/u,h=c*c,d=h*c,f=e*l,p=f-l,v=-2*d+3*h,m=d-h,g=1-v,y=m-h+c,A=0;A!==o;A++){var x=a[p+A+o],b=a[p+A+s]*u,_=a[f+A+o],w=a[f+A]*u;i[A]=g*x+y*b+v*_+m*w}return i}}]),n}(Jx),Dz=new Pd,Oz=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"interpolate_",value:function(e,t,r,i){var a=(0,Zn.Z)((0,zn.Z)(n.prototype),"interpolate_",this).call(this,e,t,r,i);return Dz.fromArray(a).normalize().toArray(a),a}}]),n}(Pz),Fz={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Nz={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Uz={9728:Zu,9729:Vu,9984:zu,9985:ju,9986:Gu,9987:qu},Zz={33071:Nu,33648:Uu,10497:Fu},zz={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Hz={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Gz={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Qz={CUBICSPLINE:void 0,LINEAR:Kc,STEP:Yc},Vz="OPAQUE",jz="MASK",Wz="BLEND";function qz(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new Px({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Hl})),e.DefaultMaterial}function Jz(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function Xz(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Yz(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(var a=0,o=i.length;a<o;a++)e.morphTargetDictionary[i[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Kz(e){var t=e.extensions&&e.extensions[hz.KHR_DRACO_MESH_COMPRESSION];return t?"draco:"+t.bufferView+":"+t.indices+":"+$z(t.attributes):e.indices+":"+$z(e.attributes)+":"+e.mode}function $z(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function eH(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var tH=new df,nH=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,u.Z)(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new cz,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};var r=!1,i=!1,a=-1;"undefined"!==typeof navigator&&(r=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),a=(i=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"===typeof createImageBitmap||r||i&&a<98?this.textureLoader=new _b(this.options.manager):this.textureLoader=new Xb(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new mb(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return(0,c.Z)(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var a={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};Jz(i,a,r),Xz(a,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(a)}))).then((function(){e(a)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,i=t.length;r<i;r++)for(var a=t[r].joints,o=0,s=a.length;o<s;o++)e[a[o]].isBone=!0;for(var l=0,u=e.length;l<u;l++){var c=e[l];void 0!==c.mesh&&(this._addNodeRef(this.meshCache,c.mesh),void 0!==c.skin&&(n[c.mesh].isSkinnedMesh=!0)),void 0!==c.camera&&this._addNodeRef(this.cameraCache,c.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var r=this;if(e.refs[t]<=1)return n;var i=n.clone();return function e(t,n){var i=r.associations.get(t);null!=i&&r.associations.set(n,i);var a,o=(0,Ms.Z)(t.children.entries());try{for(o.s();!(a=o.n()).done;){var l=(0,s.Z)(a.value,2),u=l[0];e(l[1],n.children[u])}}catch(c){o.e(c)}finally{o.f()}}(n,i),i.name+="_instance_"+e.uses[t]++,i}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var i=e(t[r]);i&&n.push(i)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:if(!(r=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}))))throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[hz.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,i){n.load(Gb.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){var i=zz[r.type],a=Nz[r.componentType],o=!0===r.normalized,s=new a(r.count*i);return Promise.resolve(new dp(s,i,o))}var l=[];return void 0!==r.bufferView?l.push(this.getDependency("bufferView",r.bufferView)):l.push(null),void 0!==r.sparse&&(l.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),l.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(l).then((function(e){var i,a,o=e[0],s=zz[r.type],l=Nz[r.componentType],u=l.BYTES_PER_ELEMENT,c=u*s,h=r.byteOffset||0,d=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,f=!0===r.normalized;if(d&&d!==c){var p=Math.floor(h/d),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count,m=t.cache.get(v);m||(i=new l(o,p*d,r.count*d/u),m=new Kg(i,d/u),t.cache.add(v,m)),a=new ey(m,s,h%d/u,f)}else i=null===o?new l(r.count*s):new l(o,h,r.count*s),a=new dp(i,s,f);if(void 0!==r.sparse){var g=zz.SCALAR,y=Nz[r.sparse.indices.componentType],A=r.sparse.indices.byteOffset||0,x=r.sparse.values.byteOffset||0,b=new y(e[1],A,r.sparse.count*g),_=new l(e[2],x,r.sparse.count*s);null!==o&&(a=new dp(a.array.slice(),a.itemSize,a.normalized));for(var w=0,E=b.length;w<E;w++){var S=b[w];if(a.setX(S,_[w*s]),s>=2&&a.setY(S,_[w*s+1]),s>=3&&a.setZ(S,_[w*s+2]),s>=4&&a.setW(S,_[w*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r],a=this.textureLoader;if(i.uri){var o=n.manager.getHandler(i.uri);null!==o&&(a=o)}return this.loadTextureImage(e,r,a)}},{key:"loadTextureImage",value:function(e,t,n){var r=this,i=this.json,a=i.textures[e],o=i.images[t],s=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[s])return this.textureCache[s];var l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=a.name||o.name||"",""===t.name&&"string"===typeof o.uri&&!1===o.uri.startsWith("data:image/")&&(t.name=o.uri);var n=(i.samplers||{})[a.sampler]||{};return t.magFilter=Uz[n.magFilter]||Vu,t.minFilter=Uz[n.minFilter]||qu,t.wrapS=Zz[n.wrapS]||Fu,t.wrapT=Zz[n.wrapT]||Fu,r.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[s]=l,l}},{key:"loadImageSource",value:function(e,t){var n=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((function(e){return e.clone()}));var i=n.images[e],a=self.URL||self.webkitURL,o=i.uri||"",s=!1;if(void 0!==i.bufferView)o=this.getDependency("bufferView",i.bufferView).then((function(e){s=!0;var t=new Blob([e],{type:i.mimeType});return o=a.createObjectURL(t)}));else if(void 0===i.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var l=Promise.resolve(o).then((function(e){return new Promise((function(n,i){var a=n;!0===t.isImageBitmapLoader&&(a=function(e){var t=new Md(e);t.needsUpdate=!0,n(t)}),t.load(Gb.resolveURL(e,r.path),a,void 0,i)}))})).then((function(e){var t;return!0===s&&a.revokeObjectURL(o),e.userData.mimeType=i.mimeType||((t=i.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e}));return this.sourceCache[e]=l,l}},{key:"assignTexture",value:function(e,t,n,r){var i=this;return this.getDependency("texture",n.index).then((function(a){if(!a)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((a=a.clone()).channel=n.texCoord),i.extensions[hz.KHR_TEXTURE_TRANSFORM]){var o=void 0!==n.extensions?n.extensions[hz.KHR_TEXTURE_TRANSFORM]:void 0;if(o){var s=i.associations.get(a);a=i.extensions[hz.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),i.associations.set(a,s)}}return void 0!==r&&(a.encoding=r),e[t]=a,a}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){var o="PointsMaterial:"+n.uuid,s=this.cache.get(o);s||(s=new Yy,Yf.prototype.copy.call(s,n),s.color.copy(n.color),s.map=n.map,s.sizeAttenuation=!1,this.cache.add(o,s)),n=s}else if(e.isLine){var l="LineBasicMaterial:"+n.uuid,u=this.cache.get(l);u||(u=new Zy,Yf.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,this.cache.add(l,u)),n=u}if(r||i||a){var c="ClonedMaterial:"+n.uuid+":";r&&(c+="derivative-tangents:"),i&&(c+="vertex-colors:"),a&&(c+="flat-shading:");var h=this.cache.get(c);h||(h=n.clone(),i&&(h.vertexColors=!0),a&&(h.flatShading=!0),r&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(c,h),this.associations.set(h,this.associations.get(n))),n=h}e.material=n}},{key:"getMaterialType",value:function(){return Px}},{key:"loadMaterial",value:function(e){var t,n=this,r=this.json,i=this.extensions,a=r.materials[e],o={},s=[];if((a.extensions||{})[hz.KHR_MATERIALS_UNLIT]){var l=i[hz.KHR_MATERIALS_UNLIT];t=l.getMaterialType(),s.push(l.extendParams(o,a,n))}else{var u=a.pbrMetallicRoughness||{};if(o.color=new np(1,1,1),o.opacity=1,Array.isArray(u.baseColorFactor)){var c=u.baseColorFactor;o.color.fromArray(c),o.opacity=c[3]}void 0!==u.baseColorTexture&&s.push(n.assignTexture(o,"map",u.baseColorTexture,uh)),o.metalness=void 0!==u.metallicFactor?u.metallicFactor:1,o.roughness=void 0!==u.roughnessFactor?u.roughnessFactor:1,void 0!==u.metallicRoughnessTexture&&(s.push(n.assignTexture(o,"metalnessMap",u.metallicRoughnessTexture)),s.push(n.assignTexture(o,"roughnessMap",u.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),s.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)}))))}!0===a.doubleSided&&(o.side=Ql);var h=a.alphaMode||Vz;if(h===Wz?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,h===jz&&(o.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==ip&&(s.push(n.assignTexture(o,"normalMap",a.normalTexture)),o.normalScale=new sd(1,1),void 0!==a.normalTexture.scale)){var d=a.normalTexture.scale;o.normalScale.set(d,d)}return void 0!==a.occlusionTexture&&t!==ip&&(s.push(n.assignTexture(o,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(o.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==ip&&(o.emissive=(new np).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==ip&&s.push(n.assignTexture(o,"emissiveMap",a.emissiveTexture,uh)),Promise.all(s).then((function(){var r=new t(o);return a.name&&(r.name=a.name),Xz(r,a),n.associations.set(r,{materials:e}),a.extensions&&Jz(i,r,a),r}))}},{key:"createUniqueName",value:function(e){for(var t=C_.sanitizeNodeName(e||""),n=t,r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[hz.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return rH(n,e,t)}))}for(var a=[],o=0,s=e.length;o<s;o++){var l=e[o],u=Kz(l),c=r[u];if(c)a.push(c.promise);else{var h=void 0;h=l.extensions&&l.extensions[hz.KHR_DRACO_MESH_COMPRESSION]?i(l):rH(new Ip,l,t),r[u]={primitive:l,promise:h},a.push(h)}}return Promise.all(a)}},{key:"loadMesh",value:function(e){for(var t=this,n=this.json,r=this.extensions,i=n.meshes[e],a=i.primitives,o=[],s=0,l=a.length;s<l;s++){var u=void 0===a[s].material?qz(this.cache):this.getDependency("material",a[s].material);o.push(u)}return o.push(t.loadGeometries(a)),Promise.all(o).then((function(n){for(var o=n.slice(0,n.length-1),s=n[n.length-1],l=[],u=0,c=s.length;u<c;u++){var h=s[u],d=a[u],f=void 0,p=o[u];if(d.mode===Fz.TRIANGLES||d.mode===Fz.TRIANGLE_STRIP||d.mode===Fz.TRIANGLE_FAN||void 0===d.mode)!0===(f=!0===i.isSkinnedMesh?new Sy(h,p):new qp(h,p)).isSkinnedMesh&&f.normalizeSkinWeights(),d.mode===Fz.TRIANGLE_STRIP?f.geometry=lz(f.geometry,oh):d.mode===Fz.TRIANGLE_FAN&&(f.geometry=lz(f.geometry,sh));else if(d.mode===Fz.LINES)f=new Jy(h,p);else if(d.mode===Fz.LINE_STRIP)f=new jy(h,p);else if(d.mode===Fz.LINE_LOOP)f=new Xy(h,p);else{if(d.mode!==Fz.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);f=new nA(h,p)}Object.keys(f.geometry.morphAttributes).length>0&&Yz(f,i),f.name=t.createUniqueName(i.name||"mesh_"+e),Xz(f,i),d.extensions&&Jz(r,f,d),t.assignFinalMaterial(f),l.push(f)}for(var v=0,m=l.length;v<m;v++)t.associations.set(l[v],{meshes:e,primitives:v});if(1===l.length)return l[0];var g=new Ug;t.associations.set(g,{meshes:e});for(var y=0,A=l.length;y<A;y++)g.add(l[y]);return g}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new rv(od.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new kv(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Xz(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){for(var t=this.json.skins[e],n=[],r=0,i=t.joints.length;r<i;r++)n.push(this._loadNodeShallow(t.joints[r]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){for(var n=e.pop(),r=e,i=[],a=[],o=0,s=r.length;o<s;o++){var l=r[o];if(l){i.push(l);var u=new df;null!==n&&u.fromArray(n.array,16*o),a.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}return new Iy(i,a)}))}},{key:"loadAnimation",value:function(e){for(var t=this.json.animations[e],n=t.name?t.name:"animation_"+e,r=[],i=[],a=[],o=[],s=[],l=0,u=t.channels.length;l<u;l++){var c=t.channels[l],h=t.samplers[c.sampler],d=c.target,f=d.node,p=void 0!==t.parameters?t.parameters[h.input]:h.input,v=void 0!==t.parameters?t.parameters[h.output]:h.output;void 0!==d.node&&(r.push(this.getDependency("node",f)),i.push(this.getDependency("accessor",p)),a.push(this.getDependency("accessor",v)),o.push(h),s.push(d))}return Promise.all([Promise.all(r),Promise.all(i),Promise.all(a),Promise.all(o),Promise.all(s)]).then((function(e){for(var t=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=[],l=function(){var e,n=t[u],l=r[u],c=i[u],h=a[u],d=o[u];if(void 0===n)return"continue";switch(n.updateMatrix(),Gz[d.path]){case Gz.weights:e=nb;break;case Gz.rotation:e=ib;break;default:e=ob}var f=n.name?n.name:n.uuid,p=void 0!==h.interpolation?Qz[h.interpolation]:Kc,v=[];Gz[d.path]===Gz.weights?n.traverse((function(e){e.morphTargetInfluences&&v.push(e.name?e.name:e.uuid)})):v.push(f);var m=c.array;if(c.normalized){for(var g=eH(m.constructor),y=new Float32Array(m.length),A=0,x=m.length;A<x;A++)y[A]=m[A]*g;m=y}for(var b=0,_=v.length;b<_;b++){var w=new e(v[b]+"."+Gz[d.path],l.array,m,p);"CUBICSPLINE"===h.interpolation&&(w.createInterpolant=function(e){return new(this instanceof ib?Oz:Pz)(this.times,this.values,this.getValueSize()/3,e)},w.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),s.push(w)}},u=0,c=t.length;u<c;u++)l();return new sb(n,void 0,s)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}},{key:"loadNode",value:function(e){for(var t=this,n=this.json.nodes[e],r=t._loadNodeShallow(e),i=[],a=n.children||[],o=0,s=a.length;o<s;o++)i.push(t.getDependency("node",a[o]));var l=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([r,Promise.all(i),l]).then((function(e){var t=e[0],n=e[1],r=e[2];null!==r&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(r,tH)}));for(var i=0,a=n.length;i<a;i++)t.add(n[i]);return t}))}},{key:"_loadNodeShallow",value:function(e){var t=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];var i=t.nodes[e],a=i.name?r.createUniqueName(i.name):"",o=[],s=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return s&&o.push(s),void 0!==i.camera&&o.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){o.push(e)})),this.nodeCache[e]=Promise.all(o).then((function(t){var o;if((o=!0===i.isBone?new My:t.length>1?new Ug:1===t.length?t[0]:new Ff)!==t[0])for(var s=0,l=t.length;s<l;s++)o.add(t[s]);if(i.name&&(o.userData.name=i.name,o.name=a),Xz(o,i),i.extensions&&Jz(n,o,i),void 0!==i.matrix){var u=new df;u.fromArray(i.matrix),o.applyMatrix4(u)}else void 0!==i.translation&&o.position.fromArray(i.translation),void 0!==i.rotation&&o.quaternion.fromArray(i.rotation),void 0!==i.scale&&o.scale.fromArray(i.scale);return r.associations.has(o)||r.associations.set(o,{}),r.associations.get(o).nodes=e,o})),this.nodeCache[e]}},{key:"loadScene",value:function(e){var t=this.extensions,n=this.json.scenes[e],r=this,i=new Ug;n.name&&(i.name=r.createUniqueName(n.name)),Xz(i,n),n.extensions&&Jz(t,i,n);for(var a=n.nodes||[],o=[],l=0,u=a.length;l<u;l++)o.push(r.getDependency("node",a[l]));return Promise.all(o).then((function(e){for(var t=0,n=e.length;t<n;t++)i.add(e[t]);return r.associations=function(e){var t,n=new Map,i=(0,Ms.Z)(r.associations);try{for(i.s();!(t=i.n()).done;){var a=(0,s.Z)(t.value,2),o=a[0],l=a[1];(o instanceof Yf||o instanceof Md)&&n.set(o,l)}}catch(u){i.e(u)}finally{i.f()}return e.traverse((function(e){var t=r.associations.get(e);null!=t&&n.set(e,t)})),n}(i),i}))}}]),e}();function rH(e,t,n){var r=t.attributes,i=[];function a(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var o in r){var s=Hz[o]||o.toLowerCase();s in e.attributes||i.push(a(r[o],s))}if(void 0!==t.indices&&!e.index){var l=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(l)}return Xz(e,t),function(e,t,n){var r=t.attributes,i=new Nd;if(void 0!==r.POSITION){var a=n.json.accessors[r.POSITION],o=a.min,s=a.max;if(void 0!==o&&void 0!==s){if(i.set(new Dd(o[0],o[1],o[2]),new Dd(s[0],s[1],s[2])),a.normalized){var l=eH(Nz[a.componentType]);i.min.multiplyScalar(l),i.max.multiplyScalar(l)}var u=t.targets;if(void 0!==u){for(var c=new Dd,h=new Dd,d=0,f=u.length;d<f;d++){var p=u[d];if(void 0!==p.POSITION){var v=n.json.accessors[p.POSITION],m=v.min,g=v.max;if(void 0!==m&&void 0!==g){if(h.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),h.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),h.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),v.normalized){var y=eH(Nz[v.componentType]);h.multiplyScalar(y)}c.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(c)}e.boundingBox=i;var A=new nf;i.getCenter(A.center),A.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=A}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,i=!1,a=!1,o=0,s=t.length;o<s;o++){var l=t[o];if(void 0!==l.POSITION&&(r=!0),void 0!==l.NORMAL&&(i=!0),void 0!==l.COLOR_0&&(a=!0),r&&i&&a)break}if(!r&&!i&&!a)return Promise.resolve(e);for(var u=[],c=[],h=[],d=0,f=t.length;d<f;d++){var p=t[d];if(r){var v=void 0!==p.POSITION?n.getDependency("accessor",p.POSITION):e.attributes.position;u.push(v)}if(i){var m=void 0!==p.NORMAL?n.getDependency("accessor",p.NORMAL):e.attributes.normal;c.push(m)}if(a){var g=void 0!==p.COLOR_0?n.getDependency("accessor",p.COLOR_0):e.attributes.color;h.push(g)}}return Promise.all([Promise.all(u),Promise.all(c),Promise.all(h)]).then((function(t){var n=t[0],o=t[1],s=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),a&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}var iH=0,aH=[],oH=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!iH){e.next=2;break}return e.abrupt("return");case 2:return iH++,t=new uz,(n=new $Z).setDecoderPath("three/examples/jsm/libs/draco"),t.setDRACOLoader(n),e.next=9,t.loadAsync("/assets/models/productstand_instanced.glb");case 9:return r=e.sent,bE(r),i=r.scene,iH=i,i.getObjectsByProperty().map((function(e){e.material&&(e.material.side=Ql)})),sH(),e.abrupt("return");case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sH=function(){var e=window.rugExporterFlow.fuckr3f.get().scene;aH.map((function(t){var n,r=t[0],i=t[1],a=iH.clone(!0);a.name="".concat(r,"-stand"),(n=a.position).set.apply(n,(0,O.Z)(i)),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new qp,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"frontWallCanvas1",n=.1;t.includes("front")&&(e.position.x-=n,e.rotation.set(0,0,0)),t.includes("right")&&(e.position.z-=n,e.rotation.set(0,270*Qw,0)),t.includes("back")&&(e.position.x+=n,e.rotation.set(0,180*Qw,0)),t.includes("left")&&(e.position.z+=n,e.rotation.set(0,90*Qw,0))}(a,r),e.add(a)})),pE.productStandsLoaded=!0},lH=function(e){window.carpetCanvases.map((function(t){var n=e.getObjectByName(t.name);n.matrix.toArray();aH.push([t.name,n.position])}))},uH=function(){return iH||(oH(),0)};var cH=function(e){var n=sz(pE),r=function(){var e=(0,t.useState)(!1),n=(0,s.Z)(e,2)[1];return function(){return n((function(e){return!e}))}}();window.forceUpdate=r,(0,t.useEffect)((function(){if(E.children.length>0&&(console.log("ran",f,n.productLayerActive),0==f&&0==n.productLayerActive)){console.log("useEffect");var t=E.getObjectByName(M.current.focusedObjectName).position;e.cameraControllerRef.current.setTarget(0,0,0,!0),e.cameraControllerRef.maxDistance=.1,e.cameraControllerRef.current.setPosition(0,3.6,5,!0),e.cameraControllerRef.current.lookInDirectionOf(t.x,t.y,t.z,!0),e.cameraControllerRef.maxDistance=.1,k({isFocused:!1,focusedObjectName:void 0}),window.domLayer.setProductLayer(0,"")}}),[n.productLayerActive]);var i=(0,t.useState)(void 0),l=(0,s.Z)(i,2),u=l[0],c=l[1],h=(0,t.useState)(!1),d=(0,s.Z)(h,2),f=d[0],p=(d[1],(0,t.useState)(!1)),v=(0,s.Z)(p,2),m=(v[0],v[1]),g=(0,t.useState)({isFocused:!1,focusedObjectName:void 0}),y=(0,s.Z)(g,2),A=y[0],x=y[1],b=(0,t.useState)(void 0),_=(0,s.Z)(b,2),w=(_[0],_[1],jS()),E=w.scene,S=w.camera;w.events,window.clearScene=function(){E.getObjectsByProperty().map((function(e){return E.remove(e)}))},window.distanceFromFocusedObject=4,(0,t.useRef)(null);var M=(0,t.useRef)(A),C=(0,t.useRef)(A),k=function(e){M.current=e,function(e){if(e.isFocused)return window.domLayer.setProductLayer(Math.random(),e.focusedObjectName),pE.productLayerActive=!0,void(pE.focusedObjectName=e.focusedObjectName);window.domLayer.setProductLayer(0,""),pE.productLayerActive=!1,pE.focusedObjectName=""}(e),x(e)},T=function(e){C.current=e,m(e)},I=function(){if(!window.gesturesDisabled){if(M.current.isFocused){T(!0),console.log("handleUserPinch");var e=E.getObjectByName(M.current.focusedObjectName).position,t=function(e,t){if(3!==e.length||3!==t.length)throw new Error("Both vectors must have three components (x, y, z).");var n=(0,s.Z)(e,3),r=n[0],i=n[1],a=n[2],o=(0,s.Z)(t,3),l=o[0]-r,u=o[1]-i,c=o[2]-a;return Math.sqrt(l*l+u*u+c*c)}([S.position.x,S.position.y,S.position.z],[e.x,e.y,e.z]);window.distanceFromFocusedObject+3<t&&(pE.productLayerActive=!1,pE.focusedObjectName="")}T(!1)}},B=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tz({path:"/newscene.glb"});case 2:t=e.sent,lH(t.scene),c(t),bE(t),pE.GLTFLoaded=!0,IE(window.carpetCanvases,t.scene);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.loadGLTF=B,(0,t.useEffect)((function(){B(),e.cameraControllerRef.current.addEventListener("control",(function(){I()}))}),[]),(0,BE.jsx)(BE.Fragment,{children:u&&(0,BE.jsx)(BE.Fragment,{children:(0,BE.jsx)("primitive",{object:u.scene,onClick:function(t){!function(t){var n={};console.log(t.object),t.object.name.includes("Canvas")&&(n.object=t.object.parent,window.gesturesDisabled||n.object.userData.includes("Canvas")&&(e.cameraControllerRef.current.maxDistance=26,n.object.userData.includes("back")&&e.cameraControllerRef.current.setLookAt(n.object.position.x-window.distanceFromFocusedObject,n.object.position.y,n.object.position.z,n.object.position.x,n.object.position.y,n.object.position.z,!0),n.object.userData.includes("left")&&e.cameraControllerRef.current.setLookAt(n.object.position.x,n.object.position.y,n.object.position.z-window.distanceFromFocusedObject,n.object.position.x,n.object.position.y,n.object.position.z,!0),n.object.userData.includes("right")&&e.cameraControllerRef.current.setLookAt(n.object.position.x,n.object.position.y,n.object.position.z+window.distanceFromFocusedObject,n.object.position.x,n.object.position.y,n.object.position.z,!0),n.object.userData.includes("front")&&e.cameraControllerRef.current.setLookAt(n.object.position.x+window.distanceFromFocusedObject,n.object.position.y,n.object.position.z,n.object.position.x,n.object.position.y,n.object.position.z,!0),k({isFocused:!0,focusedObjectName:n.object.name})))}(t,e.cameraControllerRef)}})})})};window.rooms=[],window.carpetCanvases=[{name:"frontWallCanvas1",slug:"moderngo-md05c",size:"200x290"},{name:"frontWallCanvas2",slug:"moderngo-md03c",size:"200x290"},{name:"rightWallCanvas1",slug:"ikon-plus-ik50a",size:"200x290"},{name:"rightWallCanvas2",slug:"ikon-plus-ik56a",size:"200x290"},{name:"rightWallCanvas3",slug:"ikon-plus-ik54a",size:"200x290"},{name:"backWallCanvas1",slug:"orion-or06a",size:"200x290"},{name:"backWallCanvas2",slug:"orion-or08a",size:"200x290"},{name:"leftWallCanvas1",slug:"laila-la04a",size:"240x340"},{name:"leftWallCanvas2",slug:"laila-la09a",size:"200x300"},{name:"leftWallCanvas3",slug:"laila-la00a",size:"240x340"}];var hH=function(){var e=jS();window.rugExporterFlow.fuckr3f=e,window.raycaster=e.raycaster,uH()};function dH(){var e=(0,t.useState)(void 0),n=(0,s.Z)(e,2),r=(n[0],n[1],(0,t.useState)(!0)),i=(0,s.Z)(r,2),a=i[0],o=i[1],l=sz(pE),u=(0,t.useRef)();return(0,t.useEffect)((function(){console.log("hdrLoaded",l.hdrLoaded,l.productStandsLoaded,l.GLTFLoaded,l.modelsLoaded),function(){var e=[];["hdrLoaded","productStandsLoaded","GLTFLoaded","modelsLoaded"].forEach((function(t){void 0!=l[t]?e.push(l[t]):e.push(!1)})),e.every(Boolean)&&(console.log("...."),o(!1))}()}),[l.hdrLoaded,l.productStandsLoaded,l.GLTFLoaded,l.modelsLoaded]),window.cameraRef=u,(0,BE.jsxs)("div",{style:{width:"100vw",height:"100vh"},children:[a&&(0,BE.jsx)("div",{className:"backgroundBlur",style:{position:"absolute",width:"100vw",height:"100vh",zIndex:99999999},children:(0,BE.jsxs)("div",{class:"box",children:[(0,BE.jsx)("div",{class:"b b1"}),(0,BE.jsx)("div",{class:"b b2"}),(0,BE.jsx)("div",{class:"b b3"}),(0,BE.jsx)("div",{class:"b b4"})]})}),(0,BE.jsxs)(DM,{className:"canvasRoot",shadows:!0,legacy:!0,linear:!0,flat:!0,camera:{fov:60},onCreated:function(e){e.scene.environment=yE(e.scene,"/","customHDR3.hdr"),e.gl.toneMapping=Tu,e.gl.toneMappingExposure=1,e.gl.setPixelRatio(1*window.devicePixelRatio)},children:[(0,BE.jsx)(hH,{}),(0,BE.jsx)(DC,{minPolarAngle:20*Qw,maxPolarAngle:100*Qw,maxDistance:.1,ref:u,makeDefault:!0}),(0,BE.jsx)("color",{attach:"background",args:["#d0d0d0"]}),(0,BE.jsx)(cH,{cameraControllerRef:u})]})]})}var fH;function pH(e){return function(t,n){return void 0!==n?function(e,t,n){t.constructor.createProperty(n,e)}(e,t,n):function(e,t){return"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?D(D({},t),{},{finisher:function(n){n.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer:function(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher:function(n){n.createProperty(t.key,e)}}}(e,t)}}null===(fH=window.HTMLSlotElement)||void 0===fH||fH.prototype.assignedElements;var vH,mH,gH=window,yH=gH.ShadowRoot&&(void 0===gH.ShadyCSS||gH.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,AH=Symbol(),xH=new WeakMap,bH=function(){function e(t,n,r){if((0,u.Z)(this,e),this._$cssResult$=!0,r!==AH)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=n}return(0,c.Z)(e,[{key:"styleSheet",get:function(){var e=this.o,t=this.t;if(yH&&void 0===e){var n=void 0!==t&&1===t.length;n&&(e=xH.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&xH.set(t,e))}return e}},{key:"toString",value:function(){return this.cssText}}]),e}(),_H=yH?function(e){return e}:function(e){return e instanceof CSSStyleSheet?function(e){var t,n="",r=(0,Ms.Z)(e.cssRules);try{for(r.s();!(t=r.n()).done;){n+=t.value.cssText}}catch(i){r.e(i)}finally{r.f()}return function(e){return new bH("string"==typeof e?e:e+"",void 0,AH)}(n)}(e):e},wH=window,EH=wH.trustedTypes,SH=EH?EH.emptyScript:"",MH=wH.reactiveElementPolyfillSupport,CH={toAttribute:function(e,t){switch(t){case Boolean:e=e?SH:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute:function(e,t){var n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},kH=function(e,t){return t!==e&&(t==t||e==e)},TH={attribute:!0,type:String,converter:CH,reflect:!1,hasChanged:kH},IH="finalized",BH=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this))._$Ei=new Map,e.isUpdatePending=!1,e.hasUpdated=!1,e._$El=null,e.u(),e}return(0,c.Z)(n,[{key:"u",value:function(){var e,t=this;this._$E_=new Promise((function(e){return t.enableUpdating=e})),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((function(e){return e(t)}))}},{key:"addController",value:function(e){var t,n;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(n=e.hostConnected)||void 0===n||n.call(e))}},{key:"removeController",value:function(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}},{key:"_$Eg",value:function(){var e=this;this.constructor.elementProperties.forEach((function(t,n){e.hasOwnProperty(n)&&(e._$Ei.set(n,e[n]),delete e[n])}))}},{key:"createRenderRoot",value:function(){var e,t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return function(e,t){yH?e.adoptedStyleSheets=t.map((function(e){return e instanceof CSSStyleSheet?e:e.styleSheet})):t.forEach((function(t){var n=document.createElement("style"),r=gH.litNonce;void 0!==r&&n.setAttribute("nonce",r),n.textContent=t.cssText,e.appendChild(n)}))}(t,this.constructor.elementStyles),t}},{key:"connectedCallback",value:function(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((function(e){var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}},{key:"enableUpdating",value:function(e){}},{key:"disconnectedCallback",value:function(){var e;null===(e=this._$ES)||void 0===e||e.forEach((function(e){var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}},{key:"attributeChangedCallback",value:function(e,t,n){this._$AK(e,n)}},{key:"_$EO",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:TH,i=this.constructor._$Ep(e,r);if(void 0!==i&&!0===r.reflect){var a=(void 0!==(null===(n=r.converter)||void 0===n?void 0:n.toAttribute)?r.converter:CH).toAttribute(t,r.type);this._$El=e,null==a?this.removeAttribute(i):this.setAttribute(i,a),this._$El=null}}},{key:"_$AK",value:function(e,t){var n,r=this.constructor,i=r._$Ev.get(e);if(void 0!==i&&this._$El!==i){var a=r.getPropertyOptions(i),o="function"==typeof a.converter?{fromAttribute:a.converter}:void 0!==(null===(n=a.converter)||void 0===n?void 0:n.fromAttribute)?a.converter:CH;this._$El=i,this[i]=o.fromAttribute(t,a.type),this._$El=null}}},{key:"requestUpdate",value:function(e,t,n){var r=!0;void 0!==e&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||kH)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,n))):r=!1),!this.isUpdatePending&&r&&(this._$E_=this._$Ej())}},{key:"_$Ej",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isUpdatePending=!0,e.prev=1,e.next=4,this._$E_;case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Promise.reject(e.t0);case 9:if(t=this.scheduleUpdate(),e.t1=null!=t,!e.t1){e.next=14;break}return e.next=14,t;case 14:return e.abrupt("return",!this.isUpdatePending);case 15:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"scheduleUpdate",value:function(){return this.performUpdate()}},{key:"performUpdate",value:function(){var e,t=this;if(this.isUpdatePending){this.hasUpdated,this._$Ei&&(this._$Ei.forEach((function(e,n){return t[n]=e})),this._$Ei=void 0);var n=!1,r=this._$AL;try{(n=this.shouldUpdate(r))?(this.willUpdate(r),null===(e=this._$ES)||void 0===e||e.forEach((function(e){var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(r)):this._$Ek()}catch(e){throw n=!1,this._$Ek(),e}n&&this._$AE(r)}}},{key:"willUpdate",value:function(e){}},{key:"_$AE",value:function(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((function(e){var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}},{key:"_$Ek",value:function(){this._$AL=new Map,this.isUpdatePending=!1}},{key:"updateComplete",get:function(){return this.getUpdateComplete()}},{key:"getUpdateComplete",value:function(){return this._$E_}},{key:"shouldUpdate",value:function(e){return!0}},{key:"update",value:function(e){var t=this;void 0!==this._$EC&&(this._$EC.forEach((function(e,n){return t._$EO(n,t[n],e)})),this._$EC=void 0),this._$Ek()}},{key:"updated",value:function(e){}},{key:"firstUpdated",value:function(e){}}],[{key:"addInitializer",value:function(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}},{key:"observedAttributes",get:function(){var e=this;this.finalize();var t=[];return this.elementProperties.forEach((function(n,r){var i=e._$Ep(r,n);void 0!==i&&(e._$Ev.set(i,r),t.push(i))})),t}},{key:"createProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TH;if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){var n="symbol"==typeof e?Symbol():"__"+e,r=this.getPropertyDescriptor(e,n,t);void 0!==r&&Object.defineProperty(this.prototype,e,r)}}},{key:"getPropertyDescriptor",value:function(e,t,n){return{get:function(){return this[t]},set:function(r){var i=this[e];this[t]=r,this.requestUpdate(e,i,n)},configurable:!0,enumerable:!0}}},{key:"getPropertyOptions",value:function(e){return this.elementProperties.get(e)||TH}},{key:"finalize",value:function(){if(this.hasOwnProperty(IH))return!1;this[IH]=!0;var e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=(0,O.Z)(e.h)),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){var t,n=this.properties,r=[].concat((0,O.Z)(Object.getOwnPropertyNames(n)),(0,O.Z)(Object.getOwnPropertySymbols(n))),i=(0,Ms.Z)(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;this.createProperty(a,n[a])}}catch(o){i.e(o)}finally{i.f()}}return this.elementStyles=this.finalizeStyles(this.styles),!0}},{key:"finalizeStyles",value:function(e){var t=[];if(Array.isArray(e)){var n,r=new Set(e.flat(1/0).reverse()),i=(0,Ms.Z)(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.unshift(_H(a))}}catch(o){i.e(o)}finally{i.f()}}else void 0!==e&&t.push(_H(e));return t}},{key:"_$Ep",value:function(e,t){var n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}}]),n}((0,Tl.Z)(HTMLElement));BH[IH]=!0,BH.elementProperties=new Map,BH.elementStyles=[],BH.shadowRootOptions={mode:"open"},null==MH||MH({ReactiveElement:BH}),(null!==(vH=wH.reactiveElementVersions)&&void 0!==vH?vH:wH.reactiveElementVersions=[]).push("1.6.2");var RH=window,LH=RH.trustedTypes,PH=LH?LH.createPolicy("lit-html",{createHTML:function(e){return e}}):void 0,DH="$lit$",OH="lit$".concat((Math.random()+"").slice(9),"$"),FH="?"+OH,NH="<".concat(FH,">"),UH=document,ZH=function(){return UH.createComment("")},zH=function(e){return null===e||"object"!=typeof e&&"function"!=typeof e},HH=Array.isArray,GH=function(e){return HH(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator])},QH="[ \t\n\f\r]",VH=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,jH=/-->/g,WH=/>/g,qH=RegExp(">|".concat(QH,"(?:([^\\s\"'>=/]+)(").concat(QH,"*=").concat(QH,"*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)"),"g"),JH=/'/g,XH=/"/g,YH=/^(?:script|style|textarea|title)$/i,KH=function(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return{_$litType$:e,strings:t,values:r}}},$H=KH(1),eG=(KH(2),Symbol.for("lit-noChange")),tG=Symbol.for("lit-nothing"),nG=new WeakMap,rG=UH.createTreeWalker(UH,129,null,!1);function iG(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==PH?PH.createHTML(t):t}var aG=function(e,t){for(var n,r=e.length-1,i=[],a=2===t?"<svg>":"",o=VH,s=0;s<r;s++){for(var l=e[s],u=void 0,c=void 0,h=-1,d=0;d<l.length&&(o.lastIndex=d,null!==(c=o.exec(l)));)d=o.lastIndex,o===VH?"!--"===c[1]?o=jH:void 0!==c[1]?o=WH:void 0!==c[2]?(YH.test(c[2])&&(n=RegExp("</"+c[2],"g")),o=qH):void 0!==c[3]&&(o=qH):o===qH?">"===c[0]?(o=null!=n?n:VH,h=-1):void 0===c[1]?h=-2:(h=o.lastIndex-c[2].length,u=c[1],o=void 0===c[3]?qH:'"'===c[3]?XH:JH):o===XH||o===JH?o=qH:o===jH||o===WH?o=VH:(o=qH,n=void 0);var f=o===qH&&e[s+1].startsWith("/>")?" ":"";a+=o===VH?l+NH:h>=0?(i.push(u),l.slice(0,h)+DH+l.slice(h)+OH+f):l+OH+(-2===h?(i.push(void 0),s):f)}return[iG(e,a+(e[r]||"<?>")+(2===t?"</svg>":"")),i]},oG=function(){function e(t,n){var r,i=t.strings,a=t._$litType$;(0,u.Z)(this,e),this.parts=[];var o=0,l=0,c=i.length-1,h=this.parts,d=aG(i,a),f=(0,s.Z)(d,2),p=f[0],v=f[1];if(this.el=e.createElement(p,n),rG.currentNode=this.el.content,2===a){var m=this.el.content,g=m.firstChild;g.remove(),m.append.apply(m,(0,O.Z)(g.childNodes))}for(;null!==(r=rG.nextNode())&&h.length<c;){if(1===r.nodeType){if(r.hasAttributes()){var y,A=[],x=(0,Ms.Z)(r.getAttributeNames());try{for(x.s();!(y=x.n()).done;){var b=y.value;if(b.endsWith(DH)||b.startsWith(OH)){var _=v[l++];if(A.push(b),void 0!==_){var w=r.getAttribute(_.toLowerCase()+DH).split(OH),E=/([.?@])?(.*)/.exec(_);h.push({type:1,index:o,name:E[2],strings:w,ctor:"."===E[1]?hG:"?"===E[1]?fG:"@"===E[1]?pG:cG})}else h.push({type:6,index:o})}}}catch(R){x.e(R)}finally{x.f()}for(var S=0,M=A;S<M.length;S++){var C=M[S];r.removeAttribute(C)}}if(YH.test(r.tagName)){var k=r.textContent.split(OH),T=k.length-1;if(T>0){r.textContent=LH?LH.emptyScript:"";for(var I=0;I<T;I++)r.append(k[I],ZH()),rG.nextNode(),h.push({type:2,index:++o});r.append(k[T],ZH())}}}else if(8===r.nodeType)if(r.data===FH)h.push({type:2,index:o});else for(var B=-1;-1!==(B=r.data.indexOf(OH,B+1));)h.push({type:7,index:o}),B+=OH.length-1;o++}}return(0,c.Z)(e,null,[{key:"createElement",value:function(e,t){var n=UH.createElement("template");return n.innerHTML=e,n}}]),e}();function sG(e,t){var n,r,i,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,s=arguments.length>3?arguments[3]:void 0;if(t===eG)return t;var l=void 0!==s?null===(n=o._$Co)||void 0===n?void 0:n[s]:o._$Cl,u=zH(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==u&&(null===(r=null==l?void 0:l._$AO)||void 0===r||r.call(l,!1),void 0===u?l=void 0:(l=new u(e))._$AT(e,o,s),void 0!==s?(null!==(i=(a=o)._$Co)&&void 0!==i?i:a._$Co=[])[s]=l:o._$Cl=l),void 0!==l&&(t=sG(e,l._$AS(e,t.values),l,s)),t}var lG=function(){function e(t,n){(0,u.Z)(this,e),this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=n}return(0,c.Z)(e,[{key:"parentNode",get:function(){return this._$AM.parentNode}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"u",value:function(e){var t,n=this._$AD,r=n.el.content,i=n.parts,a=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:UH).importNode(r,!0);rG.currentNode=a;for(var o=rG.nextNode(),s=0,l=0,u=i[0];void 0!==u;){if(s===u.index){var c=void 0;2===u.type?c=new uG(o,o.nextSibling,this,e):1===u.type?c=new u.ctor(o,u.name,u.strings,this,e):6===u.type&&(c=new vG(o,this,e)),this._$AV.push(c),u=i[++l]}s!==(null==u?void 0:u.index)&&(o=rG.nextNode(),s++)}return rG.currentNode=UH,a}},{key:"v",value:function(e){var t,n=0,r=(0,Ms.Z)(this._$AV);try{for(r.s();!(t=r.n()).done;){var i=t.value;void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,n),n+=i.strings.length-2):i._$AI(e[n])),n++}}catch(a){r.e(a)}finally{r.f()}}}]),e}(),uG=function(){function e(t,n,r,i){var a;(0,u.Z)(this,e),this.type=2,this._$AH=tG,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=r,this.options=i,this._$Cp=null===(a=null==i?void 0:i.isConnected)||void 0===a||a}return(0,c.Z)(e,[{key:"_$AU",get:function(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}},{key:"parentNode",get:function(){var e=this._$AA.parentNode,t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}},{key:"startNode",get:function(){return this._$AA}},{key:"endNode",get:function(){return this._$AB}},{key:"_$AI",value:function(e){e=sG(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this),zH(e)?e===tG||null==e||""===e?(this._$AH!==tG&&this._$AR(),this._$AH=tG):e!==this._$AH&&e!==eG&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):GH(e)?this.T(e):this._(e)}},{key:"k",value:function(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}},{key:"$",value:function(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}},{key:"_",value:function(e){this._$AH!==tG&&zH(this._$AH)?this._$AA.nextSibling.data=e:this.$(UH.createTextNode(e)),this._$AH=e}},{key:"g",value:function(e){var t,n=e.values,r=e._$litType$,i="number"==typeof r?this._$AC(e):(void 0===r.el&&(r.el=oG.createElement(iG(r.h,r.h[0]),this.options)),r);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===i)this._$AH.v(n);else{var a=new lG(i,this),o=a.u(this.options);a.v(n),this.$(o),this._$AH=a}}},{key:"_$AC",value:function(e){var t=nG.get(e.strings);return void 0===t&&nG.set(e.strings,t=new oG(e)),t}},{key:"T",value:function(t){HH(this._$AH)||(this._$AH=[],this._$AR());var n,r,i=this._$AH,a=0,o=(0,Ms.Z)(t);try{for(o.s();!(r=o.n()).done;){var s=r.value;a===i.length?i.push(n=new e(this.k(ZH()),this.k(ZH()),this,this.options)):n=i[a],n._$AI(s),a++}}catch(l){o.e(l)}finally{o.f()}a<i.length&&(this._$AR(n&&n._$AB.nextSibling,a),i.length=a)}},{key:"_$AR",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._$AA.nextSibling,n=arguments.length>1?arguments[1]:void 0;for(null===(e=this._$AP)||void 0===e||e.call(this,!1,!0,n);t&&t!==this._$AB;){var r=t.nextSibling;t.remove(),t=r}}},{key:"setConnected",value:function(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}]),e}(),cG=function(){function e(t,n,r,i,a){(0,u.Z)(this,e),this.type=1,this._$AH=tG,this._$AN=void 0,this.element=t,this.name=n,this._$AM=i,this.options=a,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=tG}return(0,c.Z)(e,[{key:"tagName",get:function(){return this.element.tagName}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=this.strings,a=!1;if(void 0===i)e=sG(this,e,t,0),(a=!zH(e)||e!==this._$AH&&e!==eG)&&(this._$AH=e);else{var o,s,l=e;for(e=i[0],o=0;o<i.length-1;o++)(s=sG(this,l[n+o],t,o))===eG&&(s=this._$AH[o]),a||(a=!zH(s)||s!==this._$AH[o]),s===tG?e=tG:e!==tG&&(e+=(null!=s?s:"")+i[o+1]),this._$AH[o]=s}a&&!r&&this.j(e)}},{key:"j",value:function(e){e===tG?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}]),e}(),hG=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.apply(this,arguments)).type=3,e}return(0,c.Z)(n,[{key:"j",value:function(e){this.element[this.name]=e===tG?void 0:e}}]),n}(cG),dG=LH?LH.emptyScript:"",fG=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.apply(this,arguments)).type=4,e}return(0,c.Z)(n,[{key:"j",value:function(e){e&&e!==tG?this.element.setAttribute(this.name,dG):this.element.removeAttribute(this.name)}}]),n}(cG),pG=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a,o){var s;return(0,u.Z)(this,n),(s=t.call(this,e,r,i,a,o)).type=5,s}return(0,c.Z)(n,[{key:"_$AI",value:function(e){var t;if((e=null!==(t=sG(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,0))&&void 0!==t?t:tG)!==eG){var n=this._$AH,r=e===tG&&n!==tG||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,i=e!==tG&&(n===tG||r);r&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}}},{key:"handleEvent",value:function(e){var t,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==n?n:this.element,e):this._$AH.handleEvent(e)}}]),n}(cG),vG=function(){function e(t,n,r){(0,u.Z)(this,e),this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}return(0,c.Z)(e,[{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(e){sG(this,e)}}]),e}(),mG=RH.litHtmlPolyfillSupport;null==mG||mG(oG,uG),(null!==(mH=RH.litHtmlVersions)&&void 0!==mH?mH:RH.litHtmlVersions=[]).push("2.7.5");var gG,yG,AG=function(e,t,n){var r,i,a=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:t,o=a._$litPart$;if(void 0===o){var s=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:null;a._$litPart$=o=new uG(t.insertBefore(ZH(),s),s,void 0,null!=n?n:{})}return o._$AI(e),o},xG=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.apply(this,arguments)).renderOptions={host:(0,Il.Z)(e)},e._$Do=void 0,e}return(0,c.Z)(n,[{key:"createRenderRoot",value:function(){var e,t,r=(0,Zn.Z)((0,zn.Z)(n.prototype),"createRenderRoot",this).call(this);return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=r.firstChild),r}},{key:"update",value:function(e){var t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),(0,Zn.Z)((0,zn.Z)(n.prototype),"update",this).call(this,e),this._$Do=AG(t,this.renderRoot,this.renderOptions)}},{key:"connectedCallback",value:function(){var e;(0,Zn.Z)((0,zn.Z)(n.prototype),"connectedCallback",this).call(this),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}},{key:"disconnectedCallback",value:function(){var e;(0,Zn.Z)((0,zn.Z)(n.prototype),"disconnectedCallback",this).call(this),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}},{key:"render",value:function(){return eG}}]),n}(BH);xG.finalized=!0,xG._$litElement$=!0,null===(gG=globalThis.litElementHydrateSupport)||void 0===gG||gG.call(globalThis,{LitElement:xG});var bG=globalThis.litElementPolyfillSupport;null==bG||bG({LitElement:xG});(null!==(yG=globalThis.litElementVersions)&&void 0!==yG?yG:globalThis.litElementVersions=[]).push("3.3.2");var _G,wG=null!=navigator.xr&&null!=self.XRSession&&null!=navigator.xr.isSessionSupported,EG=wG&&null!=self.XRSession.prototype.requestHitTestSource,SG=null!=self.ResizeObserver,MG=null!=self.IntersectionObserver,CG=EG,kG=(function(){var e=navigator.userAgent||navigator.vendor||self.opera,t=!1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(),/\bCrOS\b/.test(navigator.userAgent),/android/i.test(navigator.userAgent)),TG=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,IG=(/Safari\//.test(navigator.userAgent),/firefox/i.test(navigator.userAgent)),BG=/OculusBrowser/.test(navigator.userAgent),RG=(TG&&/CriOS\//.test(navigator.userAgent),kG&&!IG&&!BG),LG=Boolean(window.webkit&&window.webkit.messageHandlers),PG=function(){if(TG){if(LG)return Boolean(/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent));var e=document.createElement("a");return Boolean(e.relList&&e.relList.supports&&e.relList.supports("ar"))}return!1}(),DG=function(e){return e&&"null"!==e?FG(e):null},OG=function(){if(!CG){var e=[];throw wG||e.push("WebXR Device API"),EG||e.push("WebXR Hit Test API"),new Error("The following APIs are required for AR, but are missing in this browser: ".concat(e.join(", ")))}},FG=function(e){return new URL(e,window.location.toString()).toString()},NG=function(e,t){var n=null;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];null!=n&&self.clearTimeout(n),n=self.setTimeout((function(){n=null,e.apply(void 0,i)}),t)}},UG=function(e,t,n){return Math.max(t,Math.min(n,e))},ZG=function(){var e=function(){var e;if(null===(e=document.documentElement.getAttribute("itemtype"))||void 0===e?void 0:e.includes("schema.org/SearchResultsPage"))return!0;var t,n=null!=document.head?Array.from(document.head.querySelectorAll("meta")):[],r=(0,Ms.Z)(n);try{for(r.s();!(t=r.n()).done;){if("viewport"===t.value.name)return!0}}catch(i){r.e(i)}finally{r.f()}return!1}();return e||console.warn('No <meta name="viewport"> detected; <model-viewer> will cap pixel density at 1.'),function(){return e?window.devicePixelRatio:1}}(),zG=function(){var e=new RegExp("[?&]".concat("model-viewer-debug-mode","(&|$)"));return function(){return self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(e)}}(),HG=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))},GG=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(r){e.addEventListener(t,(function i(a){n&&!n(a)||(r(a),e.removeEventListener(t,i))}))}))},QG=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},VG=Symbol("currentEnvironmentMap"),jG=Symbol("currentBackground"),WG=Symbol("updateEnvironment"),qG=Symbol("cancelEnvironmentUpdate");function JG(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var XG,YG,KG,$G=$H(_G||(_G=JG(['\n<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">\n    \x3c!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement\n         support for dynamic re-coloring of UI components --\x3e\n    <defs>\n      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">\n        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>\n        <feOffset dx="0" dy="0" result="offsetblur"/>\n        <feFlood flood-color="#000000"/>\n        <feComposite in2="offsetblur" operator="in"/>\n        <feMerge>\n          <feMergeNode/>\n          <feMergeNode in="SourceGraphic"/>\n        </feMerge>\n      </filter>\n    </defs>\n    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>']))),eQ=$H(XG||(XG=JG(['\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">\n    <defs>\n        <path id="A" d="M.001.232h24.997V36H.001z" />\n    </defs>\n    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">\n        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />\n        <g transform="translate(11 3)">\n            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />\n            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />\n            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />\n            <g transform="translate(0 .769)">\n                <mask id="B" fill="#fff">\n                    <use xlink:href="#A" />\n                </mask>\n                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />\n            </g>\n        </g>\n    </g>\n</svg>']))),tQ=$H(YG||(YG=JG(['\n<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"\n\t xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"\n\t viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">\n<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>\n<g id="Art_layer">\n\t<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>\n\t<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>\n\t<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>\n\t<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>\n\t<g>\n\t\t<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3\n\t\t\tl5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62\n\t\t\tl4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>\n\t</g>\n</g>\n</svg>']))),nQ=$H(KG||(KG=JG(['\n<style>\n:host {\n  display: block;\n  position: relative;\n  contain: strict;\n  width: 300px;\n  height: 150px;\n}\n\n.container {\n  position: relative;\n  overflow: hidden;\n}\n\n.userInput {\n  width: 100%;\n  height: 100%;\n  display: none;\n  position: relative;\n  outline-offset: -1px;\n  outline-width: 1px;\n}\n\ncanvas {\n  position: absolute;\n  display: none;\n  pointer-events: none;\n  /* NOTE(cdata): Chrome 76 and below apparently have a bug\n   * that causes our canvas not to display pixels unless it is\n   * on its own render layer\n   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893\n   */\n  transform: translateZ(0);\n}\n\n.show {\n  display: block;\n}\n\n/* Adapted from HTML5 Boilerplate\n *\n * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */\n.screen-reader-only {\n  border: 0;\n  left: 0;\n  top: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n  pointer-events: none;\n}\n\n.slot {\n  position: absolute;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.slot > * {\n  pointer-events: initial;\n}\n\n.annotation-wrapper ::slotted(*) {\n  opacity: var(--max-hotspot-opacity, 1);\n  transition: opacity 0.3s;\n}\n\n.pointer-tumbling .annotation-wrapper ::slotted(*) {\n  pointer-events: none;\n}\n\n.annotation-wrapper ::slotted(*) {\n  pointer-events: initial;\n}\n\n.annotation-wrapper.hide ::slotted(*) {\n  opacity: var(--min-hotspot-opacity, 0.25);\n}\n\n.slot.poster {\n  display: none;\n  background-color: inherit;\n}\n\n.slot.poster.show {\n  display: inherit;\n}\n\n.slot.poster > * {\n  pointer-events: initial;\n}\n\n.slot.poster:not(.show) > * {\n  pointer-events: none;\n}\n\n#default-poster {\n  width: 100%;\n  height: 100%;\n  /* The default poster is a <button> so we need to set display\n   * to prevent it from being affected by text-align: */\n  display: block;\n  position: absolute;\n  border: none;\n  padding: 0;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-color: #fff0;\n}\n\n#default-progress-bar {\n  display: block;\n  position: relative;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  overflow: hidden;\n}\n\n#default-progress-bar > .bar {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: var(--progress-bar-height, 5px);\n  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));\n  transition: transform 0.09s;\n  transform-origin: top left;\n  transform: scaleX(0);\n  overflow: hidden;\n}\n\n#default-progress-bar > .bar.hide {\n  transition: opacity 0.3s 1s;\n  opacity: 0;\n}\n\n.centered {\n  align-items: center;\n  justify-content: center;\n}\n\n.cover {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n\n.slot.interaction-prompt {\n  display: var(--interaction-prompt-display, flex);\n  overflow: hidden;\n  opacity: 0;\n  will-change: opacity;\n  transition: opacity 0.3s;\n}\n\n.slot.interaction-prompt.visible {\n  opacity: 1;\n}\n\n.animated-container {\n  will-change: transform, opacity;\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n\n.slot.interaction-prompt > * {\n  pointer-events: none;\n}\n\n.slot.ar-button {\n  -moz-user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  user-select: none;\n\n  display: var(--ar-button-display, block);\n}\n\n.slot.ar-button:not(.enabled) {\n  display: none;\n}\n\n.fab {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  background-color: #fff;\n  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);\n  border-radius: 100px;\n}\n\n.fab > * {\n  opacity: 0.87;\n}\n\n#default-ar-button {\n  position: absolute;\n  bottom: 16px;\n  right: 16px;\n  transform: scale(var(--ar-button-scale, 1));\n  transform-origin: bottom right;\n}\n\n.slot.pan-target {\n  display: block;\n  position: absolute;\n  width: 0;\n  height: 0;\n  left: 50%;\n  top: 50%;\n  transform: translate3d(-50%, -50%, 0);\n  background-color: transparent;\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n\n#default-pan-target {\n  width: 6px;\n  height: 6px;\n  border-radius: 6px;\n  border: 1px solid white;\n  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);\n}\n\n.slot.default {\n  pointer-events: none;\n}\n\n.slot.progress-bar {\n  pointer-events: none;\n}\n\n.slot.exit-webxr-ar-button {\n  pointer-events: none;\n}\n\n.slot.exit-webxr-ar-button:not(.enabled) {\n  display: none;\n}\n\n#default-exit-webxr-ar-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: env(safe-area-inset-top, 16px);\n  right: 16px;\n  width: 40px;\n  height: 40px;\n  box-sizing: border-box;\n}\n\n#default-exit-webxr-ar-button > svg {\n  fill: #fff;\n}\n</style>\n<div class="container">\n  <div class="userInput" tabindex="0" role="img"\n      aria-label="3D model">\n      <div class="slot canvas">\n        <slot name="canvas">\n          <canvas></canvas>\n        </slot>\n      </div>\n\n  </div>\n\n  \x3c!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM\n        will have their <slot> elements removed by ShadyCSS --\x3e\n  <div class="slot poster">\n    <slot name="poster">\n      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>\n    </slot>\n  </div>\n\n  <div class="slot ar-button">\n    <slot name="ar-button">\n      <a id="default-ar-button" part="default-ar-button" class="fab"\n          tabindex="2"\n          aria-label="View in your space">\n        ','\n      </a>\n    </slot>\n  </div>\n\n  <div class="slot pan-target">\n    <slot name="pan-target">\n      <div id="default-pan-target">\n      </div>\n    </slot>\n  </div>\n\n  <div class="slot interaction-prompt cover centered">\n    <div id="prompt" class="animated-container">\n      <slot name="interaction-prompt" aria-hidden="true">\n        ','\n      </slot>\n    </div>\n  </div>\n\n  <div id="finger0" class="animated-container cover">\n    <slot name="finger0" aria-hidden="true">\n    </slot>\n  </div>\n  <div id="finger1" class="animated-container cover">\n    <slot name="finger1" aria-hidden="true">\n    </slot>\n  </div>\n\n  <div class="slot default">\n    <slot></slot>\n\n    <div class="slot progress-bar">\n      <slot name="progress-bar">\n        <div id="default-progress-bar" aria-hidden="true">\n          <div class="bar" part="default-progress-bar"></div>\n        </div>\n      </slot>\n    </div>\n\n    <div class="slot exit-webxr-ar-button">\n      <slot name="exit-webxr-ar-button">\n        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"\n            tabindex="3"\n            aria-label="Exit AR"\n            aria-hidden="true">\n          ','\n        </a>\n      </slot>\n    </div>\n  </div>\n</div>\n<div class="screen-reader-only" role="region" aria-label="Live announcements">\n  <span id="status" role="status"></span>\n</div>'])),tQ,eQ,$G),rQ=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;(0,u.Z)(this,e),this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}return(0,c.Z)(e,[{key:"_initWorker",value:function(e){if(!this.workers[e]){var t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}},{key:"_getIdleWorker",value:function(){for(var e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}},{key:"_onMessage",value:function(e,t){var n=this.workersResolve[e];if(n&&n(t),this.queue.length){var r=this.queue.shift(),i=r.resolve,a=r.msg,o=r.transfer;this.workersResolve[e]=i,this.workers[e].postMessage(a,o)}else this.workerStatus^=1<<e}},{key:"setWorkerCreator",value:function(e){this.workerCreator=e}},{key:"setWorkerLimit",value:function(e){this.pool=e}},{key:"postMessage",value:function(e,t){var n=this;return new Promise((function(r){var i=n._getIdleWorker();-1!==i?(n._initWorker(i),n.workerStatus|=1<<i,n.workersResolve[i]=r,n.workers[i].postMessage(e,t)):n.queue.push({resolve:r,msg:e,transfer:t})}))}},{key:"dispose",value:function(){this.workers.forEach((function(e){return e.terminate()})),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}]),e}(),iQ=0,aQ=2,oQ=(0,c.Z)((function e(){(0,u.Z)(this,e),this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null})),sQ=function(){function e(t,n,r,i){(0,u.Z)(this,e),this._dataView=new DataView(t.buffer,t.byteOffset+n,r),this._littleEndian=i,this._offset=0}return(0,c.Z)(e,[{key:"_nextUint8",value:function(){var e=this._dataView.getUint8(this._offset);return this._offset+=1,e}},{key:"_nextUint16",value:function(){var e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}},{key:"_nextUint32",value:function(){var e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}},{key:"_nextUint64",value:function(){var e=this._dataView.getUint32(this._offset,this._littleEndian)+Math.pow(2,32)*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}},{key:"_nextInt32",value:function(){var e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}},{key:"_skip",value:function(e){return this._offset+=e,this}},{key:"_scan",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._offset,r=0;this._dataView.getUint8(this._offset)!==t&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,r)}}]),e}(),lQ=(new Uint8Array([0]),[171,75,84,88,32,50,48,187,13,10,26,10]);function uQ(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):Buffer.from(e).toString("utf8")}function cQ(e){var t=new Uint8Array(e.buffer,e.byteOffset,lQ.length);if(t[0]!==lQ[0]||t[1]!==lQ[1]||t[2]!==lQ[2]||t[3]!==lQ[3]||t[4]!==lQ[4]||t[5]!==lQ[5]||t[6]!==lQ[6]||t[7]!==lQ[7]||t[8]!==lQ[8]||t[9]!==lQ[9]||t[10]!==lQ[10]||t[11]!==lQ[11])throw new Error("Missing KTX 2.0 identifier.");var n=new oQ,r=17*Uint32Array.BYTES_PER_ELEMENT,i=new sQ(e,lQ.length,r,!0);n.vkFormat=i._nextUint32(),n.typeSize=i._nextUint32(),n.pixelWidth=i._nextUint32(),n.pixelHeight=i._nextUint32(),n.pixelDepth=i._nextUint32(),n.layerCount=i._nextUint32(),n.faceCount=i._nextUint32();var a=i._nextUint32();n.supercompressionScheme=i._nextUint32();for(var o=i._nextUint32(),s=i._nextUint32(),l=i._nextUint32(),u=i._nextUint32(),c=i._nextUint64(),h=i._nextUint64(),d=new sQ(e,lQ.length+r,3*a*8,!0),f=0;f<a;f++)n.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});for(var p=new sQ(e,o,s,!0),v={vendorId:p._skip(4)._nextUint16(),descriptorType:p._nextUint16(),versionNumber:p._nextUint16(),descriptorBlockSize:p._nextUint16(),colorModel:p._nextUint8(),colorPrimaries:p._nextUint8(),transferFunction:p._nextUint8(),flags:p._nextUint8(),texelBlockDimension:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],bytesPlane:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],samples:[]},m=(v.descriptorBlockSize/4-6)/4,g=0;g<m;g++){var y={bitOffset:p._nextUint16(),bitLength:p._nextUint8(),channelType:p._nextUint8(),samplePosition:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&y.channelType?(y.sampleLower=p._nextInt32(),y.sampleUpper=p._nextInt32()):(y.sampleLower=p._nextUint32(),y.sampleUpper=p._nextUint32()),v.samples[g]=y}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(v);for(var A=new sQ(e,l,u,!0);A._offset<u;){var x=A._nextUint32(),b=A._scan(x),_=uQ(b),w=A._scan(x-b.byteLength);n.keyValue[_]=_.match(/^ktx/i)?uQ(w):w,A._offset%4&&A._skip(4-A._offset%4)}if(h<=0)return n;for(var E=new sQ(e,c,h,!0),S=E._nextUint16(),M=E._nextUint16(),C=E._nextUint32(),k=E._nextUint32(),T=E._nextUint32(),I=E._nextUint32(),B=[],R=0;R<a;R++)B.push({imageFlags:E._nextUint32(),rgbSliceByteOffset:E._nextUint32(),rgbSliceByteLength:E._nextUint32(),alphaSliceByteOffset:E._nextUint32(),alphaSliceByteLength:E._nextUint32()});var L=c+E._offset,P=L+C,D=P+k,O=D+T,F=new Uint8Array(e.buffer,e.byteOffset+L,C),N=new Uint8Array(e.buffer,e.byteOffset+P,k),U=new Uint8Array(e.buffer,e.byteOffset+D,T),Z=new Uint8Array(e.buffer,e.byteOffset+O,I);return n.globalData={endpointCount:S,selectorCount:M,imageDescs:B,endpointsData:F,selectorsData:N,tablesData:U,extendedData:Z},n}var hQ,dQ,fQ;var pQ,vQ,mQ,gQ,yQ={env:{emscripten_notify_memory_growth:function(e){fQ=new Uint8Array(dQ.exports.memory.buffer)}}},AQ=function(){function e(){(0,u.Z)(this,e)}return(0,c.Z)(e,[{key:"init",value:function(){return hQ||(hQ="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+xQ).then((function(e){return e.arrayBuffer()})).then((function(e){return WebAssembly.instantiate(e,yQ)})).then(this._init):WebAssembly.instantiate(Buffer.from(xQ,"base64"),yQ).then(this._init),hQ)}},{key:"_init",value:function(e){dQ=e.instance,yQ.env.emscripten_notify_memory_growth(0)}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!dQ)throw new Error("ZSTDDecoder: Await .init() before decoding.");var n=e.byteLength,r=dQ.exports.malloc(n);fQ.set(e,r),t=t||Number(dQ.exports.ZSTD_findDecompressedSize(r,n));var i=dQ.exports.malloc(t),a=dQ.exports.ZSTD_decompress(i,t,r,n),o=fQ.slice(i,i+a);return dQ.exports.free(r),dQ.exports.free(i),o}}]),e}(),xQ="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",bQ=new WeakMap,_Q=0,wQ=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).transcoderPath="",r.transcoderBinary=null,r.transcoderPending=null,r.workerPool=new rQ,r.workerSourceURL="",r.workerConfig=null,"undefined"!==typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.'),r}return(0,c.Z)(n,[{key:"setTranscoderPath",value:function(e){return this.transcoderPath=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerPool.setWorkerLimit(e),this}},{key:"detectSupport",value:function(e){return this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},e.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}},{key:"init",value:function(){var e=this;if(!this.transcoderPending){var t=new mb(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);var r=t.loadAsync("basis_transcoder.js"),i=new mb(this.manager);i.setPath(this.transcoderPath),i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);var a=i.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([r,a]).then((function(t){var r=(0,s.Z)(t,2),i=r[0],a=r[1],o=n.BasisWorker.toString(),l=["/* constants */","let _EngineFormat = "+JSON.stringify(n.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(n.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(n.BasisFormat),"/* basis_transcoder.js */",i,"/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([l])),e.transcoderBinary=a,e.workerPool.setWorkerCreator((function(){var t=new Worker(e.workerSourceURL),n=e.transcoderBinary.slice(0);return t.postMessage({type:"init",config:e.workerConfig,transcoderBinary:n},[n]),t}))})),_Q>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),_Q++}return this.transcoderPending}},{key:"load",value:function(e,t,n,r){var i=this;if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");var a=new mb(this.manager);a.setResponseType("arraybuffer"),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){if(bQ.has(e))return bQ.get(e).promise.then(t).catch(r);i._createTexture(e).then((function(e){return t?t(e):null})).catch(r)}),n,r)}},{key:"_createTextureFrom",value:function(e,t){var n=e.mipmaps,r=e.width,i=e.height,a=e.format,o=e.type,s=e.error,l=e.dfdTransferFn,u=e.dfdFlags;if("error"===o)return Promise.reject(s);var c=t.layerCount>1?new sA(n,r,i,t.layerCount,a,Xu):new oA(n,r,i,a,Xu);return c.minFilter=1===n.length?Vu:qu,c.magFilter=Vu,c.generateMipmaps=!1,c.needsUpdate=!0,c.encoding=2===l?uh:lh,c.premultiplyAlpha=!!(1&u),c}},{key:"_createTexture",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s=this,l=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:{},0===(r=cQ(new Uint8Array(t))).vkFormat){e.next=4;break}return e.abrupt("return",TQ(r));case 4:return i=n,o=this.init().then((function(){return s.workerPool.postMessage({type:"transcode",buffer:t,taskConfig:i},[t])})).then((function(e){return s._createTextureFrom(e.data,r)})),bQ.set(t,{promise:o}),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),_Q--,this}}]),n}(fb);wQ.BasisFormat={ETC1S:0,UASTC_4x4:1},wQ.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},wQ.EngineFormat={RGBAFormat:lc,RGBA_ASTC_4x4_Format:Tc,RGBA_BPTC_Format:Gc,RGBA_ETC2_EAC_Format:kc,RGBA_PVRTC_4BPPV1_Format:Ec,RGBA_S3TC_DXT5_Format:bc,RGB_ETC1_Format:Mc,RGB_ETC2_Format:Cc,RGB_PVRTC_4BPPV1_Format:_c,RGB_S3TC_DXT1_Format:yc},wQ.BasisWorker=function(){var e,t,n,r=_EngineFormat,i=_TranscoderFormat,a=_BasisFormat;self.addEventListener("message",(function(o){var h,d=o.data;switch(d.type){case"init":e=d.config,h=d.transcoderBinary,t=new Promise((function(e){n={wasmBinary:h,onRuntimeInitialized:e},BASIS(n)})).then((function(){n.initializeBasis(),void 0===n.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")}));break;case"transcode":t.then((function(){try{for(var t=function(t){var o=new n.KTX2File(new Uint8Array(t));function h(){o.close(),o.delete()}if(!o.isValid())throw h(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");var d=o.isUASTC()?a.UASTC_4x4:a.ETC1S,f=o.getWidth(),p=o.getHeight(),v=o.getLayers()||1,m=o.getLevels(),g=o.getHasAlpha(),y=o.getDFDTransferFunc(),A=o.getDFDFlags(),x=function(t,n,o,c){for(var h,d,f=t===a.ETC1S?s:l,p=0;p<f.length;p++){var v=f[p];if(e[v.if]&&(v.basisFormat.includes(t)&&!(c&&v.transcoderFormat.length<2)&&(!v.needsPowerOfTwo||u(n)&&u(o))))return{transcoderFormat:h=v.transcoderFormat[c?1:0],engineFormat:d=v.engineFormat[c?1:0]}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),h=i.RGBA32,d=r.RGBAFormat,{transcoderFormat:h,engineFormat:d}}(d,f,p,g),b=x.transcoderFormat,_=x.engineFormat;if(!f||!p||!m)throw h(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!o.startTranscoding())throw h(),new Error("THREE.KTX2Loader: .startTranscoding failed");for(var w=[],E=0;E<m;E++){for(var S=[],M=void 0,C=void 0,k=0;k<v;k++){var T=o.getImageLevelInfo(E,k,0);M=T.origWidth<4?T.origWidth:T.width,C=T.origHeight<4?T.origHeight:T.height;var I=new Uint8Array(o.getImageTranscodedSizeInBytes(E,k,0,b));if(!o.transcodeImage(I,E,k,0,b,0,-1,-1))throw h(),new Error("THREE.KTX2Loader: .transcodeImage failed.");S.push(I)}w.push({data:c(S),width:M,height:C})}return h(),{width:f,height:p,hasAlpha:g,mipmaps:w,format:_,dfdTransferFn:y,dfdFlags:A}}(d.buffer),o=t.width,h=t.height,f=t.hasAlpha,p=t.mipmaps,v=t.format,m=t.dfdTransferFn,g=t.dfdFlags,y=[],A=0;A<p.length;++A)y.push(p[A].data.buffer);self.postMessage({type:"transcode",id:d.id,width:o,height:h,hasAlpha:f,mipmaps:p,format:v,dfdTransferFn:m,dfdFlags:g},y)}catch(x){console.error(x),self.postMessage({type:"error",id:d.id,error:x.message})}}))}}));var o=[{if:"astcSupported",basisFormat:[a.UASTC_4x4],transcoderFormat:[i.ASTC_4x4,i.ASTC_4x4],engineFormat:[r.RGBA_ASTC_4x4_Format,r.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[a.ETC1S,a.UASTC_4x4],transcoderFormat:[i.BC7_M5,i.BC7_M5],engineFormat:[r.RGBA_BPTC_Format,r.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[a.ETC1S,a.UASTC_4x4],transcoderFormat:[i.BC1,i.BC3],engineFormat:[r.RGB_S3TC_DXT1_Format,r.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[a.ETC1S,a.UASTC_4x4],transcoderFormat:[i.ETC1,i.ETC2],engineFormat:[r.RGB_ETC2_Format,r.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[a.ETC1S,a.UASTC_4x4],transcoderFormat:[i.ETC1],engineFormat:[r.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[a.ETC1S,a.UASTC_4x4],transcoderFormat:[i.PVRTC1_4_RGB,i.PVRTC1_4_RGBA],engineFormat:[r.RGB_PVRTC_4BPPV1_Format,r.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],s=o.sort((function(e,t){return e.priorityETC1S-t.priorityETC1S})),l=o.sort((function(e,t){return e.priorityUASTC-t.priorityUASTC}));function u(e){return e<=2||0===(e&e-1)&&0!==e}function c(e){var t,n=0,r=(0,Ms.Z)(e);try{for(r.s();!(t=r.n()).done;){n+=t.value.byteLength}}catch(u){r.e(u)}finally{r.f()}var i,a=new Uint8Array(n),o=0,s=(0,Ms.Z)(e);try{for(s.s();!(i=s.n()).done;){var l=i.value;a.set(l,o),o+=l.byteLength}}catch(u){s.e(u)}finally{s.f()}return a}};var EQ,SQ,MQ=(pQ={},(0,L.Z)(pQ,109,lc),(0,L.Z)(pQ,97,lc),(0,L.Z)(pQ,37,lc),(0,L.Z)(pQ,43,lc),(0,L.Z)(pQ,103,vc),(0,L.Z)(pQ,83,vc),(0,L.Z)(pQ,16,vc),(0,L.Z)(pQ,22,vc),(0,L.Z)(pQ,100,fc),(0,L.Z)(pQ,76,fc),(0,L.Z)(pQ,15,fc),(0,L.Z)(pQ,9,fc),pQ),CQ=(vQ={},(0,L.Z)(vQ,109,nc),(0,L.Z)(vQ,97,rc),(0,L.Z)(vQ,37,Xu),(0,L.Z)(vQ,43,Xu),(0,L.Z)(vQ,103,nc),(0,L.Z)(vQ,83,rc),(0,L.Z)(vQ,16,Xu),(0,L.Z)(vQ,22,Xu),(0,L.Z)(vQ,100,nc),(0,L.Z)(vQ,76,rc),(0,L.Z)(vQ,15,Xu),(0,L.Z)(vQ,9,Xu),vQ),kQ=(mQ={},(0,L.Z)(mQ,43,uh),(0,L.Z)(mQ,22,uh),(0,L.Z)(mQ,15,uh),mQ);function TQ(e){return IQ.apply(this,arguments)}function IQ(){return IQ=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,s,l,u,c,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.vkFormat,r=t.pixelWidth,i=t.pixelHeight,s=t.pixelDepth,void 0!==MQ[n]){e.next=3;break}throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");case 3:if(l=t.levels[0],t.supercompressionScheme!==iQ){e.next=8;break}u=l.levelData,e.next=16;break;case 8:if(t.supercompressionScheme!==aQ){e.next=15;break}return gQ||(gQ=new Promise(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AQ,e.next=3,n.init();case 3:t(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e.next=12,gQ;case 12:u=e.sent.decode(l.levelData,l.uncompressedByteLength),e.next=16;break;case 15:throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");case 16:return c=CQ[n]===nc?new Float32Array(u.buffer,u.byteOffset,u.byteLength/Float32Array.BYTES_PER_ELEMENT):CQ[n]===rc?new Uint16Array(u.buffer,u.byteOffset,u.byteLength/Uint16Array.BYTES_PER_ELEMENT):u,(h=0===s?new Cy(c,r,i):new Bd(c,r,i,s)).type=CQ[n],h.format=MQ[n],h.encoding=kQ[n]||lh,h.needsUpdate=!0,e.abrupt("return",Promise.resolve(h));case 23:case"end":return e.stop()}}),e)}))),IQ.apply(this,arguments)}var BQ,RQ,LQ=Symbol("retainerCount"),PQ=Symbol("recentlyUsed"),DQ=Symbol("evict"),OQ=Symbol("evictionThreshold"),FQ=Symbol("cache"),NQ=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;(0,u.Z)(this,t),this[EQ]=new Map,this[SQ]=[],this[FQ]=e,this[OQ]=n}return(0,c.Z)(t,[{key:"evictionThreshold",get:function(){return this[OQ]},set:function(e){this[OQ]=e,this[DQ]()}},{key:"cache",get:function(){return this[FQ]}},{key:"retainerCount",value:function(e){return this[LQ].get(e)||0}},{key:"reset",value:function(){this[LQ].clear(),this[PQ]=[]}},{key:"retain",value:function(e){this[LQ].has(e)||this[LQ].set(e,0),this[LQ].set(e,this[LQ].get(e)+1);var t=this[PQ].indexOf(e);-1!==t&&this[PQ].splice(t,1),this[PQ].unshift(e),this[DQ]()}},{key:"release",value:function(e){this[LQ].has(e)&&this[LQ].set(e,Math.max(this[LQ].get(e)-1,0)),this[DQ]()}},{key:e,value:function(){if(!(this[PQ].length<this[OQ]))for(var e=this[PQ].length-1;e>=this[OQ];--e){var t=this[PQ][e];0===this[LQ].get(t)&&(this[FQ].delete(t),this[PQ].splice(e,1))}}}]),t}((EQ=LQ,SQ=PQ,DQ)),UQ=function(e){var t,n=new Map,r=(0,Ms.Z)(e.mappings);try{for(r.s();!(t=r.n()).done;){var i,a=t.value,o=(0,Ms.Z)(a.variants);try{for(o.s();!(i=o.n()).done;){var s=i.value;n.set(s,{material:null,gltfMaterialIndex:a.material})}}catch(l){o.e(l)}finally{o.f()}}}catch(l){r.e(l)}finally{r.f()}return n},ZQ=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name="KHR_materials_variants"}return(0,c.Z)(e,[{key:"afterRoot",value:function(e){var t=this,n=this.parser,r=n.json;if(void 0===r.extensions||void 0===r.extensions[this.name])return null;var i,a=function(e){var t,n=[],r=new Set,i=(0,Ms.Z)(e);try{for(i.s();!(t=i.n()).done;){for(var a=t.value,o=a,s=0;r.has(o);)o=a+"."+ ++s;r.add(o),n.push(o)}}catch(l){i.e(l)}finally{i.f()}return n}((r.extensions[this.name].variants||[]).map((function(e){return e.name}))),o=(0,Ms.Z)(e.scenes);try{for(o.s();!(i=o.n()).done;){i.value.traverse((function(e){var i=e;if(i.material){var a=n.associations.get(i);if(null!=a&&null!=a.meshes&&null!=a.primitives){var o=r.meshes[a.meshes].primitives[a.primitives].extensions;o&&o[t.name]&&(i.userData.variantMaterials=UQ(o[t.name]))}}}))}}catch(s){o.e(s)}finally{o.f()}return e.userData.variants=a,Promise.resolve()}}]),e}();Md.DEFAULT_ANISOTROPY=4;var zQ,HQ,GQ,QQ,VQ=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=function(e){var t=e.loaded/e.total;n(Math.max(0,Math.min(1,isFinite(t)?t:1)))};return new Promise((function(n,i){t.load(e,n,r,i)}))},jQ=new Map,WQ=new Map,qQ=new $Z,JQ=new wQ,XQ=Symbol("loader"),YQ=Symbol("evictionPolicy"),KQ=Symbol("GLTFInstance"),$Q=function(e,t){(0,Hn.Z)(r,e);var n=(0,Gn.Z)(r);function r(e){var t;return(0,u.Z)(this,r),(t=n.call(this))[RQ]=(new uz).register((function(e){return new ZQ(e)})),t[KQ]=e,t[XQ].setDRACOLoader(qQ),t[XQ].setKTX2Loader(JQ),t}return(0,c.Z)(r,[{key:t,get:function(){return this.constructor[YQ]}},{key:"preload",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var i,o,s,l,u=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=u.length>2&&void 0!==u[2]?u[2]:function(){},this[XQ].setWithCredentials(r.withCredentials),this.dispatchEvent({type:"preload",element:n,src:t}),jQ.has(t)){e.next=14;break}if(null==QQ){e.next=10;break}return e.t0=this[XQ],e.next=8,QQ;case 8:e.t1=e.sent,e.t0.setMeshoptDecoder.call(e.t0,e.t1);case 10:o=VQ(t,this[XQ],(function(e){i(.8*e)})),s=this[KQ],l=o.then((function(e){return s.prepare(e)})).then((function(e){return i(.9),new s(e)})).catch((function(e){return console.error(e),new s})),jQ.set(t,l);case 14:return e.next=16,jQ.get(t);case 16:WQ.set(t,!0),i&&i(1);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,s=this,l=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:function(){},e.next=3,this.preload(t,n,r);case 3:return e.next=5,jQ.get(t);case 5:return i=e.sent,e.next=8,i.clone();case 8:return o=e.sent,this[YQ].retain(t),o.dispose=function(){s[YQ].release(t)},e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"setDRACODecoderLocation",value:function(e){zQ=e,qQ.setDecoderPath(e)}},{key:"getDRACODecoderLocation",value:function(){return zQ}},{key:"setKTX2TranscoderLocation",value:function(e){HQ=e,JQ.setTranscoderPath(e)}},{key:"getKTX2TranscoderLocation",value:function(){return HQ}},{key:"setMeshoptDecoderLocation",value:function(e){GQ!==e&&(GQ=e,QQ=function(e){return new Promise((function(t,n){var r=document.createElement("script");document.body.appendChild(r),r.onload=t,r.onerror=n,r.async=!0,r.src=e}))}(e).then((function(){return MeshoptDecoder.ready})).then((function(){return MeshoptDecoder})))}},{key:"getMeshoptDecoderLocation",value:function(){return GQ}},{key:"initializeKTX2Loader",value:function(e){JQ.detectSupport(e)}},{key:"cache",get:function(){return jQ}},{key:"clearCache",value:function(){var e=this;jQ.forEach((function(t,n){e.delete(n)})),this[YQ].reset()}},{key:"has",value:function(e){return jQ.has(e)}},{key:"delete",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.has(t)){e.next=2;break}return e.abrupt("return");case 2:return n=jQ.get(t),WQ.delete(t),jQ.delete(t),e.next=7,n;case 7:e.sent.dispose();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasFinishedLoading",value:function(e){return!!WQ.get(e)}}]),r}(jh,(BQ=YQ,RQ=XQ,YQ));$Q[BQ]=new NQ($Q);var eV=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("div");return(0,u.Z)(this,n),(e=t.call(this)).isCSS2DObject=!0,e.element=r,e.element.style.position="absolute",e.element.style.userSelect="none",e.element.setAttribute("draggable",!1),e.center=new sd(.5,.5),e.addEventListener("removed",(function(){this.traverse((function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)}))})),e}return(0,c.Z)(n,[{key:"copy",value:function(e,t){return(0,Zn.Z)((0,zn.Z)(n.prototype),"copy",this).call(this,e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}]),n}(Ff),tV=new Dd,nV=new df,rV=new df,iV=new Dd,aV=new Dd,oV=(0,c.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.Z)(this,e);var n,r,i,a,o=this,s={objects:new WeakMap},l=void 0!==t.element?t.element:document.createElement("div");function c(e,t,n){if(e.isCSS2DObject){tV.setFromMatrixPosition(e.matrixWorld),tV.applyMatrix4(rV);var r=!0===e.visible&&tV.z>=-1&&tV.z<=1&&!0===e.layers.test(n.layers);if(e.element.style.display=!0===r?"":"none",!0===r){e.onBeforeRender(o,t,n);var u=e.element;u.style.transform="translate("+-100*e.center.x+"%,"+-100*e.center.y+"%)translate("+(tV.x*i+i)+"px,"+(-tV.y*a+a)+"px)",u.parentNode!==l&&l.appendChild(u),e.onAfterRender(o,t,n)}var d={distanceToCameraSquared:h(n,e)};s.objects.set(e,d)}for(var f=0,p=e.children.length;f<p;f++)c(e.children[f],t,n)}function h(e,t){return iV.setFromMatrixPosition(e.matrixWorld),aV.setFromMatrixPosition(t.matrixWorld),iV.distanceToSquared(aV)}l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:n,height:r}},this.render=function(e,t){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),nV.copy(t.matrixWorldInverse),rV.multiplyMatrices(t.projectionMatrix,nV),c(e,e,t),function(e){for(var t=function(e){var t=[];return e.traverse((function(e){e.isCSS2DObject&&t.push(e)})),t}(e).sort((function(e,t){return e.renderOrder!==t.renderOrder?t.renderOrder-e.renderOrder:s.objects.get(e).distanceToCameraSquared-s.objects.get(t).distanceToCameraSquared})),n=t.length,r=0,i=t.length;r<i;r++)t[r].element.style.zIndex=n-r}(e)},this.setSize=function(e,t){i=(n=e)/2,a=(r=t)/2,l.style.width=e+"px",l.style.height=t+"px"}}));function sV(e,t,n){var r=n,i=new Dd;return e.updateWorldMatrix(!0,!0),e.traverseVisible((function(e){var n=e.geometry;if(void 0!==n){var a=n.attributes.position;if(void 0!==a)for(var o=0,s=a.count;o<s;o++)e.isMesh?e.getVertexPosition(o,i):i.fromBufferAttribute(a,o),e.isSkinnedMesh||i.applyMatrix4(e.matrixWorld),r=t(r,i)}})),r}var lV={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]},uV=function(){function e(){(0,u.Z)(this,e),this.pluginCallbacks=[],this.register((function(e){return new GV(e)})),this.register((function(e){return new QV(e)})),this.register((function(e){return new WV(e)})),this.register((function(e){return new qV(e)})),this.register((function(e){return new JV(e)})),this.register((function(e){return new XV(e)})),this.register((function(e){return new VV(e)})),this.register((function(e){return new jV(e)})),this.register((function(e){return new YV(e)})),this.register((function(e){return new KV(e)}))}return(0,c.Z)(e,[{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){for(var i=new HV,a=[],o=0,s=this.pluginCallbacks.length;o<s;o++)a.push(this.pluginCallbacks[o](i));i.setPlugins(a),i.write(e,t,r).catch(n)}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.parse(e,r,i,t)}))}}]),e}(),cV=0,hV=1,dV=2,fV=3,pV=4,vV=5120,mV=5121,gV=5122,yV=5123,AV=5124,xV=5125,bV=5126,_V=34962,wV=34963,EV=9728,SV=9729,MV=9984,CV=9985,kV=9986,TV=9987,IV=33071,BV=33648,RV=10497,LV="KHR_mesh_quantization",PV={};PV[Zu]=EV,PV[zu]=MV,PV[Gu]=kV,PV[Vu]=SV,PV[ju]=CV,PV[qu]=TV,PV[Nu]=IV,PV[Fu]=RV,PV[Uu]=BV;var DV={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},OV=new np;function FV(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}function NV(e){return 4*Math.ceil(e/4)}function UV(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=NV(e.byteLength);if(n!==e.byteLength){var r=new Uint8Array(n);if(r.set(new Uint8Array(e)),0!==t)for(var i=e.byteLength;i<n;i++)r[i]=t;return r.buffer}return e}function ZV(){return"undefined"===typeof document&&"undefined"!==typeof OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas")}function zV(e,t){return void 0!==e.toBlob?new Promise((function(n){return e.toBlob(n,t)})):("image/jpeg"===t?n=.92:"image/webp"===t&&(n=.8),e.convertToBlob({type:t,quality:n}));var n}var HV=function(){function e(){(0,u.Z)(this,e),this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}return(0,c.Z)(e,[{key:"setPlugins",value:function(e){this.plugins=e}},{key:"write",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,s,l,u,c,h,d,f,p,v=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>2&&void 0!==v[2]?v[2]:{},this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},r),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(t),e.next=6,Promise.all(this.pending);case 6:o=(i=this).buffers,s=i.json,r=i.options,l=i.extensionsUsed,u=i.extensionsRequired,c=new Blob(o,{type:"application/octet-stream"}),h=Object.keys(l),d=Object.keys(u),h.length>0&&(s.extensionsUsed=h),d.length>0&&(s.extensionsRequired=d),s.buffers&&s.buffers.length>0&&(s.buffers[0].byteLength=c.size),!0===r.binary?((f=new FileReader).readAsArrayBuffer(c),f.onloadend=function(){var e=UV(f.result),t=new DataView(new ArrayBuffer(8));t.setUint32(0,e.byteLength,!0),t.setUint32(4,5130562,!0);var r,i=UV((r=JSON.stringify(s),(new TextEncoder).encode(r).buffer),32),a=new DataView(new ArrayBuffer(8));a.setUint32(0,i.byteLength,!0),a.setUint32(4,1313821514,!0);var o=new ArrayBuffer(12),l=new DataView(o);l.setUint32(0,1179937895,!0),l.setUint32(4,2,!0);var u=12+a.byteLength+i.byteLength+t.byteLength+e.byteLength;l.setUint32(8,u,!0);var c=new Blob([o,a,i,t,e],{type:"application/octet-stream"}),h=new FileReader;h.readAsArrayBuffer(c),h.onloadend=function(){n(h.result)}}):s.buffers&&s.buffers.length>0?((p=new FileReader).readAsDataURL(c),p.onloadend=function(){var e=p.result;s.buffers[0].uri=e,n(s)}):n(s);case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"serializeUserData",value:function(e,t){if(0!==Object.keys(e.userData).length){var n=this.options,r=this.extensionsUsed;try{var i=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&i.gltfExtensions){for(var a in void 0===t.extensions&&(t.extensions={}),i.gltfExtensions)t.extensions[a]=i.gltfExtensions[a],r[a]=!0;delete i.gltfExtensions}Object.keys(i).length>0&&(t.extras=i)}catch(o){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+o.message)}}}},{key:"getUID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!1===this.uids.has(e)){var n=new Map;n.set(!0,this.uid++),n.set(!1,this.uid++),this.uids.set(e,n)}return this.uids.get(e).get(t)}},{key:"isNormalizedNormalAttribute",value:function(e){if(this.cache.attributesNormalized.has(e))return!1;for(var t=new Dd,n=0,r=e.count;n<r;n++)if(Math.abs(t.fromBufferAttribute(e,n).length()-1)>5e-4)return!1;return!0}},{key:"createNormalizedNormalAttribute",value:function(e){var t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);for(var n=e.clone(),r=new Dd,i=0,a=n.count;i<a;i++)r.fromBufferAttribute(n,i),0===r.x&&0===r.y&&0===r.z?r.setX(1):r.normalize(),n.setXYZ(i,r.x,r.y,r.z);return t.attributesNormalized.set(e,n),n}},{key:"applyTextureTransform",value:function(e,t){var n=!1,r={};0===t.offset.x&&0===t.offset.y||(r.offset=t.offset.toArray(),n=!0),0!==t.rotation&&(r.rotation=t.rotation,n=!0),1===t.repeat.x&&1===t.repeat.y||(r.scale=t.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=r,this.extensionsUsed.KHR_texture_transform=!0)}},{key:"buildMetalRoughTexture",value:function(e,t){if(e===t)return e;function n(e){return e.encoding===uh?function(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}:function(e){return e}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");var r=e?e.image:null,i=t?t.image:null,a=Math.max(r?r.width:0,i?i.width:0),o=Math.max(r?r.height:0,i?i.height:0),s=ZV();s.width=a,s.height=o;var l=s.getContext("2d");l.fillStyle="#00ffff",l.fillRect(0,0,a,o);var u=l.getImageData(0,0,a,o);if(r){l.drawImage(r,0,0,a,o);for(var c=n(e),h=l.getImageData(0,0,a,o).data,d=2;d<h.length;d+=4)u.data[d]=256*c(h[d]/256)}if(i){l.drawImage(i,0,0,a,o);for(var f=n(t),p=l.getImageData(0,0,a,o).data,v=1;v<p.length;v+=4)u.data[v]=256*f(p[v]/256)}l.putImageData(u,0,0);var m=(e||t).clone();return m.source=new wd(s),m.encoding=lh,m}},{key:"processBuffer",value:function(e){var t=this.json,n=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),n.push(e),0}},{key:"processBufferView",value:function(e,t,n,r,i){var a,o=this.json;switch(o.bufferViews||(o.bufferViews=[]),t){case vV:case mV:a=1;break;case gV:case yV:a=2;break;default:a=4}for(var s=NV(r*e.itemSize*a),l=new DataView(new ArrayBuffer(s)),u=0,c=n;c<n+r;c++)for(var h=0;h<e.itemSize;h++){var d=void 0;e.itemSize>4?d=e.array[c*e.itemSize+h]:(0===h?d=e.getX(c):1===h?d=e.getY(c):2===h?d=e.getZ(c):3===h&&(d=e.getW(c)),!0===e.normalized&&(d=od.normalize(d,e.array))),t===bV?l.setFloat32(u,d,!0):t===AV?l.setInt32(u,d,!0):t===xV?l.setUint32(u,d,!0):t===gV?l.setInt16(u,d,!0):t===yV?l.setUint16(u,d,!0):t===vV?l.setInt8(u,d):t===mV&&l.setUint8(u,d),u+=a}var f={buffer:this.processBuffer(l.buffer),byteOffset:this.byteOffset,byteLength:s};return void 0!==i&&(f.target=i),i===_V&&(f.byteStride=e.itemSize*a),this.byteOffset+=s,o.bufferViews.push(f),{id:o.bufferViews.length-1,byteLength:0}}},{key:"processBufferViewImage",value:function(e){var t=this,n=t.json;return n.bufferViews||(n.bufferViews=[]),new Promise((function(r){var i=new FileReader;i.readAsArrayBuffer(e),i.onloadend=function(){var e=UV(i.result),a={buffer:t.processBuffer(e),byteOffset:t.byteOffset,byteLength:e.byteLength};t.byteOffset+=e.byteLength,r(n.bufferViews.push(a)-1)}}))}},{key:"processAccessor",value:function(e,t,n,r){var i,a=this.json;if(e.array.constructor===Float32Array)i=bV;else if(e.array.constructor===Int32Array)i=AV;else if(e.array.constructor===Uint32Array)i=xV;else if(e.array.constructor===Int16Array)i=gV;else if(e.array.constructor===Uint16Array)i=yV;else if(e.array.constructor===Int8Array)i=vV;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");i=mV}if(void 0===n&&(n=0),void 0===r&&(r=e.count),0===r)return null;var o,s=function(e,t,n){for(var r={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)},i=t;i<t+n;i++)for(var a=0;a<e.itemSize;a++){var o=void 0;e.itemSize>4?o=e.array[i*e.itemSize+a]:(0===a?o=e.getX(i):1===a?o=e.getY(i):2===a?o=e.getZ(i):3===a&&(o=e.getW(i)),!0===e.normalized&&(o=od.normalize(o,e.array))),r.min[a]=Math.min(r.min[a],o),r.max[a]=Math.max(r.max[a],o)}return r}(e,n,r);void 0!==t&&(o=e===t.index?wV:_V);var l=this.processBufferView(e,i,n,r,o),u={bufferView:l.id,byteOffset:l.byteOffset,componentType:i,count:r,max:s.max,min:s.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"}[e.itemSize]};return!0===e.normalized&&(u.normalized=!0),a.accessors||(a.accessors=[]),a.accessors.push(u)-1}},{key:"processImage",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"image/png";if(null!==e){var i=this,a=i.cache,o=i.json,s=i.options,l=i.pending;a.images.has(e)||a.images.set(e,{});var u=a.images.get(e),c=r+":flipY/"+n.toString();if(void 0!==u[c])return u[c];o.images||(o.images=[]);var h={mimeType:r},d=ZV();d.width=Math.min(e.width,s.maxTextureSize),d.height=Math.min(e.height,s.maxTextureSize);var f=d.getContext("2d");if(!0===n&&(f.translate(0,d.height),f.scale(1,-1)),void 0!==e.data){t!==lc&&console.error("GLTFExporter: Only RGBAFormat is supported."),(e.width>s.maxTextureSize||e.height>s.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);for(var p=new Uint8ClampedArray(e.height*e.width*4),v=0;v<p.length;v+=4)p[v+0]=e.data[v+0],p[v+1]=e.data[v+1],p[v+2]=e.data[v+2],p[v+3]=e.data[v+3];f.putImageData(new ImageData(p,e.width,e.height),0,0)}else f.drawImage(e,0,0,d.width,d.height);!0===s.binary?l.push(zV(d,r).then((function(e){return i.processBufferViewImage(e)})).then((function(e){h.bufferView=e}))):void 0!==d.toDataURL?h.uri=d.toDataURL(r):l.push(zV(d,r).then((function(e){return(new FileReader).readAsDataURL(e)})).then((function(e){h.uri=e})));var m=o.images.push(h)-1;return u[c]=m,m}throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}},{key:"processSampler",value:function(e){var t=this.json;t.samplers||(t.samplers=[]);var n={magFilter:PV[e.magFilter],minFilter:PV[e.minFilter],wrapS:PV[e.wrapS],wrapT:PV[e.wrapT]};return t.samplers.push(n)-1}},{key:"processTexture",value:function(e){var t=this.cache,n=this.json;if(t.textures.has(e))return t.textures.get(e);n.textures||(n.textures=[]);var r=e.userData.mimeType;"image/webp"===r&&(r="image/png");var i={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,r)};e.name&&(i.name=e.name),this._invokeAll((function(t){t.writeTexture&&t.writeTexture(e,i)}));var a=n.textures.push(i)-1;return t.textures.set(e,a),a}},{key:"processMaterial",value:function(e){var t=this.cache,n=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);var r={pbrMetallicRoughness:{}};!0!==e.isMeshStandardMaterial&&!0!==e.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");var i=e.color.toArray().concat([e.opacity]);if(FV(i,[1,1,1,1])||(r.pbrMetallicRoughness.baseColorFactor=i),e.isMeshStandardMaterial?(r.pbrMetallicRoughness.metallicFactor=e.metalness,r.pbrMetallicRoughness.roughnessFactor=e.roughness):(r.pbrMetallicRoughness.metallicFactor=.5,r.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){var a=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),o={index:this.processTexture(a)};this.applyTextureTransform(o,a),r.pbrMetallicRoughness.metallicRoughnessTexture=o}if(e.map){var s={index:this.processTexture(e.map)};this.applyTextureTransform(s,e.map),r.pbrMetallicRoughness.baseColorTexture=s}if(e.emissive){var l=e.emissive;if(Math.max(l.r,l.g,l.b)>0&&(r.emissiveFactor=e.emissive.toArray()),e.emissiveMap){var u={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(u,e.emissiveMap),r.emissiveTexture=u}}if(e.normalMap){var c={index:this.processTexture(e.normalMap)};e.normalScale&&1!==e.normalScale.x&&(c.scale=e.normalScale.x),this.applyTextureTransform(c,e.normalMap),r.normalTexture=c}if(e.aoMap){var h={index:this.processTexture(e.aoMap),texCoord:1};1!==e.aoMapIntensity&&(h.strength=e.aoMapIntensity),this.applyTextureTransform(h,e.aoMap),r.occlusionTexture=h}e.transparent?r.alphaMode="BLEND":e.alphaTest>0&&(r.alphaMode="MASK",r.alphaCutoff=e.alphaTest),e.side===Ql&&(r.doubleSided=!0),""!==e.name&&(r.name=e.name),this.serializeUserData(e,r),this._invokeAll((function(t){t.writeMaterial&&t.writeMaterial(e,r)}));var d=n.materials.push(r)-1;return t.materials.set(e,d),d}},{key:"processMesh",value:function(e){var t=this.cache,n=this.json,r=[e.geometry.uuid];if(Array.isArray(e.material))for(var i=0,a=e.material.length;i<a;i++)r.push(e.material[i].uuid);else r.push(e.material.uuid);var o=r.join(":");if(t.meshes.has(o))return t.meshes.get(o);var s,l=e.geometry;s=e.isLineSegments?hV:e.isLineLoop?dV:e.isLine?fV:e.isPoints?cV:e.material.wireframe?hV:pV;var u={},c={},h=[],d=[],f={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},p=l.getAttribute("normal");void 0===p||this.isNormalizedNormalAttribute(p)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),l.setAttribute("normal",this.createNormalizedNormalAttribute(p)));var v=null;for(var m in l.attributes)if("morph"!==m.slice(0,5)){var g=l.attributes[m];m=f[m]||m.toUpperCase();if(/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(m)||(m="_"+m),t.attributes.has(this.getUID(g)))c[m]=t.attributes.get(this.getUID(g));else{v=null;var y=g.array;"JOINTS_0"!==m||y instanceof Uint16Array||y instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),v=new dp(new Uint16Array(y),g.itemSize,g.normalized));var A=this.processAccessor(v||g,l);null!==A&&(m.startsWith("_")||this.detectMeshQuantization(m,g),c[m]=A,t.attributes.set(this.getUID(g),A))}}if(void 0!==p&&l.setAttribute("normal",p),0===Object.keys(c).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){var x=[],b=[],_={};if(void 0!==e.morphTargetDictionary)for(var w in e.morphTargetDictionary)_[e.morphTargetDictionary[w]]=w;for(var E=0;E<e.morphTargetInfluences.length;++E){var S={},M=!1;for(var C in l.morphAttributes)if("position"===C||"normal"===C){var k=l.morphAttributes[C][E],T=C.toUpperCase(),I=l.attributes[C];if(t.attributes.has(this.getUID(k,!0)))S[T]=t.attributes.get(this.getUID(k,!0));else{var B=k.clone();if(!l.morphTargetsRelative)for(var R=0,L=k.count;R<L;R++)for(var P=0;P<k.itemSize;P++)0===P&&B.setX(R,k.getX(R)-I.getX(R)),1===P&&B.setY(R,k.getY(R)-I.getY(R)),2===P&&B.setZ(R,k.getZ(R)-I.getZ(R)),3===P&&B.setW(R,k.getW(R)-I.getW(R));S[T]=this.processAccessor(B,l),t.attributes.set(this.getUID(I,!0),S[T])}}else M||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),M=!0);d.push(S),x.push(e.morphTargetInfluences[E]),void 0!==e.morphTargetDictionary&&b.push(_[E])}u.weights=x,b.length>0&&(u.extras={},u.extras.targetNames=b)}var D=Array.isArray(e.material);if(D&&0===l.groups.length)return null;for(var O=D?e.material:[e.material],F=D?l.groups:[{materialIndex:0,start:void 0,count:void 0}],N=0,U=F.length;N<U;N++){var Z={mode:s,attributes:c};if(this.serializeUserData(l,Z),d.length>0&&(Z.targets=d),null!==l.index){var z=this.getUID(l.index);void 0===F[N].start&&void 0===F[N].count||(z+=":"+F[N].start+":"+F[N].count),t.attributes.has(z)?Z.indices=t.attributes.get(z):(Z.indices=this.processAccessor(l.index,l,F[N].start,F[N].count),t.attributes.set(z,Z.indices)),null===Z.indices&&delete Z.indices}var H=this.processMaterial(O[F[N].materialIndex]);null!==H&&(Z.material=H),h.push(Z)}u.primitives=h,n.meshes||(n.meshes=[]),this._invokeAll((function(t){t.writeMesh&&t.writeMesh(e,u)}));var G=n.meshes.push(u)-1;return t.meshes.set(o,G),G}},{key:"detectMeshQuantization",value:function(e,t){if(!this.extensionsUsed[LV]){var n=void 0;switch(t.array.constructor){case Int8Array:n="byte";break;case Uint8Array:n="unsigned byte";break;case Int16Array:n="short";break;case Uint16Array:n="unsigned short";break;default:return}t.normalized&&(n+=" normalized");var r=e.split("_",1)[0];lV[r]&&lV[r].includes(n)&&(this.extensionsUsed[LV]=!0,this.extensionsRequired[LV]=!0)}}},{key:"processCamera",value:function(e){var t=this.json;t.cameras||(t.cameras=[]);var n=e.isOrthographicCamera,r={type:n?"orthographic":"perspective"};return n?r.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:r.perspective={aspectRatio:e.aspect,yfov:od.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(r.name=e.type),t.cameras.push(r)-1}},{key:"processAnimation",value:function(e,t){var n=this.json,r=this.nodeMap;n.animations||(n.animations=[]);for(var i=(e=uV.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,a=[],o=[],s=0;s<i.length;++s){var l=i[s],u=C_.parseTrackName(l.name),c=C_.findNode(t,u.nodeName),h=DV[u.propertyName];if("bones"===u.objectName&&(c=!0===c.isSkinnedMesh?c.skeleton.getBoneByName(u.objectIndex):void 0),!c||!h)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',l.name),null;var d=l.values.length/l.times.length;h===DV.morphTargetInfluences&&(d/=c.morphTargetInfluences.length);var f=void 0;!0===l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(f="CUBICSPLINE",d/=3):f=l.getInterpolation()===Yc?"STEP":"LINEAR",o.push({input:this.processAccessor(new dp(l.times,1)),output:this.processAccessor(new dp(l.values,d)),interpolation:f}),a.push({sampler:o.length-1,target:{node:r.get(c),path:h}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:o,channels:a}),n.animations.length-1}},{key:"processSkin",value:function(e){var t=this.json,n=this.nodeMap,r=t.nodes[n.get(e)],i=e.skeleton;if(void 0===i)return null;var a=e.skeleton.bones[0];if(void 0===a)return null;for(var o=[],s=new Float32Array(16*i.bones.length),l=new df,u=0;u<i.bones.length;++u)o.push(n.get(i.bones[u])),l.copy(i.boneInverses[u]),l.multiply(e.bindMatrix).toArray(s,16*u);return void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new dp(s,16)),joints:o,skeleton:n.get(a)}),r.skin=t.skins.length-1}},{key:"processNode",value:function(e){var t=this.json,n=this.options,r=this.nodeMap;t.nodes||(t.nodes=[]);var i={};if(n.trs){var a=e.quaternion.toArray(),o=e.position.toArray(),s=e.scale.toArray();FV(a,[0,0,0,1])||(i.rotation=a),FV(o,[0,0,0])||(i.translation=o),FV(s,[1,1,1])||(i.scale=s)}else e.matrixAutoUpdate&&e.updateMatrix(),!1===function(e){return FV(e.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}(e.matrix)&&(i.matrix=e.matrix.elements);if(""!==e.name&&(i.name=String(e.name)),this.serializeUserData(e,i),e.isMesh||e.isLine||e.isPoints){var l=this.processMesh(e);null!==l&&(i.mesh=l)}else e.isCamera&&(i.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){for(var u=[],c=0,h=e.children.length;c<h;c++){var d=e.children[c];if(d.visible||!1===n.onlyVisible){var f=this.processNode(d);null!==f&&u.push(f)}}u.length>0&&(i.children=u)}this._invokeAll((function(t){t.writeNode&&t.writeNode(e,i)}));var p=t.nodes.push(i)-1;return r.set(e,p),p}},{key:"processScene",value:function(e){var t=this.json,n=this.options;t.scenes||(t.scenes=[],t.scene=0);var r={};""!==e.name&&(r.name=e.name),t.scenes.push(r);for(var i=[],a=0,o=e.children.length;a<o;a++){var s=e.children[a];if(s.visible||!1===n.onlyVisible){var l=this.processNode(s);null!==l&&i.push(l)}}i.length>0&&(r.nodes=i),this.serializeUserData(e,r)}},{key:"processObjects",value:function(e){var t=new Yg;t.name="AuxScene";for(var n=0;n<e.length;n++)t.children.push(e[n]);this.processScene(t)}},{key:"processInput",value:function(e){var t=this.options;e=e instanceof Array?e:[e],this._invokeAll((function(t){t.beforeParse&&t.beforeParse(e)}));for(var n=[],r=0;r<e.length;r++)e[r]instanceof Yg?this.processScene(e[r]):n.push(e[r]);n.length>0&&this.processObjects(n);for(var i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(var a=0;a<t.animations.length;++a)this.processAnimation(t.animations[a],e[0]);this._invokeAll((function(t){t.afterParse&&t.afterParse(e)}))}},{key:"_invokeAll",value:function(e){for(var t=0,n=this.plugins.length;t<n;t++)e(this.plugins[t])}}]),e}(),GV=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_lights_punctual"}return(0,c.Z)(e,[{key:"writeNode",value:function(e,t){if(e.isLight)if(e.isDirectionalLight||e.isPointLight||e.isSpotLight){var n=this.writer,r=n.json,i=n.extensionsUsed,a={};e.name&&(a.name=e.name),a.color=e.color.toArray(),a.intensity=e.intensity,e.isDirectionalLight?a.type="directional":e.isPointLight?(a.type="point",e.distance>0&&(a.range=e.distance)):e.isSpotLight&&(a.type="spot",e.distance>0&&(a.range=e.distance),a.spot={},a.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,a.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!e.target||e.target.parent===e&&0===e.target.position.x&&0===e.target.position.y&&-1===e.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),i[this.name]||(r.extensions=r.extensions||{},r.extensions[this.name]={lights:[]},i[this.name]=!0);var o=r.extensions[this.name].lights;o.push(a),t.extensions=t.extensions||{},t.extensions[this.name]={light:o.length-1}}else console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e)}}]),e}(),QV=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_unlit"}return(0,c.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshBasicMaterial){var n=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},n[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}}]),e}(),VV=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_clearcoat"}return(0,c.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!==e.clearcoat){var n=this.writer,r=n.extensionsUsed,i={};if(i.clearcoatFactor=e.clearcoat,e.clearcoatMap){var a={index:n.processTexture(e.clearcoatMap)};n.applyTextureTransform(a,e.clearcoatMap),i.clearcoatTexture=a}if(i.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){var o={index:n.processTexture(e.clearcoatRoughnessMap)};n.applyTextureTransform(o,e.clearcoatRoughnessMap),i.clearcoatRoughnessTexture=o}if(e.clearcoatNormalMap){var s={index:n.processTexture(e.clearcoatNormalMap)};n.applyTextureTransform(s,e.clearcoatNormalMap),i.clearcoatNormalTexture=s}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),jV=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_iridescence"}return(0,c.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!==e.iridescence){var n=this.writer,r=n.extensionsUsed,i={};if(i.iridescenceFactor=e.iridescence,e.iridescenceMap){var a={index:n.processTexture(e.iridescenceMap)};n.applyTextureTransform(a,e.iridescenceMap),i.iridescenceTexture=a}if(i.iridescenceIor=e.iridescenceIOR,i.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],i.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){var o={index:n.processTexture(e.iridescenceThicknessMap)};n.applyTextureTransform(o,e.iridescenceThicknessMap),i.iridescenceThicknessTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),WV=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_transmission"}return(0,c.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!==e.transmission){var n=this.writer,r=n.extensionsUsed,i={};if(i.transmissionFactor=e.transmission,e.transmissionMap){var a={index:n.processTexture(e.transmissionMap)};n.applyTextureTransform(a,e.transmissionMap),i.transmissionTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),qV=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_volume"}return(0,c.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!==e.transmission){var n=this.writer,r=n.extensionsUsed,i={};if(i.thicknessFactor=e.thickness,e.thicknessMap){var a={index:n.processTexture(e.thicknessMap)};n.applyTextureTransform(a,e.thicknessMap),i.thicknessTexture=a}i.attenuationDistance=e.attenuationDistance,i.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),JV=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_ior"}return(0,c.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&1.5!==e.ior){var n=this.writer.extensionsUsed,r={};r.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}}]),e}(),XV=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_specular"}return(0,c.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&(1!==e.specularIntensity||!e.specularColor.equals(OV)||e.specularIntensityMap||e.specularColorTexture)){var n=this.writer,r=n.extensionsUsed,i={};if(e.specularIntensityMap){var a={index:n.processTexture(e.specularIntensityMap)};n.applyTextureTransform(a,e.specularIntensityMap),i.specularTexture=a}if(e.specularColorMap){var o={index:n.processTexture(e.specularColorMap)};n.applyTextureTransform(o,e.specularColorMap),i.specularColorTexture=o}i.specularFactor=e.specularIntensity,i.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),YV=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_sheen"}return(0,c.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!=e.sheen){var n=this.writer,r=n.extensionsUsed,i={};if(e.sheenRoughnessMap){var a={index:n.processTexture(e.sheenRoughnessMap)};n.applyTextureTransform(a,e.sheenRoughnessMap),i.sheenRoughnessTexture=a}if(e.sheenColorMap){var o={index:n.processTexture(e.sheenColorMap)};n.applyTextureTransform(o,e.sheenColorMap),i.sheenColorTexture=o}i.sheenRoughnessFactor=e.sheenRoughness,i.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),KV=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_emissive_strength"}return(0,c.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshStandardMaterial&&1!==e.emissiveIntensity){var n=this.writer.extensionsUsed,r={};r.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}}]),e}();uV.Utils={insertKeyframe:function(e,t){var n,r=.001,i=e.getValueSize(),a=new e.TimeBufferType(e.times.length+1),o=new e.ValueBufferType(e.values.length+i),s=e.createInterpolant(new e.ValueBufferType(i));if(0===e.times.length){a[0]=t;for(var l=0;l<i;l++)o[l]=0;n=0}else if(t<e.times[0]){if(Math.abs(e.times[0]-t)<r)return 0;a[0]=t,a.set(e.times,1),o.set(s.evaluate(t),0),o.set(e.values,i),n=0}else if(t>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-t)<r)return e.times.length-1;a[a.length-1]=t,a.set(e.times,0),o.set(e.values,0),o.set(s.evaluate(t),e.values.length),n=a.length-1}else for(var u=0;u<e.times.length;u++){if(Math.abs(e.times[u]-t)<r)return u;if(e.times[u]<t&&e.times[u+1]>t){a.set(e.times.slice(0,u+1),0),a[u+1]=t,a.set(e.times.slice(u+1),u+2),o.set(e.values.slice(0,(u+1)*i),0),o.set(s.evaluate(t),(u+1)*i),o.set(e.values.slice((u+1)*i),(u+2)*i),n=u+1;break}}return e.times=a,e.values=o,n},mergeMorphTargetTracks:function(e,t){for(var n=[],r={},i=e.tracks,a=0;a<i.length;++a){var o=i[a],s=C_.parseTrackName(o.name),l=C_.findNode(t,s.nodeName);if("morphTargetInfluences"===s.propertyName&&void 0!==s.propertyIndex){if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),(o=o.clone()).setInterpolation(Kc)}var u=l.morphTargetInfluences.length,c=l.morphTargetDictionary[s.propertyIndex];if(void 0===c)throw new Error("THREE.GLTFExporter: Morph target name not found: "+s.propertyIndex);var h=void 0;if(void 0!==r[l.uuid]){var d=o.createInterpolant(new o.ValueBufferType(1));h=r[l.uuid];for(var f=0;f<h.times.length;f++)h.values[f*u+c]=d.evaluate(h.times[f]);for(var p=0;p<o.times.length;p++){var v=this.insertKeyframe(h,o.times[p]);h.values[v*u+c]=o.values[p]}}else{for(var m=new((h=o.clone()).ValueBufferType)(u*h.times.length),g=0;g<h.times.length;g++)m[g*u+c]=h.values[g];h.name=(s.nodeName||"")+".morphTargetInfluences",h.values=m,r[l.uuid]=h,n.push(h)}}else n.push(o)}return e.tracks=n,e}};var $V,ej,tj,nj=function(e){return void 0!==e.material&&e.userData&&e.userData.variantMaterials&&!!Array.from(e.userData.variantMaterials.values()).filter((function(e){return rj(e.material)}))},rj=function(e){return e&&e.isMaterial&&!Array.isArray(e)},ij=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_variants",this.variantNames=[]}return(0,c.Z)(e,[{key:"beforeParse",value:function(e){var t,n=this,r=new Set,i=(0,Ms.Z)(e);try{for(i.s();!(t=i.n()).done;){t.value.traverse((function(e){if(nj(e)){var t,n=e.userData.variantMaterials,i=e.userData.variantData,a=(0,Ms.Z)(i);try{for(a.s();!(t=a.n()).done;){var o=(0,s.Z)(t.value,2),l=o[0],u=o[1],c=n.get(u.index);c&&rj(c.material)&&r.add(l)}}catch(h){a.e(h)}finally{a.f()}}}))}}catch(a){i.e(a)}finally{i.f()}r.forEach((function(e){return n.variantNames.push(e)}))}},{key:"writeMesh",value:function(e,t){if(nj(e)){var n,r=e.userData,i=r.variantMaterials,a=r.variantData,o=new Map,l=new Map,u=Array.from(a.values()).sort((function(e,t){return e.index-t.index})),c=(0,Ms.Z)(u.entries());try{for(c.s();!(n=c.n()).done;){var h=(0,s.Z)(n.value,2),d=h[0],f=h[1];l.set(f.index,d)}}catch(E){c.e(E)}finally{c.f()}var p,v=(0,Ms.Z)(a.values());try{for(v.s();!(p=v.n()).done;){var m=p.value,g=i.get(m.index);if(g&&rj(g.material)){var y=this.writer.processMaterial(g.material);o.has(y)||o.set(y,{material:y,variants:[]}),o.get(y).variants.push(l.get(m.index))}}}catch(E){v.e(E)}finally{v.f()}var A=Array.from(o.values()).map((function(e){return e.variants.sort((function(e,t){return e-t}))&&e})).sort((function(e,t){return e.material-t.material}));if(0!==A.length){var x,b=rj(r.originalMaterial)?this.writer.processMaterial(r.originalMaterial):-1,_=(0,Ms.Z)(t.primitives);try{for(_.s();!(x=_.n()).done;){var w=x.value;b>=0&&(w.material=b),w.extensions=w.extensions||{},w.extensions[this.name]={mappings:A}}}catch(E){_.e(E)}finally{_.f()}}}}},{key:"afterParse",value:function(){if(0!==this.variantNames.length){var e=this.writer.json;e.extensions=e.extensions||{};var t=this.variantNames.map((function(e){return{name:e}}));e.extensions[this.name]={variants:t},this.writer.extensionsUsed[this.name]=!0}}}]),e}(),aj=function(){function e(t,n,r,i,a){var o=this;(0,u.Z)(this,e),this.xrLight=t,this.renderer=n,this.lightProbe=r,this.xrWebGLBinding=null,this.estimationStartCallback=a,this.frameCallback=this.onXRFrame.bind(this);var s=n.xr.getSession();if(i&&"XRWebGLBinding"in window){var l=new sv(16);t.environment=l.texture;var c=n.getContext();switch(s.preferredReflectionFormat){case"srgba8":c.getExtension("EXT_sRGB");break;case"rgba16f":c.getExtension("OES_texture_half_float")}this.xrWebGLBinding=new XRWebGLBinding(s,c),this.lightProbe.addEventListener("reflectionchange",(function(){o.updateReflection()}))}s.requestAnimationFrame(this.frameCallback)}return(0,c.Z)(e,[{key:"updateReflection",value:function(){var e=this.renderer.properties.get(this.xrLight.environment);if(e){var t=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);t&&(e.__webglTexture=t,this.xrLight.environment.needsPMREMUpdate=!0)}}},{key:"onXRFrame",value:function(e,t){if(this.xrLight){t.session.requestAnimationFrame(this.frameCallback);var n=t.getLightEstimate(this.lightProbe);if(n){this.xrLight.lightProbe.sh.fromArray(n.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;var r=Math.max(1,Math.max(n.primaryLightIntensity.x,Math.max(n.primaryLightIntensity.y,n.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(n.primaryLightIntensity.x/r,n.primaryLightIntensity.y/r,n.primaryLightIntensity.z/r),this.xrLight.directionalLight.intensity=r,this.xrLight.directionalLight.position.copy(n.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}}},{key:"dispose",value:function(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}]),e}(),oj=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,u.Z)(this,n),(r=t.call(this)).lightProbe=new zb,r.lightProbe.intensity=0,r.add(r.lightProbe),r.directionalLight=new Fb,r.directionalLight.intensity=0,r.add(r.directionalLight),r.environment=null;var a=null,o=!1;return e.xr.addEventListener("sessionstart",(function(){var t=e.xr.getSession();"requestLightProbe"in t&&t.requestLightProbe({reflectionFormat:t.preferredReflectionFormat}).then((function(t){a=new aj((0,Il.Z)(r),e,t,i,(function(){o=!0,r.dispatchEvent({type:"estimationstart"})}))}))})),e.xr.addEventListener("sessionend",(function(){a&&(a.dispose(),a=null),o&&r.dispatchEvent({type:"estimationend"})})),r.dispose=function(){a&&(a.dispose(),a=null),r.remove(r.lightProbe),r.lightProbe=null,r.remove(r.directionalLight),r.directionalLight=null,r.environment=null},r}return(0,c.Z)(n)}(Ug),sj=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;(0,u.Z)(this,e),this.velocity=0,this.naturalFrequency=0,this.setDecayTime(t)}return(0,c.Z)(e,[{key:"setDecayTime",value:function(e){this.naturalFrequency=1/Math.max(.001,e)}},{key:"update",value:function(e,t,n,r){var i=2e-4*this.naturalFrequency;if(null==e||0===r)return t;if(e===t&&0===this.velocity)return t;if(n<0)return e;var a=e-t,o=this.velocity+this.naturalFrequency*a,s=a+n*o,l=Math.exp(-this.naturalFrequency*n),u=(o-this.naturalFrequency*s)*l,c=-this.naturalFrequency*(u+o*l);return Math.abs(u)<i*Math.abs(r)&&c*a>=0?(this.velocity=0,t):(this.velocity=u,t+s*l)}}]),e}(),lj=.2,uj=Math.PI/24,cj=new sd,hj=function(e,t,n){for(var r=t>0?n>0?0:-Math.PI/2:n>0?Math.PI/2:Math.PI,i=0;i<=12;++i)e.push(t+.17*Math.cos(r),n+.17*Math.sin(r),0,t+lj*Math.cos(r),n+lj*Math.sin(r),0),r+=uj},dj=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){var i;(0,u.Z)(this,n);var a=new Ip,o=[],s=[],l=e.size,c=e.boundingBox,h=l.x/2,d=("back"===r?l.y:l.z)/2;hj(s,h,d),hj(s,-h,d),hj(s,-h,-d),hj(s,h,-d);for(var f=s.length/3,p=0;p<f-2;p+=2)o.push(p,p+1,p+3,p,p+3,p+2);var v=f-2;o.push(v,v+1,1,v,1,0),a.setAttribute("position",new bp(s,3)),a.setIndex(o),(i=t.call(this,a)).side=r;var m=i.material;switch(m.side=Ql,m.transparent=!0,m.opacity=0,i.goalOpacity=0,i.opacityDamper=new sj,i.hitPlane=new qp(new gv(2*(h+lj),2*(d+lj))),i.hitPlane.visible=!1,i.hitPlane.material.side=Ql,i.add(i.hitPlane),c.getCenter(i.position),r){case"bottom":i.rotateX(-Math.PI/2),i.shadowHeight=c.min.y,i.position.y=i.shadowHeight;break;case"back":i.shadowHeight=c.min.z,i.position.z=i.shadowHeight}return e.target.add((0,Il.Z)(i)),i.offsetHeight=0,i}return(0,c.Z)(n,[{key:"getHit",value:function(e,t,n){cj.set(t,-n),this.hitPlane.visible=!0;var r=e.positionAndNormalFromPoint(cj,this.hitPlane);return this.hitPlane.visible=!1,null==r?null:r.position}},{key:"getExpandedHit",value:function(e,t,n){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();var r=this.getHit(e,t,n);return this.hitPlane.scale.set(1,1,1),r}},{key:"offsetHeight",get:function(){return"back"===this.side?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight},set:function(e){e-=.001,"back"===this.side?this.position.z=this.shadowHeight+e:this.position.y=this.shadowHeight+e}},{key:"show",set:function(e){this.goalOpacity=e?.75:0}},{key:"updateOpacity",value:function(e){var t=this.material;t.opacity=this.opacityDamper.update(t.opacity,this.goalOpacity,e,1),this.visible=t.opacity>0}},{key:"dispose",value:function(){var e,t=this.hitPlane,n=t.geometry,r=t.material;n.dispose(),r.dispose(),this.geometry.dispose(),this.material.dispose(),null===(e=this.parent)||void 0===e||e.remove(this)}}]),n}(qp),fj=n(2963),pj=function(e,t){return{type:"number",number:e,unit:t}},vj=function(){var e={};return function(t){var n=t;if(n in e)return e[n];for(var r=[],i=0;t;){if(++i>1e3){t="";break}var a=mj(t),o=a.nodes[0];if(null==o||0===o.terms.length)break;r.push(o),t=a.remainingInput}return e[n]=r}}(),mj=function(){var e=/^(\-\-|[a-z\u0240-\uffff])/i,t=/^([\*\+\/]|[\-]\s)/i,n=/^[\),]/;return function(r){for(var i=[];r.length&&(r=r.trim(),!n.test(r));)if("("===r[0]){var a=xj(r),o=a.nodes;r=a.remainingInput,i.push({type:"function",name:{type:"ident",value:"calc"},arguments:o})}else if(e.test(r)){var s=gj(r),l=s.nodes[0];if("("===(r=s.remainingInput)[0]){var u=xj(r),c=u.nodes,h=u.remainingInput;i.push({type:"function",name:l,arguments:c}),r=h}else i.push(l)}else if(t.test(r))i.push({type:"operator",value:r[0]}),r=r.slice(1);else{var d="#"===r[0]?Aj(r):yj(r),f=d.nodes,p=d.remainingInput;if(0===f.length)break;i.push(f[0]),r=p}return{nodes:[{type:"expression",terms:i}],remainingInput:r}}}(),gj=function(){var e=/[^a-z0-9_\-\u0240-\uffff]/i;return function(t){var n=t.match(e);return{nodes:[{type:"ident",value:null==n?t:t.substr(0,n.index)}],remainingInput:null==n?"":t.substr(n.index)}}}(),yj=function(){var e=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,t=/^[a-z%]+/i,n=/^(m|mm|cm|rad|deg|[%])$/;return function(r){var i=r.match(e),a=null==i?"0":i[0],o=(r=null==a?r:r.slice(a.length)).match(t),s=null!=o&&""!==o[0]?o[0]:null,l=null==o?r:r.slice(s.length);return null==s||n.test(s)||(s=null),{nodes:[{type:"number",number:parseFloat(a)||0,unit:s}],remainingInput:l}}}(),Aj=function(){var e=/^[a-f0-9]*/i;return function(t){var n=(t=t.slice(1).trim()).match(e);return{nodes:null==n?[]:[{type:"hex",value:n[0]}],remainingInput:null==n?t:t.slice(n[0].length)}}}(),xj=function(e){var t=[];for(e=e.slice(1).trim();e.length;){var n=mj(e);if(t.push(n.nodes[0]),","===(e=n.remainingInput.trim())[0])e=e.slice(1).trim();else if(")"===e[0]){e=e.slice(1);break}}return{nodes:t,remainingInput:e}},bj=Symbol("visitedTypes"),_j=function(){function e(t){(0,u.Z)(this,e),this[bj]=t}return(0,c.Z)(e,[{key:"walk",value:function(e,t){for(var n=e.slice();n.length;){var r=n.shift();switch(this[bj].indexOf(r.type)>-1&&t(r),r.type){case"expression":n.unshift.apply(n,(0,O.Z)(r.terms));break;case"function":n.unshift.apply(n,[r.name].concat((0,O.Z)(r.arguments)))}}}}]),e}(),wj=Object.freeze({type:"number",number:0,unit:null}),Ej=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.number,r=e.unit;if(isFinite(n)){if("rad"===e.unit||null==e.unit)return e}else n=t,r="rad";return{type:"number",number:("deg"===r&&null!=n?n:0)*Math.PI/180,unit:"rad"}},Sj=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.number,i=e.unit;if(isFinite(r)){if("m"===e.unit)return e}else r=n,i="m";switch(i){default:t=1;break;case"cm":t=.01;break;case"mm":t=.001}return{type:"number",number:t*r,unit:"m"}},Mj=function(){var e=function(e){return e},t={rad:e,deg:Ej,m:e,mm:Sj,cm:Sj};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wj;isFinite(e.number)||(e.number=n.number,e.unit=n.unit);var r=e.unit;if(null==r)return e;var i=t[r];return null==i?n:i(e)}}(),Cj=Symbol("evaluate"),kj=Symbol("lastValue"),Tj=function(){function e(){(0,u.Z)(this,e),this[$V]=null}return(0,c.Z)(e,[{key:"isConstant",get:function(){return!1}},{key:"evaluate",value:function(){return this.isConstant&&null!=this[kj]||(this[kj]=this[Cj]()),this[kj]}}],[{key:"evaluatableFor",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wj;if(t instanceof e)return t;if("number"===t.type)return"%"===t.unit?new Oj(t,n):t;switch(t.name.value){case"calc":return new zj(t,n);case"env":return new Nj(t)}return wj}},{key:"evaluate",value:function(t){return t instanceof e?t.evaluate():t}},{key:"isConstant",value:function(t){return!(t instanceof e)||t.isConstant}},{key:"applyIntrinsics",value:function(e,t){var n=t.basis,r=t.keywords,i=r.auto;return n.map((function(t,n){var a=null==i[n]?t:i[n],o=e[n]?e[n]:a;if("ident"===o.type){var s=o.value;s in r&&(o=r[s][n])}return null!=o&&"ident"!==o.type||(o=a),"%"===o.unit?pj(o.number/100*t.number,t.unit):(o=Mj(o,t)).unit!==t.unit?t:o}))}}]),e}();$V=kj;var Ij,Bj,Rj,Lj,Pj=Symbol("percentage"),Dj=Symbol("basis"),Oj=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){var i;return(0,u.Z)(this,n),(i=t.call(this))[Pj]=e,i[Dj]=r,i}return(0,c.Z)(n,[{key:"isConstant",get:function(){return!0}},{key:Cj,value:function(){return pj(this[Pj].number/100*this[Dj].number,this[Dj].unit)}}]),n}(Tj),Fj=Symbol("identNode"),Nj=function(e,t){(0,Hn.Z)(r,e);var n=(0,Gn.Z)(r);function r(e){var t;(0,u.Z)(this,r),(t=n.call(this))[ej]=null;var i=e.arguments.length?e.arguments[0].terms[0]:null;return null!=i&&"ident"===i.type&&(t[Fj]=i),t}return(0,c.Z)(r,[{key:"isConstant",get:function(){return!1}},{key:t,value:function(){if(null!=this[Fj]&&"window-scroll-y"===this[Fj].value)return{type:"number",number:window.pageYOffset/(Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight)||0,unit:null};return wj}}]),r}(Tj,(ej=Fj,Cj)),Uj=/[\*\/]/,Zj=Symbol("evaluator"),zj=function(e,t){(0,Hn.Z)(r,e);var n=(0,Gn.Z)(r);function r(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wj;if((0,u.Z)(this,r),(t=n.call(this))[tj]=null,1!==e.arguments.length)return(0,fj.Z)(t);for(var a=e.arguments[0].terms.slice(),o=[];a.length;){var l=a.shift();if(o.length>0){var c=o[o.length-1];if("operator"===c.type&&Uj.test(c.value)){var h=o.pop(),d=o.pop();if(null==d)return(0,fj.Z)(t);o.push(new Vj(h,Tj.evaluatableFor(d,i),Tj.evaluatableFor(l,i)));continue}}o.push("operator"===l.type?l:Tj.evaluatableFor(l,i))}for(;o.length>2;){var f=o.splice(0,3),p=(0,s.Z)(f,3),v=p[0],m=p[1],g=p[2];if("operator"!==m.type)return(0,fj.Z)(t);o.unshift(new Vj(m,Tj.evaluatableFor(v,i),Tj.evaluatableFor(g,i)))}return 1===o.length&&(t[Zj]=o[0]),t}return(0,c.Z)(r,[{key:"isConstant",get:function(){return null==this[Zj]||Tj.isConstant(this[Zj])}},{key:t,value:function(){return null!=this[Zj]?Tj.evaluate(this[Zj]):wj}}]),r}(Tj,(tj=Zj,Cj)),Hj=Symbol("operator"),Gj=Symbol("left"),Qj=Symbol("right"),Vj=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){var a;return(0,u.Z)(this,n),(a=t.call(this))[Hj]=e,a[Gj]=r,a[Qj]=i,a}return(0,c.Z)(n,[{key:"isConstant",get:function(){return Tj.isConstant(this[Gj])&&Tj.isConstant(this[Qj])}},{key:Cj,value:function(){var e=Mj(Tj.evaluate(this[Gj])),t=Mj(Tj.evaluate(this[Qj])),n=e.number,r=e.unit,i=t.number,a=t.unit;if(null!=a&&null!=r&&a!=r)return wj;var o,s=r||a;switch(this[Hj].value){case"+":o=n+i;break;case"-":o=n-i;break;case"/":o=n/i;break;case"*":o=n*i;break;default:return wj}return{type:"number",number:o,unit:s}}}]),n}(Tj),jj=Symbol("evaluatables"),Wj=Symbol("intrinsics"),qj=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){var i;(0,u.Z)(this,n),(i=t.call(this))[Wj]=r;var a=e[0],o=null!=a?a.terms:[];return i[jj]=r.basis.map((function(e,t){var n=o[t];return null==n?{type:"ident",value:"auto"}:"ident"===n.type?n:Tj.evaluatableFor(n,e)})),i}return(0,c.Z)(n,[{key:"isConstant",get:function(){var e,t=(0,Ms.Z)(this[jj]);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(!Tj.isConstant(n))return!1}}catch(r){t.e(r)}finally{t.f()}return!0}},{key:Cj,value:function(){var e=this[jj].map((function(e){return Tj.evaluate(e)}));return Tj.applyIntrinsics(e,this[Wj]).map((function(e){return e.number}))}}]),n}(Tj),Jj=Symbol("instances"),Xj=Symbol("activateListener"),Yj=Symbol("deactivateListener"),Kj=Symbol("notifyInstances"),$j=Symbol("notify"),eW=Symbol("callback"),tW=function(e){function t(e){(0,u.Z)(this,t),this[eW]=e}return(0,c.Z)(t,[{key:"observe",value:function(){0===t[Jj].size&&t[Xj](),t[Jj].add(this)}},{key:"disconnect",value:function(){t[Jj].delete(this),0===t[Jj].size&&t[Yj]()}},{key:$j,value:function(){this[eW]()}}],[{key:Kj,value:function(){var e,n=(0,Ms.Z)(t[Jj]);try{for(n.s();!(e=n.n()).done;){e.value[$j]()}}catch(r){n.e(r)}finally{n.f()}}},{key:e,value:function(){window.addEventListener("scroll",this[Kj],{passive:!0})}},{key:Yj,value:function(){window.removeEventListener("scroll",this[Kj])}}]),t}((Ij=Jj,Xj));tW[Ij]=new Set;var nW=Symbol("computeStyleCallback"),rW=Symbol("astWalker"),iW=Symbol("dependencies"),aW=Symbol("onScroll"),oW=function(){function e(t){var n=this;(0,u.Z)(this,e),this[Bj]={},this[Rj]=new _j(["function"]),this[Lj]=function(){n[nW]({relatedState:"window-scroll"})},this[nW]=t}return(0,c.Z)(e,[{key:"observeEffectsFor",value:function(e){var t=this,n={},r=this[iW];for(var i in this[rW].walk(e,(function(e){var i=e.name,a=e.arguments[0].terms[0];if("env"===i.value&&null!=a&&"ident"===a.type&&"window-scroll-y"===a.value)if(null==n["window-scroll"]){var o="window-scroll"in r?r["window-scroll"]:new tW(t[aW]);o.observe(),delete r["window-scroll"],n["window-scroll"]=o}})),r){r[i].disconnect()}this[iW]=n}},{key:"dispose",value:function(){for(var e in this[iW]){this[iW][e].disconnect()}}}]),e}();Bj=iW,Rj=rW,Lj=aW;var sW=function(e){var t=e.observeEffects||!1,n=e.intrinsics instanceof Function?e.intrinsics:function(){return e.intrinsics};return function(r,i){var a,o=r.updated,s=r.connectedCallback,l=r.disconnectedCallback,u=Symbol("".concat(i,"StyleEffector")),c=Symbol("".concat(i,"StyleEvaluator")),h=Symbol("".concat(i,"UpdateEvaluator")),d=Symbol("".concat(i,"EvaluateAndSync"));Object.defineProperties(r,(a={},(0,L.Z)(a,u,{value:null,writable:!0}),(0,L.Z)(a,c,{value:null,writable:!0}),(0,L.Z)(a,h,{value:function(){var e=this,r=vj(this[i]);this[c]=new qj(r,n(this)),null==this[u]&&t&&(this[u]=new oW((function(){return e[d]()}))),null!=this[u]&&this[u].observeEffectsFor(r)}}),(0,L.Z)(a,d,{value:function(){if(null!=this[c]){var t=this[c].evaluate();this[e.updateHandler](t)}}}),(0,L.Z)(a,"updated",{value:function(e){e.has(i)&&(this[h](),this[d]()),o.call(this,e)}}),(0,L.Z)(a,"connectedCallback",{value:function(){s.call(this),this.requestUpdate(i,this[i])}}),(0,L.Z)(a,"disconnectedCallback",{value:function(){l.call(this),null!=this[u]&&(this[u].dispose(),this[u]=null)}}),a))}},lW=function(e){return e<.5?2*e*e:(4-2*e)*e-1},uW=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lW;return function(r){return e+(t-e)*n(r)}},cW=function(e){for(var t=[],n=[],r=e.initialValue,i=0;i<e.keyframes.length;++i){var a=e.keyframes[i],o=a.value,s=a.frames,l=a.ease||lW,u=uW(r,o,l);t.push(u),n.push(s),r=o}return function(e,t){var n,r=t.map((n=0,function(e){return n+=e}));return function(t){t=UG(t,0,1),t*=r[r.length-1];var n=r.findIndex((function(e){return e>=t})),i=n<1?0:r[n-1],a=r[n];return e[n]((t-i)/(a-i))}}(t,n)},hW=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},dW=cW({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),fW=cW({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),pW="0deg 75deg 105%",vW=["front","right","back","left"],mW=["upper-","","lower-"],gW="auto",yW="basic",AW="wiggle",xW="none",bW=function(){return{basis:[Ej(pj(30,"deg"))],keywords:{auto:[null]}}},_W=function(){return{basis:[Ej(pj(12,"deg"))],keywords:{auto:[null]}}},wW=function(){var e=vj(pW)[0].terms,t=Mj(e[0]),n=Mj(e[1]);return function(e){var r=e[TY].idealCameraDistance();return{basis:[t,n,pj(r,"m")],keywords:{auto:[null,null,pj(105,"%")]}}}}(),EW=function(e){var t=2.2*e[TY].boundingSphere.radius;return{basis:[pj(-1/0,"rad"),pj(Math.PI/8,"rad"),pj(t,"m")],keywords:{auto:[null,null,null]}}},SW=function(e){var t=wW(e),n=new qj([],t).evaluate()[2];return{basis:[pj(1/0,"rad"),pj(Math.PI-Math.PI/8,"rad"),pj(n,"m")],keywords:{auto:[null,null,null]}}},MW=function(e){var t=e[TY].boundingBox.getCenter(new Dd);return{basis:[pj(t.x,"m"),pj(t.y,"m"),pj(t.z,"m")],keywords:{auto:[null,null,null]}}},CW=Math.PI/2,kW=Math.PI/3,TW=CW/2,IW=2*Math.PI,BW=Symbol("controls"),RW=Symbol("panElement"),LW=Symbol("promptElement"),PW=Symbol("promptAnimatedContainer"),DW=Symbol("fingerAnimatedContainers"),OW=Symbol("deferInteractionPrompt"),FW=Symbol("updateAria"),NW=Symbol("updateCameraForRadius"),UW=Symbol("cancelPrompts"),ZW=Symbol("onChange"),zW=Symbol("onPointerChange"),HW=Symbol("waitingToPromptUser"),GW=Symbol("userHasInteracted"),QW=Symbol("promptElementVisibleTime"),VW=Symbol("lastPromptOffset"),jW=Symbol("cancellationSource"),WW=Symbol("lastSpherical"),qW=Symbol("jumpCamera"),JW=Symbol("initialized"),XW=Symbol("maintainThetaPhi"),YW=Symbol("syncCameraOrbit"),KW=Symbol("syncFieldOfView"),$W=Symbol("syncCameraTarget"),eq=Symbol("syncMinCameraOrbit"),tq=Symbol("syncMaxCameraOrbit"),nq=Symbol("syncMinFieldOfView"),rq=Symbol("syncMaxFieldOfView"),iq=new sd,aq=new Dd,oq=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:Math.PI/8,maximumPolarAngle:Math.PI-Math.PI/8,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),sq=Math.PI/8,lq=.04,uq={USER_INTERACTION:"user-interaction",NONE:"none",AUTOMATIC:"automatic"},cq=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){var a;return(0,u.Z)(this,n),(a=t.call(this)).camera=e,a.element=r,a.scene=i,a.orbitSensitivity=1,a.inputSensitivity=1,a.changeSource=uq.NONE,a._interactionEnabled=!1,a._disableZoom=!1,a.isUserPointing=!1,a.enablePan=!0,a.enableTap=!0,a.panProjection=new ld,a.panPerPixel=0,a.spherical=new Z_,a.goalSpherical=new Z_,a.thetaDamper=new sj,a.phiDamper=new sj,a.radiusDamper=new sj,a.logFov=Math.log(oq.maximumFieldOfView),a.goalLogFov=a.logFov,a.fovDamper=new sj,a.touchMode=null,a.pointers=[],a.startTime=0,a.startPointerPosition={clientX:0,clientY:0},a.lastSeparation=0,a.touchDecided=!1,a.onContext=function(e){if(a.enablePan)e.preventDefault();else{var t,n=(0,Ms.Z)(a.pointers);try{for(n.s();!(t=n.n()).done;){var r=t.value;a.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},a.startPointerPosition),{pointerId:r.id})))}}catch(i){n.e(i)}finally{n.f()}}},a.touchModeZoom=function(e,t){if(!a._disableZoom){var n=a.twoTouchDistance(a.pointers[0],a.pointers[1]),r=lq*(a.lastSeparation-n)*50/a.scene.height;a.lastSeparation=n,a.userAdjustOrbit(0,0,r)}a.panPerPixel>0&&a.movePan(e,t)},a.disableScroll=function(e){e.preventDefault()},a.touchModeRotate=function(e,t){var n=a._options.touchAction;if(!a.touchDecided&&"none"!==n){a.touchDecided=!0;var r=Math.abs(e),i=Math.abs(t);if(a.changeSource===uq.USER_INTERACTION&&("pan-y"===n&&i>r||"pan-x"===n&&r>i))return void(a.touchMode=null);a.element.addEventListener("touchmove",a.disableScroll,{passive:!1})}a.handleSinglePointerMove(e,t)},a.onPointerDown=function(e){if(!(a.pointers.length>2)){var t=(0,Il.Z)(a).element;0===a.pointers.length&&(t.addEventListener("pointermove",a.onPointerMove),t.addEventListener("pointerup",a.onPointerUp),a.touchMode=null,a.touchDecided=!1,a.startPointerPosition.clientX=e.clientX,a.startPointerPosition.clientY=e.clientY,a.startTime=performance.now());try{t.setPointerCapture(e.pointerId)}catch(EQ){}a.pointers.push({clientX:e.clientX,clientY:e.clientY,id:e.pointerId}),a.isUserPointing=!1,"touch"===e.pointerType?(a.changeSource=e.altKey?uq.AUTOMATIC:uq.USER_INTERACTION,a.onTouchChange(e)):(a.changeSource=uq.USER_INTERACTION,a.onMouseDown(e)),a.changeSource===uq.USER_INTERACTION&&a.dispatchEvent({type:"user-interaction"})}},a.onPointerMove=function(e){var t=a.pointers.find((function(t){return t.id===e.pointerId}));if(null!=t)if("mouse"!==e.pointerType||0!==e.buttons){var n=a.pointers.length,r=(e.clientX-t.clientX)/n,i=(e.clientY-t.clientY)/n;0===r&&0===i||(t.clientX=e.clientX,t.clientY=e.clientY,"touch"===e.pointerType?(a.changeSource=e.altKey?uq.AUTOMATIC:uq.USER_INTERACTION,null!==a.touchMode&&a.touchMode(r,i)):(a.changeSource=uq.USER_INTERACTION,a.panPerPixel>0?a.movePan(r,i):a.handleSinglePointerMove(r,i)))}else a.onPointerUp(e)},a.onPointerUp=function(e){var t=(0,Il.Z)(a).element,n=a.pointers.findIndex((function(t){return t.id===e.pointerId}));-1!==n&&a.pointers.splice(n,1),a.panPerPixel>0&&!e.altKey&&a.resetRadius(),0===a.pointers.length?(t.removeEventListener("pointermove",a.onPointerMove),t.removeEventListener("pointerup",a.onPointerUp),t.removeEventListener("touchmove",a.disableScroll),a.enablePan&&a.enableTap&&a.recenter(e)):null!==a.touchMode&&a.onTouchChange(e),a.scene.element[RW].style.opacity=0,t.style.cursor="grab",a.panPerPixel=0,a.isUserPointing&&a.dispatchEvent({type:"pointer-change-end"})},a.onWheel=function(e){a.changeSource=uq.USER_INTERACTION;var t=e.deltaY*(1==e.deltaMode?18:1)*lq/30;a.userAdjustOrbit(0,0,t),e.preventDefault(),a.dispatchEvent({type:"user-interaction"})},a.onKeyDown=function(e){var t=(0,Il.Z)(a).changeSource;a.changeSource=uq.USER_INTERACTION,(e.shiftKey&&a.enablePan?a.panKeyCodeHandler(e):a.orbitZoomKeyCodeHandler(e))?(e.preventDefault(),a.dispatchEvent({type:"user-interaction"})):a.changeSource=t},a._options=Object.assign({},oq),a.setOrbit(0,Math.PI/2,1),a.setFieldOfView(100),a.jumpToGoal(),a}return(0,c.Z)(n,[{key:"interactionEnabled",get:function(){return this._interactionEnabled}},{key:"enableInteraction",value:function(){if(!1===this._interactionEnabled){var e=this.element;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||e.addEventListener("wheel",this.onWheel),e.addEventListener("keydown",this.onKeyDown),e.addEventListener("touchmove",(function(){}),{passive:!1}),e.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}},{key:"disableInteraction",value:function(){if(!0===this._interactionEnabled){var e=this.element;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),e.removeEventListener("pointercancel",this.onPointerUp),e.removeEventListener("wheel",this.onWheel),e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("contextmenu",this.onContext),e.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}},{key:"options",get:function(){return this._options}},{key:"disableZoom",set:function(e){this._disableZoom!=e&&(this._disableZoom=e,!0===e?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}},{key:"getCameraSpherical",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Z_).copy(this.spherical)}},{key:"getFieldOfView",value:function(){return this.camera.fov}},{key:"applyOptions",value:function(e){Object.assign(this._options,e),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}},{key:"updateNearFar",value:function(e,t){this.camera.far=0===t?2:t,this.camera.near=Math.max(e,this.camera.far/1e3),this.camera.updateProjectionMatrix()}},{key:"updateAspect",value:function(e){this.camera.aspect=e,this.camera.updateProjectionMatrix()}},{key:"setOrbit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.goalSpherical.theta,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.goalSpherical.phi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.goalSpherical.radius,r=this._options,i=r.minimumAzimuthalAngle,a=r.maximumAzimuthalAngle,o=r.minimumPolarAngle,s=r.maximumPolarAngle,l=r.minimumRadius,u=r.maximumRadius,c=this.goalSpherical,h=c.theta,d=c.phi,f=c.radius,p=UG(e,i,a);isFinite(i)||isFinite(a)||(this.spherical.theta=this.wrapAngle(this.spherical.theta-p)+p);var v=UG(t,o,s),m=UG(n,l,u);return(p!==h||v!==d||m!==f)&&(!!(isFinite(p)&&isFinite(v)&&isFinite(m))&&(this.goalSpherical.theta=p,this.goalSpherical.phi=v,this.goalSpherical.radius=m,this.goalSpherical.makeSafe(),!0))}},{key:"setRadius",value:function(e){this.goalSpherical.radius=e,this.setOrbit()}},{key:"setFieldOfView",value:function(e){var t=this._options,n=t.minimumFieldOfView,r=t.maximumFieldOfView;e=UG(e,n,r),this.goalLogFov=Math.log(e)}},{key:"setDamperDecayTime",value:function(e){this.thetaDamper.setDecayTime(e),this.phiDamper.setDecayTime(e),this.radiusDamper.setDecayTime(e),this.fovDamper.setDecayTime(e)}},{key:"adjustOrbit",value:function(e,t,n){var r=this.goalSpherical,i=r.theta,a=r.phi,o=r.radius,s=this._options,l=s.minimumRadius,u=s.maximumRadius,c=s.minimumFieldOfView,h=s.maximumFieldOfView,d=this.spherical.theta-i,f=Math.PI-.001,p=i-UG(e,-f-d,f-d),v=a-t,m=0===n?0:((n>0?u:l)-o)/(Math.log(n>0?h:c)-this.goalLogFov),g=o+n*(isFinite(m)?m:2*(u-l));if(this.setOrbit(p,v,g),0!==n){var y=this.goalLogFov+n;this.setFieldOfView(Math.exp(y))}}},{key:"jumpToGoal",value:function(){this.update(0,1e4)}},{key:"update",value:function(e,t){if(this.isStationary())return!1;var n=this._options,r=n.maximumPolarAngle,i=n.maximumRadius,a=this.spherical.theta-this.goalSpherical.theta;return Math.abs(a)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=2*Math.sign(a)*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,t,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,t,r),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,t,i),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,t,1),this.moveCamera(),!0}},{key:"updateTouchActionStyle",value:function(){var e=this.element.style;if(this._interactionEnabled){var t=this._options.touchAction;this._disableZoom&&"none"!==t?e.touchAction="manipulation":e.touchAction=t}else e.touchAction=""}},{key:"isStationary",value:function(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}},{key:"moveCamera",value:function(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new _f(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix())}},{key:"userAdjustOrbit",value:function(e,t,n){this.adjustOrbit(e*this.orbitSensitivity*this.inputSensitivity,t*this.orbitSensitivity*this.inputSensitivity,n*this.inputSensitivity)}},{key:"wrapAngle",value:function(e){var t=(e+Math.PI)/(2*Math.PI);return 2*(t-Math.floor(t))*Math.PI-Math.PI}},{key:"pixelLengthToSphericalAngle",value:function(e){return 2*Math.PI*e/this.scene.height}},{key:"twoTouchDistance",value:function(e,t){var n=e.clientX,r=e.clientY,i=t.clientX-n,a=t.clientY-r;return Math.sqrt(i*i+a*a)}},{key:"handleSinglePointerMove",value:function(e,t){var n=this.pixelLengthToSphericalAngle(e),r=this.pixelLengthToSphericalAngle(t);!1===this.isUserPointing&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(n,r,0)}},{key:"initializePan",value:function(){var e=this.spherical,t=e.theta,n=e.phi,r=t-this.scene.yaw;this.panPerPixel=.018/this.scene.height,this.panProjection.set(-Math.cos(r),-Math.cos(n)*Math.sin(r),0,0,Math.sin(n),0,Math.sin(r),-Math.cos(n)*Math.cos(r),0)}},{key:"movePan",value:function(e,t){var n=this.scene,r=aq.set(e,t,0).multiplyScalar(this.inputSensitivity),i=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;r.multiplyScalar(i);var a=n.getTarget();a.add(r.applyMatrix3(this.panProjection)),n.boundingSphere.clampPoint(a,a),n.setTarget(a.x,a.y,a.z)}},{key:"recenter",value:function(e){if(!(performance.now()>this.startTime+300||Math.abs(e.clientX-this.startPointerPosition.clientX)>2||Math.abs(e.clientY-this.startPointerPosition.clientY)>2)){var t=this.scene,n=t.positionAndNormalFromPoint(t.getNDC(e.clientX,e.clientY));if(null==n){var r=t.element.cameraTarget;t.element.cameraTarget="",t.element.cameraTarget=r,this.userAdjustOrbit(0,0,1)}else t.target.worldToLocal(n.position),t.setTarget(n.position.x,n.position.y,n.position.z)}}},{key:"resetRadius",value:function(){var e=this.scene,t=e.positionAndNormalFromPoint(iq.set(0,0));if(null!=t){e.target.worldToLocal(t.position);var n=e.getTarget(),r=this.spherical,i=r.theta,a=r.phi,o=i-e.yaw,s=aq.set(Math.sin(a)*Math.sin(o),Math.cos(a),Math.sin(a)*Math.cos(o)),l=s.dot(t.position.sub(n));n.add(s.multiplyScalar(l)),e.setTarget(n.x,n.y,n.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-l)}}},{key:"onTouchChange",value:function(e){if(1===this.pointers.length)this.touchMode=this.touchModeRotate;else{if(this._disableZoom)return this.touchMode=null,void this.element.removeEventListener("touchmove",this.disableScroll);this.touchMode=this.touchDecided&&null===this.touchMode?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&null!=this.touchMode&&(this.initializePan(),e.altKey||(this.scene.element[RW].style.opacity=1))}}},{key:"onMouseDown",value:function(e){this.panPerPixel=0,this.enablePan&&(2===e.button||e.ctrlKey||e.metaKey||e.shiftKey)&&(this.initializePan(),this.scene.element[RW].style.opacity=1),this.element.style.cursor="grabbing"}},{key:"orbitZoomKeyCodeHandler",value:function(e){var t=!0;switch(e.key){case"PageUp":this.userAdjustOrbit(0,0,lq);break;case"PageDown":this.userAdjustOrbit(0,0,-.04);break;case"ArrowUp":this.userAdjustOrbit(0,-sq,0);break;case"ArrowDown":this.userAdjustOrbit(0,sq,0);break;case"ArrowLeft":this.userAdjustOrbit(-sq,0,0);break;case"ArrowRight":this.userAdjustOrbit(sq,0,0);break;default:t=!1}return t}},{key:"panKeyCodeHandler",value:function(e){this.initializePan();var t=!0;switch(e.key){case"ArrowUp":this.movePan(0,-10);break;case"ArrowDown":this.movePan(0,10);break;case"ArrowLeft":this.movePan(-10,0);break;case"ArrowRight":this.movePan(10,0);break;default:t=!1}return t}}]),n}(jh),hq="not-presenting",dq="session-started",fq="object-placed",pq="failed",vq="tracking",mq="not-tracking",gq=new Dd,yq=new df,Aq=new Dd,xq=new rv(45,1,.1,100),bq=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).renderer=e,r.currentSession=null,r.placeOnWall=!1,r.placementBox=null,r.lastTick=null,r.turntableRotation=null,r.oldShadowIntensity=null,r.frame=null,r.initialHitSource=null,r.transientHitTestSource=null,r.inputSource=null,r._presentedScene=null,r.resolveCleanup=null,r.exitWebXRButtonContainer=null,r.overlay=null,r.xrLight=null,r.tracking=!0,r.frames=0,r.initialized=!1,r.oldTarget=new Dd,r.placementComplete=!1,r.isTranslating=!1,r.isRotating=!1,r.isTwoFingering=!1,r.lastDragPosition=new Dd,r.firstRatio=0,r.lastAngle=0,r.goalPosition=new Dd,r.goalYaw=0,r.goalScale=1,r.xDamper=new sj,r.yDamper=new sj,r.zDamper=new sj,r.yawDamper=new sj,r.scaleDamper=new sj,r.onExitWebXRButtonContainerClick=function(){return r.stopPresenting()},r.onUpdateScene=function(){null!=r.placementBox&&r.isPresenting&&(r.placementBox.dispose(),r.placementBox=new dj(r.presentedScene,r.placeOnWall?"back":"bottom"))},r.onSelectStart=function(e){var t=r.transientHitTestSource;if(null!=t){var n=r.frame.getHitTestResultsForTransientInput(t),i=r.presentedScene,a=r.placementBox;if(1===n.length){r.inputSource=e.inputSource;var o=r.inputSource.gamepad.axes,s=a.getHit(r.presentedScene,o[0],o[1]);a.show=!0,null!=s?(r.isTranslating=!0,r.lastDragPosition.copy(s)):!1===r.placeOnWall&&(r.isRotating=!0,r.lastAngle=1.5*o[0])}else if(2===n.length){a.show=!0,r.isTwoFingering=!0;var l=r.fingerPolar(n).separation;r.firstRatio=l/i.scale.x}}},r.onSelectEnd=function(){r.isTranslating=!1,r.isRotating=!1,r.isTwoFingering=!1,r.inputSource=null,r.goalPosition.y+=r.placementBox.offsetHeight*r.presentedScene.scale.x,r.placementBox.show=!1},r.threeRenderer=e.threeRenderer,r.threeRenderer.xr.enabled=!0,r}return(0,c.Z)(n,[{key:"resolveARSession",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return OG(),e.next=3,navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});case 3:return t=e.sent,this.threeRenderer.xr.setReferenceSpaceType("local"),e.next=7,this.threeRenderer.xr.setSession(t);case 7:return this.threeRenderer.xr.cameraAutoUpdate=!1,e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"presentedScene",get:function(){return this._presentedScene}},{key:"supportsPresentation",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,OG(),e.next=4,navigator.xr.isSessionSupported("immersive-ar");case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),console.warn("Request to present in WebXR denied:"),console.warn(e.t0),console.warn("Falling back to next ar-mode"),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"present",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,u,c=this,h=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.length>1&&void 0!==h[1]&&h[1],this.isPresenting&&console.warn("Cannot present while a model is already presenting"),r=new Promise((function(e,t){requestAnimationFrame((function(){return e()}))})),t.setHotspotsVisibility(!1),t.queueRender(),e.next=7,r;case 7:return this._presentedScene=t,this.overlay=t.element.shadowRoot.querySelector("div.default"),!0===n&&(this.xrLight=new oj(this.threeRenderer),this.xrLight.addEventListener("estimationstart",(function(){if(c.isPresenting&&null!=c.xrLight){var e=c.presentedScene;e.add(c.xrLight),e.environment=c.xrLight.environment}}))),e.next=12,this.resolveARSession();case 12:return(i=e.sent).addEventListener("end",(function(){c.postSessionCleanup()}),{once:!0}),(o=t.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button")).classList.add("enabled"),o.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=o,e.next=20,i.requestReferenceSpace("viewer");case 20:s=e.sent,this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=t.yaw,this.goalYaw=t.yaw,this.goalScale=1,t.background=null,this.oldShadowIntensity=t.shadowIntensity,t.setShadowIntensity(.01),this.oldTarget.copy(t.getTarget()),t.element.addEventListener("load",this.onUpdateScene),l=20*Math.PI/180,u=!0===this.placeOnWall?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(l),z:-Math.cos(l)}),i.requestHitTestSource({space:s,offsetRay:u}).then((function(e){c.initialHitSource=e})),this.currentSession=i,this.placementBox=new dj(t,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:dq});case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopPresenting",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isPresenting){e.next=2;break}return e.abrupt("return");case 2:return t=new Promise((function(e){n.resolveCleanup=e})),e.prev=3,e.next=6,this.currentSession.end();case 6:return e.next=8,t;case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),console.warn("Error while trying to end WebXR AR session"),console.warn(e.t0),this.postSessionCleanup();case 15:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"isPresenting",get:function(){return null!=this.presentedScene}},{key:"target",get:function(){return this.oldTarget}},{key:"updateTarget",value:function(){var e=this.presentedScene;if(null!=e){var t=e.getTarget();this.oldTarget.copy(t),this.placeOnWall?t.z=e.boundingBox.min.z:t.y=e.boundingBox.min.y,e.setTarget(t.x,t.y,t.z)}}},{key:"postSessionCleanup",value:function(){var e=this.currentSession;null!=e&&(e.removeEventListener("selectstart",this.onSelectStart),e.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);var t=this.presentedScene;if(this._presentedScene=null,null!=t){var n=t.element;null!=this.xrLight&&(t.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),t.position.set(0,0,0),t.scale.set(1,1,1),t.setShadowOffset(0);var r=this.turntableRotation;null!=r&&(t.yaw=r);var i=this.oldShadowIntensity;null!=i&&t.setShadowIntensity(i),t.setEnvironmentAndSkybox(n[VG],n[jG]);var a=this.oldTarget;t.setTarget(a.x,a.y,a.z),t.xrCamera=null,t.element.removeEventListener("load",this.onUpdateScene),t.orientHotspots(0),n.requestUpdate("cameraTarget"),n.requestUpdate("maxCameraOrbit"),n[LY](n.getBoundingClientRect()),requestAnimationFrame((function(){t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:uq.NONE}}))}))}this.renderer.height=0;var o=this.exitWebXRButtonContainer;null!=o&&(o.classList.remove("enabled"),o.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);var s=this.transientHitTestSource;null!=s&&(s.cancel(),this.transientHitTestSource=null);var l=this.initialHitSource;null!=l&&(l.cancel(),this.initialHitSource=null),null!=this.placementBox&&(this.placementBox.dispose(),this.placementBox=null),this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,null!=this.resolveCleanup&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:hq})}},{key:"updateView",value:function(e){var t=this.presentedScene,n=this.threeRenderer.xr;n.updateCamera(xq),t.xrCamera=n.getCamera();var r=t.getCamera().matrixWorld.elements;if(t.orientHotspots(Math.atan2(r[1],r[5])),this.initialized||(this.placeInitially(),this.initialized=!0),e.requestViewportScale&&e.recommendedViewportScale){var i=e.recommendedViewportScale;e.requestViewportScale(Math.max(i,.25))}var a=n.getBaseLayer();if(null!=a){var o=a instanceof XRWebGLLayer?a.getViewport(e):n.getBinding().getViewSubImage(a,e).viewport;this.threeRenderer.setViewport(o.x,o.y,o.width,o.height)}}},{key:"placeInitially",value:function(){var e=this,t=this.presentedScene,n=t.position,r=t.element,i=t.getCamera(),a=this.overlay.getBoundingClientRect(),o=a.width,s=a.height;t.setSize(o,s),i.projectionMatrixInverse.copy(i.projectionMatrix).invert();var l=r.getCameraOrbit(),u=l.theta,c=l.radius,h=i.getWorldDirection(gq);t.yaw=Math.atan2(-h.x,-h.z)-u,this.goalYaw=t.yaw,n.copy(i.position).add(h.multiplyScalar(c)),this.updateTarget();var d=t.getTarget();n.add(d).sub(this.oldTarget),this.goalPosition.copy(n),t.setHotspotsVisibility(!0);var f=this.frame.session;f.addEventListener("selectstart",this.onSelectStart),f.addEventListener("selectend",this.onSelectEnd),f.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then((function(t){e.transientHitTestSource=t}))}},{key:"getTouchLocation",value:function(){var e=this.inputSource.gamepad.axes,t=this.placementBox.getExpandedHit(this.presentedScene,e[0],e[1]);return null!=t&&(gq.copy(t).sub(this.presentedScene.getCamera().position),gq.length()>10)?null:t}},{key:"getHitPoint",value:function(e){var t=this.threeRenderer.xr.getReferenceSpace(),n=e.getPose(t);if(null==n)return null;var r=yq.fromArray(n.transform.matrix);return!0===this.placeOnWall&&(this.goalYaw=Math.atan2(r.elements[4],r.elements[6])),r.elements[5]>.75!==this.placeOnWall?Aq.setFromMatrixPosition(r):null}},{key:"moveToFloor",value:function(e){var t=this.initialHitSource;if(null!=t){var n=e.getHitTestResults(t);if(0!=n.length){var r=n[0],i=this.getHitPoint(r);null!=i&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(i):this.goalPosition.y=i.y),t.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:fq}))}}}},{key:"fingerPolar",value:function(e){var t=e[0].inputSource.gamepad.axes,n=e[1].inputSource.gamepad.axes,r=n[0]-t[0],i=n[1]-t[1],a=Math.atan2(i,r),o=this.lastAngle-a;return o>Math.PI?o-=2*Math.PI:o<-Math.PI&&(o+=2*Math.PI),this.lastAngle=a,{separation:Math.sqrt(r*r+i*i),deltaYaw:o}}},{key:"processInput",value:function(e){var t=this,n=this.transientHitTestSource;if(null!=n&&(this.isTranslating||this.isTwoFingering||this.isRotating)){var r=e.getHitTestResultsForTransientInput(n),i=this.presentedScene,a=i.scale.x;if(this.isTwoFingering)if(r.length<2)this.isTwoFingering=!1;else{var o=this.fingerPolar(r),s=o.separation,l=o.deltaYaw;if(!1===this.placeOnWall&&(this.goalYaw+=l),i.canScale){var u=s/this.firstRatio;this.goalScale=u<1.3&&u>.7692307692307692?1:u}}else if(2!==r.length)if(this.isRotating){var c=1.5*this.inputSource.gamepad.axes[0];this.goalYaw+=c-this.lastAngle,this.lastAngle=c}else this.isTranslating&&r.forEach((function(e){if(e.inputSource===t.inputSource){var n=null;if(e.results.length>0&&(n=t.getHitPoint(e.results[0])),null==n&&(n=t.getTouchLocation()),null!=n){if(t.goalPosition.sub(t.lastDragPosition),!1===t.placeOnWall){var r=n.y-t.lastDragPosition.y;if(r<0){t.placementBox.offsetHeight=r/a,t.presentedScene.setShadowOffset(r);var o=gq.copy(i.getCamera().position),s=-r/(o.y-n.y);o.multiplyScalar(s),n.multiplyScalar(1-s).add(o)}}t.goalPosition.add(n),t.lastDragPosition.copy(n)}}}));else{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;var h=this.fingerPolar(r).separation;this.firstRatio=h/a}}}},{key:"moveScene",value:function(e){var t=this.presentedScene,n=t.position,r=t.yaw,i=t.boundingSphere.radius,a=this.goalPosition,o=t.scale.x,s=this.placementBox,l=uq.NONE;if(!a.equals(n)||this.goalScale!==o){l=uq.USER_INTERACTION;var u=n.x,c=n.y,h=n.z;u=this.xDamper.update(u,a.x,e,i),c=this.yDamper.update(c,a.y,e,i),h=this.zDamper.update(h,a.z,e,i),n.set(u,c,h);var d=this.scaleDamper.update(o,this.goalScale,e,1);if(t.scale.set(d,d,d),!this.isTranslating){var f=a.y-c;this.placementComplete&&!1===this.placeOnWall?(s.offsetHeight=f/d,t.setShadowOffset(f)):0===f&&(this.placementComplete=!0,s.show=!1,t.setShadowIntensity(.8))}}s.updateOpacity(e),t.updateTarget(e),t.yaw=this.yawDamper.update(r,this.goalYaw,e,Math.PI),t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:l}}))}},{key:"onWebXRFrame",value:function(e,t){this.frame=t,++this.frames;var n=this.threeRenderer.xr.getReferenceSpace(),r=t.getViewerPose(n);null==r&&!0===this.tracking&&this.frames>30&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:mq}));var i=this.presentedScene;if(null!=r&&null!=i&&i.element.loaded){!1===this.tracking&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:vq}));var a,o=!0,s=(0,Ms.Z)(r.views);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(this.updateView(l),o){this.moveToFloor(t),this.processInput(t);var u=e-this.lastTick;this.moveScene(u),this.renderer.preRender(i,e,u),this.lastTick=e,i.renderShadow(this.threeRenderer)}this.threeRenderer.render(i,i.getCamera()),o=!1}}catch(c){s.e(c)}finally{s.f()}}else this.threeRenderer.clear()}}]),n}(jh),_q=function(){function e(t){(0,u.Z)(this,e),t.threeRenderer.debug={checkShaderErrors:!0},Promise.resolve().then((function(){self.dispatchEvent(new CustomEvent("model-viewer-renderer-debug",{detail:{renderer:t,THREE:{ShaderMaterial:tv,Texture:Md,Mesh:qp,Scene:Yg,PlaneGeometry:gv,OrthographicCamera:kv,WebGLRenderTarget:kd}}}))}))}return(0,c.Z)(e,[{key:"addScene",value:function(e){self.dispatchEvent(new CustomEvent("model-viewer-scene-added-debug",{detail:{scene:e}}))}},{key:"removeScene",value:function(e){self.dispatchEvent(new CustomEvent("model-viewer-scene-removed-debug",{detail:{scene:e}}))}}]),e}();function wq(e){var t=new Map,n=new Map,r=e.clone();return Eq(e,r,(function(e,r){t.set(r,e),n.set(e,r)})),r.traverse((function(e){if(e.isSkinnedMesh){var r=e,i=t.get(e),a=i.skeleton.bones;r.skeleton=i.skeleton.clone(),r.bindMatrix.copy(i.bindMatrix),r.skeleton.bones=a.map((function(e){return n.get(e)})),r.bind(r.skeleton,r.bindMatrix)}})),r}function Eq(e,t,n){n(e,t);for(var r=0;r<e.children.length;r++)Eq(e.children[r],t.children[r],n)}var Sq=Symbol("prepared"),Mq=Symbol("prepare"),Cq=Symbol("preparedGLTF"),kq=Symbol("clone"),Tq=function(){function e(t){(0,u.Z)(this,e),this[Cq]=t}return(0,c.Z)(e,[{key:"parser",get:function(){return this[Cq].parser}},{key:"animations",get:function(){return this[Cq].animations}},{key:"scene",get:function(){return this[Cq].scene}},{key:"scenes",get:function(){return this[Cq].scenes}},{key:"cameras",get:function(){return this[Cq].cameras}},{key:"asset",get:function(){return this[Cq].asset}},{key:"userData",get:function(){return this[Cq].userData}},{key:"clone",value:function(){return new(0,this.constructor)(this[kq]())}},{key:"dispose",value:function(){this.scenes.forEach((function(e){e.traverse((function(e){var t=e;t.material&&((Array.isArray(t.material)?t.material:[t.material]).forEach((function(e){for(var t in e){var n=e[t];if(n instanceof Md){var r=n.source.data;null!=r.close&&r.close(),n.dispose()}}e.dispose()})),t.geometry.dispose())}))}))}},{key:kq,value:function(){var e=this[Cq],t=wq(this.scene);Iq(t,this.scene);var n=[t],r=e.userData?Object.assign({},e.userData):{};return Object.assign(Object.assign({},e),{scene:t,scenes:n,userData:r})}}],[{key:"prepare",value:function(e){if(null==e.scene)throw new Error("Model does not have a scene");if(e[Sq])return e;var t=this[Mq](e);return t[Sq]=!0,t}},{key:Mq,value:function(e){var t=e.scene,n=[t];return Object.assign(Object.assign({},e),{scene:t,scenes:n})}}]),e}(),Iq=function(e,t){Bq(e,t,(function(e,t){void 0!==t.userData.variantMaterials&&(e.userData.variantMaterials=new Map(t.userData.variantMaterials)),void 0!==t.userData.variantData&&(e.userData.variantData=t.userData.variantData),void 0!==t.userData.originalMaterial&&(e.userData.originalMaterial=t.userData.originalMaterial)}))},Bq=function e(t,n,r){r(t,n);for(var i=0;i<t.children.length;i++)e(t.children[i],n.children[i],r)},Rq=Symbol("threeGLTF"),Lq=Symbol("gltf"),Pq=Symbol("gltfElementMap"),Dq=Symbol("threeObjectMap"),Oq=Symbol("parallelTraverseThreeScene"),Fq=Symbol("correlateOriginalThreeGLTF"),Nq=Symbol("correlateCloneThreeGLTF"),Uq=function(){function e(t,n,r,i){(0,u.Z)(this,e),this[Rq]=t,this[Lq]=n,this[Pq]=i,this[Dq]=r}return(0,c.Z)(e,[{key:"threeGLTF",get:function(){return this[Rq]}},{key:"gltf",get:function(){return this[Lq]}},{key:"gltfElementMap",get:function(){return this[Pq]}},{key:"threeObjectMap",get:function(){return this[Dq]}}],[{key:"from",value:function(e,t){return null!=t?this[Nq](e,t):this[Fq](e)}},{key:Fq,value:function(t){var n,r=t.parser.json,i=t.parser.associations,a=new Map,o={name:"Default"},l={type:"materials",index:-1},u=(0,Ms.Z)(i.keys());try{for(u.s();!(n=u.n()).done;){var c=n.value;c instanceof Yf&&null==i.get(c)&&(l.index<0&&(null==r.materials&&(r.materials=[]),l.index=r.materials.length,r.materials.push(o)),c.name=o.name,i.set(c,{materials:l.index}))}}catch(b){u.e(b)}finally{u.f()}var h,d=(0,Ms.Z)(i);try{for(d.s();!(h=d.n()).done;){var f=(0,s.Z)(h.value,2),p=f[0],v=f[1];if(v){var m=p;m.userData=m.userData||{},m.userData.associations=v}for(var g in v)if(null!=g&&"primitives"!==g){var y=g,A=(r[y]||[])[v[y]];if(null==A)continue;var x=a.get(A);null==x&&(x=new Set,a.set(A,x)),x.add(p)}}}catch(b){d.e(b)}finally{d.f()}return new e(t,r,i,a)}},{key:Nq,value:function(t,n){for(var r=n.threeGLTF,i=n.gltf,a=JSON.parse(JSON.stringify(i)),o=new Map,s=new Map,l=0;l<r.scenes.length;l++)this[Oq](r.scenes[l],t.scenes[l],(function(e,t){var r=n.threeObjectMap.get(e);if(null!=r)for(var i in r)if(null!=i&&"primitives"!==i){var l=i,u=r[l],c=a[l][u],h=o.get(t)||{};h[l]=u,o.set(t,h);var d=s.get(c)||new Set;d.add(t),s.set(c,d)}}));return new e(t,a,o,s)}},{key:Oq,value:function(e,t,n){!function e(t,r){if(n(t,r),t.isObject3D){var i=t,a=r;if(i.material)if(Array.isArray(i.material))for(var o=0;o<i.material.length;++o)n(i.material[o],a.material[o]);else n(i.material,a.material);for(var s=0;s<t.children.length;++s)e(t.children[s],r.children[s])}}(e,t)}}]),e}(),Zq=Symbol("correlatedSceneGraph"),zq=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"correlatedSceneGraph",get:function(){return this[Cq][Zq]}},{key:kq,value:function(){var e=(0,Zn.Z)((0,zn.Z)(n.prototype),kq,this).call(this),t=new Map;return e.scene.traverse((function(e){var n=e;if(n.material){var r=n.material;if(null!=r){if(t.has(r.uuid))return void(n.material=t.get(r.uuid));n.material=r.clone(),t.set(r.uuid,n.material)}}})),e[Zq]=Uq.from(e,this.correlatedSceneGraph),e}}],[{key:Mq,value:function(e){var t=(0,Zn.Z)((0,zn.Z)(n),Mq,this).call(this,e);null==t[Zq]&&(t[Zq]=Uq.from(t));var r=t.scene,i=new nf(void 0,1/0);return r.traverse((function(e){e.renderOrder=1e3,e.frustumCulled=!1,e.name||(e.name=e.uuid);var n=e;if(n.material){var r=n.geometry;n.castShadow=!0,n.isSkinnedMesh&&(r.boundingSphere=i,r.boundingBox=null);var a=n.material;if(!0===a.isMeshBasicMaterial&&(a.toneMapped=!1),a.shadowSide=Hl,a.aoMap){var o=t[Zq],s=o.gltf,l=o.threeObjectMap.get(a);if(null!=s.materials&&null!=l&&null!=l.materials){var u=s.materials[l.materials];u.occlusionTexture&&0===u.occlusionTexture.texCoord&&null!=r.attributes.uv&&r.setAttribute("uv2",r.attributes.uv)}}}})),t}}]),n}(Tq),Hq=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;(0,u.Z)(this,n),(e=t.call(this)).position.y=-3.5;var r=new Xp;r.deleteAttribute("uv");var i=new Px({metalness:0,side:Gl}),a=new Px({metalness:0}),o=new Db(16777215,500,28,2);o.position.set(.418,16.199,.3),e.add(o);var s=new qp(r,i);s.position.set(-.757,13.219,.717),s.scale.set(31.713,28.305,28.591),e.add(s);var l=new qp(r,a);l.position.set(-10.906,2.009,1.846),l.rotation.set(0,-.195,0),l.scale.set(2.328,7.905,4.651),e.add(l);var c=new qp(r,a);c.position.set(-5.607,-.754,-.758),c.rotation.set(0,.994,0),c.scale.set(1.97,1.534,3.955),e.add(c);var h=new qp(r,a);h.position.set(6.167,.857,7.803),h.rotation.set(0,.561,0),h.scale.set(3.927,6.285,3.687),e.add(h);var d=new qp(r,a);d.position.set(-2.017,.018,6.124),d.rotation.set(0,.333,0),d.scale.set(2.002,4.566,2.064),e.add(d);var f=new qp(r,a);f.position.set(2.291,-.756,-2.621),f.rotation.set(0,-.286,0),f.scale.set(1.546,1.552,1.496),e.add(f);var p=new qp(r,a);p.position.set(-2.193,-.369,-5.547),p.rotation.set(0,.516,0),p.scale.set(3.875,3.487,2.986),e.add(p);var v=new qp(r,e.createAreaLightMaterial(50));v.position.set(-16.116,14.37,8.208),v.scale.set(.1,2.428,2.739),e.add(v);var m=new qp(r,e.createAreaLightMaterial(50));m.position.set(-16.109,18.021,-8.207),m.scale.set(.1,2.425,2.751),e.add(m);var g=new qp(r,e.createAreaLightMaterial(17));g.position.set(14.904,12.198,-1.832),g.scale.set(.15,4.265,6.331),e.add(g);var y=new qp(r,e.createAreaLightMaterial(43));y.position.set(-.462,8.89,14.52),y.scale.set(4.38,5.441,.088),e.add(y);var A=new qp(r,e.createAreaLightMaterial(20));A.position.set(3.235,11.486,-12.541),A.scale.set(2.5,2,.1),e.add(A);var x=new qp(r,e.createAreaLightMaterial(100));return x.position.set(0,20,0),x.scale.set(1,.1,1),e.add(x),e}return(0,c.Z)(n,[{key:"createAreaLightMaterial",value:function(e){var t=new ip;return t.color.setScalar(e),t}}]),n}(Yg),Gq=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;(0,u.Z)(this,n),(e=t.call(this)).position.y=-3.5;var r=new Xp;r.deleteAttribute("uv");var i=new Px({metalness:0,side:Gl}),a=new Px({metalness:0}),o=new Db(16777215,400,28,2);o.position.set(.5,14,.5),e.add(o);var s=new qp(r,i);s.position.set(0,13.2,0),s.scale.set(31.5,28.5,31.5),e.add(s);var l=new qp(r,a);l.position.set(-10.906,-1,1.846),l.rotation.set(0,-.195,0),l.scale.set(2.328,7.905,4.651),e.add(l);var c=new qp(r,a);c.position.set(-5.607,-.754,-.758),c.rotation.set(0,.994,0),c.scale.set(1.97,1.534,3.955),e.add(c);var h=new qp(r,a);h.position.set(6.167,-.16,7.803),h.rotation.set(0,.561,0),h.scale.set(3.927,6.285,3.687),e.add(h);var d=new qp(r,a);d.position.set(-2.017,.018,6.124),d.rotation.set(0,.333,0),d.scale.set(2.002,4.566,2.064),e.add(d);var f=new qp(r,a);f.position.set(2.291,-.756,-2.621),f.rotation.set(0,-.286,0),f.scale.set(1.546,1.552,1.496),e.add(f);var p=new qp(r,a);p.position.set(-2.193,-.369,-5.547),p.rotation.set(0,.516,0),p.scale.set(3.875,3.487,2.986),e.add(p);var v=new qp(r,e.createAreaLightMaterial(80));v.position.set(-14,10,8),v.scale.set(.1,2.5,2.5),e.add(v);var m=new qp(r,e.createAreaLightMaterial(80));m.position.set(-14,14,-4),m.scale.set(.1,2.5,2.5),e.add(m);var g=new qp(r,e.createAreaLightMaterial(23));g.position.set(14,12,0),g.scale.set(.1,5,5),e.add(g);var y=new qp(r,e.createAreaLightMaterial(16));y.position.set(0,9,14),y.scale.set(5,5,.1),e.add(y);var A=new qp(r,e.createAreaLightMaterial(80));A.position.set(7,8,-14),A.scale.set(2.5,2.5,.1),e.add(A);var x=new qp(r,e.createAreaLightMaterial(80));x.position.set(-7,16,-14),x.scale.set(2.5,2.5,.1),e.add(x);var b=new qp(r,e.createAreaLightMaterial(1));return b.position.set(0,20,0),b.scale.set(.1,.1,.1),e.add(b),e}return(0,c.Z)(n,[{key:"createAreaLightMaterial",value:function(e){var t=new ip;return t.color.setScalar(e),t}}]),n}(Yg),Qq=20,Vq=/\.hdr(\.js)?$/,jq=function(e){(0,Hn.Z)(r,e);var t=(0,Gn.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this)).threeRenderer=e,n.lottieLoaderUrl="",n.withCredentials=!1,n._ldrLoader=null,n._hdrLoader=null,n._lottieLoader=null,n.generatedEnvironmentMap=null,n.generatedEnvironmentMapAlt=null,n.skyboxCache=new Map,n.blurMaterial=null,n.blurScene=null,n}return(0,c.Z)(r,[{key:"ldrLoader",get:function(){return null==this._ldrLoader&&(this._ldrLoader=new _b),this._ldrLoader.setWithCredentials(this.withCredentials),this._ldrLoader}},{key:"hdrLoader",get:function(){return null==this._hdrLoader&&(this._hdrLoader=new jw,this._hdrLoader.setDataType(rc)),this._hdrLoader.setWithCredentials(this.withCredentials),this._hdrLoader}},{key:"getLottieLoader",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this._lottieLoader){e.next=6;break}return e.next=3,n(8696)(this.lottieLoaderUrl);case 3:t=e.sent,r=t.LottieLoader,this._lottieLoader=new r;case 6:return this._lottieLoader.setWithCredentials(this.withCredentials),e.abrupt("return",this._lottieLoader);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadImage",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){return r.ldrLoader.load(t,e,(function(){}),n)}));case 2:return(n=e.sent).name=t,n.flipY=!1,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadLottie",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLottieLoader();case 2:return(r=e.sent).setQuality(n),e.next=6,new Promise((function(e,n){return r.load(t,e,(function(){}),n)}));case 6:return(i=e.sent).name=t,e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadEquirect",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:function(){},e.prev=1,r=Vq.test(t),i=r?this.hdrLoader:this.ldrLoader,e.next=6,new Promise((function(e,r){return i.load(t,e,(function(e){n(e.loaded/e.total*.9)}),r)}));case 6:return o=e.sent,n(1),o.name=t,o.mapping=Pu,r||(o.encoding=uh),e.abrupt("return",o);case 12:return e.prev=12,n&&n(1),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[1,,12,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"generateEnvironmentMapAndSkybox",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,i,o,l,u,c,h,d,f=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:null,r=f.length>2&&void 0!==f[2]?f[2]:function(){},i="legacy"!==(n=f.length>1&&void 0!==f[1]?f[1]:null),"legacy"!==n&&"neutral"!==n||(n=null),n=DG(n),o=Promise.resolve(null),t&&(o=this.loadEquirectFromUrl(t,r)),l=n?this.loadEquirectFromUrl(n,r):t?this.loadEquirectFromUrl(t,r):i?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap(),e.next=11,Promise.all([l,o]);case 11:if(u=e.sent,c=(0,s.Z)(u,2),h=c[0],d=c[1],null!=h){e.next=17;break}throw new Error("Failed to load environment map.");case 17:return e.abrupt("return",{environmentMap:h,skybox:d});case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadEquirectFromUrl",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.skyboxCache.has(t)||(r=this.loadEquirect(t,n),this.skyboxCache.set(t,r)),e.abrupt("return",this.skyboxCache.get(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"GenerateEnvironmentMap",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,s,l,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,HG();case 2:return r=this.threeRenderer,i=new sv(256,{generateMipmaps:!1,type:rc,format:lc,encoding:lh,depthBuffer:!0}),o=new av(.1,100,i),(s=o.renderTarget.texture).name=n,l=r.outputEncoding,u=r.toneMapping,r.toneMapping=Su,r.outputEncoding=lh,o.update(r,t),this.blurCubemap(i,.04),r.toneMapping=u,r.outputEncoding=l,e.abrupt("return",s);case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadGeneratedEnvironmentMap",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.generatedEnvironmentMap&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new Hq,"legacy")),e.abrupt("return",this.generatedEnvironmentMap);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadGeneratedEnvironmentMapAlt",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.generatedEnvironmentMapAlt&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new Gq,"neutral")),e.abrupt("return",this.generatedEnvironmentMapAlt);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"blurCubemap",value:function(e,t){if(null==this.blurMaterial){this.blurMaterial=this.getBlurShader(Qq);var n=new Xp,r=new qp(n,this.blurMaterial);this.blurScene=new Yg,this.blurScene.add(r)}var i=e.clone();this.halfblur(e,i,t,"latitudinal"),this.halfblur(i,e,t,"longitudinal")}},{key:"halfblur",value:function(e,t,n,r){var i=e.width,a=isFinite(n)?Math.PI/(2*i):2*Math.PI/39,o=n/a,s=isFinite(n)?1+Math.floor(3*o):Qq;s>Qq&&console.warn("sigmaRadians, ".concat(n,", is too large and will clip, as it requested ").concat(s," samples when the maximum is set to ").concat(Qq));for(var l=[],u=0,c=0;c<Qq;++c){var h=c/o,d=Math.exp(-h*h/2);l.push(d),0==c?u+=d:c<s&&(u+=2*d)}for(var f=0;f<l.length;f++)l[f]=l[f]/u;var p=this.blurMaterial.uniforms;p.envMap.value=e.texture,p.samples.value=s,p.weights.value=l,p.latitudinal.value="latitudinal"===r,p.dTheta.value=a,new av(.1,100,t).update(this.threeRenderer,this.blurScene)}},{key:"getBlurShader",value:function(e){var t=new Float32Array(e),n=new Dd(0,1,0);return new tv({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:n}},vertexShader:"\n      \n      varying vec3 vOutputDirection;\n  \n      void main() {\n  \n        vOutputDirection = vec3( position );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  \n      }\n    ",fragmentShader:"\n        varying vec3 vOutputDirection;\n  \n        uniform samplerCube envMap;\n        uniform int samples;\n        uniform float weights[ n ];\n        uniform bool latitudinal;\n        uniform float dTheta;\n        uniform vec3 poleAxis;\n  \n        vec3 getSample( float theta, vec3 axis ) {\n  \n          float cosTheta = cos( theta );\n          // Rodrigues' axis-angle rotation\n          vec3 sampleDirection = vOutputDirection * cosTheta\n            + cross( axis, vOutputDirection ) * sin( theta )\n            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n  \n          return vec3( textureCube( envMap, sampleDirection ) );\n  \n        }\n  \n        void main() {\n  \n          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n  \n          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n  \n            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n  \n          }\n  \n          axis = normalize( axis );\n  \n          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n  \n          for ( int i = 1; i < n; i++ ) {\n  \n            if ( i >= samples ) {\n  \n              break;\n  \n            }\n  \n            float theta = dTheta * float( i );\n            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n  \n          }\n        }\n      ",blending:jl,depthTest:!1,depthWrite:!1,side:Gl})}},{key:"dispose",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,Ms.Z)(this.skyboxCache),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=11;break}return r=(0,s.Z)(n.value,2),i=r[1],e.next=7,i;case 7:e.sent.dispose();case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:if(null==this.generatedEnvironmentMap){e.next=24;break}return e.next=22,this.generatedEnvironmentMap;case 22:e.sent.dispose(),this.generatedEnvironmentMap=null;case 24:if(null==this.generatedEnvironmentMapAlt){e.next=29;break}return e.next=27,this.generatedEnvironmentMapAlt;case 27:e.sent.dispose(),this.generatedEnvironmentMapAlt=null;case 29:null!=this.blurMaterial&&this.blurMaterial.dispose();case 30:case"end":return e.stop()}}),e,this,[[1,13,16,19]])})));return function(){return e.apply(this,arguments)}}()}]),r}(jh),Wq=[1,.79,.62,.5,.4,.31,.25],qq="high-performance",Jq=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;(0,u.Z)(this,n),(r=t.call(this)).loader=new $Q(zq),r.width=0,r.height=0,r.dpr=1,r.debugger=null,r.scenes=new Set,r.multipleScenesVisible=!1,r.lastTick=performance.now(),r.renderedLastFrame=!1,r.scaleStep=0,r.lastStep=3,r.avgFrameDuration=50,r.onWebGLContextLost=function(e){r.dispatchEvent({type:"contextlost",sourceEvent:e})},r.onWebGLContextRestored=function(){var e;null===(e=r.textureUtils)||void 0===e||e.dispose(),r.textureUtils=new jq(r.threeRenderer);var t,n=(0,Ms.Z)(r.scenes);try{for(n.s();!(t=n.n()).done;){t.value.element[WG]()}}catch(i){n.e(i)}finally{n.f()}},r.dpr=ZG(),r.canvas3D=document.createElement("canvas"),r.canvas3D.id="webgl-canvas",r.canvas3D.classList.add("show");try{r.threeRenderer=new jg({canvas:r.canvas3D,alpha:!0,antialias:!0,powerPreference:e.powerPreference,preserveDrawingBuffer:!0}),r.threeRenderer.autoClear=!0,r.threeRenderer.outputEncoding=uh,r.threeRenderer.useLegacyLights=!1,r.threeRenderer.setPixelRatio(1),r.debugger=e.debug?new _q((0,Il.Z)(r)):null,r.threeRenderer.debug={checkShaderErrors:!!r.debugger},r.threeRenderer.toneMapping=Tu}catch(i){console.warn(i)}return r.arRenderer=new bq((0,Il.Z)(r)),r.textureUtils=r.canRender?new jq(r.threeRenderer):null,$Q.initializeKTX2Loader(r.threeRenderer),r.canvas3D.addEventListener("webglcontextlost",r.onWebGLContextLost),r.canvas3D.addEventListener("webglcontextrestored",r.onWebGLContextRestored),r.updateRendererSize(),r}return(0,c.Z)(n,[{key:"canRender",get:function(){return null!=this.threeRenderer}},{key:"scaleFactor",get:function(){return Wq[this.scaleStep]}},{key:"minScale",set:function(e){for(var t=1;t<Wq.length&&!(Wq[t]<e);)++t;this.lastStep=t-1}},{key:"registerScene",value:function(e){var t=this;this.scenes.add(e),e.forceRescale();var n=new sd;this.threeRenderer.getSize(n),e.canvas.width=n.x,e.canvas.height=n.y,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((function(e,n){return t.render(e,n)})),null!=this.debugger&&this.debugger.addScene(e)}},{key:"unregisterScene",value:function(e){this.scenes.delete(e),this.canvas3D.parentElement===e.canvas.parentElement&&e.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&0===this.scenes.size&&this.threeRenderer.setAnimationLoop(null),null!=this.debugger&&this.debugger.removeScene(e)}},{key:"displayCanvas",value:function(e){return this.multipleScenesVisible?e.element[kY]:this.canvas3D}},{key:"countVisibleScenes",value:function(){var e,t=this.canvas3D,n=0,r=null,i=(0,Ms.Z)(this.scenes);try{for(i.s();!(e=i.n()).done;){var a=e.value;a.element.modelIsVisible&&null==a.externalRenderer&&++n,t.parentElement===a.canvas.parentElement&&(r=a)}}catch(d){i.e(d)}finally{i.f()}var o=n>1;if(null!=r){var s=o&&!this.multipleScenesVisible,l=!r.element.modelIsVisible;if(s||l){var u=this.sceneSize(r),c=u.width,h=u.height;this.copyPixels(r,c,h),t.parentElement.removeChild(t)}}this.multipleScenesVisible=o}},{key:"updateRendererSize",value:function(){var e=ZG();if(e!==this.dpr){var t,n=(0,Ms.Z)(this.scenes);try{for(n.s();!(t=n.n()).done;){var r=t.value.element;r[vY](r.getBoundingClientRect())}}catch(f){n.e(f)}finally{n.f()}}var i,a=0,o=0,s=(0,Ms.Z)(this.scenes);try{for(s.s();!(i=s.n()).done;){var l=i.value;a=Math.max(a,l.width),o=Math.max(o,l.height)}}catch(f){s.e(f)}finally{s.f()}if(a!==this.width||o!==this.height||e!==this.dpr){this.width=a,this.height=o,this.dpr=e,a=Math.ceil(a*e),o=Math.ceil(o*e),this.canRender&&this.threeRenderer.setSize(a,o,!1);var u,c=(0,Ms.Z)(this.scenes);try{for(c.s();!(u=c.n()).done;){var h=u.value,d=h.canvas;d.width=a,d.height=o,h.forceRescale()}}catch(f){c.e(f)}finally{c.f()}}}},{key:"updateRendererScale",value:function(e){var t=this.scaleStep;this.avgFrameDuration+=UG(.2*(e-this.avgFrameDuration),-5,5),this.avgFrameDuration>60?++this.scaleStep:this.avgFrameDuration<40&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),t!==this.scaleStep&&(this.avgFrameDuration=50)}},{key:"shouldRender",value:function(e){if(e.shouldRender())e.scaleStep!=this.scaleStep&&(e.scaleStep=this.scaleStep,this.rescaleCanvas(e));else{if(0==e.scaleStep)return!1;e.scaleStep=0,this.rescaleCanvas(e)}return!0}},{key:"rescaleCanvas",value:function(e){var t=Wq[e.scaleStep],n=Math.ceil(this.width/t),r=Math.ceil(this.height/t),i=e.canvas.style;i.width="".concat(n,"px"),i.height="".concat(r,"px"),this.canvas3D.style.width="".concat(n,"px"),this.canvas3D.style.height="".concat(r,"px");var a=this.dpr*t,o=t<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";e.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:a,minimumDpr:this.dpr*Wq[this.lastStep],pixelWidth:Math.ceil(e.width*a),pixelHeight:Math.ceil(e.height*a),reason:o}}))}},{key:"sceneSize",value:function(e){var t=this.dpr,n=Wq[e.scaleStep];return{width:Math.min(Math.ceil(e.width*n*t),this.canvas3D.width),height:Math.min(Math.ceil(e.height*n*t),this.canvas3D.height)}}},{key:"copyPixels",value:function(e,t,n){var r=e.context;null!=r?(r.clearRect(0,0,t,n),r.drawImage(this.canvas3D,0,0,t,n,0,0,t,n),e.canvas.classList.add("show")):console.log("could not acquire 2d context")}},{key:"orderedScenes",value:function(){for(var e=[],t=0,n=[!1,!0];t<n.length;t++){var r,i=n[t],a=(0,Ms.Z)(this.scenes);try{for(a.s();!(r=a.n()).done;){var o=r.value;o.element.modelIsVisible===i&&e.push(o)}}catch(s){a.e(s)}finally{a.f()}}return e}},{key:"isPresenting",get:function(){return this.arRenderer.isPresenting}},{key:"preRender",value:function(e,t,n){var r=e.element,i=e.exposure;r[BY](t,n);var a="number"===typeof i&&!Number.isNaN(i);this.threeRenderer.toneMappingExposure=a?i:1}},{key:"render",value:function(e,t){if(null==t){var n=e-this.lastTick;if(this.lastTick=e,this.canRender&&!this.isPresenting){this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(n),this.renderedLastFrame=!1);var r,i=this.canvas3D,a=(0,Ms.Z)(this.orderedScenes());try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.element;if(!(!s.loaded||!s.modelIsVisible&&o.renderCount>0)&&(this.preRender(o,e,n),this.shouldRender(o)))if(null==o.externalRenderer){if(!s.modelIsVisible&&!this.multipleScenesVisible){var l,u=(0,Ms.Z)(this.scenes);try{for(u.s();!(l=u.n()).done;){var c=l.value;c.element.modelIsVisible&&c.queueRender()}}catch(A){u.e(A)}finally{u.f()}}var h=this.sceneSize(o),d=h.width,f=h.height;o.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-f,d,f),this.threeRenderer.render(o,o.camera),this.multipleScenesVisible||!o.element.modelIsVisible&&0===o.renderCount?this.copyPixels(o,d,f):i.parentElement!==o.canvas.parentElement&&(o.canvas.parentElement.appendChild(i),o.canvas.classList.remove("show")),o.hasRendered(),++o.renderCount,this.renderedLastFrame=!0}else{var p=o.getCamera();p.updateMatrix();var v=p.matrix,m=p.projectionMatrix,g=v.elements.slice(),y=o.getTarget();g[12]+=y.x,g[13]+=y.y,g[14]+=y.z,o.externalRenderer.render({viewMatrix:g,projectionMatrix:m.elements})}}}catch(A){a.e(A)}finally{a.f()}}}else this.arRenderer.onWebXRFrame(e,t)}},{key:"dispose",value:function(){null!=this.textureUtils&&this.textureUtils.dispose(),null!=this.threeRenderer&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;var e,t=[],n=(0,Ms.Z)(this.scenes);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.element)}}catch(i){n.e(i)}finally{n.f()}return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),t}}],[{key:"singleton",get:function(){return this._singleton}},{key:"resetSingleton",value:function(){var e,t=this._singleton.dispose(),r=(0,Ms.Z)(t);try{for(r.s();!(e=r.n()).done;){e.value.disconnectedCallback()}}catch(o){r.e(o)}finally{r.f()}this._singleton=new n({powerPreference:(self.ModelViewerElement||{}).powerPreference||qq,debug:zG()});var i,a=(0,Ms.Z)(t);try{for(a.s();!(i=a.n()).done;){i.value.connectedCallback()}}catch(o){a.e(o)}finally{a.f()}}}]),n}(jh);Jq._singleton=new Jq({powerPreference:(self.ModelViewerElement||{}).powerPreference||qq,debug:zG()});var Xq,Yq,Kq=Symbol("correlatedObjects"),$q=Symbol("sourceObject"),eJ=Symbol("onUpdate"),tJ=(0,c.Z)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,u.Z)(this,e),this[eJ]=t,this[$q]=n,this[Kq]=r})),nJ=new ip,rJ=new gv(2,2),iJ=0,aJ=Symbol("threeTexture"),oJ=(Symbol("applyTexture"),function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),i=null!==i&&void 0!==i?i:{name:r&&r.image&&r.image.src?r.image.src.split("/").pop():"adhoc_image",uri:r&&r.image&&r.image.src?r.image.src:"adhoc_image"+iJ++},t.call(this,e,i,new Set(r?[r]:[]))}return(0,c.Z)(n,[{key:aJ,get:function(){var e;return console.assert(null!=this[Kq]&&this[Kq].size>0,"Image correlated object is undefined"),null===(e=this[Kq])||void 0===e?void 0:e.values().next().value}},{key:"name",get:function(){return this[$q].name||""}},{key:"uri",get:function(){return this[$q].uri}},{key:"bufferView",get:function(){return this[$q].bufferView}},{key:"element",get:function(){var e=this[aJ];if(e&&(e.isCanvasTexture||e.isVideoTexture))return e.image}},{key:"animation",get:function(){var e=this[aJ];if(e&&e.isCanvasTexture&&e.animation)return e.animation}},{key:"type",get:function(){return null!=this.uri?"external":"embedded"}},{key:"name",set:function(e){this[$q].name=e}},{key:"update",value:function(){var e=this[aJ];e&&e.isCanvasTexture&&!e.animation&&(this[aJ].needsUpdate=!0,this[eJ]())}},{key:"createThumbnail",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,i,s,l,u,c,h,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Yg,nJ.map=this[aJ],i=new qp(rJ,nJ),r.add(i),s=new kv(-1,1,1,-1,0,1),l=Jq.singleton.threeRenderer,u=new kd(t,n),l.setRenderTarget(u),l.render(r,s),l.setRenderTarget(null),c=new Uint8Array(t*n*4),l.readRenderTargetPixels(u,0,0,t,n,c),aY.width=t,aY.height=n,h=aY.getContext("2d"),(d=h.createImageData(t,n)).data.set(c),h.putImageData(d,0,0),e.abrupt("return",new Promise(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:aY.toBlob((function(e){if(!e)return n("Failed to capture thumbnail.");t(URL.createObjectURL(e))}),"image/png");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(tJ));!function(e){e[e.Nearest=9728]="Nearest",e[e.Linear=9729]="Linear",e[e.NearestMipmapNearest=9984]="NearestMipmapNearest",e[e.LinearMipmapNearest=9985]="LinearMipmapNearest",e[e.NearestMipmapLinear=9986]="NearestMipmapLinear",e[e.LinearMipmapLinear=9987]="LinearMipmapLinear"}(Xq||(Xq={})),function(e){e[e.ClampToEdge=33071]="ClampToEdge",e[e.MirroredRepeat=33648]="MirroredRepeat",e[e.Repeat=10497]="Repeat"}(Yq||(Yq={}));var sJ,lJ,uJ,cJ,hJ=function(){var e=[Xq.Nearest,Xq.Linear,Xq.NearestMipmapNearest,Xq.LinearMipmapLinear,Xq.NearestMipmapLinear,Xq.LinearMipmapLinear];return function(t){return e.indexOf(t)>-1}}(),dJ=function(){var e=[Xq.Nearest,Xq.Linear];return function(t){return e.indexOf(t)>-1}}(),fJ=function(){var e=[Yq.ClampToEdge,Yq.MirroredRepeat,Yq.Repeat];return function(t){return e.indexOf(t)>-1}}(),pJ=Symbol("threeTextures"),vJ=Symbol("setProperty"),mJ=Symbol("sourceSampler"),gJ=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),null==(i=null!==i&&void 0!==i?i:{}).minFilter&&(i.minFilter=r?r.minFilter:Xq.LinearMipmapLinear),null==i.magFilter&&(i.magFilter=r?r.magFilter:Xq.Linear),null==i.wrapS&&(i.wrapS=r?r.wrapS:Yq.Repeat),null==i.wrapT&&(i.wrapT=r?r.wrapT:Yq.Repeat),t.call(this,e,i,new Set(r?[r]:[]))}return(0,c.Z)(n,[{key:pJ,get:function(){return console.assert(null!=this[Kq]&&this[Kq].size>0,"Sampler correlated object is undefined"),this[Kq]}},{key:mJ,get:function(){return console.assert(null!=this[$q],"Sampler source is undefined"),this[$q]}},{key:"name",get:function(){return this[$q].name||""}},{key:"minFilter",get:function(){return this[mJ].minFilter}},{key:"magFilter",get:function(){return this[mJ].magFilter}},{key:"wrapS",get:function(){return this[mJ].wrapS}},{key:"wrapT",get:function(){return this[mJ].wrapT}},{key:"setMinFilter",value:function(e){this[vJ]("minFilter",e)}},{key:"setMagFilter",value:function(e){this[vJ]("magFilter",e)}},{key:"setWrapS",value:function(e){this[vJ]("wrapS",e)}},{key:"setWrapT",value:function(e){this[vJ]("wrapT",e)}},{key:vJ,value:function(e,t){var n=this[mJ];if(null!=n){if(function(e,t){switch(e){case"minFilter":return hJ(t);case"magFilter":return dJ(t);case"wrapS":case"wrapT":return fJ(t);default:throw new Error('Cannot configure property "'.concat(e,'" on Sampler'))}}(e,t)){n[e]=t;var r,i=(0,Ms.Z)(this[pJ]);try{for(i.s();!(r=i.n()).done;){var a=r.value;a[e]=t,a.needsUpdate=!0}}catch(o){i.e(o)}finally{i.f()}}this[eJ]()}}}]),n}(tJ),yJ=Symbol("image"),AJ=Symbol("sampler"),xJ=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return(0,u.Z)(this,n),(i=t.call(this,e,a||{},new Set(r?[r]:[])))[AJ]=new gJ(e,r,o),i[yJ]=new oJ(e,r,s),i}return(0,c.Z)(n,[{key:"name",get:function(){return this[$q].name||""},set:function(e){this[$q].name=e}},{key:"sampler",get:function(){return this[AJ]}},{key:"source",get:function(){return this[yJ]}}]),n}(tJ),bJ=Symbol("texture"),_J=Symbol("transform"),wJ=Symbol("materials"),EJ=Symbol("usage"),SJ=Symbol("onUpdate"),MJ=Symbol("activeVideo");!function(e){e[e.Base=0]="Base",e[e.MetallicRoughness=1]="MetallicRoughness",e[e.Normal=2]="Normal",e[e.Occlusion=3]="Occlusion",e[e.Emissive=4]="Emissive"}(cJ||(cJ={}));var CJ=function(){function e(t,n,r,i,a,o){if((0,u.Z)(this,e),this[sJ]=null,this[lJ]={rotation:0,scale:new sd(1,1),offset:new sd(0,0)},this[uJ]=!1,o&&r){var s=a.textures?a.textures[o.index]:null,l=s&&a.samplers?a.samplers[s.sampler]:null,c=s&&a.images?a.images[s.source]:null;this[_J].rotation=r.rotation,this[_J].scale.copy(r.repeat),this[_J].offset.copy(r.offset),this[bJ]=new xJ(t,r,s,l,c)}this[SJ]=t,this[wJ]=i,this[EJ]=n}return(0,c.Z)(e,[{key:"texture",get:function(){return this[bJ]}},{key:"setTexture",value:function(e){var t,n,r=this,i=null!=e?e.source[aJ]:null,a=null===(t=this[bJ])||void 0===t?void 0:t.source[aJ];if(null!=a&&a.isVideoTexture?this[MJ]=!1:(null===(n=this[bJ])||void 0===n?void 0:n.source.animation)&&this[bJ].source.animation.removeEventListener("enterFrame",this[SJ]),this[bJ]=e,null!=i&&i.isVideoTexture){var o=i.image;if(this[MJ]=!0,null!=o.requestVideoFrameCallback){o.requestVideoFrameCallback((function e(){r[MJ]&&(r[SJ](),o.requestVideoFrameCallback(e))}))}else{requestAnimationFrame((function e(){r[MJ]&&(r[SJ](),requestAnimationFrame(e))}))}}else null!=(null===e||void 0===e?void 0:e.source.animation)&&e.source.animation.addEventListener("enterFrame",this[SJ]);var s=uh;if(this[wJ]){var l,u=(0,Ms.Z)(this[wJ]);try{for(u.s();!(l=u.n()).done;){var c=l.value;switch(this[EJ]){case cJ.Base:c.map=i;break;case cJ.MetallicRoughness:s=lh,c.metalnessMap=i,c.roughnessMap=i;break;case cJ.Normal:s=lh,c.normalMap=i;break;case cJ.Occlusion:s=lh,c.aoMap=i;break;case cJ.Emissive:c.emissiveMap=i}c.needsUpdate=!0}}catch(h){u.e(h)}finally{u.f()}}i&&(i.encoding=s,i.rotation=this[_J].rotation,i.repeat=this[_J].scale,i.offset=this[_J].offset),this[SJ]()}}]),e}();sJ=bJ,lJ=_J,uJ=MJ;var kJ,TJ,IJ,BJ,RJ,LJ,PJ,DJ,OJ,FJ,NJ,UJ,ZJ,zJ,HJ,GJ,QJ,VJ,jJ,WJ,qJ=Symbol("threeMaterials"),JJ=Symbol("baseColorTexture"),XJ=Symbol("metallicRoughnessTexture"),YJ=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a){var o;(0,u.Z)(this,n),o=t.call(this,e,i,a),null==i.baseColorFactor&&(i.baseColorFactor=[1,1,1,1]),null==i.roughnessFactor&&(i.roughnessFactor=1),null==i.metallicFactor&&(i.metallicFactor=1);var s=i.baseColorTexture,l=i.metallicRoughnessTexture,c=a.values().next().value,h=c.map,d=c.metalnessMap;return o[JJ]=new CJ(e,cJ.Base,h,a,r,s||null),o[XJ]=new CJ(e,cJ.MetallicRoughness,d,a,r,l||null),o}return(0,c.Z)(n,[{key:qJ,get:function(){return this[Kq]}},{key:"baseColorFactor",get:function(){return this[$q].baseColorFactor}},{key:"metallicFactor",get:function(){return this[$q].metallicFactor}},{key:"roughnessFactor",get:function(){return this[$q].roughnessFactor}},{key:"baseColorTexture",get:function(){return this[JJ]}},{key:"metallicRoughnessTexture",get:function(){return this[XJ]}},{key:"setBaseColorFactor",value:function(e){var t=new np;e instanceof Array?t.fromArray(e):t.set(e).convertSRGBToLinear();var n,r=(0,Ms.Z)(this[qJ]);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.color.set(t),e instanceof Array?i.opacity=e[3]:(e=[0,0,0,i.opacity],t.toArray(e))}}catch(a){r.e(a)}finally{r.f()}this[$q].baseColorFactor=e,this[eJ]()}},{key:"setMetallicFactor",value:function(e){var t,n=(0,Ms.Z)(this[qJ]);try{for(n.s();!(t=n.n()).done;){t.value.metalness=e}}catch(r){n.e(r)}finally{n.f()}this[$q].metallicFactor=e,this[eJ]()}},{key:"setRoughnessFactor",value:function(e){var t,n=(0,Ms.Z)(this[qJ]);try{for(n.s();!(t=n.n()).done;){t.value.roughness=e}}catch(r){n.e(r)}finally{n.f()}this[$q].roughnessFactor=e,this[eJ]()}}]),n}(tJ),KJ=Symbol("pbrMetallicRoughness"),$J=Symbol("normalTexture"),eX=Symbol("occlusionTexture"),tX=Symbol("emissiveTexture"),nX=Symbol("backingThreeMaterial"),rX=Symbol("applyAlphaCutoff"),iX=Symbol("lazyLoadGLTFInfo"),aX=Symbol("initialize"),oX=Symbol("getLoadedMaterial"),sX=Symbol("ensureMaterialIsLoaded"),lX=Symbol("gltfIndex"),uX=Symbol("setActive"),cX=Symbol("variantIndices"),hX=Symbol("isActive"),dX=Symbol("variantSet"),fX=Symbol("modelVariants"),pX=function(e,t){(0,Hn.Z)(r,e);var n=(0,Gn.Z)(r);function r(e,t,i,a,o,s,l){var c,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;return(0,u.Z)(this,r),(c=n.call(this,e,i,l))[kJ]=new Set,c[lX]=a,c[hX]=o,c[fX]=s,null==h?c[aX](t):c[iX]=h,c}return(0,c.Z)(r,[{key:t,get:function(){return this[Kq].values().next().value}},{key:aX,value:function(e){var t=this[eJ],n=this[$q],r=this[Kq];n.extensions&&n.extensions.KHR_materials_pbrSpecularGlossiness&&console.warn("Material ".concat(n.name,' uses a deprecated extension\n          "KHR_materials_pbrSpecularGlossiness", please use\n          "pbrMetallicRoughness" instead. Specular Glossiness materials are\n          no longer supported; to convert to metal-rough, see \n          https://www.donmccurdy.com/2022/11/28/converting-gltf-pbr-materials-from-specgloss-to-metalrough/.')),null==n.pbrMetallicRoughness&&(n.pbrMetallicRoughness={}),this[KJ]=new YJ(t,e,n.pbrMetallicRoughness,r),null==n.emissiveFactor&&(n.emissiveFactor=[0,0,0]),null==n.doubleSided&&(n.doubleSided=!1),null==n.alphaMode&&(n.alphaMode="OPAQUE"),null==n.alphaCutoff&&(n.alphaCutoff=.5);var i=n.normalTexture,a=n.occlusionTexture,o=n.emissiveTexture,s=r.values().next().value,l=s.normalMap,u=s.aoMap,c=s.emissiveMap;this[$J]=new CJ(t,cJ.Normal,l,r,e,i||null),this[eX]=new CJ(t,cJ.Occlusion,u,r,e,a||null),this[tX]=new CJ(t,cJ.Emissive,c,r,e,o||null)}},{key:oX,value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this[iX]){e.next=11;break}return e.next=3,this[iX].doLazyLoad();case 3:return t=e.sent,n=t.set,r=t.material,this[Kq]=n,this[aX](this[iX].gltf),this[iX]=void 0,this.ensureLoaded=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e.abrupt("return",r);case 11:return e.abrupt("return",this[Kq].values().next().value);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:sX,value:function(){if(null!=this[iX])throw new Error('Material "'.concat(this.name,"\" has not been loaded, call 'await\n    myMaterial.ensureLoaded()' before using an unloaded material."))}},{key:"ensureLoaded",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this[oX]();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isLoaded",get:function(){return null==this[iX]}},{key:"isActive",get:function(){return this[hX]}},{key:uX,value:function(e){this[hX]=e}},{key:"name",get:function(){return this[$q].name}},{key:"name",set:function(e){var t=this[$q];if(null!=t&&(t.name=e),null!=this[Kq]){var n,r=(0,Ms.Z)(this[Kq]);try{for(r.s();!(n=r.n()).done;){n.value.name=e}}catch(i){r.e(i)}finally{r.f()}}}},{key:"pbrMetallicRoughness",get:function(){return this[sX](),this[KJ]}},{key:"normalTexture",get:function(){return this[sX](),this[$J]}},{key:"occlusionTexture",get:function(){return this[sX](),this[eX]}},{key:"emissiveTexture",get:function(){return this[sX](),this[tX]}},{key:"emissiveFactor",get:function(){return this[sX](),this[$q].emissiveFactor}},{key:"index",get:function(){return this[lX]}},{key:cX,value:function(){return this[dX]}},{key:"hasVariant",value:function(e){var t=this[fX].get(e);return null!=t&&this[dX].has(t.index)}},{key:"setEmissiveFactor",value:function(e){this[sX]();var t=new np;e instanceof Array?t.fromArray(e):t.set(e).convertSRGBToLinear();var n,r=(0,Ms.Z)(this[Kq]);try{for(r.s();!(n=r.n()).done;){n.value.emissive.set(t)}}catch(i){r.e(i)}finally{r.f()}this[$q].emissiveFactor=t.toArray(),this[eJ]()}},{key:rX,value:function(){this[sX]();var e,t=this[$q],n=(0,Ms.Z)(this[Kq]);try{for(n.s();!(e=n.n()).done;){var r=e.value;"MASK"===this[$q].alphaMode?r.alphaTest=t.alphaCutoff:r.alphaTest=void 0,r.needsUpdate=!0}}catch(i){n.e(i)}finally{n.f()}}},{key:"setAlphaCutoff",value:function(e){this[sX](),this[$q].alphaCutoff=e,this[rX](),this[eJ]()}},{key:"getAlphaCutoff",value:function(){return this[sX](),this[$q].alphaCutoff}},{key:"setDoubleSided",value:function(e){this[sX]();var t,n=(0,Ms.Z)(this[Kq]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.side=e?Ql:Hl,r.needsUpdate=!0}}catch(i){n.e(i)}finally{n.f()}this[$q].doubleSided=e,this[eJ]()}},{key:"getDoubleSided",value:function(){return this[sX](),this[$q].doubleSided}},{key:"setAlphaMode",value:function(e){this[sX]();var t=function(e,t){e.transparent=t,e.depthWrite=!t};this[$q].alphaMode=e;var n,r=(0,Ms.Z)(this[Kq]);try{for(r.s();!(n=r.n()).done;){var i=n.value;t(i,"BLEND"===e),this[rX](),i.needsUpdate=!0}}catch(a){r.e(a)}finally{r.f()}this[eJ]()}},{key:"getAlphaMode",value:function(){return this[sX](),this[$q].alphaMode}}]),r}(tJ,(kJ=dX,nX)),vX=(0,c.Z)((function e(t){(0,u.Z)(this,e),this.name="",this.children=new Array,this.name=t})),mX=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i,a){var o;(0,u.Z)(this,n),(o=t.call(this,e.name)).materials=new Map,o.variantToMaterialMap=new Map,o.initialMaterialIdx=0,o.activeMaterialIdx=0,o.mesh=e;var s=a.gltf,l=a.threeGLTF,c=a.threeObjectMap;o.modelVariants=i,o.mesh.userData.variantData=i;var h=c.get(e.material);null!=h.materials?o.initialMaterialIdx=o.activeMaterialIdx=h.materials:console.error("Primitive (".concat(e.name,") missing initial material reference."));var d=e.userData.associations||{};if(null==d.meshes)return console.error("Mesh is missing primitive index association"),(0,fj.Z)(o);var f=((s.meshes||[])[d.meshes].primitives||[])[d.primitives];if(null==f)return console.error("Mesh primitive definition is missing."),(0,fj.Z)(o);if(null!=f.material)o.materials.set(f.material,r[f.material]);else{var p=r.findIndex((function(e){return"Default"===e.name}));p>=0?o.materials.set(p,r[p]):console.warn("gltfPrimitive has no material!")}if(f.extensions&&f.extensions.KHR_materials_variants){var v,m=f.extensions.KHR_materials_variants,g=l.parser.json.extensions.KHR_materials_variants.variants,y=(0,Ms.Z)(m.mappings);try{for(y.s();!(v=y.n()).done;){var A=v.value,x=r[A.material];o.materials.set(A.material,x);var b,_=(0,Ms.Z)(A.variants);try{for(_.s();!(b=_.n()).done;){var w=b.value,E=g[w].name;o.variantToMaterialMap.set(w,x),x[cX]().add(w),i.has(E)||i.set(E,{name:E,index:w})}}catch(S){_.e(S)}finally{_.f()}}}catch(S){y.e(S)}finally{y.f()}}return o}return(0,c.Z)(n,[{key:"setActiveMaterial",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(n=this.materials.get(t))){e.next=6;break}return e.next=4,n[oX]();case 4:this.mesh.material=e.sent,this.activeMaterialIdx=t;case 6:return e.abrupt("return",this.mesh.material);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getActiveMaterial",value:function(){return this.materials.get(this.activeMaterialIdx)}},{key:"getMaterial",value:function(e){return this.materials.get(e)}},{key:"enableVariant",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",this.setActiveMaterial(this.initialMaterialIdx));case 2:if(null==this.variantToMaterialMap||!this.modelVariants.has(t)){e.next=5;break}return n=this.modelVariants.get(t),e.abrupt("return",this.enableVariantHelper(n.index));case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"enableVariantHelper",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.variantToMaterialMap||null==t){e.next=4;break}if(null==(n=this.variantToMaterialMap.get(t))){e.next=4;break}return e.abrupt("return",this.setActiveMaterial(n.index));case 4:return e.abrupt("return",null);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"instantiateVariants",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.variantToMaterialMap){e.next=2;break}return e.abrupt("return");case 2:t=(0,Ms.Z)(this.variantToMaterialMap.keys()),e.prev=3,t.s();case 5:if((n=t.n()).done){e.next=16;break}if(r=n.value,null==(i=this.mesh.userData.variantMaterials.get(r)).material){e.next=10;break}return e.abrupt("continue",14);case 10:return e.next=12,this.enableVariantHelper(r);case 12:null!=(o=e.sent)&&(i.material=o);case 14:e.next=5;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),t.e(e.t0);case 21:return e.prev=21,t.f(),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[3,18,21,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"variantInfo",get:function(){return this.variantToMaterialMap}},{key:"addVariant",value:function(e,t){if(!this.ensureVariantIsUnused(t))return!1;this.modelVariants.has(t)||this.modelVariants.set(t,{name:t,index:this.modelVariants.size});var n=this.modelVariants.get(t).index;return e[cX]().add(n),this.variantToMaterialMap.set(n,e),this.materials.set(e.index,e),this.updateVariantUserData(n,e),!0}},{key:"deleteVariant",value:function(e){if(this.variantInfo.has(e)){this.variantInfo.delete(e);var t=this.mesh.userData.variantMaterials;null!=t&&t.delete(e)}}},{key:"updateVariantUserData",value:function(e,t){t[cX]().add(e),this.mesh.userData.variantData=this.modelVariants,this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(e,{material:t[Kq].values().next().value,gltfMaterialIndex:t.index})}},{key:"ensureVariantIsUnused",value:function(e){var t=this.modelVariants.get(e);return null==t||!this.variantInfo.has(t.index)||(console.warn("Primitive cannot add variant '".concat(e,"' for this material, it already exists.")),!1)}}]),n}(vX),gX=Symbol("materials"),yX=Symbol("hierarchy"),AX=Symbol("roots"),xX=Symbol("primitives"),bX=(Symbol("loadVariant"),Symbol("correlatedSceneGraph")),_X=Symbol("prepareVariantsForExport"),wX=Symbol("switchVariant"),EX=Symbol("materialFromPoint"),SX=Symbol("nodeFromPoint"),MX=Symbol("nodeFromIndex"),CX=Symbol("variantData"),kX=Symbol("availableVariants"),TX=Symbol("modelOnUpdate"),IX=Symbol("cloneMaterial"),BX=(0,c.Z)((function e(t,n,r,i){(0,u.Z)(this,e),this.gltf=t,this.gltfElementMap=n,this.mapKey=r,this.doLazyLoad=i})),RX=function(e){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};(0,u.Z)(this,t),this[TJ]=new Array,this[IJ]=new Array,this[BJ]=new Array,this[RJ]=new Array,this[LJ]=function(){},this[PJ]=new Map,this[TX]=r,this[bX]=e;var i,l=e.gltf,c=e.threeGLTF,h=e.gltfElementMap,d=(0,Ms.Z)(l.materials.entries());try{var f=function(){var e=(0,s.Z)(i.value,2),t=e[0],u=e[1],d=h.get(u);if(null!=d)n[gX].push(new pX(r,l,u,t,!0,n[CX],d));else{var f=(l.materials||[])[t],p=t,v=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.parser.getDependency("material",p);case 2:return t=e.sent,n=new Set,h.set(f,n),n.add(t),e.abrupt("return",{set:n,material:t});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n[gX].push(new pX(r,l,f,t,!1,n[CX],d,new BX(l,h,f,v)))}};for(d.s();!(i=d.n()).done;)f()}catch(S){d.e(S)}finally{d.f()}var p,v=new Map,m=new Array,g=(0,Ms.Z)(c.scene.children);try{for(g.s();!(p=g.n()).done;){var y=p.value;m.push(y)}}catch(S){g.e(S)}finally{g.f()}for(;m.length>0;){var A=m.pop(),x=null;A instanceof qp?(x=new mX(A,this.materials,this[CX],e),this[xX].push(x)):x=new vX(A.name);var b=v.get(A);null!=b?b.children.push(x):this[AX].push(x),this[yX].push(x);var _,w=(0,Ms.Z)(A.children);try{for(w.s();!(_=w.n()).done;){var E=_.value;m.push(E),v.set(A,x)}}catch(S){w.e(S)}finally{w.f()}}}return(0,c.Z)(t,[{key:"materials",get:function(){return this[gX]}},{key:e,value:function(){var e=Array.from(this[CX].values());return e.sort((function(e,t){return e.index-t.index})),e.map((function(e){return e.name}))}},{key:"getMaterialByName",value:function(e){var t=this[gX].filter((function(t){return t.name===e}));return t.length>0?t[0]:null}},{key:MX,value:function(e,t){var n=this[yX].find((function(n){if(n instanceof mX){var r=n.mesh.userData.associations,i=r.meshes,a=r.primitives;if(i==e&&a==t)return!0}return!1}));return null==n?null:n}},{key:SX,value:function(e){return this[yX].find((function(t){if(t instanceof mX&&t.mesh===e.object)return!0;return!1}))}},{key:EX,value:function(e){return this[SX](e).getActiveMaterial()}},{key:wX,value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,u,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,Ms.Z)(this[xX]),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i.enableVariant(t);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:o=(0,Ms.Z)(this.materials);try{for(o.s();!(s=o.n()).done;)s.value[uX](!1)}catch(a){o.e(a)}finally{o.f()}l=(0,Ms.Z)(this[xX]);try{for(l.s();!(u=l.n()).done;)c=u.value,this.materials[c.getActiveMaterial().index][uX](!0)}catch(a){l.e(a)}finally{l.f()}case 21:case"end":return e.stop()}}),e,this,[[1,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:_X,value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new Array,n=(0,Ms.Z)(this[xX]);try{for(n.s();!(r=n.n()).done;)i=r.value,t.push(i.instantiateVariants())}catch(a){n.e(a)}finally{n.f()}return e.next=5,Promise.all(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:IX,value:function(e,t){var n=this.materials[e];n.isLoaded||console.error("Cloning an unloaded material,\n           call 'material.ensureLoaded() before cloning the material.");var r=n[Kq],i=JSON.parse(JSON.stringify(n[$q]));i.name=t,this[bX].gltf.materials.push(i);var a,o=new Set,l=(0,Ms.Z)(r.entries());try{for(l.s();!(a=l.n()).done;){var u=(0,s.Z)(a.value,2),c=u[0],h=u[1].clone();h.name=t+(r.size>1?"_inst"+c:""),o.add(h)}}catch(f){l.e(f)}finally{l.f()}var d=new pX(this[TX],this[bX].gltf,i,this[gX].length,!1,this[CX],o);return this[gX].push(d),d}},{key:"createMaterialInstanceForVariant",value:function(e,t,n){var r,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=null,o=(0,Ms.Z)(this[xX]);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=this[CX].get(n);null!=l&&s.variantInfo.has(l.index)||null!=s.getMaterial(e)&&(this.hasVariant(n)||this.createVariant(n),null==a&&(a=this[IX](e,t)),s.addVariant(a,n))}}catch(h){o.e(h)}finally{o.f()}if(i&&null!=a){a[uX](!0),this.materials[e][uX](!1);var u,c=(0,Ms.Z)(this[xX]);try{for(c.s();!(u=c.n()).done;){u.value.enableVariant(n)}}catch(h){c.e(h)}finally{c.f()}}return a}},{key:"createVariant",value:function(e){this[CX].has(e)?console.warn("Variant '".concat(e,"'' already exists")):this[CX].set(e,{name:e,index:this[CX].size})}},{key:"hasVariant",value:function(e){return this[CX].has(e)}},{key:"setMaterialToVariant",value:function(e,t){if(null!=this[kX]().find((function(e){return e===t})))if(e<0||e>=this.materials.length)console.error("setMaterialToVariant(): materialIndex is out of bounds.");else{var n,r=(0,Ms.Z)(this[xX]);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=i.getMaterial(e);null!=a&&i.addVariant(a,t)}}catch(o){r.e(o)}finally{r.f()}}else console.warn("Can't add material to '".concat(t,"', the variant does not exist.'"))}},{key:"updateVariantName",value:function(e,t){var n=this[CX].get(e);null!=n&&(n.name=t,this[CX].set(t,n),this[CX].delete(e))}},{key:"deleteVariant",value:function(e){var t=this[CX].get(e);if(null!=t){var n,r=(0,Ms.Z)(this.materials);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.hasVariant(e)&&i[dX].delete(t.index)}}catch(s){r.e(s)}finally{r.f()}var a,o=(0,Ms.Z)(this[xX]);try{for(o.s();!(a=o.n()).done;){a.value.deleteVariant(t.index)}}catch(s){o.e(s)}finally{o.f()}this[CX].delete(e)}}}]),t}((TJ=gX,IJ=yX,BJ=AX,RJ=xX,LJ=TX,PJ=CX,kX)),LX=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},PX=Symbol("currentGLTF"),DX=Symbol("originalGltfJson"),OX=Symbol("model"),FX=Symbol("getOnUpdateMethod"),NX=Symbol("buildTexture"),UX=new Dd,ZX=new Dd,zX=new Dd,HX=new ld,GX=new Jf,QX=new Pd,VX=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,document.createElement("div"))).normal=new Dd(0,1,0),r.initialized=!1,r.referenceCount=1,r.pivot=document.createElement("div"),r.slot=document.createElement("slot"),r.element.classList.add("annotation-wrapper"),r.slot.name=e.name,r.element.appendChild(r.pivot),r.pivot.appendChild(r.slot),r.updatePosition(e.position),r.updateNormal(e.normal),r.surface=e.surface,r}return(0,c.Z)(n,[{key:"facingCamera",get:function(){return!this.element.classList.contains("hide")}},{key:"show",value:function(){this.facingCamera&&this.initialized||this.updateVisibility(!0)}},{key:"hide",value:function(){!this.facingCamera&&this.initialized||this.updateVisibility(!1)}},{key:"increment",value:function(){this.referenceCount++}},{key:"decrement",value:function(){return this.referenceCount>0&&--this.referenceCount,0===this.referenceCount}},{key:"updatePosition",value:function(e){if(null!=e){for(var t=vj(e)[0].terms,n=0;n<3;++n)this.position.setComponent(n,Mj(t[n]).number);this.updateMatrixWorld()}}},{key:"updateNormal",value:function(e){if(null!=e)for(var t=vj(e)[0].terms,n=0;n<3;++n)this.normal.setComponent(n,t[n].number)}},{key:"updateSurface",value:function(e){if(e||!this.initialized){var t=this.mesh,n=this.tri,r=this.bary;if(null!=t&&null!=n&&null!=r){t.getVertexPosition(n.x,UX),t.getVertexPosition(n.y,ZX),t.getVertexPosition(n.z,zX),UX.toArray(HX.elements,0),ZX.toArray(HX.elements,3),zX.toArray(HX.elements,6),this.position.copy(r).applyMatrix3(HX);var i=this.parent;i.worldToLocal(t.localToWorld(this.position)),GX.set(UX,ZX,zX),GX.getNormal(this.normal).transformDirection(t.matrixWorld);var a=i.parent;QX.setFromAxisAngle(UX.set(0,1,0),-a.yaw),this.normal.applyQuaternion(QX)}}}},{key:"orient",value:function(e){this.pivot.style.transform="rotate(".concat(e,"rad)")}},{key:"updateVisibility",value:function(e){e?this.element.classList.remove("hide"):this.element.classList.add("hide"),this.slot.assignedNodes().forEach((function(t){if(t.nodeType===Node.ELEMENT_NODE){var n=t,r=n.dataset.visibilityAttribute;if(null!=r){var i="data-".concat(r);e?n.setAttribute(i,""):n.removeAttribute(i)}n.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:e}}))}})),this.initialized=!0}}]),n}(eV),jX={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float h;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 sum = vec4( 0.0 );\n\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}"},WX={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float v;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 sum = vec4( 0.0 );\n\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}"},qX=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e,r,i){var a;(0,u.Z)(this,n),(a=t.call(this)).camera=new kv,a.renderTarget=null,a.renderTargetBlur=null,a.depthMaterial=new Rg,a.horizontalBlurMaterial=new tv(jX),a.verticalBlurMaterial=new tv(WX),a.intensity=0,a.softness=1,a.boundingBox=new Nd,a.size=new Dd,a.maxDimension=0,a.isAnimated=!1,a.needsUpdate=!1;var o=(0,Il.Z)(a).camera;o.rotation.x=Math.PI/2,o.left=-.5,o.right=.5,o.bottom=-.5,o.top=.5,a.add(o);var s=new gv,l=new ip({opacity:1,transparent:!0,side:Gl});return a.floor=new qp(s,l),a.floor.userData.shadow=!0,o.add(a.floor),a.blurPlane=new qp(s),a.blurPlane.visible=!1,o.add(a.blurPlane),e.target.add((0,Il.Z)(a)),a.depthMaterial.onBeforeCompile=function(e){e.fragmentShader=e.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},a.horizontalBlurMaterial.depthTest=!1,a.verticalBlurMaterial.depthTest=!1,a.setScene(e,r,i),a}return(0,c.Z)(n,[{key:"setScene",value:function(e,t,n){var r=this.boundingBox,i=this.size,a=this.rotation,o=this.position;if(this.isAnimated=e.animationNames.length>0,this.boundingBox.copy(e.boundingBox),this.size.copy(e.size),this.maxDimension=Math.max(i.x,i.y,i.z)*(this.isAnimated?2:1),this.boundingBox.getCenter(o),"back"===n){var s=r.min,l=r.max,u=[s.z,s.y];s.y=u[0],s.z=u[1];var c=[l.z,l.y];l.y=c[0],l.z=c[1];var h=[i.z,i.y];i.y=h[0],i.z=h[1],a.x=Math.PI/2,a.y=Math.PI}else a.x=0,a.y=0;if(this.isAnimated){var d=r.min.y,f=r.max.y;i.y=this.maxDimension,r.expandByVector(i.subScalar(this.maxDimension).multiplyScalar(-.5)),r.min.y=d,r.max.y=f,i.set(this.maxDimension,f-d,this.maxDimension)}"bottom"===n?o.y=r.min.y:o.z=r.min.y,this.setSoftness(t)}},{key:"setSoftness",value:function(e){this.softness=e;var t=this.size,n=this.camera,r=this.isAnimated?2:1,i=r*Math.pow(2,9-3*e);this.setMapSize(i);var a=t.y/2,o=t.y*r;n.near=0,n.far=Vw(o,a,e),this.depthMaterial.opacity=1/e,n.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}},{key:"setMapSize",value:function(e){var t=this.size;this.isAnimated&&(e*=2);var n=Math.floor(t.x>t.z?e:e*t.x/t.z),r=Math.floor(t.x>t.z?e*t.z/t.x:e),i=10+n,a=10+r;if(null==this.renderTarget||this.renderTarget.width===i&&this.renderTarget.height===a||(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),null==this.renderTarget){var o={format:lc};this.renderTarget=new kd(i,a,o),this.renderTargetBlur=new kd(i,a,o),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(t.x*(1+10/n),t.z*(1+10/r),1),this.needsUpdate=!0}},{key:"setIntensity",value:function(e){this.intensity=e,e>0?(this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=e*Vw(.3,1,this.softness*this.softness)):(this.visible=!1,this.floor.visible=!1)}},{key:"getIntensity",value:function(){return this.intensity}},{key:"setOffset",value:function(e){this.floor.position.z=-e+.001*this.maxDimension}},{key:"render",value:function(e,t){t.overrideMaterial=this.depthMaterial;var n=e.getClearAlpha();e.setClearAlpha(0),this.floor.visible=!1;var r=e.xr.enabled;e.xr.enabled=!1;var i=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.render(t,this.camera),t.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(e),e.xr.enabled=r,e.setRenderTarget(i),e.setClearAlpha(n)}},{key:"blurShadow",value:function(e){var t=this.camera,n=this.horizontalBlurMaterial,r=this.verticalBlurMaterial,i=this.renderTarget,a=this.renderTargetBlur,o=this.blurPlane;o.visible=!0,o.material=n,n.uniforms.h.value=1/this.renderTarget.width,n.uniforms.tDiffuse.value=this.renderTarget.texture,e.setRenderTarget(a),e.render(o,t),o.material=r,r.uniforms.v.value=1/this.renderTarget.height,r.uniforms.tDiffuse.value=this.renderTargetBlur.texture,e.setRenderTarget(i),e.render(o,t),o.visible=!1}},{key:"dispose",value:function(){null!=this.renderTarget&&this.renderTarget.dispose(),null!=this.renderTargetBlur&&this.renderTargetBlur.dispose(),this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}]),n}(Ff),JX=new Dd,XX=new Dd,YX=new Dd,KX=new F_,$X=new Dd,eY=new sd,tY=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(e){var r,i=e.canvas,a=e.element,o=e.width,s=e.height;(0,u.Z)(this,n),(r=t.call(this)).annotationRenderer=new oV,r.schemaElement=document.createElement("script"),r.width=1,r.height=1,r.aspect=1,r.scaleStep=0,r.renderCount=0,r.externalRenderer=null,r.camera=new rv(45,1,.1,100),r.xrCamera=null,r.url=null,r.target=new Ff,r.animationNames=[],r.boundingBox=new Nd,r.boundingSphere=new nf,r.size=new Dd,r.idealAspect=0,r.framedFoVDeg=0,r.shadow=null,r.shadowIntensity=0,r.shadowSoftness=1,r.bakedShadows=new Set,r.exposure=1,r.canScale=!0,r.isDirty=!1,r.goalTarget=new Dd,r.targetDamperX=new sj,r.targetDamperY=new sj,r.targetDamperZ=new sj,r._currentGLTF=null,r._model=null,r.cancelPendingSourceChange=null,r.animationsByName=new Map,r.currentAnimationAction=null,r.name="ModelScene",r.element=a,r.canvas=i,r.camera=new rv(45,1,.1,100),r.camera.name="MainCamera",r.add(r.target),r.setSize(o,s),r.target.name="Target",r.mixer=new B_(r.target);var l=r.annotationRenderer.domElement,c=l.style;return c.display="none",c.pointerEvents="none",c.position="absolute",c.top="0",r.element.shadowRoot.querySelector(".default").appendChild(l),r.schemaElement.setAttribute("type","application/ld+json"),r}return(0,c.Z)(n,[{key:"context",get:function(){return this.canvas.getContext("2d")}},{key:"getCamera",value:function(){return null!=this.xrCamera?this.xrCamera:this.camera}},{key:"queueRender",value:function(){this.isDirty=!0}},{key:"shouldRender",value:function(){return this.isDirty}},{key:"hasRendered",value:function(){this.isDirty=!1}},{key:"forceRescale",value:function(){this.scaleStep=-1,this.queueRender()}},{key:"setObject",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.reset(),this._model=t,this.target.add(t),e.next=5,this.setupScene();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setSource",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,s,l,u,c,h,d,f=this,p=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>1&&void 0!==p[1]?p[1]:function(){},t&&t!==this.url){e.next=4;break}return n(1),e.abrupt("return");case 4:if(this.reset(),this.url=t,null==this.externalRenderer){e.next=13;break}return e.next=9,this.externalRenderer.load(n);case 9:return r=e.sent,this.boundingSphere.radius=r.framedRadius,this.idealAspect=r.fieldOfViewAspect,e.abrupt("return");case 13:return null!=this.cancelPendingSourceChange&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null),e.prev=14,e.next=17,new Promise(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(r,i){var o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.cancelPendingSourceChange=function(){return i()},e.prev=1,e.next=4,f.element[PY].loader.load(t,f.element,n);case 4:o=e.sent,r(o),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}());case 17:i=e.sent,e.next=25;break;case 20:if(e.prev=20,e.t0=e.catch(14),null!=e.t0){e.next=24;break}return e.abrupt("return");case 24:throw e.t0;case 25:this.cancelPendingSourceChange=null,this.reset(),this.url=t,this._currentGLTF=i,null!=i&&(this._model=i.scene,this.target.add(i.scene)),s=i.animations,l=new Map,u=[],c=(0,Ms.Z)(s);try{for(c.s();!(h=c.n()).done;)d=h.value,l.set(d.name,d),u.push(d.name)}catch(v){c.e(v)}finally{c.f()}return this.animations=s,this.animationsByName=l,this.animationNames=u,e.next=40,this.setupScene();case 40:case"end":return e.stop()}}),e,this,[[14,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setupScene",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.applyTransform(),this.updateBoundingBox(),e.next=4,this.updateFraming();case 4:this.updateShadow(),this.setShadowIntensity(this.shadowIntensity);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reset",value:function(){this.url=null,this.renderCount=0,this.queueRender(),null!=this.shadow&&this.shadow.setIntensity(0),this.bakedShadows.clear();var e=this._model;null!=e&&(e.removeFromParent(),this._model=null);var t=this._currentGLTF;null!=t&&(t.dispose(),this._currentGLTF=null),null!=this.currentAnimationAction&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}},{key:"dispose",value:function(){this.reset(),null!=this.shadow&&(this.shadow.dispose(),this.shadow=null),this.element[PX]=null,this.element[DX]=null,this.element[OX]=null}},{key:"currentGLTF",get:function(){return this._currentGLTF}},{key:"setSize",value:function(e,t){if(this.width!==e||this.height!==t){if(this.width=Math.max(e,1),this.height=Math.max(t,1),this.annotationRenderer.setSize(e,t),this.aspect=this.width/this.height,null!=this.externalRenderer){var n=ZG();this.externalRenderer.resize(e*n,t*n)}this.queueRender()}}},{key:"markBakedShadow",value:function(e){e.userData.shadow=!0,this.bakedShadows.add(e)}},{key:"unmarkBakedShadow",value:function(e){e.userData.shadow=!1,e.visible=!0,this.bakedShadows.delete(e),this.boundingBox.expandByObject(e)}},{key:"findBakedShadows",value:function(e){var t=this,n=new Nd;e.traverse((function(e){var r=e;if(r.material&&r.material.transparent){n.setFromObject(r);var i=n.getSize($X),a=Math.min(i.x,i.y,i.z);Math.max(i.x,i.y,i.z)<100*a||t.markBakedShadow(r)}}))}},{key:"checkBakedShadows",value:function(){var e=this.boundingBox,t=e.min,n=e.max,r=new Nd;this.boundingBox.getSize(this.size);var i,a=(0,Ms.Z)(this.bakedShadows);try{for(a.s();!(i=a.n()).done;){var o=i.value;r.setFromObject(o),r.min.y<t.y+this.size.y/100&&r.min.x<=t.x&&r.max.x>=n.x&&r.min.z<=t.z&&r.max.z>=n.z||(r.min.z<t.z+this.size.z/100&&r.min.x<=t.x&&r.max.x>=n.x&&r.min.y<=t.y&&r.max.y>=n.y||this.unmarkBakedShadow(o))}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyTransform",value:function(){var e=this.model;if(null!=e){var t=vj(this.element.orientation)[0].terms,n=Mj(t[0]).number,r=Mj(t[1]).number,i=Mj(t[2]).number;e.quaternion.setFromEuler(new _f(r,i,n,"YXZ"));var a=vj(this.element.scale)[0].terms;e.scale.set(a[0].number,a[1].number,a[2].number)}}},{key:"updateBoundingBox",value:function(){var e=this,t=this.model;if(null!=t){this.target.remove(t),this.findBakedShadows(t);var n=function(e,t){return e.expandByPoint(t)};this.setBakedShadowVisibility(!1),this.boundingBox=sV(t,n,new Nd),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach((function(t){return e.unmarkBakedShadow(t)})),this.boundingBox=sV(t,n,new Nd)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(t)}}},{key:"updateFraming",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,i,o=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=this.model)){e.next=3;break}return e.abrupt("return");case 3:return this.target.remove(t),this.setBakedShadowVisibility(!1),n=this.boundingSphere.center,this.element.requestUpdate("cameraTarget"),e.next=9,this.element.updateComplete;case 9:n.copy(this.getTarget()),r=function(e,t){return Math.max(e,n.distanceToSquared(t))},this.boundingSphere.radius=Math.sqrt(sV(t,r,0)),i=function(e,t){t.sub(n);var r=Math.sqrt(t.x*t.x+t.z*t.z);return Math.max(e,r/(o.idealCameraDistance()-Math.abs(t.y)))},this.idealAspect=sV(t,i,0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(t);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setBakedShadowVisibility",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.shadowIntensity<=0,n=(0,Ms.Z)(this.bakedShadows);try{for(n.s();!(e=n.n()).done;){e.value.visible=t}}catch(r){n.e(r)}finally{n.f()}}},{key:"idealCameraDistance",value:function(){var e=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(e)}},{key:"adjustedFoV",value:function(e){var t=Math.tan(e/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(t)*180/Math.PI}},{key:"getNDC",value:function(e,t){if(null!=this.xrCamera)eY.set(e/window.screen.width,t/window.screen.height);else{var n=this.element.getBoundingClientRect();eY.set((e-n.x)/this.width,(t-n.y)/this.height)}return eY.multiplyScalar(2).subScalar(1),eY.y*=-1,eY}},{key:"getSize",value:function(){return{width:this.width,height:this.height}}},{key:"setEnvironmentAndSkybox",value:function(e,t){this.element[PY].arRenderer.presentedScene!==this&&(this.environment=e,this.background=t,this.queueRender())}},{key:"setTarget",value:function(e,t,n){this.goalTarget.set(-e,-t,-n)}},{key:"setTargetDamperDecayTime",value:function(e){this.targetDamperX.setDecayTime(e),this.targetDamperY.setDecayTime(e),this.targetDamperZ.setDecayTime(e)}},{key:"getTarget",value:function(){return this.goalTarget.clone().multiplyScalar(-1)}},{key:"jumpToGoal",value:function(){this.updateTarget(1e4)}},{key:"updateTarget",value:function(e){var t=this.goalTarget,n=this.target.position;if(t.equals(n))return!1;var r=this.boundingSphere.radius/10,i=n.x,a=n.y,o=n.z;return i=this.targetDamperX.update(i,t.x,e,r),a=this.targetDamperY.update(a,t.y,e,r),o=this.targetDamperZ.update(o,t.z,e,r),this.target.position.set(i,a,o),this.target.updateMatrixWorld(),this.queueRender(),!0}},{key:"pointTowards",value:function(e,t){var n=this.position,r=n.x,i=n.z;this.yaw=Math.atan2(e-r,t-i)}},{key:"model",get:function(){return this._model}},{key:"yaw",get:function(){return this.rotation.y},set:function(e){this.rotation.y=e,this.queueRender()}},{key:"animationTime",get:function(){if(null!=this.currentAnimationAction){var e=Math.max(this.currentAnimationAction._loopCount,0);return this.currentAnimationAction.loop===Xc&&1===(1&e)?this.duration-this.currentAnimationAction.time:this.currentAnimationAction.time}return 0},set:function(e){this.mixer.setTime(e),this.queueShadowRender()}},{key:"animationTimeScale",get:function(){return this.mixer.timeScale},set:function(e){this.mixer.timeScale=e}},{key:"duration",get:function(){return null!=this.currentAnimationAction&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}},{key:"hasActiveAnimation",get:function(){return null!=this.currentAnimationAction}},{key:"playAnimation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jc,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;if(null!=this._currentGLTF){var i=this.animations;if(null!=i&&0!==i.length){var a=null;if(null!=e&&null==(a=this.animationsByName.get(e))){var o=parseInt(e);!isNaN(o)&&o>=0&&o<i.length&&(a=i[o])}null==a&&(a=i[0]);try{var s=this.currentAnimationAction,l=this.mixer.clipAction(a,this);this.currentAnimationAction=l,this.element.paused?this.mixer.stopAllAction():(l.paused=!1,null!=s&&l!==s?l.crossFadeFrom(s,t,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),l.setLoop(n,r),l.enabled=!0,l.clampWhenFinished=!0,l.play()}catch(u){console.error(u)}}}}},{key:"stopAnimation",value:function(){this.currentAnimationAction=null,this.mixer.stopAllAction()}},{key:"updateAnimation",value:function(e){this.mixer.update(e),this.queueShadowRender()}},{key:"subscribeMixerEvent",value:function(e,t){this.mixer.addEventListener(e,t)}},{key:"updateShadow",value:function(){var e=this.shadow;if(null!=e){var t="wall"===this.element.arPlacement?"back":"bottom";e.setScene(this,this.shadowSoftness,t),e.needsUpdate=!0}}},{key:"renderShadow",value:function(e){var t=this.shadow;null!=t&&1==t.needsUpdate&&(t.render(e,this),t.needsUpdate=!1)}},{key:"queueShadowRender",value:function(){null!=this.shadow&&(this.shadow.needsUpdate=!0)}},{key:"setShadowIntensity",value:function(e){if(this.shadowIntensity=e,null!=this._currentGLTF&&(this.setBakedShadowVisibility(),!(e<=0&&null==this.shadow))){if(null==this.shadow){var t="wall"===this.element.arPlacement?"back":"bottom";this.shadow=new qX(this,this.shadowSoftness,t)}this.shadow.setIntensity(e)}}},{key:"setShadowSoftness",value:function(e){this.shadowSoftness=e;var t=this.shadow;null!=t&&t.setSoftness(e)}},{key:"setShadowOffset",value:function(e){var t=this.shadow;null!=t&&t.setOffset(e)}},{key:"hitFromPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return KX.setFromCamera(e,this.getCamera()),KX.intersectObject(t,!0).find((function(e){return e.object.visible&&!e.object.userData.shadow}))}},{key:"positionAndNormalFromPoint",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,r=this.hitFromPoint(e,n);return null==r?null:{position:r.point,normal:null!=r.face?r.face.normal.clone().applyNormalMatrix((new ld).getNormalMatrix(r.object.matrixWorld)):KX.ray.direction.clone().multiplyScalar(-1),uv:null!==(t=r.uv)&&void 0!==t?t:null}}},{key:"surfaceFromPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=this.element.model;if(null==n)return null;var r=this.hitFromPoint(e,t);if(null==r||null==r.face)return null;var i=n[SX](r).mesh.userData.associations,a=i.meshes,o=i.primitives,s=new Dd,l=new Dd,u=new Dd,c=r.face,h=c.a,d=c.b,f=c.c,p=r.object;p.getVertexPosition(h,s),p.getVertexPosition(d,l),p.getVertexPosition(f,u);var v=new Jf(s,l,u),m=new Dd;return v.getBarycoord(p.worldToLocal(r.point),m),"".concat(a," ").concat(o," ").concat(h," ").concat(d," ").concat(f," ").concat(m.x.toFixed(3)," ").concat(m.y.toFixed(3)," ").concat(m.z.toFixed(3))}},{key:"addHotspot",value:function(e){this.target.add(e),this.annotationRenderer.domElement.appendChild(e.element)}},{key:"removeHotspot",value:function(e){this.target.remove(e)}},{key:"forHotspots",value:function(e){for(var t=this.target.children,n=0,r=t.length;n<r;n++){var i=t[n];i instanceof VX&&e(i)}}},{key:"initializeSurface",value:function(e){if(null!=e.surface&&null==e.mesh){var t=vj(e.surface)[0].terms;if(8!=t.length)return void console.warn(e.surface+" does not have exactly 8 numbers.");var n=this.element.model[MX](t[0].number,t[1].number),r=new Dd(t[2].number,t[3].number,t[4].number);if(null==n)return void console.warn(e.surface+" does not match a node/primitive in this glTF! Skipping this hotspot.");var i=n.mesh.geometry.attributes.position.count;if(r.x>=i||r.y>=i||r.z>=i)return void console.warn(e.surface+" vertex indices out of range in this glTF! Skipping this hotspot.");var a=new Dd(t[5].number,t[6].number,t[7].number);e.mesh=n.mesh,e.tri=r,e.bary=a}}},{key:"updateSurfaceHotspots",value:function(){var e=this,t=!this.element.paused;this.forHotspots((function(n){e.initializeSurface(n),n.updateSurface(t)}))}},{key:"updateHotspotsVisibility",value:function(e){var t=this;this.forHotspots((function(n){JX.copy(e),XX.setFromMatrixPosition(n.matrixWorld),JX.sub(XX),YX.copy(n.normal).transformDirection(t.target.matrixWorld),JX.dot(YX)<0?n.hide():n.show()}))}},{key:"orientHotspots",value:function(e){this.forHotspots((function(t){t.orient(e)}))}},{key:"setHotspotsVisibility",value:function(e){this.forHotspots((function(t){t.visible=e}))}},{key:"updateSchema",value:function(e){var t,n=this.schemaElement,r=this.element,i=r.alt,a=r.poster,o=r.iosSrc;if(null!=e){var s=[{"@type":"MediaObject",contentUrl:e,encodingFormat:"gltf"===(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase())?"model/gltf+json":"model/gltf-binary"}];o&&s.push({"@type":"MediaObject",contentUrl:o,encodingFormat:"model/vnd.usdz+zip"});var l={"@context":"http://schema.org/","@type":"3DModel",image:null!==a&&void 0!==a?a:void 0,name:null!==i&&void 0!==i?i:void 0,encoding:s};n.textContent=JSON.stringify(l),document.head.appendChild(n)}else null!=n.parentElement&&n.parentElement.removeChild(n)}}]),n}(Yg),nY=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.match(/data:(.*);/);if(!r)return n(new Error("".concat(t," is not a valid data Url")));for(var i=r[1],a=t.replace(/data:image\/\w+;base64,/,""),o=atob(a),s=[],l=0;l<o.length;l+=512){for(var u=o.slice(l,l+512),c=new Array(u.length),h=0;h<u.length;h++)c[h]=u.charCodeAt(h);var d=new Uint8Array(c);s.push(d)}e(new Blob(s,{type:i}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rY=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.apply(this,arguments)).ongoingActivities=new Set,e.totalProgress=0,e}return(0,c.Z)(n,[{key:"ongoingActivityCount",get:function(){return this.ongoingActivities.size}},{key:"beginActivity",value:function(){var e=this,t={progress:0,completed:!1};return this.ongoingActivities.add(t),1===this.ongoingActivityCount&&this.announceTotalProgress(t,0),function(n){var r;return(r=Math.max(UG(n,0,1),t.progress))!==t.progress&&e.announceTotalProgress(t,r),t.progress}}},{key:"announceTotalProgress",value:function(e,t){var n=0,r=0;1==t&&(e.completed=!0);var i,a=(0,Ms.Z)(this.ongoingActivities);try{for(a.s();!(i=a.n()).done;){var o=i.value;n+=1-o.progress,!0===o.completed&&r++}}catch(u){a.e(u)}finally{a.f()}var s=e.progress;e.progress=t,this.totalProgress+=(t-s)*(1-this.totalProgress)/n;var l=r===this.ongoingActivityCount?1:this.totalProgress;this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:l}})),r===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}]),n}((0,Tl.Z)(EventTarget)),iY=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},aY=document.createElement("canvas"),oY=Symbol("fallbackResizeHandler"),sY=Symbol("defaultAriaLabel"),lY=Symbol("resizeObserver"),uY=Symbol("clearModelTimeout"),cY=Symbol("onContextLost"),hY=Symbol("loaded"),dY=Symbol("status"),fY=Symbol("onFocus"),pY=Symbol("onBlur"),vY=Symbol("updateSize"),mY=Symbol("intersectionObserver"),gY=Symbol("isElementInViewport"),yY=Symbol("announceModelVisibility"),AY=Symbol("ariaLabel"),xY=Symbol("altDefaulted"),bY=Symbol("statusElement"),_Y=Symbol("updateStatus"),wY=Symbol("loadedTime"),EY=Symbol("updateSource"),SY=Symbol("markLoaded"),MY=Symbol("container"),CY=Symbol("input"),kY=Symbol("canvas"),TY=Symbol("scene"),IY=Symbol("needsRender"),BY=Symbol("tick"),RY=Symbol("onModelLoad"),LY=Symbol("onResize"),PY=Symbol("renderer"),DY=Symbol("progressTracker"),OY=Symbol("getLoaded"),FY=Symbol("getModelIsVisible"),NY=Symbol("shouldAttemptPreload"),UY=function(e){return{x:e.x,y:e.y,z:e.z,toString:function(){return"".concat(this.x,"m ").concat(this.y,"m ").concat(this.z,"m")}}},ZY=function(e,t,n,r){(0,Hn.Z)(s,e);var i=(0,Gn.Z)(s);function s(){var e;(0,u.Z)(this,s),(e=i.call(this)).alt=null,e.src=null,e.withCredentials=!1,e.generateSchema=!1,e[DJ]=!1,e[OJ]=!1,e[FJ]=0,e[NJ]="",e[UJ]=null,e[ZJ]=NG((function(){var t=e.getBoundingClientRect();e[vY](t)}),50),e[zJ]=NG((function(t){var n=e.modelIsVisible;n!==t&&e.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:n}}))}),0),e[HJ]=null,e[GJ]=null,e[QJ]=new rY,e[VJ]=function(){e[bY].textContent=e[dY]},e[jJ]=function(){e[bY].textContent=""},e[WJ]=function(t){e.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:t.sourceEvent}}))},e.attachShadow({mode:"open"});var t,n,r=e.shadowRoot;if(function(e){AG(nQ,e)}(r),e[MY]=r.querySelector(".container"),e[CY]=r.querySelector(".userInput"),e[kY]=r.querySelector("canvas"),e[bY]=r.querySelector("#status"),e[sY]=e[CY].getAttribute("aria-label"),e.isConnected){var a=e.getBoundingClientRect();t=a.width,n=a.height}else t=300,n=150;return e[TY]=new tY({canvas:e[kY],element:(0,Il.Z)(e),width:t,height:n}),Promise.resolve().then((function(){e[vY](e.getBoundingClientRect())})),SG&&(e[lY]=new ResizeObserver((function(t){if(!e[PY].isPresenting){var n,r=(0,Ms.Z)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.target===(0,Il.Z)(e)&&e[vY](i.contentRect)}}catch(a){r.e(a)}finally{r.f()}}}))),MG?e[mY]=new IntersectionObserver((function(t){var n,r=(0,Ms.Z)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.target===(0,Il.Z)(e)){var a=e.modelIsVisible;e[gY]=i.isIntersecting,e[yY](a),e[gY]&&!e.loaded&&e[EY]()}}}catch(o){r.e(o)}finally{r.f()}}),{root:null,rootMargin:"0px",threshold:1e-5}):e[gY]=!0,e}return(0,c.Z)(s,[{key:"loaded",get:function(){return this[OY]()}},{key:t,get:function(){return Jq.singleton}},{key:"modelIsVisible",get:function(){return this[FY]()}},{key:"connectedCallback",value:function(){(0,Zn.Z)((0,zn.Z)(s.prototype),"connectedCallback",this)&&(0,Zn.Z)((0,zn.Z)(s.prototype),"connectedCallback",this).call(this),SG?this[lY].observe(this):self.addEventListener("resize",this[oY]),MG&&this[mY].observe(this),this.addEventListener("focus",this[fY]),this.addEventListener("blur",this[pY]);var e=this[PY];e.addEventListener("contextlost",this[cY]),e.registerScene(this[TY]),null!=this[uY]&&(self.clearTimeout(this[uY]),this[uY]=null,this.requestUpdate("src",null))}},{key:"disconnectedCallback",value:function(){var e=this;(0,Zn.Z)((0,zn.Z)(s.prototype),"disconnectedCallback",this)&&(0,Zn.Z)((0,zn.Z)(s.prototype),"disconnectedCallback",this).call(this),SG?this[lY].unobserve(this):self.removeEventListener("resize",this[oY]),MG&&this[mY].unobserve(this),this.removeEventListener("focus",this[fY]),this.removeEventListener("blur",this[pY]);var t=this[PY];t.removeEventListener("contextlost",this[cY]),t.unregisterScene(this[TY]),this[uY]=self.setTimeout((function(){e[TY].dispose(),e[uY]=null}),10)}},{key:"updated",value:function(e){(0,Zn.Z)((0,zn.Z)(s.prototype),"updated",this).call(this,e),e.has("src")&&(null==this.src?(this[hY]=!1,this[wY]=0,this[TY].reset()):this.src!==this[TY].url&&(this[hY]=!1,this[wY]=0,this[EY]())),e.has("alt")&&this[CY].setAttribute("aria-label",this[AY]),e.has("withCredentials")&&($Q.withCredentials=this.withCredentials,this[PY].textureUtils.withCredentials=this.withCredentials),e.has("generateSchema")&&(this.generateSchema?this[TY].updateSchema(this.src):this[TY].updateSchema(null))}},{key:"toDataURL",value:function(e,t){return this[PY].displayCanvas(this[TY]).toDataURL(e,t)}},{key:"toBlob",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,s,l,u,c,h,d,f,p,v,m,g,y,A,x,b=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?t.mimeType:void 0,r=t?t.qualityArgument:void 0,i=t?t.idealAspect:void 0,s=this[TY],l=s.width,u=s.height,c=s.idealAspect,h=s.aspect,d=this[PY],f=d.dpr,p=d.scaleFactor,v=l*p*f,m=u*p*f,g=0,y=0,!0===i&&(c>h?(A=m,m=Math.round(v/c),y=(A-m)/2):(x=v,v=Math.round(m*c),g=(x-v)/2)),aY.width=v,aY.height=m,e.prev=12,e.abrupt("return",new Promise(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,i){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(aY.getContext("2d").drawImage(b[PY].displayCanvas(b[TY]),g,y,v,m,0,0,v,m),!aY.msToBlob){e.next=4;break}if(n&&"image/png"!==n){e.next=4;break}return e.abrupt("return",t(aY.msToBlob()));case 4:if(aY.toBlob){e.next=10;break}return e.t0=t,e.next=8,nY(aY.toDataURL(n,r));case 8:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 10:aY.toBlob((function(e){if(!e)return i(new Error("Unable to retrieve canvas blob"));t(e)}),n,r);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 14:return e.prev=14,this[vY]({width:l,height:u}),e.finish(14);case 17:case 18:case"end":return e.stop()}}),e,this,[[12,,14,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"registerRenderer",value:function(e){this[TY].externalRenderer=e}},{key:"unregisterRenderer",value:function(){this[TY].externalRenderer=null}},{key:AY,get:function(){return this[xY]}},{key:xY,get:function(){return null==this.alt||"null"===this.alt?this[sY]:this.alt}},{key:OY,value:function(){return this[hY]}},{key:FY,value:function(){return this.loaded&&this[gY]}},{key:NY,value:function(){return!!this.src&&this[gY]}},{key:vY,value:function(e){var t=e.width,n=e.height;0!==t&&0!==n&&(this[MY].style.width="".concat(t,"px"),this[MY].style.height="".concat(n,"px"),this[LY]({width:t,height:n}))}},{key:BY,value:function(e,t){}},{key:SY,value:function(){this[hY]||(this[hY]=!0,this[wY]=performance.now())}},{key:IY,value:function(){this[TY].queueRender()}},{key:RY,value:function(){}},{key:_Y,value:function(e){this[dY]=e;var t=this.getRootNode();null!=t&&t.activeElement===this&&this[bY].textContent!=e&&(this[bY].textContent=e)}},{key:n,value:function(e){this[TY].setSize(e.width,e.height)}},{key:r,value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,i,o,s=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this[TY],!this.loaded&&this[NY]()&&this.src!==t.url){e.next=3;break}return e.abrupt("return");case 3:return this.generateSchema&&t.updateSchema(this.src),this[_Y]("Loading"),t.stopAnimation(),n=this[DY].beginActivity(),r=this.src,e.prev=8,i=t.setSource(r,(function(e){return n(.95*UG(e,0,1))})),o=this[WG](),e.next=13,Promise.all([i,o]);case 13:return this[SY](),this[RY](),e.next=17,new Promise((function(e){requestAnimationFrame((function(){requestAnimationFrame((function(){s.dispatchEvent(new CustomEvent("load",{detail:{url:r}})),e()}))}))}));case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:e.t0}}));case 22:return e.prev=22,n(1),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[8,19,22,25]])})));return function(){return e.apply(this,arguments)}}()}],[{key:"is",get:function(){return"model-viewer"}},{key:"modelCacheSize",get:function(){return $Q[YQ].evictionThreshold},set:function(e){$Q[YQ].evictionThreshold=e}},{key:"minimumRenderScale",get:function(){return Jq.singleton.minScale},set:function(e){e>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),e<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),Jq.singleton.minScale=e}}]),s}(BH,(DJ=gY,OJ=hY,FJ=wY,NJ=dY,UJ=uY,ZJ=oY,zJ=yY,HJ=lY,GJ=mY,QJ=DY,PY),(VJ=fY,jJ=pY,LY),(WJ=cY,EY));iY([pH({type:String})],ZY.prototype,"alt",void 0),iY([pH({type:String})],ZY.prototype,"src",void 0),iY([pH({type:Boolean,attribute:"with-credentials"})],ZY.prototype,"withCredentials",void 0),iY([pH({type:Boolean,attribute:"generate-schema"})],ZY.prototype,"generateSchema",void 0);var zY=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},HY=Symbol("changeAnimation"),GY=Symbol("paused"),QY={repetitions:1/0,pingpong:!1},VY=Symbol("hotspotMap"),jY=Symbol("mutationCallback"),WY=Symbol("observer"),qY=Symbol("addHotspot"),JY=Symbol("removeHotspot"),XY=new df,YY=function(e){return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};try{URL.revokeObjectURL(YY(""))}catch(c1){YY=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},function(e){return new Worker(e,{type:"module"})}}var KY=Uint8Array,$Y=Uint16Array,eK=Uint32Array,tK=new KY([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),nK=new KY([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rK=new KY([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),iK=function(e,t){for(var n=new $Y(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new eK(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return[n,i]},aK=iK(tK,2),oK=aK[0],sK=aK[1];oK[28]=258,sK[258]=28;for(var lK=iK(nK,0),uK=(lK[0],lK[1]),cK=new $Y(32768),hK=0;hK<32768;++hK){var dK=(43690&hK)>>>1|(21845&hK)<<1;dK=(61680&(dK=(52428&dK)>>>2|(13107&dK)<<2))>>>4|(3855&dK)<<4,cK[hK]=((65280&dK)>>>8|(255&dK)<<8)>>>1}var fK=function(e,t,n){for(var r=e.length,i=0,a=new $Y(t);i<r;++i)++a[e[i]-1];var o,s=new $Y(t);for(i=0;i<t;++i)s[i]=s[i-1]+a[i-1]<<1;if(n){o=new $Y(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var u=i<<4|e[i],c=t-e[i],h=s[e[i]-1]++<<c,d=h|(1<<c)-1;h<=d;++h)o[cK[h]>>>l]=u}else for(o=new $Y(r),i=0;i<r;++i)e[i]&&(o[i]=cK[s[e[i]-1]++]>>>15-e[i]);return o},pK=new KY(288);for(hK=0;hK<144;++hK)pK[hK]=8;for(hK=144;hK<256;++hK)pK[hK]=9;for(hK=256;hK<280;++hK)pK[hK]=7;for(hK=280;hK<288;++hK)pK[hK]=8;var vK=new KY(32);for(hK=0;hK<32;++hK)vK[hK]=5;var mK=fK(pK,9,0),gK=fK(vK,5,0),yK=function(e){return(e/8|0)+(7&e&&1)},AK=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof $Y?$Y:e instanceof eK?eK:KY)(n-t);return r.set(e.subarray(t,n)),r},xK=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},bK=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},_K=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,a=n.slice();if(!i)return[TK,0];if(1==i){var o=new KY(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],l=n[1],u=0,c=1,h=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};c!=i-1;)s=n[n[u].f<n[h].f?u++:h++],l=n[u!=c&&n[u].f<n[h].f?u++:h++],n[c++]={s:-1,f:s.f+l.f,l:s,r:l};var d=a[0].s;for(r=1;r<i;++r)a[r].s>d&&(d=a[r].s);var f=new $Y(d+1),p=wK(n[c-1],f,0);if(p>t){r=0;var v=0,m=p-t,g=1<<m;for(a.sort((function(e,t){return f[t.s]-f[e.s]||e.f-t.f}));r<i;++r){var y=a[r].s;if(!(f[y]>t))break;v+=g-(1<<p-f[y]),f[y]=t}for(v>>>=m;v>0;){var A=a[r].s;f[A]<t?v-=1<<t-f[A]++-1:++r}for(;r>=0&&v;--r){var x=a[r].s;f[x]==t&&(--f[x],++v)}p=t}return[new KY(f),p]},wK=function e(t,n,r){return-1==t.s?Math.max(e(t.l,n,r+1),e(t.r,n,r+1)):n[t.s]=r},EK=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new $Y(++t),r=0,i=e[0],a=1,o=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==i&&s!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=e[s]}return[n.subarray(0,r),t]},SK=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},MK=function(e,t,n){var r=n.length,i=yK(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var a=0;a<r;++a)e[i+a+4]=n[a];return 8*(i+4+r)},CK=function(e,t,n,r,i,a,o,s,l,u,c){xK(t,c++,n),++i[256];for(var h=_K(i,15),d=h[0],f=h[1],p=_K(a,15),v=p[0],m=p[1],g=EK(d),y=g[0],A=g[1],x=EK(v),b=x[0],_=x[1],w=new $Y(19),E=0;E<y.length;++E)w[31&y[E]]++;for(E=0;E<b.length;++E)w[31&b[E]]++;for(var S=_K(w,7),M=S[0],C=S[1],k=19;k>4&&!M[rK[k-1]];--k);var T,I,B,R,L=u+5<<3,P=SK(i,pK)+SK(a,vK)+o,D=SK(i,d)+SK(a,v)+o+14+3*k+SK(w,M)+(2*w[16]+3*w[17]+7*w[18]);if(L<=P&&L<=D)return MK(t,c,e.subarray(l,l+u));if(xK(t,c,1+(D<P)),c+=2,D<P){T=fK(d,f,0),I=d,B=fK(v,m,0),R=v;var O=fK(M,C,0);xK(t,c,A-257),xK(t,c+5,_-1),xK(t,c+10,k-4),c+=14;for(E=0;E<k;++E)xK(t,c+3*E,M[rK[E]]);c+=3*k;for(var F=[y,b],N=0;N<2;++N){var U=F[N];for(E=0;E<U.length;++E){var Z=31&U[E];xK(t,c,O[Z]),c+=M[Z],Z>15&&(xK(t,c,U[E]>>>5&127),c+=U[E]>>>12)}}}else T=mK,I=pK,B=gK,R=vK;for(E=0;E<s;++E)if(r[E]>255){Z=r[E]>>>18&31;bK(t,c,T[Z+257]),c+=I[Z+257],Z>7&&(xK(t,c,r[E]>>>23&31),c+=tK[Z]);var z=31&r[E];bK(t,c,B[z]),c+=R[z],z>3&&(bK(t,c,r[E]>>>5&8191),c+=nK[z])}else bK(t,c,T[r[E]]),c+=I[r[E]];return bK(t,c,T[256]),c+I[256]},kK=new eK([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),TK=new KY(0),IK=function(e,t,n,r,i,a){var o=e.length,s=new KY(r+o+5*(1+Math.ceil(o/7e3))+i),l=s.subarray(r,s.length-i),u=0;if(!t||o<8)for(var c=0;c<=o;c+=65535){var h=c+65535;h<o?u=MK(l,u,e.subarray(c,h)):(l[c]=a,u=MK(l,u,e.subarray(c,o)))}else{for(var d=kK[t-1],f=d>>>13,p=8191&d,v=(1<<n)-1,m=new $Y(32768),g=new $Y(v+1),y=Math.ceil(n/3),A=2*y,x=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<A)&v},b=new eK(25e3),_=new $Y(288),w=new $Y(32),E=0,S=0,M=(c=0,0),C=0,k=0;c<o;++c){var T=x(c),I=32767&c,B=g[T];if(m[I]=B,g[T]=I,C<=c){var R=o-c;if((E>7e3||M>24576)&&R>423){u=CK(e,l,0,b,_,w,S,M,k,c-k,u),M=E=S=0,k=c;for(var L=0;L<286;++L)_[L]=0;for(L=0;L<30;++L)w[L]=0}var P=2,D=0,O=p,F=I-B&32767;if(R>2&&T==x(c-F))for(var N=Math.min(f,R)-1,U=Math.min(32767,c),Z=Math.min(258,R);F<=U&&--O&&I!=B;){if(e[c+P]==e[c+P-F]){for(var z=0;z<Z&&e[c+z]==e[c+z-F];++z);if(z>P){if(P=z,D=F,z>N)break;var H=Math.min(F,z-2),G=0;for(L=0;L<H;++L){var Q=c-F+L+32768&32767,V=Q-m[Q]+32768&32767;V>G&&(G=V,B=Q)}}}F+=(I=B)-(B=m[I])+32768&32767}if(D){b[M++]=268435456|sK[P]<<18|uK[D];var j=31&sK[P],W=31&uK[D];S+=tK[j]+nK[W],++_[257+j],++w[W],C=c+P,++E}else b[M++]=e[c],++_[e[c]]}}u=CK(e,l,a,b,_,w,S,M,k,c-k,u),!a&&7&u&&(u=MK(l,u+1,TK))}return AK(s,0,r+yK(u)+i)},BK=function(){for(var e=new eK(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),RK=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=BK[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}},LK=function(e,t,n,r,i){return IK(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!i)},PK=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},DK=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function OK(e,t){return LK(e,t||{},0,0)}var FK=function e(t,n,r,i){for(var a in t){var o=t[a],s=n+a;o instanceof KY?r[s]=[o,i]:Array.isArray(o)?r[s]=[o[0],PK(i,o[1])]:e(o,s+"/",r,i)}},NK="undefined"!=typeof TextEncoder&&new TextEncoder,UK="undefined"!=typeof TextDecoder&&new TextDecoder;try{UK.decode(TK,{stream:!0}),1}catch(c1){}function ZK(e,t){if(t){for(var n=new KY(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(NK)return NK.encode(e);var i=e.length,a=new KY(e.length+(e.length>>1)),o=0,s=function(e){a[o++]=e};for(r=0;r<i;++r){if(o+5>a.length){var l=new KY(o+8+(i-r<<1));l.set(a),a=l}var u=e.charCodeAt(r);u<128||t?s(u):u<2048?(s(192|u>>6),s(128|63&u)):u>55295&&u<57344?(s(240|(u=65536+(1047552&u)|1023&e.charCodeAt(++r))>>18),s(128|u>>12&63),s(128|u>>6&63),s(128|63&u)):(s(224|u>>12),s(128|u>>6&63),s(128|63&u))}return AK(a,0,o)}var zK=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;if(r>65535)throw"extra field too long";t+=r+4}return t},HK=function(e,t,n,r,i,a,o,s){var l=r.length,u=n.extra,c=s&&s.length,h=zK(u);DK(e,t,null!=o?33639248:67324752),t+=4,null!=o&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(null==a&&8),e[t++]=i&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var d=new Date(null==n.mtime?Date.now():n.mtime),f=d.getFullYear()-1980;if(f<0||f>119)throw"date not in range 1980-2099";if(DK(e,t,f<<25|d.getMonth()+1<<21|d.getDate()<<16|d.getHours()<<11|d.getMinutes()<<5|d.getSeconds()>>>1),t+=4,null!=a&&(DK(e,t,n.crc),DK(e,t+4,a),DK(e,t+8,n.size)),DK(e,t+12,l),DK(e,t+14,h),t+=16,null!=o&&(DK(e,t,c),DK(e,t+6,n.attrs),DK(e,t+10,o),t+=14),e.set(r,t),t+=l,h)for(var p in u){var v=u[p],m=v.length;DK(e,t,+p),DK(e,t+2,m),e.set(v,t+4),t+=4+m}return c&&(e.set(s,t),t+=c),t},GK=function(e,t,n,r,i){DK(e,t,101010256),DK(e,t+8,n),DK(e,t+10,n),DK(e,t+12,r),DK(e,t+16,i)};function QK(e,t){t||(t={});var n={},r=[];FK(e,"",n,t);var i=0,a=0;for(var o in n){var s=n[o],l=s[0],u=s[1],c=0==u.level?0:8,h=(w=ZK(o)).length,d=u.comment,f=d&&ZK(d),p=f&&f.length,v=zK(u.extra);if(h>65535)throw"filename too long";var m=c?OK(l,u):l,g=m.length,y=RK();y.p(l),r.push(PK(u,{size:l.length,crc:y.d(),c:m,f:w,m:f,u:h!=o.length||f&&d.length!=p,o:i,compression:c})),i+=30+h+v+g,a+=76+2*(h+v)+(p||0)+g}for(var A=new KY(a+22),x=i,b=a-i,_=0;_<r.length;++_){var w=r[_];HK(A,w.o,w,w.f,w.u,w.c.length);var E=30+w.f.length+zK(w.extra);A.set(w.c,w.o+E),HK(A,i,w,w.f,w.u,w.c.length,w.o,w.m),i+=16+E+(w.m?w.m.length:0)}return GK(A,i,r.length,b,x),A}var VK=function(){function e(){(0,u.Z)(this,e)}return(0,c.Z)(e,[{key:"parse",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,u,c,h,d,f,p,v,m,g=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g.length>1&&void 0!==g[1]?g[1]:{},n=Object.assign({ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}}},n),(r={})[i="model.usda"]=null,o='#usda 1.0\n(\n    customLayerData = {\n        string creator = "Three.js USDZExporter"\n    }\n    metersPerUnit = 1\n    upAxis = "Y"\n)\n\n',o+=qK(n),s={},l={},t.traverseVisible((function(e){if(e.isMesh){var t=e.geometry,n=e.material;if(n.isMeshStandardMaterial){var i="geometries/Geometry_"+t.id+".usd";if(!(i in r)){var a=$K(t);r[i]=JK(a)}n.uuid in s||(s[n.uuid]=n),o+=XK(e,t,n)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",e)}else e.isCamera&&(o+=a$(e))})),o+="\n        }\n    }\n}\n\n",o+=t$(s,l),r[i]=ZK(o),o=null,u=(0,a.Z)().mark((function e(){var t,n,i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l[c],n=c.split("_")[1],i=1023===t.format,o=jK(t.image,n,t.flipY),e.next=6,new Promise((function(e){return o.toBlob(e,i?"image/png":"image/jpeg",1)}));case 6:return s=e.sent,e.t0=Uint8Array,e.next=10,s.arrayBuffer();case 10:e.t1=e.sent,r["textures/Texture_".concat(c,".").concat(i?"png":"jpg")]=new e.t0(e.t1);case 12:case"end":return e.stop()}}),e)})),e.t0=(0,a.Z)().keys(l);case 16:if((e.t1=e.t0()).done){e.next=21;break}return c=e.t1.value,e.delegateYield(u(),"t2",19);case 19:e.next=16;break;case 21:for(d in h=0,r)f=r[d],p=34+d.length,4!==(v=63&(h+=p))&&(m=new Uint8Array(64-v),r[d]=[f,{extra:{12345:m}}]),h=f.length;return e.abrupt("return",QK(r,{level:0}));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function jK(e,t,n){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var r=1024/Math.max(e.width,e.height),i=document.createElement("canvas");i.width=e.width*Math.min(1,r),i.height=e.height*Math.min(1,r);var a=i.getContext("2d");if(!0===n&&(a.translate(0,i.height),a.scale(1,-1)),a.drawImage(e,0,0,i.width,i.height),void 0!==t){for(var o=parseInt(t,16),s=(o>>16&255)/255,l=(o>>8&255)/255,u=(255&o)/255,c=a.getImageData(0,0,i.width,i.height),h=c.data,d=0;d<h.length;d+=4)h[d+0]=h[d+0]*s,h[d+1]=h[d+1]*l,h[d+2]=h[d+2]*u;a.putImageData(c,0,0)}return i}throw new Error("THREE.USDZExporter: No valid image data found. Unable to process texture.")}var WK=7;function qK(e){return'def Xform "Root"\n{\n    def Scope "Scenes" (\n        kind = "sceneLibrary"\n    )\n    {\n        def Xform "Scene" (\n            customData = {\n                bool preliminary_collidesWithEnvironment = 0\n                string sceneName = "Scene"\n            }\n            sceneName = "Scene"\n        )\n        {\n        token preliminary:anchoring:type = "'.concat(e.ar.anchoring.type,'"\n        token preliminary:planeAnchoring:alignment = "').concat(e.ar.planeAnchoring.alignment,'"\n\n')}function JK(e){var t='#usda 1.0\n(\n    customLayerData = {\n        string creator = "Three.js USDZExporter"\n    }\n    metersPerUnit = 1\n    upAxis = "Y"\n)\n\n';return ZK(t+=e)}function XK(e,t,n){var r="Object_"+e.id,i=YK(e.matrixWorld);return e.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",e),'def Xform "'.concat(r,'" (\n    prepend references = @./geometries/Geometry_').concat(t.id,".usd@</Geometry>\n)\n{\n    matrix4d xformOp:transform = ").concat(i,'\n    uniform token[] xformOpOrder = ["xformOp:transform"]\n\n    rel material:binding = </Materials/Material_').concat(n.id,">\n}\n\n")}function YK(e){var t=e.elements;return"( ".concat(KK(t,0),", ").concat(KK(t,4),", ").concat(KK(t,8),", ").concat(KK(t,12)," )")}function KK(e,t){return"(".concat(e[t+0],", ").concat(e[t+1],", ").concat(e[t+2],", ").concat(e[t+3],")")}function $K(e){var t=function(e){var t="Geometry",n=e.attributes,r=n.position.count;return'\n    def Mesh "'.concat(t,'"\n    {\n        int[] faceVertexCounts = [').concat(function(e){var t=null!==e.index?e.index.count:e.attributes.position.count;return Array(t/3).fill(3).join(", ")}(e),"]\n        int[] faceVertexIndices = [").concat(function(e){var t=e.index,n=[];if(null!==t)for(var r=0;r<t.count;r++)n.push(t.getX(r));else for(var i=e.attributes.position.count,a=0;a<i;a++)n.push(a);return n.join(", ")}(e),"]\n        normal3f[] normals = [").concat(e$(n.normal,r),'] (\n            interpolation = "vertex"\n        )\n        point3f[] points = [').concat(e$(n.position,r),"]\n        float2[] primvars:st = [").concat(function(e,t){if(void 0===e)return console.warn("USDZExporter: UVs missing."),Array(t).fill("(0, 0)").join(", ");for(var n=[],r=0;r<e.count;r++){var i=e.getX(r),a=e.getY(r);n.push("(".concat(i.toPrecision(WK),", ").concat(1-a.toPrecision(WK),")"))}return n.join(", ")}(n.uv,r),'] (\n            interpolation = "vertex"\n        )\n        uniform token subdivisionScheme = "none"\n    }\n')}(e);return'\ndef "Geometry"\n{\n  '.concat(t,"\n}\n")}function e$(e,t){if(void 0===e)return console.warn("USDZExporter: Normals missing."),Array(t).fill("(0, 0, 0)").join(", ");for(var n=[],r=0;r<e.count;r++){var i=e.getX(r),a=e.getY(r),o=e.getZ(r);n.push("(".concat(i.toPrecision(WK),", ").concat(a.toPrecision(WK),", ").concat(o.toPrecision(WK),")"))}return n.join(", ")}function t$(e,t){var n=[];for(var r in e){var i=e[r];n.push(n$(i,t))}return'def "Materials"\n{\n'.concat(n.join(""),"\n}\n\n")}function n$(e,t){var n="            ",r=[],i=[];function a(n,r,i){var a=n.id+(i?"_"+i.getHexString():""),o=1023===n.format;return t[a]=n,'\n        def Shader "Transform2d_'.concat(r,'" (\n            sdrMetadata = {\n                string role = "math"\n            }\n        )\n        {\n            uniform token info:id = "UsdTransform2d"\n            float2 inputs:in.connect = </Materials/Material_').concat(e.id,"/uvReader_st.outputs:result>\n            float2 inputs:scale = ").concat(i$(n.repeat),"\n            float2 inputs:translation = ").concat(i$(n.offset),'\n            float2 outputs:result\n        }\n\n        def Shader "Texture_').concat(n.id,"_").concat(r,'"\n        {\n            uniform token info:id = "UsdUVTexture"\n            asset inputs:file = @textures/Texture_').concat(a,".").concat(o?"png":"jpg","@\n            float2 inputs:st.connect = </Materials/Material_").concat(e.id,"/Transform2d_").concat(r,'.outputs:result>\n            token inputs:wrapS = "repeat"\n            token inputs:wrapT = "repeat"\n            float outputs:r\n            float outputs:g\n            float outputs:b\n            float3 outputs:rgb\n            ').concat(e.transparent||e.alphaTest>0?"float outputs:a":"","\n        }")}return e.side===Ql&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",e),null!==e.map?(r.push("".concat(n,"color3f inputs:diffuseColor.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.map.id,"_diffuse.outputs:rgb>")),e.transparent?r.push("".concat(n,"float inputs:opacity.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.map.id,"_diffuse.outputs:a>")):e.alphaTest>0&&(r.push("".concat(n,"float inputs:opacity.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.map.id,"_diffuse.outputs:a>")),r.push("".concat(n,"float inputs:opacityThreshold = ").concat(e.alphaTest))),i.push(a(e.map,"diffuse",e.color))):r.push("".concat(n,"color3f inputs:diffuseColor = ").concat(r$(e.color))),null!==e.emissiveMap?(r.push("".concat(n,"color3f inputs:emissiveColor.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.emissiveMap.id,"_emissive.outputs:rgb>")),i.push(a(e.emissiveMap,"emissive"))):e.emissive.getHex()>0&&r.push("".concat(n,"color3f inputs:emissiveColor = ").concat(r$(e.emissive))),null!==e.normalMap&&(r.push("".concat(n,"normal3f inputs:normal.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.normalMap.id,"_normal.outputs:rgb>")),i.push(a(e.normalMap,"normal"))),null!==e.aoMap&&(r.push("".concat(n,"float inputs:occlusion.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.aoMap.id,"_occlusion.outputs:r>")),i.push(a(e.aoMap,"occlusion"))),null!==e.roughnessMap&&1===e.roughness?(r.push("".concat(n,"float inputs:roughness.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.roughnessMap.id,"_roughness.outputs:g>")),i.push(a(e.roughnessMap,"roughness"))):r.push("".concat(n,"float inputs:roughness = ").concat(e.roughness)),null!==e.metalnessMap&&1===e.metalness?(r.push("".concat(n,"float inputs:metallic.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.metalnessMap.id,"_metallic.outputs:b>")),i.push(a(e.metalnessMap,"metallic"))):r.push("".concat(n,"float inputs:metallic = ").concat(e.metalness)),null!==e.alphaMap?(r.push("".concat(n,"float inputs:opacity.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.alphaMap.id,"_opacity.outputs:r>")),r.push("".concat(n,"float inputs:opacityThreshold = 0.0001")),i.push(a(e.alphaMap,"opacity"))):r.push("".concat(n,"float inputs:opacity = ").concat(e.opacity)),e.isMeshPhysicalMaterial&&(r.push("".concat(n,"float inputs:clearcoat = ").concat(e.clearcoat)),r.push("".concat(n,"float inputs:clearcoatRoughness = ").concat(e.clearcoatRoughness)),r.push("".concat(n,"float inputs:ior = ").concat(e.ior))),'\n    def Material "Material_'.concat(e.id,'"\n    {\n        def Shader "PreviewSurface"\n        {\n            uniform token info:id = "UsdPreviewSurface"\n').concat(r.join("\n"),"\n            int inputs:useSpecularWorkflow = 0\n            token outputs:surface\n        }\n\n        token outputs:surface.connect = </Materials/Material_").concat(e.id,'/PreviewSurface.outputs:surface>\n        token inputs:frame:stPrimvarName = "st"\n\n        def Shader "uvReader_st"\n        {\n            uniform token info:id = "UsdPrimvarReader_float2"\n            token inputs:varname.connect = </Materials/Material_').concat(e.id,".inputs:frame:stPrimvarName>\n            float2 inputs:fallback = (0.0, 0.0)\n            float2 outputs:result\n        }\n\n").concat(i.join("\n"),"\n\n    }\n")}function r$(e){return"(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")}function i$(e){return"(".concat(e.x,", ").concat(e.y,")")}function a$(e){var t=e.name?e.name:"Camera_"+e.id,n=YK(e.matrixWorld);return e.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",e),e.isOrthographicCamera?'def Camera "'.concat(t,'"\n\t\t{\n\t\t\tmatrix4d xformOp:transform = ').concat(n,'\n\t\t\tuniform token[] xformOpOrder = ["xformOp:transform"]\n\t\n\t\t\tfloat2 clippingRange = (').concat(e.near.toPrecision(WK),", ").concat(e.far.toPrecision(WK),")\n\t\t\tfloat horizontalAperture = ").concat((10*(Math.abs(e.left)+Math.abs(e.right))).toPrecision(WK),"\n\t\t\tfloat verticalAperture = ").concat((10*(Math.abs(e.top)+Math.abs(e.bottom))).toPrecision(WK),'\n\t\t\ttoken projection = "orthographic"\n\t\t}\n\t\n\t'):'def Camera "'.concat(t,'"\n\t\t{\n\t\t\tmatrix4d xformOp:transform = ').concat(n,'\n\t\t\tuniform token[] xformOpOrder = ["xformOp:transform"]\n\t\n\t\t\tfloat2 clippingRange = (').concat(e.near.toPrecision(WK),", ").concat(e.far.toPrecision(WK),")\n\t\t\tfloat focalLength = ").concat(e.getFocalLength().toPrecision(WK),"\n\t\t\tfloat focusDistance = ").concat(e.focus.toPrecision(WK),"\n\t\t\tfloat horizontalAperture = ").concat(e.getFilmWidth().toPrecision(WK),'\n\t\t\ttoken projection = "perspective"\n\t\t\tfloat verticalAperture = ').concat(e.getFilmHeight().toPrecision(WK),"\n\t\t}\n\t\n\t")}var o$,s$=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},l$=!1,u$=!1,c$="#model-viewer-no-ar-fallback",h$=(o$=["quick-look","scene-viewer","webxr","none"],function(e){try{var t,n=vj(e),r=(n.length?n[0].terms:[]).filter((function(e){return e&&"ident"===e.type})).map((function(e){return e.value})).filter((function(e){return o$.indexOf(e)>-1})),i=new Set,a=(0,Ms.Z)(r);try{for(a.s();!(t=a.n()).done;){var o=t.value;i.add(o)}}catch(s){a.e(s)}finally{a.f()}return i}catch(l){}return new Set}),d$="quick-look",f$="scene-viewer",p$="webxr",v$="none",m$=Symbol("arButtonContainer"),g$=Symbol("enterARWithWebXR"),y$=Symbol("openSceneViewer"),A$=Symbol("openIOSARQuickLook"),x$=Symbol("canActivateAR"),b$=Symbol("arMode"),_$=Symbol("arModes"),w$=Symbol("arAnchor"),E$=Symbol("preload"),S$=Symbol("onARButtonContainerClick"),M$=Symbol("onARStatus"),C$=Symbol("onARTracking"),k$=Symbol("onARTap"),T$=Symbol("selectARMode"),I$=Symbol("triggerLoad"),B$=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},R$="auto",L$="auto",P$="eager",D$=Symbol("defaultProgressBarElement"),O$=Symbol("posterContainerElement"),F$=Symbol("defaultPosterElement"),N$=Symbol("shouldDismissPoster"),U$=Symbol("hidePoster"),Z$=Symbol("modelIsRevealed"),z$=Symbol("updateProgressBar"),H$=Symbol("ariaLabelCallToAction"),G$=Symbol("onProgress"),Q$=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},V$=Math.PI/32,j$={basis:[Ej(pj(V$,"rad"))],keywords:{auto:[null]}},W$=Symbol("autoRotateStartTime"),q$=Symbol("radiansPerSecond"),J$=Symbol("syncRotationRate"),X$=Symbol("onCameraChange"),Y$=function(e){var t,n,r,i=function(e,i){(0,Hn.Z)(o,e);var a=(0,Gn.Z)(o);function o(){var e;return(0,u.Z)(this,o),(e=a.apply(this,arguments))[t]=new Map,e[n]=function(t){t.forEach((function(t){t instanceof MutationRecord&&"childList"!==t.type||(t.addedNodes.forEach((function(t){e[qY](t)})),t.removedNodes.forEach((function(t){e[JY](t)})),e[IY]())}))},e[r]=new MutationObserver(e[jY]),e}return(0,c.Z)(o,[{key:"connectedCallback",value:function(){(0,Zn.Z)((0,zn.Z)(o.prototype),"connectedCallback",this).call(this);for(var e=0;e<this.children.length;++e)this[qY](this.children[e]);var t=self.ShadyDOM;null==t?this[WY].observe(this,{childList:!0}):this[WY]=t.observeChildren(this,this[jY])}},{key:"disconnectedCallback",value:function(){(0,Zn.Z)((0,zn.Z)(o.prototype),"disconnectedCallback",this).call(this);var e=self.ShadyDOM;null==e?this[WY].disconnect():e.unobserveChildren(this[WY])}},{key:i,value:function(e,t){(0,Zn.Z)((0,zn.Z)(o.prototype),BY,this).call(this,e,t);var n=this[TY],r=n.annotationRenderer,i=n.getCamera();n.shouldRender()&&(n.updateSurfaceHotspots(),n.updateHotspotsVisibility(i.position),r.domElement.style.display="",r.render(n,i))}},{key:"updateHotspot",value:function(e){var t=this[VY].get(e.name);null!=t&&(t.updatePosition(e.position),t.updateNormal(e.normal),t.surface=e.surface,this[IY]())}},{key:"queryHotspot",value:function(e){var t=this[VY].get(e);if(null==t)return null;var n=UY(t.position),r=UY(t.normal),i=t.facingCamera,a=this[TY],o=a.getCamera(),s=new Dd;s.setFromMatrixPosition(t.matrixWorld),s.project(o);var l=a.width/2,u=a.height/2;s.x=s.x*l+l,s.y=-s.y*u+u;var c=UY(new Dd(s.x,s.y,s.z));return Number.isFinite(c.x)&&Number.isFinite(c.y)?{position:n,normal:r,canvasPosition:c,facingCamera:i}:null}},{key:"positionAndNormalFromPoint",value:function(e,t){var n=this[TY],r=n.getNDC(e,t),i=n.positionAndNormalFromPoint(r);if(null==i)return null;XY.copy(n.target.matrixWorld).invert();var a=UY(i.position.applyMatrix4(XY)),o=UY(i.normal.transformDirection(XY)),s=null;return null!=i.uv&&(s=function(e){return{u:e.x,v:e.y,toString:function(){return"".concat(this.u," ").concat(this.v)}}}(i.uv)),{position:a,normal:o,uv:s}}},{key:"surfaceFromPoint",value:function(e,t){var n=this[TY],r=n.getNDC(e,t);return n.surfaceFromPoint(r)}},{key:qY,value:function(e){if(e instanceof HTMLElement&&0===e.slot.indexOf("hotspot")){var t=this[VY].get(e.slot);null!=t?t.increment():(t=new VX({name:e.slot,position:e.dataset.position,normal:e.dataset.normal,surface:e.dataset.surface}),this[VY].set(e.slot,t),this[TY].addHotspot(t)),this[TY].queueRender()}}},{key:JY,value:function(e){if(e instanceof HTMLElement){var t=this[VY].get(e.slot);t&&(t.decrement()&&(this[TY].removeHotspot(t),this[VY].delete(e.slot)),this[TY].queueRender())}}}]),o}(e,(t=VY,n=jY,r=WY,BY));return i}(function(e){var t,n,r,i=function(e,i){(0,Hn.Z)(l,e);var s=(0,Gn.Z)(l);function l(){var e;return(0,u.Z)(this,l),(e=s.apply(this,arguments))[t]=void 0,e[n]=null,e[r]=null,e.variantName=null,e.orientation="0 0 0",e.scale="1 1 1",e}return(0,c.Z)(l,[{key:"model",get:function(){return this[OX]}},{key:"availableVariants",get:function(){return this.model?this.model[kX]():[]}},{key:"originalGltfJson",get:function(){return this[DX]}},{key:i,value:function(){var e=this;return function(){e[IY]()}}},{key:NX,value:function(e){return e.encoding=uh,e.wrapS=Fu,e.wrapT=Fu,new xJ(this[FX](),e)}},{key:"createTexture",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"image/png",r=this[PY].textureUtils,e.next=4,r.loadImage(t);case 4:return(i=e.sent).userData.mimeType=n,e.abrupt("return",this[NX](i));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLottieTexture",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:1,r=this[PY].textureUtils,e.next=4,r.loadLottie(t,n);case 4:return i=e.sent,e.abrupt("return",this[NX](i));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createVideoTexture",value:function(e){var t=document.createElement("video");t.src=e,t.muted=!0,t.playsInline=!0,t.loop=!0,t.play();var n=new iA(t);return this[NX](n)}},{key:"createCanvasTexture",value:function(){var e=document.createElement("canvas"),t=new lA(e);return this[NX](t)}},{key:"updated",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,Zn.Z)((0,zn.Z)(l.prototype),"updated",this).call(this,t),!t.has("variantName")){e.next=12;break}if((n=this[DY].beginActivity())(.1),r=this[OX],i=this.variantName,null==r){e.next=11;break}return e.next=9,r[wX](i);case 9:this[IY](),this.dispatchEvent(new CustomEvent("variant-applied"));case 11:n(1);case 12:if(!t.has("orientation")&&!t.has("scale")){e.next=21;break}if(this.loaded){e.next=15;break}return e.abrupt("return");case 15:(o=this[TY]).applyTransform(),o.updateBoundingBox(),o.updateShadow(),this[PY].arRenderer.onUpdateScene(),this[IY]();case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:RY,value:function(){(0,Zn.Z)((0,zn.Z)(l.prototype),RY,this).call(this);var e=this[TY].currentGLTF;if(null!=e){var t=e.correlatedSceneGraph;null!=t&&e!==this[PX]&&(this[OX]=new RX(t,this[FX]()),this[DX]=JSON.parse(JSON.stringify(t.gltf))),"variants"in e.userData&&this.requestUpdate("variantName")}this[PX]=e}},{key:"exportScene",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this[TY],e.abrupt("return",new Promise(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(i,o){var s,l,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1},Object.assign(s,t),s.animations=n.animations,s.truncateDrawRange=!0,l=n.shadow,u=!1,null!=l&&(u=l.visible,l.visible=!1),e.next=9,r[OX][_X]();case 9:(new uV).register((function(e){return new ij(e)})).parse(n.model,(function(e){return i(new Blob([s.binary?e:JSON.stringify(e)],{type:s.binary?"application/octet-stream":"application/json"}))}),(function(){return o("glTF export failed")}),s),null!=l&&(l.visible=u);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"materialFromPoint",value:function(e,t){var n=this[OX];if(null==n)return null;var r=this[TY],i=r.getNDC(e,t),a=r.hitFromPoint(i);return null==a||null==a.face?null:n[EX](a)}}]),l}(e,(t=OX,n=PX,r=DX,FX));return LX([pH({type:String,attribute:"variant-name"})],i.prototype,"variantName",void 0),LX([pH({type:String,attribute:"orientation"})],i.prototype,"orientation",void 0),LX([pH({type:String,attribute:"scale"})],i.prototype,"scale",void 0),i}(function(e){var t,n,r,i=function(e,i){(0,Hn.Z)(o,e);var a=(0,Gn.Z)(o);function o(){var e;return(0,u.Z)(this,o),(e=a.apply(this,arguments)).autoRotate=!1,e.autoRotateDelay=3e3,e.rotationPerSecond="auto",e[t]=performance.now(),e[n]=0,e[r]=function(t){e.autoRotate&&"user-interaction"===t.detail.source&&(e[W$]=performance.now())},e}return(0,c.Z)(o,[{key:"connectedCallback",value:function(){(0,Zn.Z)((0,zn.Z)(o.prototype),"connectedCallback",this).call(this),this.addEventListener("camera-change",this[X$]),this[W$]=performance.now()}},{key:"disconnectedCallback",value:function(){(0,Zn.Z)((0,zn.Z)(o.prototype),"disconnectedCallback",this).call(this),this.removeEventListener("camera-change",this[X$]),this[W$]=performance.now()}},{key:"updated",value:function(e){(0,Zn.Z)((0,zn.Z)(o.prototype),"updated",this).call(this,e),e.has("autoRotate")&&(this[W$]=performance.now())}},{key:i,value:function(e){this[q$]=e[0]}},{key:BY,value:function(e,t){if((0,Zn.Z)((0,zn.Z)(o.prototype),BY,this).call(this,e,t),this.autoRotate&&this[FY]()&&!this[PY].isPresenting){var n=Math.min(t,e-this[W$]-this.autoRotateDelay);n>0&&(this[TY].yaw=this.turntableRotation+this[q$]*n*.001)}}},{key:"turntableRotation",get:function(){return this[TY].yaw}},{key:"resetTurntableRotation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this[TY].yaw=e}}]),o}(e,(t=W$,n=q$,J$));return r=X$,Q$([pH({type:Boolean,attribute:"auto-rotate"})],i.prototype,"autoRotate",void 0),Q$([pH({type:Number,attribute:"auto-rotate-delay"})],i.prototype,"autoRotateDelay",void 0),Q$([sW({intrinsics:j$,updateHandler:J$}),pH({type:String,attribute:"rotation-per-second"})],i.prototype,"rotationPerSecond",void 0),i}(function(e){var t,n,r,i=function(e,i){(0,Hn.Z)(l,e);var s=(0,Gn.Z)(l);function l(){var e;return(0,u.Z)(this,l),(e=s.apply(this,arguments)).environmentImage=null,e.skyboxImage=null,e.shadowIntensity=0,e.shadowSoftness=1,e.exposure=1,e[t]=null,e[n]=null,e[r]=null,e}return(0,c.Z)(l,[{key:"updated",value:function(e){(0,Zn.Z)((0,zn.Z)(l.prototype),"updated",this).call(this,e),e.has("shadowIntensity")&&(this[TY].setShadowIntensity(.5*this.shadowIntensity),this[IY]()),e.has("shadowSoftness")&&(this[TY].setShadowSoftness(this.shadowSoftness),this[IY]()),e.has("exposure")&&(this[TY].exposure=this.exposure,this[IY]()),(e.has("environmentImage")||e.has("skyboxImage"))&&this[NY]()&&this[WG]()}},{key:"hasBakedShadow",value:function(){return this[TY].bakedShadows.size>0}},{key:i,value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,i,o,s,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.skyboxImage,n=this.environmentImage,null!=this[qG]&&(this[qG](),this[qG]=null),null!=(r=this[PY].textureUtils)){e.next=5;break}return e.abrupt("return");case 5:return i=this[DY].beginActivity(),e.prev=6,e.next=9,r.generateEnvironmentMapAndSkybox(DG(t),n,(function(e){return i(UG(e,0,1))}));case 9:o=e.sent,s=o.environmentMap,l=o.skybox,this[VG]!==s&&(this[VG]=s,this.dispatchEvent(new CustomEvent("environment-change"))),this[jG]=null!=l?l.name===s.name?s:l:null,this[TY].setEnvironmentAndSkybox(this[VG],this[jG]),this[TY].dispatchEvent({type:"envmap-update"}),e.next=23;break;case 18:if(e.prev=18,e.t0=e.catch(6),!(e.t0 instanceof Error)){e.next=23;break}throw this[TY].setEnvironmentAndSkybox(null,null),e.t0;case 23:return e.prev=23,i(1),e.finish(23);case 26:case"end":return e.stop()}}),e,this,[[6,18,23,26]])})));return function(){return e.apply(this,arguments)}}()}]),l}(e,(t=VG,n=jG,r=qG,WG));return QG([pH({type:String,attribute:"environment-image"})],i.prototype,"environmentImage",void 0),QG([pH({type:String,attribute:"skybox-image"})],i.prototype,"skyboxImage",void 0),QG([pH({type:Number,attribute:"shadow-intensity"})],i.prototype,"shadowIntensity",void 0),QG([pH({type:Number,attribute:"shadow-softness"})],i.prototype,"shadowSoftness",void 0),QG([pH({type:Number})],i.prototype,"exposure",void 0),i}(function(e){var t,n,r,i,l,h,d,f,p,v,m,g,y,A,x,b,_,w=function(e,w){(0,Hn.Z)(S,e);var E=(0,Gn.Z)(S);function S(){var e;return(0,u.Z)(this,S),(e=E.apply(this,arguments)).cameraControls=!1,e.cameraOrbit=pW,e.cameraTarget="auto auto auto",e.fieldOfView="auto",e.minCameraOrbit="auto",e.maxCameraOrbit="auto",e.minFieldOfView="auto",e.maxFieldOfView="auto",e.interactionPromptThreshold=3e3,e.interactionPrompt=gW,e.interactionPromptStyle=AW,e.orbitSensitivity=1,e.touchAction=xW,e.disableZoom=!1,e.disablePan=!1,e.disableTap=!1,e.interpolationDecay=50,e[t]=e.shadowRoot.querySelector(".interaction-prompt"),e[n]=e.shadowRoot.querySelector("#prompt"),e[r]=[e.shadowRoot.querySelector("#finger0"),e.shadowRoot.querySelector("#finger1")],e[i]=e.shadowRoot.querySelector(".pan-target"),e[l]=0,e[h]=1/0,e[d]=!1,e[f]=!1,e[p]=uq.AUTOMATIC,e[v]=new cq(e[TY].camera,e[CY],e[TY]),e[m]=new Z_,e[g]=!1,e[y]=!1,e[A]=!1,e[x]=function(){var t=e[BW].changeSource;e[jW]=t,t===uq.USER_INTERACTION&&(e[GW]=!0,e[OW]())},e[b]=function(){e[FW](),e[IY]();var t=e[BW].changeSource;e.dispatchEvent(new CustomEvent("camera-change",{detail:{source:t}}))},e[_]=function(t){"pointer-change-start"===t.type?e[MY].classList.add("pointer-tumbling"):e[MY].classList.remove("pointer-tumbling")},e}return(0,c.Z)(S,[{key:"inputSensitivity",get:function(){return this[BW].inputSensitivity},set:function(e){this[BW].inputSensitivity=e}},{key:"getCameraOrbit",value:function(){var e=this[WW];return{theta:e.theta,phi:e.phi,radius:e.radius,toString:function(){return"".concat(this.theta,"rad ").concat(this.phi,"rad ").concat(this.radius,"m")}}}},{key:"getCameraTarget",value:function(){return UY(this[PY].isPresenting?this[PY].arRenderer.target:this[TY].getTarget())}},{key:"getFieldOfView",value:function(){return this[BW].getFieldOfView()}},{key:"getMinimumFieldOfView",value:function(){return this[BW].options.minimumFieldOfView}},{key:"getMaximumFieldOfView",value:function(){return this[BW].options.maximumFieldOfView}},{key:"getIdealAspect",value:function(){return this[TY].idealAspect}},{key:"jumpCameraToGoal",value:function(){this[qW]=!0,this.requestUpdate(qW,!1)}},{key:"resetInteractionPrompt",value:function(){this[VW]=0,this[QW]=1/0,this[GW]=!1,this[HW]=this.interactionPrompt===gW&&this.cameraControls}},{key:"zoom",value:function(e){var t=new WheelEvent("wheel",{deltaY:-30*e});this[CY].dispatchEvent(t)}},{key:"connectedCallback",value:function(){(0,Zn.Z)((0,zn.Z)(S.prototype),"connectedCallback",this).call(this),this[BW].addEventListener("user-interaction",this[UW]),this[BW].addEventListener("pointer-change-start",this[zW]),this[BW].addEventListener("pointer-change-end",this[zW])}},{key:"disconnectedCallback",value:function(){(0,Zn.Z)((0,zn.Z)(S.prototype),"disconnectedCallback",this).call(this),this[BW].removeEventListener("user-interaction",this[UW]),this[BW].removeEventListener("pointer-change-start",this[zW]),this[BW].removeEventListener("pointer-change-end",this[zW])}},{key:"updated",value:function(e){var t=this;(0,Zn.Z)((0,zn.Z)(S.prototype),"updated",this).call(this,e);var n=this[BW],r=this[TY];if(e.has("cameraControls")&&(this.cameraControls?(n.enableInteraction(),this.interactionPrompt===gW&&(this[HW]=!0)):(n.disableInteraction(),this[OW]()),this[CY].setAttribute("aria-label",this[AY])),e.has("disableZoom")&&(n.disableZoom=this.disableZoom),e.has("disablePan")&&(n.enablePan=!this.disablePan),e.has("disableTap")&&(n.enableTap=!this.disableTap),(e.has("interactionPrompt")||e.has("cameraControls")||e.has("src"))&&(this.interactionPrompt===gW&&this.cameraControls&&!this[GW]?this[HW]=!0:this[OW]()),e.has("interactionPromptStyle")&&(this[PW].style.opacity=this.interactionPromptStyle==yW?"1":"0"),e.has("touchAction")){var i=this.touchAction;n.applyOptions({touchAction:i}),n.updateTouchActionStyle()}e.has("orbitSensitivity")&&(n.orbitSensitivity=this.orbitSensitivity),e.has("interpolationDecay")&&(n.setDamperDecayTime(this.interpolationDecay),r.setTargetDamperDecayTime(this.interpolationDecay)),!0===this[qW]&&Promise.resolve().then((function(){n.jumpToGoal(),r.jumpToGoal(),t[ZW](),t[qW]=!1}))}},{key:"updateFraming",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this[TY],n=t.adjustedFoV(t.framedFoVDeg),e.next=4,t.updateFraming();case 4:return r=t.adjustedFoV(t.framedFoVDeg),i=this[BW].getFieldOfView()/n,this[BW].setFieldOfView(r*i),this[XW]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),e.next=15,this.updateComplete;case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"interact",value:function(e,t,n){var r=this,i=this[CY],a=this[DW];if("1"!==a[0].style.opacity){var o=new Array;o.push({x:cW(t.x),y:cW(t.y)});var l=[{x:o[0].x(0),y:o[0].y(0)}];null!=n&&(o.push({x:cW(n.x),y:cW(n.y)}),l.push({x:o[1].x(0),y:o[1].y(0)}));var u=performance.now(),c=this[TY],h=c.width,d=c.height,f=function(e){var t,n=(0,Ms.Z)(l.entries());try{for(n.s();!(t=n.n()).done;){var r=(0,s.Z)(t.value,2),o=r[0],u=r[1],c=a[o].style;c.transform="translateX(".concat(h*u.x,"px) translateY(").concat(d*u.y,"px)"),"pointerdown"===e?c.opacity="1":"pointerup"===e&&(c.opacity="0");var f={pointerId:o-5678,pointerType:"touch",target:i,clientX:h*u.x,clientY:d*u.y,altKey:!0};i.dispatchEvent(new PointerEvent(e,f))}}catch(p){n.e(p)}finally{n.f()}},p=function(){var e=0;"hidden"===document.visibilityState?e=performance.now()-u:u=performance.now()-e};document.addEventListener("visibilitychange",p),f("pointerdown"),this[jW]=uq.AUTOMATIC,requestAnimationFrame((function t(){var n=r[jW];if(n!==uq.AUTOMATIC||!i.isConnected){var a,c=(0,Ms.Z)(r[DW]);try{for(c.s();!(a=c.n()).done;){a.value.style.opacity="0"}}catch(A){c.e(A)}finally{c.f()}return f("pointercancel"),r.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:n}})),void document.removeEventListener("visibilitychange",p)}var h,d=Math.min(1,(performance.now()-u)/e),v=(0,Ms.Z)(l.entries());try{for(v.s();!(h=v.n()).done;){var m=(0,s.Z)(h.value,2),g=m[0],y=m[1];y.x=o[g].x(d),y.y=o[g].y(d)}}catch(A){v.e(A)}finally{v.f()}f("pointermove"),d<1?requestAnimationFrame(t):(f("pointerup"),r.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:uq.AUTOMATIC}})),document.removeEventListener("visibilitychange",p))}))}else console.warn("interact() failed because an existing interaction is running.")}},{key:w,value:function(e){var t=this[BW],n=this[TY];n.framedFoVDeg=180*e[0]/Math.PI,t.changeSource=uq.NONE,t.setFieldOfView(n.adjustedFoV(n.framedFoVDeg)),this[UW]()}},{key:YW,value:function(e){var t=this[BW];if(this[XW]){var n=this.getCameraOrbit(),r=n.theta,i=n.phi;e[0]=r,e[1]=i,this[XW]=!1}t.changeSource=uq.NONE,t.setOrbit(e[0],e[1],e[2]),this[UW]()}},{key:eq,value:function(e){this[BW].applyOptions({minimumAzimuthalAngle:e[0],minimumPolarAngle:e[1],minimumRadius:e[2]}),this.jumpCameraToGoal()}},{key:tq,value:function(e){this[BW].applyOptions({maximumAzimuthalAngle:e[0],maximumPolarAngle:e[1],maximumRadius:e[2]}),this[NW](e[2]),this.jumpCameraToGoal()}},{key:nq,value:function(e){this[BW].applyOptions({minimumFieldOfView:180*e[0]/Math.PI}),this.jumpCameraToGoal()}},{key:rq,value:function(e){var t=this[TY].adjustedFoV(180*e[0]/Math.PI);this[BW].applyOptions({maximumFieldOfView:t}),this.jumpCameraToGoal()}},{key:$W,value:function(e){var t=(0,s.Z)(e,3),n=t[0],r=t[1],i=t[2];this[PY].arRenderer.isPresenting||this[TY].setTarget(n,r,i),this[BW].changeSource=uq.NONE,this[PY].arRenderer.updateTarget(),this[UW]()}},{key:BY,value:function(e,t){if((0,Zn.Z)((0,zn.Z)(S.prototype),BY,this).call(this,e,t),!this[PY].isPresenting&&this[FY]()){var n=this[BW],r=this[TY],i=performance.now();if(this[HW]&&this.loaded&&i>this[wY]+this.interactionPromptThreshold&&(this[HW]=!1,this[QW]=i,this[LW].classList.add("visible")),isFinite(this[QW])&&this.interactionPromptStyle===AW){var a=(i-this[QW])/5e3%1,o=dW(a),s=fW(a);if(this[PW].style.opacity="".concat(s),o!==this[VW]){var l=o*r.width*.05,u=(o-this[VW])*Math.PI/16;this[PW].style.transform="translateX(".concat(l,"px)"),n.changeSource=uq.AUTOMATIC,n.adjustOrbit(u,0,0),this[VW]=o}}var c=n.update(e,t),h=r.updateTarget(t);(c||h)&&this[ZW]()}}},{key:OW,value:function(){this[HW]=!1,this[LW].classList.remove("visible"),this[QW]=1/0}},{key:NW,value:function(e){var t=2*Math.max(this[TY].boundingSphere.radius,e);this[BW].updateNearFar(0,t)}},{key:FW,value:function(){var e=this[BW].getCameraSpherical(this[WW]),t=e.theta,n=e.phi,r=(4+Math.floor((t%IW+TW)/CW))%4,i=Math.floor(n/kW),a=vW[r],o=mW[i];this[_Y]("View from stage ".concat(o).concat(a))}},{key:AY,get:function(){return(0,Zn.Z)((0,zn.Z)(S.prototype),AY,this).replace(/\.$/,"")+(this.cameraControls?". Use mouse, touch or arrow keys to move.":"")}},{key:LY,value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this[BW],r=this[TY],i=r.adjustedFoV(r.framedFoVDeg),(0,Zn.Z)((0,zn.Z)(S.prototype),LY,this).call(this,t),o=r.adjustedFoV(r.framedFoVDeg)/i,s=n.getFieldOfView()*(isFinite(o)?o:1),n.updateAspect(this[TY].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),e.next=10,this.updateComplete;case 10:this[BW].setFieldOfView(s),this.jumpCameraToGoal();case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:RY,value:function(){(0,Zn.Z)((0,zn.Z)(S.prototype),RY,this).call(this),this[JW]?this[XW]=!0:this[JW]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}}]),S}(e,(t=LW,n=PW,r=DW,i=RW,l=VW,h=QW,d=GW,f=HW,p=jW,v=BW,m=WW,g=qW,y=JW,A=XW,KW));return x=UW,b=ZW,_=zW,hW([pH({type:Boolean,attribute:"camera-controls"})],w.prototype,"cameraControls",void 0),hW([sW({intrinsics:wW,observeEffects:!0,updateHandler:YW}),pH({type:String,attribute:"camera-orbit",hasChanged:function(){return!0}})],w.prototype,"cameraOrbit",void 0),hW([sW({intrinsics:MW,observeEffects:!0,updateHandler:$W}),pH({type:String,attribute:"camera-target",hasChanged:function(){return!0}})],w.prototype,"cameraTarget",void 0),hW([sW({intrinsics:bW,observeEffects:!0,updateHandler:KW}),pH({type:String,attribute:"field-of-view",hasChanged:function(){return!0}})],w.prototype,"fieldOfView",void 0),hW([sW({intrinsics:EW,updateHandler:eq}),pH({type:String,attribute:"min-camera-orbit",hasChanged:function(){return!0}})],w.prototype,"minCameraOrbit",void 0),hW([sW({intrinsics:SW,updateHandler:tq}),pH({type:String,attribute:"max-camera-orbit",hasChanged:function(){return!0}})],w.prototype,"maxCameraOrbit",void 0),hW([sW({intrinsics:_W,updateHandler:nq}),pH({type:String,attribute:"min-field-of-view",hasChanged:function(){return!0}})],w.prototype,"minFieldOfView",void 0),hW([sW({intrinsics:bW,updateHandler:rq}),pH({type:String,attribute:"max-field-of-view",hasChanged:function(){return!0}})],w.prototype,"maxFieldOfView",void 0),hW([pH({type:Number,attribute:"interaction-prompt-threshold"})],w.prototype,"interactionPromptThreshold",void 0),hW([pH({type:String,attribute:"interaction-prompt"})],w.prototype,"interactionPrompt",void 0),hW([pH({type:String,attribute:"interaction-prompt-style"})],w.prototype,"interactionPromptStyle",void 0),hW([pH({type:Number,attribute:"orbit-sensitivity"})],w.prototype,"orbitSensitivity",void 0),hW([pH({type:String,attribute:"touch-action"})],w.prototype,"touchAction",void 0),hW([pH({type:Boolean,attribute:"disable-zoom"})],w.prototype,"disableZoom",void 0),hW([pH({type:Boolean,attribute:"disable-pan"})],w.prototype,"disablePan",void 0),hW([pH({type:Boolean,attribute:"disable-tap"})],w.prototype,"disableTap",void 0),hW([pH({type:Number,attribute:"interpolation-decay"})],w.prototype,"interpolationDecay",void 0),w}(function(e){var t,n,r,i,s,l,h,d,f,p,v=function(e,v){(0,Hn.Z)(g,e);var m=(0,Gn.Z)(g);function g(){var e;return(0,u.Z)(this,g),(e=m.apply(this,arguments)).ar=!1,e.arScale="auto",e.arPlacement="floor",e.arModes="webxr scene-viewer quick-look",e.iosSrc=null,e.xrEnvironment=!1,e[t]=!1,e[n]=e.shadowRoot.querySelector(".ar-button"),e[r]=document.createElement("a"),e[i]=new Set,e[s]=v$,e[l]=!1,e[h]=function(t){t.preventDefault(),e.activateAR()},e[d]=function(t){var n=t.status;n!==hq&&e[PY].arRenderer.presentedScene!==e[TY]||(e.setAttribute("ar-status",n),e.dispatchEvent(new CustomEvent("ar-status",{detail:{status:n}})),n===hq?e.removeAttribute("ar-tracking"):n===dq&&e.setAttribute("ar-tracking",vq))},e[f]=function(t){var n=t.status;e.setAttribute("ar-tracking",n),e.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:n}}))},e[p]=function(t){"_apple_ar_quicklook_button_tapped"==t.data&&e.dispatchEvent(new CustomEvent("quick-look-button-tapped"))},e}return(0,c.Z)(g,[{key:"canActivateAR",get:function(){return this[b$]!==v$}},{key:"connectedCallback",value:function(){(0,Zn.Z)((0,zn.Z)(g.prototype),"connectedCallback",this).call(this),this[PY].arRenderer.addEventListener("status",this[M$]),this.setAttribute("ar-status",hq),this[PY].arRenderer.addEventListener("tracking",this[C$]),this[w$].addEventListener("message",this[k$])}},{key:"disconnectedCallback",value:function(){(0,Zn.Z)((0,zn.Z)(g.prototype),"disconnectedCallback",this).call(this),this[PY].arRenderer.removeEventListener("status",this[M$]),this[PY].arRenderer.removeEventListener("tracking",this[C$]),this[w$].removeEventListener("message",this[k$])}},{key:"update",value:function(e){(0,Zn.Z)((0,zn.Z)(g.prototype),"update",this).call(this,e),e.has("arScale")&&(this[TY].canScale="fixed"!==this.arScale),e.has("arPlacement")&&(this[TY].updateShadow(),this[IY]()),e.has("arModes")&&(this[_$]=h$(this.arModes)),(e.has("ar")||e.has("arModes")||e.has("src")||e.has("iosSrc"))&&this[T$]()}},{key:"activateAR",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this[b$],e.next=e.t0===d$?3:e.t0===p$?5:e.t0===f$?8:10;break;case 3:return this[A$](),e.abrupt("break",12);case 5:return e.next=7,this[g$]();case 7:return e.abrupt("break",12);case 8:return this[y$](),e.abrupt("break",12);case 10:return console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities"),e.abrupt("break",12);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:v,value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v$,!this.ar){e.next=33;break}if(null==this.src){e.next=32;break}n=(0,Ms.Z)(this[_$]),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=24;break}if(i=r.value,e.t0="webxr"===i&&CG&&!l$,!e.t0){e.next=13;break}return e.next=12,this[PY].arRenderer.supportsPresentation();case 12:e.t0=e.sent;case 13:if(!e.t0){e.next=16;break}return t=p$,e.abrupt("break",24);case 16:if("scene-viewer"!==i||!RG||u$){e.next=19;break}return t=f$,e.abrupt("break",24);case 19:if("quick-look"!==i||!PG){e.next=22;break}return t=d$,e.abrupt("break",24);case 22:e.next=6;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(4),n.e(e.t1);case 29:return e.prev=29,n.f(),e.finish(29);case 32:t===v$&&null!=this.iosSrc&&PG&&(t=d$);case 33:t!==v$?(this[m$].classList.add("enabled"),this[m$].addEventListener("click",this[S$])):this[m$].classList.contains("enabled")&&(this[m$].removeEventListener("click",this[S$]),this[m$].classList.remove("enabled"),o=pq,this.setAttribute("ar-status",o),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:o}}))),this[b$]=t;case 35:case"end":return e.stop()}}),e,this,[[4,26,29,32]])})));return function(){return e.apply(this,arguments)}}()},{key:g$,value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Attempting to present in AR with WebXR..."),e.next=3,this[I$]();case 3:return e.prev=3,this[m$].removeEventListener("click",this[S$]),(t=this[PY].arRenderer).placeOnWall="wall"===this.arPlacement,e.next=9,t.present(this[TY],this.xrEnvironment);case 9:e.next=22;break;case 11:return e.prev=11,e.t0=e.catch(3),console.warn("Error while trying to present in AR with WebXR"),console.error(e.t0),e.next=17,this[PY].arRenderer.stopPresenting();case 17:return l$=!0,console.warn("Falling back to next ar-mode"),e.next=21,this[T$]();case 21:this.activateAR();case 22:return e.prev=22,this[T$](),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[3,11,22,25]])})));return function(){return e.apply(this,arguments)}}()},{key:I$,value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loaded){e.next=6;break}return this[E$]=!0,this[EY](),e.next=5,GG(this,"load");case 5:this[E$]=!1;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:NY,value:function(){return(0,Zn.Z)((0,zn.Z)(g.prototype),NY,this).call(this)||this[E$]}},{key:y$,value:function(){var e=this,t=self.location.toString(),n=new URL(t),r=new URL(this.src,t);r.hash&&(r.hash="");var i=new URLSearchParams(r.search);if(n.hash=c$,i.set("mode","ar_preferred"),i.has("disable_occlusion")||i.set("disable_occlusion","true"),"fixed"===this.arScale&&i.set("resizable","false"),"wall"===this.arPlacement&&i.set("enable_vertical_placement","true"),i.has("sound")){var a=new URL(i.get("sound"),t);i.set("sound",a.toString())}if(i.has("link")){var o=new URL(i.get("link"),t);i.set("link",o.toString())}var s="intent://arvr.google.com/scene-viewer/1.0?".concat(i.toString()+"&file="+encodeURIComponent(r.toString()),"#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=").concat(encodeURIComponent(n.toString()),";end;");self.addEventListener("hashchange",(function(){self.location.hash===c$&&(u$=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),e[T$]())}),{once:!0}),this[w$].setAttribute("href",s),console.log("Attempting to present in AR with Scene Viewer..."),this[w$].click()}},{key:A$,value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,i,o,s,l,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!this.iosSrc,this[m$].classList.remove("enabled"),!t){e.next=8;break}return e.next=5,this.prepareUSDZ();case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=this.iosSrc;case 9:n=e.t0,r=new URL(n,self.location.toString()),t&&(i=self.location.toString(),o=new URL(i),(s=new URL(this.src,o)).hash&&(r.hash=s.hash)),"fixed"===this.arScale&&(r.hash&&(r.hash+="&"),r.hash+="allowsContentScaling=0"),(l=this[w$]).setAttribute("rel","ar"),u=document.createElement("img"),l.appendChild(u),l.setAttribute("href",r.toString()),t&&l.setAttribute("download","model.usdz"),l.style.display="none",l.isConnected||this.shadowRoot.appendChild(l),console.log("Attempting to present in AR with Quick Look..."),l.click(),l.removeChild(u),t&&URL.revokeObjectURL(n),this[m$].classList.add("enabled");case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"prepareUSDZ",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,i,o,s,l,u,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this[DY].beginActivity(),e.next=3,this[I$]();case 3:if(n=this[TY],r=n.model,i=n.shadow,null!=r){e.next=6;break}return e.abrupt("return","");case 6:return o=!1,null!=i&&(o=i.visible,i.visible=!1),t(.2),s=new VK,e.next=12,s.parse(r);case 12:return l=e.sent,u=new Blob([l],{type:"model/vnd.usdz+zip"}),c=URL.createObjectURL(u),t(1),null!=i&&(i.visible=o),e.abrupt("return",c);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),g}(e,(t=x$,n=m$,r=w$,i=_$,s=b$,l=E$,h=S$,d=M$,f=C$,p=k$,T$));return s$([pH({type:Boolean,attribute:"ar"})],v.prototype,"ar",void 0),s$([pH({type:String,attribute:"ar-scale"})],v.prototype,"arScale",void 0),s$([pH({type:String,attribute:"ar-placement"})],v.prototype,"arPlacement",void 0),s$([pH({type:String,attribute:"ar-modes"})],v.prototype,"arModes",void 0),s$([pH({type:String,attribute:"ios-src"})],v.prototype,"iosSrc",void 0),s$([pH({type:Boolean,attribute:"xr-environment"})],v.prototype,"xrEnvironment",void 0),v}(function(e){var t,n,r,i,s,l,h,d,f=function(e,f){(0,Hn.Z)(v,e);var p=(0,Gn.Z)(v);function v(){var e;(0,u.Z)(this,v);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];(e=p.call.apply(p,[this].concat(o))).poster=null,e.reveal=R$,e.loading=L$,e[t]=!1,e[n]=!1,e[r]=e.shadowRoot.querySelector(".slot.poster"),e[i]=e.shadowRoot.querySelector("#default-poster"),e[s]=e.shadowRoot.querySelector("#default-progress-bar > .bar"),e[l]=e[F$].getAttribute("aria-label"),e[h]=function(e,t){var n=null,r=function(){null==n&&(e.apply(void 0,arguments),n=self.setTimeout((function(){return n=null}),t))};return r.flush=function(){null!=n&&(self.clearTimeout(n),n=null)},r}((function(t){var n=e[D$].parentNode;requestAnimationFrame((function(){e[D$].style.transform="scaleX(".concat(t,")"),0===t&&(n.removeChild(e[D$]),n.appendChild(e[D$])),1===t?e[D$].classList.add("hide"):e[D$].classList.remove("hide")}))}),100),e[d]=function(t){var n=t.detail.totalProgress;1===n&&(e[z$].flush(),e.loaded&&(e[N$]||e.reveal===R$)&&e[U$]()),e[z$](n),e.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:n}}))};var f=self.ModelViewerElement||{},m=f.dracoDecoderLocation||"https://www.gstatic.com/draco/versioned/decoders/1.5.6/";$Q.setDRACODecoderLocation(m);var g=f.ktx2TranscoderLocation||"https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/";$Q.setKTX2TranscoderLocation(g),f.meshoptDecoderLocation&&$Q.setMeshoptDecoderLocation(f.meshoptDecoderLocation);var y=f.lottieLoaderLocation||"https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js";return Jq.singleton.textureUtils.lottieLoaderUrl=y,e}return(0,c.Z)(v,[{key:"dismissPoster",value:function(){this.loaded?this[U$]():(this[N$]=!0,this[EY]())}},{key:"showPoster",value:function(){var e=this[O$];if(!e.classList.contains("show")){e.classList.add("show"),this[CY].classList.remove("show");var t=this[F$];t.removeAttribute("tabindex"),t.removeAttribute("aria-hidden");var n=this.modelIsVisible;this[Z$]=!1,this[yY](n)}}},{key:"getDimensions",value:function(){return UY(this[TY].size)}},{key:"getBoundingBoxCenter",value:function(){return UY(this[TY].boundingBox.getCenter(new Dd))}},{key:"connectedCallback",value:function(){(0,Zn.Z)((0,zn.Z)(v.prototype),"connectedCallback",this).call(this),this.loaded||this.showPoster(),this[DY].addEventListener("progress",this[G$])}},{key:"disconnectedCallback",value:function(){(0,Zn.Z)((0,zn.Z)(v.prototype),"disconnectedCallback",this).call(this),this[DY].removeEventListener("progress",this[G$])}},{key:"updated",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,Zn.Z)((0,zn.Z)(v.prototype),"updated",this).call(this,t),t.has("poster")&&null!=this.poster&&(this[F$].style.backgroundImage="url(".concat(this.poster,")")),t.has("alt")&&this[F$].setAttribute("aria-label",this[xY]),(t.has("reveal")||t.has("loading"))&&this[EY]();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:f,value:function(){return!!this.src&&(this[N$]||this.loading===P$||this.reveal===R$&&this[gY])}},{key:U$,value:function(){this[N$]=!1;var e=this[O$];if(e.classList.contains("show")){e.classList.remove("show"),this[CY].classList.add("show");var t=this.modelIsVisible;this[Z$]=!0,this[yY](t);var n=this.getRootNode();n&&n.activeElement===this&&this[CY].focus();var r=this[F$];r.setAttribute("aria-hidden","true"),r.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}}},{key:FY,value:function(){return(0,Zn.Z)((0,zn.Z)(v.prototype),FY,this).call(this)&&this[Z$]}}],[{key:"dracoDecoderLocation",get:function(){return $Q.getDRACODecoderLocation()},set:function(e){$Q.setDRACODecoderLocation(e)}},{key:"ktx2TranscoderLocation",get:function(){return $Q.getKTX2TranscoderLocation()},set:function(e){$Q.setKTX2TranscoderLocation(e)}},{key:"meshoptDecoderLocation",get:function(){return $Q.getMeshoptDecoderLocation()},set:function(e){$Q.setMeshoptDecoderLocation(e)}},{key:"lottieLoaderLocation",get:function(){return Jq.singleton.textureUtils.lottieLoaderUrl},set:function(e){Jq.singleton.textureUtils.lottieLoaderUrl=e}},{key:"mapURLs",value:function(e){Jq.singleton.loader[XQ].manager.setURLModifier(e)}}]),v}(e,(t=Z$,n=N$,r=O$,i=F$,s=D$,l=H$,h=z$,d=G$,NY));return B$([pH({type:String})],f.prototype,"poster",void 0),B$([pH({type:String})],f.prototype,"reveal",void 0),B$([pH({type:String})],f.prototype,"loading",void 0),f}(function(e){var t,n=function(e,n){(0,Hn.Z)(i,e);var r=(0,Gn.Z)(i);function i(){var e;(0,u.Z)(this,i);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=r.call(this,a)).autoplay=!1,e.animationName=void 0,e.animationCrossfadeDuration=300,e[t]=!0,e[TY].subscribeMixerEvent("loop",(function(t){var n=t.action._loopCount;e.dispatchEvent(new CustomEvent("loop",{detail:{count:n}}))})),e[TY].subscribeMixerEvent("finished",(function(){e[GY]=!0,e.dispatchEvent(new CustomEvent("finished"))})),e}return(0,c.Z)(i,[{key:"availableAnimations",get:function(){return this.loaded?this[TY].animationNames:[]}},{key:"duration",get:function(){return this[TY].duration}},{key:"paused",get:function(){return this[GY]}},{key:"currentTime",get:function(){return this[TY].animationTime},set:function(e){this[TY].animationTime=e,this[IY]()}},{key:"timeScale",get:function(){return this[TY].animationTimeScale},set:function(e){this[TY].animationTimeScale=e}},{key:"pause",value:function(){this[GY]||(this[GY]=!0,this.dispatchEvent(new CustomEvent("pause")))}},{key:"play",value:function(e){this.availableAnimations.length>0&&(this[GY]=!1,this[HY](e),this.dispatchEvent(new CustomEvent("play")))}},{key:n,value:function(){(0,Zn.Z)((0,zn.Z)(i.prototype),RY,this).call(this),this[GY]=!0,null!=this.animationName&&this[HY](),this.autoplay&&this.play()}},{key:BY,value:function(e,t){(0,Zn.Z)((0,zn.Z)(i.prototype),BY,this).call(this,e,t),this[GY]||!this[FY]()&&!this[PY].isPresenting||(this[TY].updateAnimation(t/1e3),this[IY]())}},{key:"updated",value:function(e){(0,Zn.Z)((0,zn.Z)(i.prototype),"updated",this).call(this,e),e.has("autoplay")&&this.autoplay&&this.play(),e.has("animationName")&&this[HY]()}},{key:HY,value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QY,n=null!==(e=t.repetitions)&&void 0!==e?e:1/0,r=t.pingpong?Xc:1===n?qc:Jc;this[TY].playAnimation(this.animationName,this.animationCrossfadeDuration/1e3,r,n),this[GY]&&(this[TY].updateAnimation(0),this[IY]())}}]),i}(e,(t=GY,RY));return zY([pH({type:Boolean})],n.prototype,"autoplay",void 0),zY([pH({type:String,attribute:"animation-name"})],n.prototype,"animationName",void 0),zY([pH({type:Number,attribute:"animation-crossfade-duration"})],n.prototype,"animationCrossfadeDuration",void 0),n}(ZY))))))));customElements.define("model-viewer",Y$);var K$=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,i,o,s,l,u=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:new Ug,n=u.length>1&&void 0!==u[1]?u[1]:"bohemwhatever",r=t.clone(!0),i=new VK,(o=new Yg).updateWorldMatrix(!1,!0),r.rotation.set(-90*Qw,0,0),s=new qp(r.children[0].geometry,r.children[0].material),o.add(s),(l=o.children[0]).rotation.set(-90*Qw,0,0),o.updateMatrixWorld(!0),console.log("objRef",l),e.next=15,i.parse(o);case 15:$$(e.sent,"".concat(n,".usdz"));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function $$(e,t){!function(e,t){var n=document.createElement("a");n.setAttribute("rel","ar"),n.appendChild(document.createElement("img")),n.setAttribute("href",URL.createObjectURL(e)),n.download=t,n.click()}(new Blob([e],{type:"application/zip"}),t)}var e0,t0=function(){var e=sz(pE),n=(0,t.useState)(0),r=(0,s.Z)(n,2),i=r[0],a=r[1],o=(0,t.useState)(0),l=(0,s.Z)(o,2),u=l[0],c=l[1],h=(0,t.useState)(!1),d=(0,s.Z)(h,2),f=d[0],p=d[1],v=(0,t.useRef)(0),m=(0,t.useState)(null),g=(0,s.Z)(m,2),y=(g[0],g[1],(0,t.useRef)(0)),A=function(e){y.current=e};(0,t.useEffect)((function(){window.domLayer.setProductLayer=function(t,n){a(t),A(n),x(t,n,e)},window.domLayer.setRoomNavigator=function(e,t){c(e),A(t)}}),[]);var x=function(e,t,n){if(e){var r=xE("ikas-urunler").response;console.log(y);var i,a=r.find((function(e){return e.Slug==t}));v.current=a||r[0],v.current.Marka=v.current.Marka.toLocaleUpperCase(),document.querySelector("div.selectors.domSelector").addEventListener("transitionend",i=function(e){document.querySelector("div.selectors.domSelector").removeEventListener("transitionend",i),console.log(e,"domselectorTrans",v.current.Slug);var t=v.current.Slug;console.log(t,"transendSTATE")})}};return(0,BE.jsxs)(BE.Fragment,{children:[(0,BE.jsxs)("div",{className:"selectors domSelector ballerAnim "+(i?"":"hidden ")+(f?"examineMode ":""),children:[(0,BE.jsx)("div",{className:"row",children:(0,BE.jsx)("h1",{children:v.current.Marka})}),(0,BE.jsx)("div",{className:"row",children:(0,BE.jsx)("h2",{children:v.current["\u0130sim"]})}),(0,BE.jsx)("div",{className:"row",children:(0,BE.jsx)("article",{dangerouslySetInnerHTML:{__html:v.current["A\xe7\u0131klama"]}})}),(0,BE.jsx)("div",{className:"row",children:(0,BE.jsx)("a",{className:"visitSite",onClick:function(){},children:"Sitede G\xf6r"})})]}),(0,BE.jsx)("div",{className:"selectors domSelector2 ballerAnim "+(u?"":"hidden "),children:(0,BE.jsx)("span",{style:{backgroundColor:"#ababab"},children:"hello domselector2"})}),(0,BE.jsxs)("div",{className:"domSelectorBottomTab ballerAnim "+(i?"":"hiddenBottom "),children:[(0,BE.jsxs)("div",{id:"goBackBtn",className:"BottomTabButton touchableFeedback "+(f?"examineMode ":""),onClick:function(){return pE.productLayerActive=!1},children:[(0,BE.jsx)("svg",{viewBox:"0 0 21 20",xmlns:"http://www.w3.org/2000/svg",children:(0,BE.jsx)("path",{d:"M4.63959 5.38206H13.7812C17.7681 5.38206 21 8.6544 21 12.691C21 16.7277 17.7681 20 13.7812 20H9.18398C8.4591 20 7.87148 19.405 7.87148 18.6711C7.87148 17.9372 8.4591 17.3422 9.18398 17.3422H13.7812C16.3183 17.3422 18.375 15.2598 18.375 12.691C18.375 10.1223 16.3183 8.03987 13.7812 8.03987H4.63959L7.60261 11.0399C8.1408 11.5848 8.1408 12.4683 7.60261 13.0132C7.06442 13.5582 6.19183 13.5582 5.65364 13.0132L0.403643 7.69762C-0.134548 7.15271 -0.134548 6.26922 0.403643 5.7243L5.65364 0.408688C6.19183 -0.136229 7.06442 -0.136229 7.60261 0.408688C8.1408 0.953606 8.1408 1.83709 7.60261 2.38201L4.63959 5.38206Z"})}),(0,BE.jsx)("span",{children:"Geri d\xf6n"})]}),(0,BE.jsxs)("div",{id:"examineBtn",className:"BottomTabButton touchableFeedback "+(f?"examineMode ":""),onClick:function(e){e.target,"undefined"==typeof window.gesturesDisabled&&(window.gesturesDisabled=!1),window.gesturesDisabled=!window.gesturesDisabled,p(window.gesturesDisabled)},children:[(0,BE.jsx)("svg",{viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:(0,BE.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 7C12 9.76142 9.76142 12 7 12C4.23858 12 2 9.76142 2 7C2 4.23858 4.23858 2 7 2C9.76142 2 12 4.23858 12 7ZM11.2625 12.553C10.0821 13.4605 8.60403 14 7 14C3.13401 14 0 10.866 0 7C0 3.13401 3.13401 0 7 0C10.866 0 14 3.13401 14 7C14 8.54059 13.5023 9.96495 12.659 11.1211L17.1349 15.597C17.5254 15.9875 17.5254 16.6207 17.1349 17.0112C16.7444 17.4018 16.1112 17.4018 15.7207 17.0112L11.2625 12.553Z"})}),(0,BE.jsx)("span",{children:"\u0130ncele"})]}),(0,BE.jsxs)("div",{id:"exportBtn",className:"BottomTabButton touchableFeedback",onClick:function(e){!function(){var e=pE.focusedObjectName;if(e){var t=window.rugExporterFlow.fuckr3f.get().scene.getObjectByName(e);K$(t,e)}}(e.target)},children:[(0,BE.jsx)("svg",{viewBox:"0 0 20 22",xmlns:"http://www.w3.org/2000/svg",children:(0,BE.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.1799 2.29248L10.2399 0.902476C10.0899 0.832476 9.91994 0.832476 9.76994 0.902476L6.81994 2.29248C6.39994 2.49248 6.20994 3.00248 6.40994 3.42248C6.54994 3.73248 6.85994 3.91248 7.17994 3.91248C7.29994 3.91248 7.41994 3.88248 7.53994 3.83248L9.14994 3.07248V5.14248C9.14994 5.61248 9.52994 5.99248 9.99994 5.99248C10.4699 5.99248 10.8499 5.61248 10.8499 5.14248V3.07248L12.4599 3.83248C12.8799 4.03248 13.3899 3.85248 13.5899 3.42248C13.7899 2.99248 13.6099 2.49248 13.1799 2.29248ZM12.46 8.02248L9.99995 9.18248L7.53995 8.02248C7.11995 7.82248 6.60995 8.00248 6.40995 8.43248C6.20995 8.85248 6.38995 9.36248 6.81995 9.56248L9.11995 10.6425C9.11995 10.6625 9.11495 10.68 9.10995 10.6975C9.10495 10.715 9.09995 10.7325 9.09995 10.7525V12.8325C9.09995 13.3025 9.47995 13.6825 9.94995 13.6825C10.42 13.6825 10.8 13.3025 10.8 12.8325V10.7525C10.8 10.7425 10.7975 10.7325 10.795 10.7225C10.7925 10.7125 10.79 10.7025 10.79 10.6925L13.19 9.56248C13.61 9.36248 13.8 8.85248 13.6 8.43248C13.39 8.01248 12.88 7.82248 12.46 8.02248ZM16.3499 3.85248L18.9799 5.11248C19.18 5.20248 19.2999 5.40248 19.2999 5.61248V8.64248C19.2999 9.11248 18.92 9.49248 18.45 9.49248C17.9799 9.49248 17.5999 9.11248 17.5999 8.64248V7.52248L16.21 8.17248C16.09 8.22248 15.9699 8.25248 15.8499 8.25248C15.53 8.25248 15.22 8.07248 15.08 7.76248C14.88 7.34248 15.07 6.83248 15.49 6.63248L16.8699 5.98248L15.62 5.38248C15.2 5.18248 15.02 4.67248 15.22 4.25248C15.42 3.83248 15.9299 3.65248 16.3499 3.85248ZM4.50995 6.63247L3.12995 5.98247L4.37995 5.38247C4.79995 5.18247 4.97995 4.67247 4.77995 4.25247C4.57995 3.82247 4.06995 3.64247 3.64995 3.85247L1.01995 5.11247C0.819951 5.20247 0.699951 5.40247 0.699951 5.61247V8.63247C0.699951 9.10247 1.07995 9.48247 1.54995 9.48247C2.01995 9.48247 2.39995 9.11247 2.39995 8.64247V7.51247L3.78995 8.16247C3.90995 8.22247 4.02995 8.25247 4.14995 8.25247C4.46995 8.25247 4.77995 8.07247 4.91995 7.76247C5.11995 7.34247 4.93995 6.83247 4.50995 6.63247ZM17.6 13.5125C17.6 13.0425 17.98 12.6625 18.45 12.6625C18.92 12.6625 19.3 13.0425 19.31 13.5125V16.5325C19.31 16.7525 19.18 16.9525 18.99 17.0425L16.36 18.3025C16.24 18.3525 16.11 18.3825 15.99 18.3825C15.67 18.3825 15.37 18.2025 15.22 17.9025C15.02 17.4825 15.2 16.9725 15.62 16.7725L16.87 16.1725L15.49 15.5225C15.06 15.3225 14.88 14.8225 15.08 14.3925C15.28 13.9625 15.79 13.7825 16.21 13.9825L17.6 14.6325V13.5125ZM4.91995 14.3825C4.71995 13.9625 4.20995 13.7725 3.78995 13.9725L2.39995 14.6325V13.5125C2.39995 13.0425 2.01995 12.6625 1.54995 12.6625C1.07995 12.6625 0.699951 13.0425 0.699951 13.5125V16.5425C0.699951 16.7525 0.819951 16.9525 1.00995 17.0425L3.63995 18.3025C3.75995 18.3625 3.87995 18.3825 4.00995 18.3825C4.32995 18.3825 4.62995 18.2025 4.77995 17.9025C4.97995 17.4825 4.79995 16.9725 4.37995 16.7725L3.12995 16.1725L4.50995 15.5225C4.93995 15.3225 5.11995 14.8125 4.91995 14.3825ZM10.85 18.9425L12.46 18.1825C12.88 17.9825 13.39 18.1625 13.59 18.5925C13.79 19.0125 13.6 19.5225 13.18 19.7225L10.24 21.1025C10.09 21.1725 9.90995 21.1725 9.75995 21.1025L6.81995 19.7225C6.38995 19.5225 6.20995 19.0125 6.40995 18.5925C6.60995 18.1625 7.11995 17.9825 7.53995 18.1825L9.14995 18.9425V16.8725C9.14995 16.4025 9.52995 16.0225 9.99995 16.0225C10.47 16.0225 10.85 16.4025 10.85 16.8725V18.9425Z"})}),(0,BE.jsx)("span",{children:"Odamda G\xf6r"})]})]})]})};function n0(){return n0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n0.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e0||(e0={}));var r0,i0="popstate";function a0(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function o0(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(c1){}}}function s0(e,t){return{usr:e.state,key:e.key,idx:t}}function l0(e,t,n,r){return void 0===n&&(n=null),n0({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?c0(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function u0(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function c0(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function h0(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,s=i.v5Compat,l=void 0!==s&&s,u=o.history,c=e0.Pop,h=null,d=f();function f(){return(u.state||{idx:null}).idx}function p(){c=e0.Pop;var e=f(),t=null==e?null:e-d;d=e,h&&h({action:c,location:m.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:u0(e);return a0(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,u.replaceState(n0({},u.state,{idx:d}),""));var m={get action(){return c},get location(){return e(o,u)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(i0,p),h=e,function(){o.removeEventListener(i0,p),h=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=e0.Push;var r=l0(m.location,e,t);n&&n(r,e);var i=s0(r,d=f()+1),a=m.createHref(r);try{u.pushState(i,"",a)}catch(s){if(s instanceof DOMException&&"DataCloneError"===s.name)throw s;o.location.assign(a)}l&&h&&h({action:c,location:m.location,delta:1})},replace:function(e,t){c=e0.Replace;var r=l0(m.location,e,t);n&&n(r,e);var i=s0(r,d=f()),a=m.createHref(r);u.replaceState(i,"",a),l&&h&&h({action:c,location:m.location,delta:0})},go:function(e){return u.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(r0||(r0={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function d0(e,t,n){void 0===n&&(n="/");var r=M0(("string"===typeof t?c0(t):t).pathname||"/",n);if(null==r)return null;var i=f0(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=w0(i[o],S0(r));return a}function f0(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(a0(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=C0([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(a0(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),f0(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:_0(s,e.index),routesMeta:l})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=(0,Ms.Z)(p0(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function p0(e){var t=e.split("/");if(0===t.length)return[];var n=FE(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var s=p0(i.join("/")),l=[];return l.push.apply(l,(0,O.Z)(s.map((function(e){return""===e?o:[o,e].join("/")})))),a&&l.push.apply(l,(0,O.Z)(s)),l.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var v0=/^:\w+$/,m0=3,g0=2,y0=1,A0=10,x0=-2,b0=function(e){return"*"===e};function _0(e,t){var n=e.split("/"),r=n.length;return n.some(b0)&&(r+=x0),t&&(r+=g0),n.filter((function(e){return!b0(e)})).reduce((function(e,t){return e+(v0.test(t)?m0:""===t?y0:A0)}),r)}function w0(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],l=o===n.length-1,u="/"===i?t:t.slice(i.length)||"/",c=E0({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);var h=s.route;a.push({params:r,pathname:C0([i,c.pathname]),pathnameBase:k0(C0([i,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(i=C0([i,c.pathnameBase]))}return a}function E0(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);o0("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=(0,s.Z)(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var l=o[0],u=l.replace(/(.)\/+$/,"$1"),c=o.slice(1),h=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=l.slice(0,l.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return o0(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{});return{params:h,pathname:l,pathnameBase:u,pattern:e}}function S0(e){try{return decodeURI(e)}catch(t){return o0(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function M0(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var C0=function(e){return e.join("/").replace(/\/\/+/g,"/")},k0=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},T0=function(e){(0,Hn.Z)(n,e);var t=(0,Gn.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n)}((0,Tl.Z)(Error));function I0(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var B0=["post","put","patch","delete"],R0=(new Set(B0),["get"].concat(B0));new Set(R0),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function L0(){return L0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L0.apply(this,arguments)}var P0=t.createContext(null);var D0=t.createContext(null);var O0=t.createContext(null);var F0=t.createContext(null);var N0=t.createContext(null);var U0=t.createContext({outlet:null,matches:[],isDataRoute:!1});var Z0=t.createContext(null);function z0(){return null!=t.useContext(N0)}function H0(){return z0()||a0(!1),t.useContext(N0).location}function G0(e,n,r){z0()||a0(!1);var i,a=t.useContext(F0).navigator,o=t.useContext(U0).matches,s=o[o.length-1],l=s?s.params:{},u=(s&&s.pathname,s?s.pathnameBase:"/"),c=(s&&s.route,H0());if(n){var h,d="string"===typeof n?c0(n):n;"/"===u||(null==(h=d.pathname)?void 0:h.startsWith(u))||a0(!1),i=d}else i=c;var f=i.pathname||"/",p=d0(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});var v=q0(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},l,e.params),pathname:C0([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:C0([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,r);return n&&v?t.createElement(N0.Provider,{value:{location:L0({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:e0.Pop}},v):v}function Q0(){var e=function(){var e,n=t.useContext(Z0),r=X0(J0.UseRouteError),i=Y0(J0.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=I0(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var V0=t.createElement(Q0,null),j0=function(e){(0,Hn.Z)(r,e);var n=(0,Gn.Z)(r);function r(e){var t;return(0,u.Z)(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return(0,c.Z)(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(U0.Provider,{value:this.props.routeContext},t.createElement(Z0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(t.Component);function W0(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(P0);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(U0.Provider,{value:n},i)}function q0(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var a;if(null==(a=r)||!a.errors)return null;e=r.matches}var o=e,s=null==(i=r)?void 0:i.errors;if(null!=s){var l=o.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));l>=0||a0(!1),o=o.slice(0,Math.min(o.length,l+1))}return o.reduceRight((function(e,i,a){var l=i.route.id?null==s?void 0:s[i.route.id]:null,u=null;r&&(u=i.route.errorElement||V0);var c=n.concat(o.slice(0,a+1)),h=function(){var n;return n=l?u:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(W0,{match:i,routeContext:{outlet:e,matches:c,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?t.createElement(j0,{location:r.location,revalidation:r.revalidation,component:u,error:l,children:h(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):h()}),null)}var J0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(J0||{});function X0(e){var n=t.useContext(D0);return n||a0(!1),n}function Y0(e){var n=function(e){var n=t.useContext(U0);return n||a0(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||a0(!1),r.route.id}r.startTransition;function K0(e){a0(!1)}function $0(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,s=e.navigationType,l=void 0===s?e0.Pop:s,u=e.navigator,c=e.static,h=void 0!==c&&c;z0()&&a0(!1);var d=r.replace(/^\/*/,"/"),f=t.useMemo((function(){return{basename:d,navigator:u,static:h}}),[d,u,h]);"string"===typeof o&&(o=c0(o));var p=o,v=p.pathname,m=void 0===v?"/":v,g=p.search,y=void 0===g?"":g,A=p.hash,x=void 0===A?"":A,b=p.state,_=void 0===b?null:b,w=p.key,E=void 0===w?"default":w,S=t.useMemo((function(){var e=M0(m,d);return null==e?null:{location:{pathname:e,search:y,hash:x,state:_,key:E},navigationType:l}}),[d,m,y,x,_,E,l]);return null==S?null:t.createElement(F0.Provider,{value:f},t.createElement(N0.Provider,{children:a,value:S}))}function e1(e){var t=e.children,n=e.location;return G0(r1(t),n)}var t1=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(t1||{}),n1=new Promise((function(){}));t.Component;function r1(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var a=[].concat((0,O.Z)(n),[i]);if(e.type!==t.Fragment){e.type!==K0&&a0(!1),e.props.index&&e.props.children&&a0(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=r1(e.props.children,a)),r.push(o)}else r.push.apply(r,r1(e.props.children,a))}})),r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var i1=r.startTransition;function a1(e){var n,r=e.basename,i=e.children,a=e.future,o=e.window,l=t.useRef();null==l.current&&(l.current=(void 0===(n={window:o,v5Compat:!0})&&(n={}),h0((function(e,t){var n=c0(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,s=n.hash,l=void 0===s?"":s;return i.startsWith("/")||i.startsWith(".")||(i="/"+i),l0("",{pathname:i,search:o,hash:l},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:u0(t))}),(function(e,t){o0("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),n)));var u=l.current,c=t.useState({action:u.action,location:u.location}),h=(0,s.Z)(c,2),d=h[0],f=h[1],p=(a||{}).v7_startTransition,v=t.useCallback((function(e){p&&i1?i1((function(){return f(e)})):f(e)}),[f,p]);return t.useLayoutEffect((function(){return u.listen(v)}),[u,v]),t.createElement($0,{basename:r,children:i,location:d.location,navigationType:d.action,navigator:u})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var o1,s1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(o1||(o1={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(s1||(s1={}));var l1=function(){return(0,BE.jsx)(a1,{children:(0,BE.jsx)("main",{children:(0,BE.jsxs)(e1,{children:[(0,BE.jsx)(K0,{path:"/",element:(0,BE.jsx)(RE,{})}),(0,BE.jsx)(K0,{path:"/showroom/:koleksiyonAd",element:(0,BE.jsxs)(BE.Fragment,{children:[(0,BE.jsx)(t0,{}),(0,BE.jsx)(dH,{})]})})]})})})},u1=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};window.ahmetBuffer={gltf:[]},window.domLayer={isFocused:!0,selectedIndex:0,inheritedFunction:function(){}},window.rugExporterFlow={resourceMap:{},orders:[],rendered:[],textures:{rug:{},overClock:{}},fuckr3f:"",ready:!1,onDataReady:function(){}},i.createRoot(document.getElementById("root")).render((0,BE.jsx)(t.StrictMode,{children:(0,BE.jsx)(l1,{})})),u1()}()}();
//# sourceMappingURL=main.15bb3fee.js.map